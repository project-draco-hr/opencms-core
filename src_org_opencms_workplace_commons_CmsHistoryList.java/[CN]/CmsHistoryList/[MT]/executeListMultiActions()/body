{
  if (getParamListAction().equals(LIST_MACTION_COMPARE)) {
    CmsListItem item1=(CmsListItem)getSelectedItems().get(0);
    CmsListItem item2=(CmsListItem)getSelectedItems().get(1);
    Map params=new HashMap();
    if (((Comparable)item2.get(LIST_COLUMN_VERSION)).compareTo(item1.get(LIST_COLUMN_VERSION)) > 0) {
      params.put(PARAM_TAGID_1,item1.getId());
      params.put(PARAM_TAGID_2,item2.getId());
      params.put(PARAM_VERSION_1,item1.get(LIST_COLUMN_VERSION));
      params.put(PARAM_VERSION_2,item2.get(LIST_COLUMN_VERSION));
      params.put(PARAM_PATH_1,item1.get(LIST_COLUMN_RESOURCE_PATH));
      params.put(PARAM_PATH_2,item2.get(LIST_COLUMN_RESOURCE_PATH));
    }
 else {
      params.put(PARAM_TAGID_1,item2.getId());
      params.put(PARAM_TAGID_2,item1.getId());
      params.put(PARAM_VERSION_1,item2.get(LIST_COLUMN_VERSION));
      params.put(PARAM_VERSION_2,item1.get(LIST_COLUMN_VERSION));
      params.put(PARAM_PATH_1,item2.get(LIST_COLUMN_RESOURCE_PATH));
      params.put(PARAM_PATH_2,item1.get(LIST_COLUMN_RESOURCE_PATH));
    }
    params.put(PARAM_ACTION,DIALOG_INITIAL);
    params.put(PARAM_STYLE,CmsToolDialog.STYLE_NEW);
    params.put(PARAM_RESOURCE,getParamResource());
    getToolManager().jspForwardTool(this,"/history/comparison",params);
  }
  refreshList();
}
