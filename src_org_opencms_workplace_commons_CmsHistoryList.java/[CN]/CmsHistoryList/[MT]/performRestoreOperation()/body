{
  CmsUUID structureId=new CmsUUID((String)getSelectedItem().get(LIST_COLUMN_STRUCTURE_ID));
  int version=Integer.parseInt(((CmsListItem)getSelectedItems().get(0)).getId());
  if (version == CmsHistoryResourceHandler.PROJECT_OFFLINE_VERSION) {
    return;
  }
  CmsResource res=getCms().readResource(structureId,CmsResourceFilter.IGNORE_EXPIRATION);
  checkLock(getCms().getSitePath(res));
  getCms().restoreResourceVersion(res.getStructureId(),version);
}
