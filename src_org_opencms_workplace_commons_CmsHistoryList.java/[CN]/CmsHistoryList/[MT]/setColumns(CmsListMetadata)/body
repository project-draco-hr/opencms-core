{
  CmsListColumnDefinition previewCol=new CmsListColumnDefinition(LIST_COLUMN_VIEW);
  previewCol.setName(Messages.get().container(Messages.GUI_HISTORY_COLS_VIEW_0));
  previewCol.setWidth("20");
  previewCol.setVisible(false);
  previewCol.setAlign(CmsListColumnAlignEnum.ALIGN_CENTER);
  previewCol.setSorteable(false);
  CmsListColumnDefinition restoreCol=new CmsListColumnDefinition(LIST_COLUMN_RESTORE);
  restoreCol.setName(Messages.get().container(Messages.GUI_HISTORY_COLS_RESTORE_0));
  restoreCol.setWidth("20");
  restoreCol.setAlign(CmsListColumnAlignEnum.ALIGN_CENTER);
  restoreCol.setListItemComparator(new CmsListItemActionIconComparator());
  restoreCol.setSorteable(false);
  CmsListDirectAction restoreAction=new CmsListDirectAction(LIST_ACTION_RESTORE){
    public boolean isVisible(){
      return !"-1".equals(getItem().getId().toString());
    }
  }
;
  restoreAction.setName(Messages.get().container(Messages.GUI_HISTORY_RESTORE_VERSION_0));
  restoreAction.setIconPath("tools/ex_history/buttons/restore.png");
  restoreAction.setConfirmationMessage(Messages.get().container(Messages.GUI_HISTORY_CONFIRMATION_0));
  restoreAction.setEnabled(true);
  restoreCol.addDirectAction(restoreAction);
  metadata.addColumn(restoreCol);
  CmsListColumnDefinition iconCol=new CmsListColumnDefinition(LIST_COLUMN_ICON);
  iconCol.setName(Messages.get().container(Messages.GUI_HISTORY_COLS_VIEW_0));
  iconCol.setWidth("20");
  iconCol.setAlign(CmsListColumnAlignEnum.ALIGN_CENTER);
  iconCol.setListItemComparator(new CmsListItemActionIconComparator());
  CmsListDirectAction fileAction=new CmsListResourceIconAction(LIST_ACTION_VIEW,LIST_COLUMN_FILE_TYPE,getCms()){
    public String defButtonHtml(    CmsJspActionElement jsp,    String id,    String helpId,    String name,    String helpText,    boolean enabled,    String iconPath,    String confirmationMessage,    String onClick,    boolean singleHelp){
      StringBuffer jsCode=new StringBuffer(512);
      jsCode.append("window.open('");
      String versionId=getItem().getId().toString();
      if ("-1".equals(versionId)) {
        jsCode.append(jsp.link(jsp.getRequestContext().removeSiteRoot(getItem().get(LIST_COLUMN_RESOURCE_PATH).toString())));
      }
 else {
        jsCode.append(jsp.link(getBackupLink(getItem().get(LIST_COLUMN_RESOURCE_PATH).toString(),versionId)));
      }
      jsCode.append("','version','scrollbars=yes, resizable=yes, width=800, height=600')");
      return super.defButtonHtml(jsp,id,helpId,name,helpText,enabled,iconPath,confirmationMessage,jsCode.toString(),singleHelp);
    }
  }
;
  fileAction.setName(Messages.get().container(Messages.GUI_HISTORY_PREVIEW_0));
  fileAction.setEnabled(true);
  iconCol.addDirectAction(fileAction);
  metadata.addColumn(iconCol);
  iconCol.setPrintable(false);
  CmsListColumnDefinition versionCol=new CmsListColumnDefinition(LIST_COLUMN_VERSION);
  versionCol.setName(Messages.get().container(Messages.GUI_HISTORY_COLS_VERSION_0));
  versionCol.setWidth("5%");
  versionCol.setAlign(CmsListColumnAlignEnum.ALIGN_CENTER);
  metadata.addColumn(versionCol);
  CmsListColumnDefinition groupCol=new CmsListColumnDefinition(LIST_COLUMN_FILE_TYPE);
  groupCol.setVisible(false);
  metadata.addColumn(groupCol);
  CmsListColumnDefinition pathCol=new CmsListColumnDefinition(LIST_COLUMN_RESOURCE_PATH);
  pathCol.setName(Messages.get().container(Messages.GUI_HISTORY_COLS_RESOURCE_PATH_0));
  pathCol.setAlign(CmsListColumnAlignEnum.ALIGN_LEFT);
  pathCol.setWidth("20%");
  metadata.addColumn(pathCol);
  CmsListColumnDefinition datePublishedCol=new CmsListColumnDefinition(LIST_COLUMN_DATE_PUBLISHED);
  datePublishedCol.setName(Messages.get().container(Messages.GUI_HISTORY_COLS_DATE_PUBLISHED_0));
  datePublishedCol.setWidth("20%");
  datePublishedCol.setAlign(CmsListColumnAlignEnum.ALIGN_LEFT);
  metadata.addColumn(datePublishedCol);
  CmsListColumnDefinition nicenameCol=new CmsListColumnDefinition(LIST_COLUMN_DATE_LAST_MODIFIED);
  nicenameCol.setName(Messages.get().container(Messages.GUI_HISTORY_COLS_DATE_LAST_MODIFIED_0));
  nicenameCol.setWidth("20%");
  nicenameCol.setAlign(CmsListColumnAlignEnum.ALIGN_LEFT);
  metadata.addColumn(nicenameCol);
  CmsListColumnDefinition userCol=new CmsListColumnDefinition(LIST_COLUMN_USER);
  userCol.setName(Messages.get().container(Messages.GUI_HISTORY_COLS_USER_0));
  userCol.setWidth("12%");
  userCol.setAlign(CmsListColumnAlignEnum.ALIGN_LEFT);
  metadata.addColumn(userCol);
  CmsListColumnDefinition sizeCol=new CmsListColumnDefinition(LIST_COLUMN_SIZE);
  sizeCol.setName(Messages.get().container(Messages.GUI_HISTORY_COLS_SIZE_0));
  sizeCol.setWidth("13%");
  sizeCol.setAlign(CmsListColumnAlignEnum.ALIGN_LEFT);
  metadata.addColumn(sizeCol);
  CmsListColumnDefinition radioSel1Col=new CmsListColumnDefinition(LIST_COLUMN_SEL1);
  radioSel1Col.setName(Messages.get().container(Messages.GUI_HISTORY_COLS_VERSION1_0));
  radioSel1Col.setWidth("20");
  radioSel1Col.setAlign(CmsListColumnAlignEnum.ALIGN_CENTER);
  radioSel1Col.setSorteable(false);
  CmsListItemSelectionAction sel1Action=new CmsListItemSelectionAction(LIST_RACTION_SEL1,LIST_MACTION_COMPARE);
  sel1Action.setName(Messages.get().container(Messages.GUI_HISTORY_FIRST_VERSION_0));
  sel1Action.setEnabled(true);
  radioSel1Col.addDirectAction(sel1Action);
  metadata.addColumn(radioSel1Col);
  CmsListColumnDefinition radioSel2Col=new CmsListColumnDefinition(LIST_COLUMN_SEL2);
  radioSel2Col.setName(Messages.get().container(Messages.GUI_HISTORY_COLS_VERSION2_0));
  radioSel2Col.setWidth("20");
  radioSel2Col.setAlign(CmsListColumnAlignEnum.ALIGN_CENTER);
  radioSel2Col.setSorteable(false);
  CmsListItemSelectionAction sel2Action=new CmsListItemSelectionAction(LIST_RACTION_SEL2,LIST_MACTION_COMPARE);
  sel2Action.setName(Messages.get().container(Messages.GUI_HISTORY_SECOND_VERSION_0));
  sel2Action.setEnabled(true);
  radioSel2Col.addDirectAction(sel2Action);
  metadata.addColumn(radioSel2Col);
  CmsListColumnDefinition backupTagCol=new CmsListColumnDefinition(LIST_COLUMN_BACKUP_TAG);
  backupTagCol.setSorteable(false);
  backupTagCol.setVisible(false);
  metadata.addColumn(backupTagCol);
}
