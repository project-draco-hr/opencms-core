{
  JSONObject result=new JSONObject();
  result.put(JsonSiteEntry.NAME.getName(),entry.getName());
  result.put(JsonSiteEntry.TITLE.getName(),entry.getTitle());
  result.put(JsonSiteEntry.ID.getName(),entry.getResourceId().toString());
  JSONObject props=new JSONObject();
  for (  Map.Entry<String,String> prop : entry.getProperties().entrySet()) {
    props.put(prop.getKey(),prop.getValue());
  }
  result.put(JsonSiteEntry.PROPERTIES.getName(),props);
  try {
    result.put(JsonSiteEntry.CONTENT.getName(),getEntryContent(entry));
  }
 catch (  CmsVfsResourceNotFoundException e) {
    LOG.debug(e.getLocalizedMessage(),e);
    return null;
  }
catch (  CmsPermissionViolationException e) {
    LOG.debug(e.getLocalizedMessage(),e);
    return null;
  }
catch (  Exception e) {
    LOG.error(e.getLocalizedMessage(),e);
    result.put(JsonSiteEntry.CONTENT.getName(),e.getLocalizedMessage());
  }
  JSONArray subentries=new JSONArray();
  for (  CmsSiteEntryBean subentry : entry.getSubEntries()) {
    JSONObject jsonSubEntry=jsonifyEntry(subentry);
    if (jsonSubEntry != null) {
      subentries.put(jsonSubEntry);
    }
  }
  result.put(JsonSiteEntry.SUBENTRIES.getName(),subentries);
  return result;
}
