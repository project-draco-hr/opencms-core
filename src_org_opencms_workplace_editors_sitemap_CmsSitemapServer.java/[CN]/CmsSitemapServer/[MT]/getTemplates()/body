{
  JSONObject result=new JSONObject();
  CmsObject cms=getCmsObject();
  List<CmsResource> templates=cms.readResources("/",CmsResourceFilter.ONLY_VISIBLE_NO_DELETED.addRequireType(CmsResourceTypeJsp.getContainerPageTemplateTypeId()),true);
  templates.addAll(cms.readResources("/system/",CmsResourceFilter.ONLY_VISIBLE_NO_DELETED.addRequireType(CmsResourceTypeJsp.getContainerPageTemplateTypeId()),true));
  Iterator<CmsResource> templateIt=templates.iterator();
  while (templateIt.hasNext()) {
    CmsResource template=templateIt.next();
    CmsProperty titleProp=cms.readPropertyObject(template,CmsPropertyDefinition.PROPERTY_TITLE,false);
    CmsProperty descProp=cms.readPropertyObject(template,CmsPropertyDefinition.PROPERTY_DESCRIPTION,false);
    CmsProperty imageProp=cms.readPropertyObject(template,TEMPLATE_IMAGE_PROPERTY,false);
    JSONObject jTemp=new JSONObject();
    jTemp.put(JsonTemplate.sitepath.name(),cms.getSitePath(template));
    jTemp.put(JsonTemplate.title.name(),titleProp.getValue());
    jTemp.put(JsonTemplate.description.name(),descProp.getValue());
    jTemp.put(JsonTemplate.imagepath.name(),imageProp.getValue());
    result.put(cms.getSitePath(template),jTemp);
  }
  return result;
}
