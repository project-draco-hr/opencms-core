{
  JSONObject result=new JSONObject();
  CmsObject cms=getCmsObject();
  List<CmsResource> templates=cms.readResources("/",CmsResourceFilter.ONLY_VISIBLE_NO_DELETED.addRequireType(CmsResourceTypeJsp.getContainerPageTemplateTypeId()),true);
  if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(cms.getRequestContext().getSiteRoot())) {
    templates.addAll(cms.readResources(CmsWorkplace.VFS_PATH_SYSTEM,CmsResourceFilter.ONLY_VISIBLE_NO_DELETED.addRequireType(CmsResourceTypeJsp.getContainerPageTemplateTypeId()),true));
  }
  Iterator<CmsResource> templateIt=templates.iterator();
  while (templateIt.hasNext()) {
    CmsResource template=templateIt.next();
    JSONObject jTemp=CmsSitemapServer.getTemplateJson(cms,template);
    result.put(cms.getSitePath(template),jTemp);
  }
  return result;
}
