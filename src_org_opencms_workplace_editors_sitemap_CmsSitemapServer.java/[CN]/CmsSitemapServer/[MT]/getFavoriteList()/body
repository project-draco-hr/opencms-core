{
  CmsObject cms=getCmsObject();
  CmsUser user=cms.getRequestContext().currentUser();
  Object obj=user.getAdditionalInfo(ADDINFO_SITEMAP_FAVORITE_LIST);
  JSONArray jsonFavList=new JSONArray();
  if (obj instanceof String) {
    try {
      jsonFavList=new JSONArray((String)obj);
    }
 catch (    Throwable e) {
      if (!LOG.isDebugEnabled()) {
        LOG.warn(e.getLocalizedMessage());
      }
      LOG.debug(e.getLocalizedMessage(),e);
    }
  }
 else {
    try {
      saveFavoriteList(cms,jsonFavList);
    }
 catch (    CmsException e) {
      LOG.error(e.getLocalizedMessage(),e);
    }
  }
  return addContents(jsonFavList);
}
