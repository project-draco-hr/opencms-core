{
  CmsObject cms=getCmsObject();
  cms.lockResourceTemporary(uri);
  CmsFile sitemapFile=cms.readFile(uri);
  CmsXmlSitemap xmlSitemap=CmsXmlSitemapFactory.unmarshal(cms,sitemapFile);
  Locale locale=cms.getRequestContext().getLocale();
  if (xmlSitemap.hasLocale(locale)) {
    xmlSitemap.removeLocale(locale);
  }
  xmlSitemap.addLocale(cms,locale);
  Map<String,CmsXmlContentProperty> propertiesConf=OpenCms.getADEManager().getElementPropertyConfiguration(cms,sitemapFile);
  int entryCount=0;
  List<CmsSiteEntryBean> entries=jsonToEntryList(sitemap.getJSONArray(JsonResponse.SITEMAP.getName()));
  for (  CmsSiteEntryBean entry : entries) {
    saveEntry(cms,locale,null,xmlSitemap,entry,entryCount,propertiesConf);
    entryCount++;
  }
  sitemapFile.setContents(xmlSitemap.marshal());
  cms.writeFile(sitemapFile);
}
