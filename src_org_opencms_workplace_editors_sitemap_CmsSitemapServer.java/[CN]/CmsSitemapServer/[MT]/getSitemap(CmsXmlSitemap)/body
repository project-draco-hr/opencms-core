{
  CmsObject cms=getCmsObject();
  CmsSitemapBean sitemap=xmlSitemap.getSitemap(cms,cms.getRequestContext().getLocale());
  JSONObject result=new JSONObject();
  Map<String,CmsXmlContentProperty> propertiesConf=getPropertyConfig(xmlSitemap.getFile());
  JSONArray siteEntries=new JSONArray();
  for (  CmsSitemapEntry entry : sitemap.getSiteEntries()) {
    JSONObject siteEntry=jsonifyEntry(entry,propertiesConf);
    if (siteEntry != null) {
      siteEntries.put(siteEntry);
    }
  }
  result.put(JsonResponse.sitemap.name(),siteEntries);
  CmsXmlSitemap superSitemap=OpenCms.getSitemapManager().getParentSitemap(cms,xmlSitemap);
  String superSitemapPath=superSitemap == null ? "" : cms.getSitePath(superSitemap.getFile());
  result.put(JsonResponse.superSitemap.name(),superSitemapPath);
  result.put(JsonResponse.referencePath.name(),cms.getRequestContext().removeSiteRoot(sitemap.getEntryPoint()));
  result.put(JsonResponse.properties.name(),CmsXmlContentPropertyHelper.getPropertyInfoJSON(cms,xmlSitemap.getFile()));
  return result;
}
