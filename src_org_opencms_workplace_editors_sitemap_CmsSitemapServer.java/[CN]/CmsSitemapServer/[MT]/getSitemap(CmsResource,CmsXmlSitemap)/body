{
  CmsObject cms=getCmsObject();
  CmsSitemapBean sitemap=xmlSitemap.getSitemap(cms,cms.getRequestContext().getLocale());
  JSONObject result=new JSONObject();
  JSONArray siteEntries=new JSONArray();
  for (  CmsSiteEntryBean entry : sitemap.getSiteEntries()) {
    JSONObject siteEntry=jsonifyEntry(entry);
    if (siteEntry != null) {
      siteEntries.put(siteEntry);
    }
  }
  result.put(JsonResponse.SITEMAP.getName(),siteEntries);
  boolean topLevel=true;
  JSONArray superSitemapsJSON=new JSONArray();
  CmsRelationFilter filter=CmsRelationFilter.SOURCES.filterType(CmsRelationType.XML_STRONG);
  for (  CmsRelation relation : cms.getRelationsForResource(resource,filter)) {
    CmsResource source=relation.getSource(cms,CmsResourceFilter.ALL);
    if (CmsResourceTypeXmlSitemap.isSitemap(source)) {
      topLevel=false;
      superSitemapsJSON.put(cms.getSitePath(source));
    }
  }
  result.put(JsonResponse.SUB_SITEMAP.getName(),!topLevel);
  result.put(JsonResponse.SUPER_SITEMAPS.getName(),superSitemapsJSON);
  result.put(JsonResponse.PROPERTIES.getName(),getPropertyInfo(resource));
  return result;
}
