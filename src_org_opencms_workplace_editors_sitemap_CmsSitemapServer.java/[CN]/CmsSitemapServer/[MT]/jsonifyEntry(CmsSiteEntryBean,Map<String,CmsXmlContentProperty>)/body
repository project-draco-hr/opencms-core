{
  JSONObject result=new JSONObject();
  result.put(JsonSiteEntry.ID.getName(),entry.getId().toString());
  result.put(JsonSiteEntry.NAME.getName(),entry.getName());
  result.put(JsonSiteEntry.TITLE.getName(),entry.getTitle());
  result.put(JsonSiteEntry.LINK_ID.getName(),entry.getResourceId().toString());
  CmsObject cms=getCmsObject();
  JSONObject props=new JSONObject();
  for (  Map.Entry<String,String> prop : entry.getProperties().entrySet()) {
    String key=prop.getKey();
    CmsXmlContentProperty currentPropertyConf=propertyConf.get(key);
    String propType=CmsXmlContentProperty.PropType.string.name();
    if (currentPropertyConf != null) {
      propType=currentPropertyConf.getPropertyType();
    }
 else     if (key.equals(CmsSitemapManager.PROPERTY_SITEMAP)) {
      propType=CmsXmlContentProperty.PropType.vfslist.name();
    }
    props.put(key,CmsXmlContentProperty.getPropValuePaths(cms,propType,prop.getValue()));
  }
  result.put(JsonSiteEntry.PROPERTIES.getName(),props);
  try {
    result.put(JsonSiteEntry.CONTENT.getName(),getEntryContent(entry));
  }
 catch (  CmsVfsResourceNotFoundException e) {
    LOG.debug(e.getLocalizedMessage(),e);
    return null;
  }
catch (  CmsPermissionViolationException e) {
    LOG.debug(e.getLocalizedMessage(),e);
    return null;
  }
catch (  Exception e) {
    LOG.error(e.getLocalizedMessage(),e);
    result.put(JsonSiteEntry.CONTENT.getName(),e.getLocalizedMessage());
  }
  JSONArray subentries=new JSONArray();
  for (  CmsSiteEntryBean subentry : entry.getSubEntries()) {
    JSONObject jsonSubEntry=jsonifyEntry(subentry,propertyConf);
    if (jsonSubEntry != null) {
      subentries.put(jsonSubEntry);
    }
  }
  result.put(JsonSiteEntry.SUBENTRIES.getName(),subentries);
  return result;
}
