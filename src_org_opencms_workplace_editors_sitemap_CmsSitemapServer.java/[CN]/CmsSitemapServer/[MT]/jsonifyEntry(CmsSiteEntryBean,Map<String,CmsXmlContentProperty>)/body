{
  JSONObject result=new JSONObject();
  result.put(JsonSiteEntry.ID.getName(),entry.getId().toString());
  result.put(JsonSiteEntry.NAME.getName(),entry.getName());
  result.put(JsonSiteEntry.TITLE.getName(),entry.getTitle());
  result.put(JsonSiteEntry.LINK_ID.getName(),entry.getResourceId().toString());
  JSONObject props=new JSONObject();
  for (  Map.Entry<String,String> prop : entry.getProperties().entrySet()) {
    CmsXmlContentProperty currentPropertyConf=propertyConf.get(prop.getKey());
    if (currentPropertyConf == null) {
      if (prop.getKey().equals(CmsSitemapManager.PROPERTY_SITEMAP)) {
        props.put(prop.getKey(),CmsXmlContentProperty.convertIdsToPaths(getCmsObject(),prop.getValue(),CmsXmlSitemap.IDS_SEPARATOR,CmsXmlSitemap.IDS_SEPARATOR));
      }
 else {
        props.put(prop.getKey(),prop.getValue());
      }
      continue;
    }
    String propType=currentPropertyConf.getPropertyType();
    if (propType.equals(CmsXmlContentProperty.T_VFSLIST)) {
      CmsObject cms=getCmsObject();
      props.put(prop.getKey(),CmsXmlContentProperty.convertIdsToPaths(cms,prop.getValue(),CmsXmlSitemap.IDS_SEPARATOR,CmsXmlSitemap.IDS_SEPARATOR));
    }
 else {
      props.put(prop.getKey(),prop.getValue());
    }
  }
  result.put(JsonSiteEntry.PROPERTIES.getName(),props);
  try {
    result.put(JsonSiteEntry.CONTENT.getName(),getEntryContent(entry));
  }
 catch (  CmsVfsResourceNotFoundException e) {
    LOG.debug(e.getLocalizedMessage(),e);
    return null;
  }
catch (  CmsPermissionViolationException e) {
    LOG.debug(e.getLocalizedMessage(),e);
    return null;
  }
catch (  Exception e) {
    LOG.error(e.getLocalizedMessage(),e);
    result.put(JsonSiteEntry.CONTENT.getName(),e.getLocalizedMessage());
  }
  JSONArray subentries=new JSONArray();
  for (  CmsSiteEntryBean subentry : entry.getSubEntries()) {
    JSONObject jsonSubEntry=jsonifyEntry(subentry,propertyConf);
    if (jsonSubEntry != null) {
      subentries.put(jsonSubEntry);
    }
  }
  result.put(JsonSiteEntry.SUBENTRIES.getName(),subentries);
  return result;
}
