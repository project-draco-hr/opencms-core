{
  CmsObject cms=getCmsObject();
  CmsXmlSitemap xmlSitemap=CmsXmlSitemapFactory.unmarshal(cms,cms.readFile(sitemapRes),getRequest());
  List<CmsSitemapEntry> sitemapEntries=jsonToEntryList(sitemap.getJSONArray(JsonResponse.sitemap.name()),getPropertyConfig(sitemapRes),true);
  String entryPoint=xmlSitemap.getSitemap(cms,cms.getRequestContext().getLocale()).getEntryPoint();
  entryPoint=cms.getRequestContext().removeSiteRoot(entryPoint);
  CmsSitemapEntry entryPointEntry=OpenCms.getSitemapManager().getEntryForUri(cms,entryPoint);
  if (entryPointEntry.isSitemap()) {
    sitemapEntries=sitemapEntries.get(0).getSubEntries();
  }
  xmlSitemap.save(cms,sitemapEntries);
}
