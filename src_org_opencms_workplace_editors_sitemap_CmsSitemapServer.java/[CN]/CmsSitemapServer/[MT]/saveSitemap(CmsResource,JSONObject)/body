{
  CmsObject cms=getCmsObject();
  CmsXmlSitemap xmlSitemap=CmsXmlSitemapFactory.unmarshal(cms,cms.readFile(sitemapRes),getRequest());
  List<CmsSitemapEntry> sitemapEntries=jsonToEntryList(sitemap.getJSONArray(JsonResponse.sitemap.name()),getPropertyConfig(sitemapRes),true);
  String entryPoint=sitemap.getString(JsonResponse.referencePath.name());
  CmsSitemapEntry entryPointEntry=OpenCms.getSitemapManager().getEntryForUri(cms,entryPoint);
  if (entryPointEntry.isSitemap() && !cms.existsResource(entryPoint)) {
    sitemapEntries=sitemapEntries.get(0).getSubEntries();
  }
  xmlSitemap.save(cms,entryPoint,sitemapEntries);
}
