{
  super(context,req,res);
  m_sessionCache=(CmsSitemapSessionCache)req.getSession().getAttribute(CmsSitemapSessionCache.SESSION_ATTR_SITEMAP_CACHE);
  if (m_sessionCache == null) {
    m_sessionCache=new CmsSitemapSessionCache(getCmsObject());
    req.getSession().setAttribute(CmsSitemapSessionCache.SESSION_ATTR_SITEMAP_CACHE,m_sessionCache);
  }
  if (m_formatters == null) {
    m_formatters=new HashMap<Integer,CmsResource>();
    try {
      m_formatters.put(KEY_DEFAULT_FORMATTER,getCmsObject().readResource(PATH_DEFAULT_FORMATTER));
    }
 catch (    CmsException e) {
      LOG.error(e.getLocalizedMessage(),e);
    }
  }
}
