{
  CmsGalleryDialog galleryDialog=new CmsGalleryDialog(new I_CmsGalleryHandler(){
    public boolean filterDnd(    CmsResultItemBean resultBean){
      if (resultDndFilter != null) {
        return resultDndFilter.apply(resultBean);
      }
 else {
        return true;
      }
    }
    public I_CmsAutoHider getAutoHideParent(){
      return autoHideParent;
    }
    public CmsDNDHandler getDndHandler(){
      return dndHandler;
    }
    public void processResultItem(    CmsResultListItem item){
      if (item.getResult().isCopyModel()) {
        item.getListItemWidget().setBackground(Background.YELLOW);
      }
    }
  }
);
  new CmsGalleryController(new CmsGalleryControllerHandler(galleryDialog));
  return galleryDialog;
}
