{
  long keySize=0;
  for (Iterator i=map.values().iterator(); i.hasNext(); ) {
    Object obj=i.next();
    if (obj instanceof Map && depth < C_MAX_DEPTH) {
      keySize+=getKeySize((Map)obj,depth + 1);
      continue;
    }
  }
  for (Iterator i=map.keySet().iterator(); i.hasNext(); ) {
    Object obj=i.next();
    if (obj instanceof String) {
      String s=(String)obj;
      keySize+=(s.length() * 2);
    }
  }
  return keySize;
}
