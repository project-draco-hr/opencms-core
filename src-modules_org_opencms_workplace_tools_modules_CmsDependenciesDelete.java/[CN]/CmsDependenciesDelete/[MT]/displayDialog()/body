{
  Map objects=(Map)getSettings().getListObject();
  if (objects != null) {
    objects.remove(CmsModulesList.class.getName());
    objects.remove(CmsModulesDependenciesList.class.getName());
  }
  String moduleName=getParamModule();
  String dependencyName=getParamDependency();
  try {
    CmsModule module=(CmsModule)OpenCms.getModuleManager().getModule(moduleName).clone();
    List oldDependencies=module.getDependencies();
    List newDependencies=new ArrayList();
    Iterator i=oldDependencies.iterator();
    while (i.hasNext()) {
      CmsModuleDependency dep=(CmsModuleDependency)i.next();
      if (!dep.getName().equals(dependencyName)) {
        newDependencies.add(dep);
      }
    }
    module.setDependencies(newDependencies);
    OpenCms.getModuleManager().updateModule(getCms(),module);
    actionCloseDialog();
  }
 catch (  CmsConfigurationException ce) {
    throw new CmsRuntimeException(Messages.get().container(Messages.ERR_ACTION_DEPENDENCIES_DELETE_2,dependencyName,moduleName),ce);
  }
catch (  CmsSecurityException se) {
    throw new CmsRuntimeException(Messages.get().container(Messages.ERR_ACTION_DEPENDENCIES_DELETE_2,dependencyName,moduleName),se);
  }
catch (  JspException je) {
    throw new CmsRuntimeException(Messages.get().container(Messages.ERR_ACTION_DEPENDENCIES_DELETE_2,dependencyName,moduleName),je);
  }
}
