{
  securityManager.checkPermissions(cms.getRequestContext(),resource,CmsPermissionSet.ACCESS_WRITE,true,CmsResourceFilter.ALL);
  CmsXmlContainerPage xmlContent=CmsXmlContainerPageFactory.unmarshal(cms,resource,false);
  resource=xmlContent.getContentDefinition().getContentHandler().prepareForWrite(cms,xmlContent,resource);
  return super.writeFile(cms,securityManager,resource);
}
