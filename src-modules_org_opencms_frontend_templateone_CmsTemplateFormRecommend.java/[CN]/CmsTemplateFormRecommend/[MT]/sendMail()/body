{
  try {
    CmsHtmlMail theMail=new CmsHtmlMail();
    theMail.setSubject(key("recommend.mail.subject.prefix") + getPageTitle());
    theMail.setCharset(getRequestContext().getEncoding());
    theMail.setHtmlMsg(getContent("recommend_mail.html","html",getRequestContext().getLocale()));
    theMail.setTextMsg(getContent("recommend_mail.html","text",getRequestContext().getLocale()));
    theMail.addTo(getEmailRecipient());
    String sender=OpenCms.getSystemInfo().getMailSettings().getMailFromDefault();
    String replyTo=getEmailSender();
    if (CmsStringUtil.isEmptyOrWhitespaceOnly(replyTo)) {
      replyTo=sender;
    }
    theMail.setFrom(sender);
    theMail.addReplyTo(replyTo);
    if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(getCopy())) {
      theMail.addCc(replyTo);
    }
    theMail.send();
  }
 catch (  Exception e) {
    if (LOG.isWarnEnabled()) {
      LOG.warn(e);
    }
 else     if (LOG.isErrorEnabled()) {
      LOG.error(Messages.get().getBundle().key(Messages.LOG_SEND_MAIL_RECOMMENDPAGE_1,getRequestContext().getUri()));
    }
    return false;
  }
  return true;
}
