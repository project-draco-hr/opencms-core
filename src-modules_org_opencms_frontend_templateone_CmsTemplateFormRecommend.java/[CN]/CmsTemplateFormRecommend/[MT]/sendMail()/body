{
  CmsHtmlMail theMail=new CmsHtmlMail();
  theMail.setSubject(key("recommend.mail.subject.prefix") + getPageTitle());
  theMail.setHtmlMsg(getContent("recommend_mail.html","html",getRequestContext().getLocale()));
  theMail.setTextMsg(getContent("recommend_mail.html","text",getRequestContext().getLocale()));
  try {
    theMail.addTo(getEmailRecipient());
    String sender=getEmailSender();
    if (sender == null || "".equals(sender.trim())) {
      sender=OpenCms.getSystemInfo().getMailSettings().getMailFromDefault();
    }
    theMail.setFrom(sender);
    if (!"".equals(getCopy())) {
      theMail.addCc(sender);
    }
    theMail.send();
  }
 catch (  Exception e) {
    if (OpenCms.getLog(this).isErrorEnabled()) {
      OpenCms.getLog(this).error(e);
    }
    return false;
  }
  return true;
}
