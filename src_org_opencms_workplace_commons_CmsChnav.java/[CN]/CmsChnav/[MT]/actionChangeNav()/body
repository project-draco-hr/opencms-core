{
  getJsp().getRequest().setAttribute(C_SESSION_WORKPLACE_CLASS,this);
  String filename=getParamResource();
  String newText=getParamNavtext();
  String selectedPosString=getParamNavpos();
  try {
    checkLock(getParamResource());
    if (newText != null) {
      CmsProperty newNavText=new CmsProperty();
      newNavText.setName(I_CmsConstants.C_PROPERTY_NAVTEXT);
      CmsProperty oldNavText=getCms().readPropertyObject(filename,I_CmsConstants.C_PROPERTY_NAVTEXT,false);
      if (oldNavText.isNullProperty()) {
        if (OpenCms.getWorkplaceManager().isDefaultPropertiesOnStructure()) {
          newNavText.setStructureValue(newText);
        }
 else {
          newNavText.setResourceValue(newText);
        }
      }
 else {
        if (oldNavText.getStructureValue() != null) {
          newNavText.setStructureValue(newText);
          newNavText.setResourceValue(oldNavText.getResourceValue());
        }
 else {
          newNavText.setResourceValue(newText);
        }
      }
      getCms().writePropertyObject(filename,newNavText);
    }
    float selectedPos=-1;
    try {
      selectedPos=Float.parseFloat(selectedPosString);
    }
 catch (    Exception e) {
      if (OpenCms.getLog(this).isInfoEnabled()) {
        OpenCms.getLog(this).info(e);
      }
    }
    if (selectedPos != -1) {
      CmsProperty newNavPos=new CmsProperty();
      newNavPos.setName(I_CmsConstants.C_PROPERTY_NAVPOS);
      CmsProperty oldNavPos=getCms().readPropertyObject(filename,I_CmsConstants.C_PROPERTY_NAVPOS,false);
      if (oldNavPos.isNullProperty()) {
        if (OpenCms.getWorkplaceManager().isDefaultPropertiesOnStructure()) {
          newNavPos.setStructureValue(selectedPosString);
        }
 else {
          newNavPos.setResourceValue(selectedPosString);
        }
      }
 else {
        if (oldNavPos.getStructureValue() != null) {
          newNavPos.setStructureValue(selectedPosString);
          newNavPos.setResourceValue(oldNavPos.getResourceValue());
        }
 else {
          newNavPos.setResourceValue(selectedPosString);
        }
      }
      getCms().writePropertyObject(filename,newNavPos);
    }
  }
 catch (  CmsException e) {
    setParamErrorstack(e.getStackTraceAsString());
    setParamMessage(key("error.message." + getParamDialogtype()));
    setParamReasonSuggestion(getErrorSuggestionDefault());
    getJsp().include(C_FILE_DIALOG_SCREEN_ERROR);
  }
  actionCloseDialog();
}
