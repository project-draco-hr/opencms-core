{
  StringTokenizer tokenizer=null;
  StringBuffer newQueryStringb=new StringBuffer();
  String pattern="*?+-\"";
  for (int i=0; i < m_queryString.length(); i++) {
    if (pattern.substring(0,2).indexOf(m_queryString.substring(0,1)) != -1) {
      m_queryString=m_queryString.substring(1);
      i--;
    }
 else     if (m_queryString.length() > 1 && pattern.substring(2,5).indexOf(m_queryString.substring(0,1)) != -1 && pattern.substring(2,5).indexOf(m_queryString.substring(1,2)) != -1) {
      m_queryString=m_queryString.substring(1);
      i--;
    }
  }
  String teststring=m_queryString;
  for (int i=0; i < pattern.length(); i++)   teststring=replaceAll(teststring,pattern.substring(i,i + 1),"");
  if (teststring.trim().length() == 0)   m_queryString="";
  if (method.equals(ControlLucene.C_PARAM_METHOD_BOOLEAN)) {
    m_queryString=replaceAll(m_queryString,"AND","andxxxx");
    m_queryString=replaceAll(m_queryString,"OR","orxxxx");
    m_queryString=replaceAll(m_queryString,"NOT","notxxxx");
  }
  m_queryString=m_queryString.toLowerCase();
  if (method.equals(ControlLucene.C_PARAM_METHOD_BOOLEAN)) {
    m_queryString=replaceAll(m_queryString,"andxxxx","AND");
    m_queryString=replaceAll(m_queryString,"orxxxx","OR");
    m_queryString=replaceAll(m_queryString,"notxxxx","NOT");
  }
  m_queryString=replaceAll(m_queryString,"?","ue");
  m_queryString=replaceAll(m_queryString,"?","ae");
  m_queryString=replaceAll(m_queryString,"?","oe");
  m_queryString=replaceAll(m_queryString,"?","ss");
  m_queryString=replaceAll(m_queryString,"&nbsp;"," ");
  if (m_queryString.length() > 1 && method != null && method.equals(ControlLucene.C_PARAM_METHOD_AND)) {
    String nextWord="";
    tokenizer=new StringTokenizer(m_queryString," ");
    newQueryStringb.append(tokenizer.nextToken());
    while (tokenizer.hasMoreElements()) {
      newQueryStringb.append(" AND ");
      nextWord=tokenizer.nextToken();
      if (!nextWord.equals("OR")) {
        newQueryStringb.append(nextWord);
      }
    }
    m_queryString=newQueryStringb.toString();
  }
  if (debug)   System.err.println("SearchLucene.buildQueryString.m_queryString=" + m_queryString);
}
