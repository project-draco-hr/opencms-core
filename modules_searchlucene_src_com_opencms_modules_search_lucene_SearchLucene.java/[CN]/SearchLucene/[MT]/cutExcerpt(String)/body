{
  int firstHighlight=excerpt.indexOf("<b>");
  int excerptLength=excerpt.length();
  int before=50;
  int after=150;
  if (debug) {
    System.err.println("firstHighlight=" + firstHighlight);
    System.err.println("excerptLength=" + excerptLength);
  }
  if (firstHighlight != -1) {
    if (firstHighlight >= before) {
      if (excerptLength >= firstHighlight + after) {
        excerpt=excerpt.substring(firstHighlight - before,firstHighlight + after);
      }
 else {
        excerpt=excerpt.substring(firstHighlight - before,excerptLength);
      }
    }
 else {
      if (excerptLength >= firstHighlight + after) {
        excerpt=excerpt.substring(firstHighlight,firstHighlight + after);
      }
 else {
        excerpt=excerpt.substring(firstHighlight,excerptLength);
      }
    }
  }
  excerpt=replaceAll(excerpt,"&nbsp;"," ");
  while (excerpt.indexOf("\\") != -1 && excerpt.length() > excerpt.indexOf("\\") + 4) {
    excerpt=excerpt.substring(0,excerpt.indexOf("\\")) + excerpt.substring(excerpt.indexOf("\\") + 4,excerpt.length());
  }
  if (debug) {
    System.err.println("excerpt=" + excerpt);
  }
  return excerpt;
}
