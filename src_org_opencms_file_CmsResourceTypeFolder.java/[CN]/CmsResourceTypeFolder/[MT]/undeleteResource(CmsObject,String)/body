{
  Vector allSubFolders=new Vector();
  Vector allSubFiles=new Vector();
  getAllResources(cms,folder,allSubFiles,allSubFolders);
  for (int i=0; i < allSubFiles.size(); i++) {
    CmsFile curFile=(CmsFile)allSubFiles.elementAt(i);
    if (curFile.getState() == I_CmsConstants.C_STATE_DELETED) {
      cms.undeleteResource(cms.readAbsolutePath(curFile,CmsResourceFilter.ALL));
    }
  }
  for (int i=0; i < allSubFolders.size(); i++) {
    CmsFolder curFolder=(CmsFolder)allSubFolders.elementAt(i);
    if (curFolder.getState() == I_CmsConstants.C_STATE_DELETED) {
      cms.doUndeleteFolder(cms.readAbsolutePath(curFolder,CmsResourceFilter.ALL));
    }
  }
  cms.doUndeleteFolder(folder);
  if (folder.startsWith(I_CmsWpConstants.C_VFS_PATH_BODIES)) {
    return;
  }
  if (C_BODY_MIRROR) {
    String bodyFolder=I_CmsWpConstants.C_VFS_PATH_BODIES.substring(0,I_CmsWpConstants.C_VFS_PATH_BODIES.lastIndexOf("/")) + folder;
    try {
      cms.readFolder(bodyFolder,CmsResourceFilter.ALL);
      cms.undeleteResource(bodyFolder);
    }
 catch (    CmsException ex) {
    }
  }
}
