{
  if (mailType.toLowerCase().indexOf("html") != -1) {
    CmsHtmlMail mail=new CmsHtmlMail();
    try {
      mail.setFrom(mailFrom);
    }
 catch (    MessagingException e) {
      throw new CmsException("[" + this.getClass().getName() + "] "+ "Error in sending email, invalid recipient email address.",CmsException.C_BAD_NAME);
    }
    mail.setSubject(mailSubject);
    mail.setHtmlMsg(mailContent);
    mail.setTextMsg(mailContent);
    if (mailTo != null) {
      mail.setTo(mailTo);
    }
    if (mailCc != null) {
      mail.setCc(mailCc);
    }
    if (mailBcc != null) {
      mail.setCc(mailBcc);
    }
    new CmsMailTransport(mail).send();
  }
 else {
    CmsSimpleMail mail=new CmsSimpleMail();
    try {
      mail.setFrom(mailFrom);
    }
 catch (    MessagingException e) {
      throw new CmsException("[" + this.getClass().getName() + "] "+ "Error in sending email, invalid recipient email address.",CmsException.C_BAD_NAME);
    }
    mail.setSubject(mailSubject);
    mail.setMsg(mailContent);
    if (mailTo != null) {
      mail.setTo(mailTo);
    }
    if (mailCc != null) {
      mail.setCc(mailCc);
    }
    if (mailBcc != null) {
      mail.setCc(mailBcc);
    }
    new CmsMailTransport(mail).send();
  }
}
