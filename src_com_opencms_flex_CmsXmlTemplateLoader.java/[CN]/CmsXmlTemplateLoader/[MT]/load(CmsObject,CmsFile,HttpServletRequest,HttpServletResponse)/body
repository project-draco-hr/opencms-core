{
  CmsFlexController controller=(CmsFlexController)req.getAttribute(CmsFlexController.ATTRIBUTE_NAME);
  CmsFlexRequest f_req;
  CmsFlexResponse f_res;
  if (controller != null) {
    f_req=controller.getCurrentRequest();
    f_res=controller.getCurrentResponse();
  }
 else {
    controller=new CmsFlexController(cms,file,m_cache,req,res);
    req.setAttribute(CmsFlexController.ATTRIBUTE_NAME,controller);
    f_req=new CmsFlexRequest(req,controller);
    f_res=new CmsFlexResponse(res,controller,false,false);
    controller.pushRequest(f_req);
    controller.pushResponse(f_res);
  }
  service(cms,file,f_req,f_res);
}
