{
  Vector filesfolders=new Vector();
  String foldername;
  String currentFolder;
  Vector files;
  Vector folders;
  Enumeration enum;
  CmsFile file;
  CmsFolder folder;
  HttpSession session=((HttpServletRequest)cms.getRequestContext().getRequest().getOriginalRequest()).getSession(true);
  foldername=cms.getRequestContext().getRequest().getParameter(C_PARA_FOLDER);
  if (foldername != null) {
    session.putValue(C_PARA_FOLDER,foldername);
  }
  currentFolder=(String)session.getValue(C_PARA_FOLDER);
  if (currentFolder == null) {
    currentFolder=cms.getRequestContext().currentFolder().getAbsolutePath();
  }
  folders=cms.getSubFolders(currentFolder);
  files=cms.getFilesInFolder(currentFolder);
  enum=folders.elements();
  while (enum.hasMoreElements()) {
    folder=(CmsFolder)enum.nextElement();
    filesfolders.addElement(folder);
  }
  enum=files.elements();
  while (enum.hasMoreElements()) {
    file=(CmsFile)enum.nextElement();
    filesfolders.addElement(file);
  }
  return filesfolders;
}
