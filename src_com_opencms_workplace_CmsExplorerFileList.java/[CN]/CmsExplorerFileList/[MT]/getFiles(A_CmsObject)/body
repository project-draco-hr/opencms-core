{
  Vector filesfolders=new Vector();
  String foldername;
  String currentFilerlist;
  Vector files;
  Vector folders;
  Enumeration enum;
  CmsFile file;
  CmsFolder folder;
  HttpSession session=((HttpServletRequest)cms.getRequestContext().getRequest().getOriginalRequest()).getSession(true);
  foldername=cms.getRequestContext().getRequest().getParameter(C_PARA_FILELIST);
  if (foldername != null) {
    session.putValue(C_PARA_FILELIST,foldername);
  }
  currentFilerlist=(String)session.getValue(C_PARA_FILELIST);
  if (currentFilerlist == null) {
    currentFilerlist=cms.getRequestContext().currentFolder().getAbsolutePath();
  }
  folders=cms.getSubFolders(currentFilerlist);
  files=cms.getFilesInFolder(currentFilerlist);
  enum=folders.elements();
  while (enum.hasMoreElements()) {
    folder=(CmsFolder)enum.nextElement();
    filesfolders.addElement(folder);
  }
  enum=files.elements();
  while (enum.hasMoreElements()) {
    file=(CmsFile)enum.nextElement();
    filesfolders.addElement(file);
  }
  return filesfolders;
}
