{
  body="<html><head></head><body>" + body + "</body></html>";
  CmsHtmlConverter converter=new CmsHtmlConverter();
  try {
    if (converter.hasErrors(body)) {
      String errors=converter.showErrors(body);
      throw new CmsException(errors);
    }
    converter.setConverterConfString(m_converterConfiguration);
    URL url=new URL(webappUrl + fileName);
    converter.setServletPrefix(OpenCms.getSystemInfo().getOpenCmsContext(),null);
    converter.setOriginalUrl(url);
    body=converter.convertHTML(body);
  }
 catch (  Exception e) {
    e.printStackTrace(System.err);
    throw new CmsException("[LinkSubstitution] can't convert the editor content:" + e.toString());
  }
  int startIndex=body.indexOf("<body");
  startIndex=body.indexOf(">",startIndex + 1) + 1;
  int endIndex=body.lastIndexOf("</body>");
  if (startIndex > 0) {
    body=body.substring(startIndex,endIndex);
  }
  return body;
}
