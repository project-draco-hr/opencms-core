{
  List list=new ArrayList();
  try {
    list.addAll(m_cms.getResourcesInFolder(resourcename,filter));
  }
 catch (  CmsException ex) {
  }
  List wrappers=getWrappers();
  Iterator iter=wrappers.iterator();
  while (iter.hasNext()) {
    I_CmsResourceWrapper wrapper=(I_CmsResourceWrapper)iter.next();
    List added=wrapper.addResourcesToFolder(m_cms,resourcename,filter);
    if (added != null) {
      list.addAll(added);
    }
  }
  ArrayList wrapped=new ArrayList();
  iter=list.iterator();
  while (iter.hasNext()) {
    CmsResource res=(CmsResource)iter.next();
    if (needUtf8Marker(res)) {
      CmsWrappedResource wrap=new CmsWrappedResource(res);
      wrap.setLength(res.getLength() + CmsResourceWrapperUtils.UTF8_MARKER.length);
      res=wrap.getResource();
    }
    I_CmsResourceWrapper resWrapper=getResourceTypeWrapper(res);
    if (resWrapper != null) {
      wrapped.add(resWrapper.wrapResource(m_cms,res));
    }
 else {
      wrapped.add(res);
    }
  }
  Collections.sort(wrapped,CmsResource.COMPARE_ROOT_PATH_IGNORE_CASE_FOLDERS_FIRST);
  return wrapped;
}
