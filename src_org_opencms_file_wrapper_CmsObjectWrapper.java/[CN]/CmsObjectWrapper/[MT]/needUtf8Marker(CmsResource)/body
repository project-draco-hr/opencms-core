{
  String encoding=CmsLocaleManager.getResourceEncoding(m_cms,res);
  if (!CmsEncoder.ENCODING_UTF_8.equals(encoding)) {
    return false;
  }
  try {
    I_CmsResourceType resType=OpenCms.getResourceManager().getResourceType(res.getTypeId());
    boolean typeMatch=false;
    if (resType instanceof CmsResourceTypeJsp) {
      typeMatch=true;
    }
 else     if (resType instanceof CmsResourceTypePlain) {
      typeMatch=true;
    }
 else     if (resType instanceof CmsResourceTypeXmlContent) {
      typeMatch=true;
    }
 else     if (resType instanceof CmsResourceTypeXmlPage) {
      typeMatch=true;
    }
    if (typeMatch && res.isFile()) {
      CmsFile file=m_cms.readFile(res);
      if ((file.getContents().length >= 3) && (file.getContents()[0] == CmsResourceWrapperUtils.UTF8_MARKER[0]) && (file.getContents()[1] == CmsResourceWrapperUtils.UTF8_MARKER[1])&& (file.getContents()[2] == CmsResourceWrapperUtils.UTF8_MARKER[2])) {
        typeMatch=false;
      }
    }
    return typeMatch;
  }
 catch (  CmsLoaderException e) {
  }
catch (  CmsException e) {
  }
  return false;
}
