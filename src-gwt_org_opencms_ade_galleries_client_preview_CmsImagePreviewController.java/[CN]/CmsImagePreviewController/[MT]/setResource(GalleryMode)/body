{
  CmsCroppingParamBean croppingParam=m_handler.getCroppingParam();
switch (galleryMode) {
case widget:
    if (CmsPreviewUtil.isAdvancedWidget()) {
      CmsPreviewUtil.setVfsImage(m_infoBean.getResourcePath(),croppingParam.getScaleParam(),m_handler.getFormatName(),((double)croppingParam.getTargetWidth() / croppingParam.getTargetHeight()) + "");
    }
 else {
      CmsPreviewUtil.setResourcePath(m_infoBean.getResourcePath() + ((croppingParam.isCropped() || croppingParam.isScaled()) ? "?" + croppingParam.toString() : ""));
    }
  break;
case editor:
CmsPreviewUtil.setImage(CmsCoreProvider.get().link(m_infoBean.getResourcePath() + ((croppingParam.isCropped() || croppingParam.isScaled()) ? "?" + croppingParam.toString() : "")),m_handler.getImageAttributes());
break;
case ade:
case view:
default :
break;
}
}
