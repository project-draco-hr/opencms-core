{
  createTmpFile();
  CmsObject cms=OpenCms.initCmsObject(OpenCms.getDefaultUsers().getUserExport());
  List<CmsSitemapEntry> rootEntries=OpenCms.getSitemapManager().getRootSitemapRootEntries(cms);
  for (  CmsSitemapEntry rootEntry : rootEntries) {
    CmsInternalSitemapEntry entry=(CmsInternalSitemapEntry)rootEntry;
    List<CmsInternalSitemapEntry> entries=entry.getSubEntries();
    testEntries(entries,parameters);
  }
  List<CmsInternalSitemapEntry> detailEntries=new ArrayList<CmsInternalSitemapEntry>();
  List<CmsResource> detailResources=cms.readResources("/sites/default/contents/",CmsResourceFilter.ALL);
  for (  CmsResource res : detailResources) {
    String uri="/sites/default/item_2/item_1/" + res.getStructureId();
    if (res.getRootPath().endsWith("content_0003.xml")) {
      uri="/sites/default/item_2/item_1/hello_world";
    }
    CmsInternalSitemapEntry entry=(CmsInternalSitemapEntry)OpenCms.getSitemapManager().getEntryForUri(cms,uri);
    detailEntries.add(entry);
  }
  testEntries(detailEntries,parameters);
  List<CmsInternalSitemapEntry> vfsEntries=new ArrayList<CmsInternalSitemapEntry>();
  List<CmsResource> vfsResources=cms.readResources("/sites/default/cntpages/",CmsResourceFilter.ALL);
  for (  CmsResource res : vfsResources) {
    CmsInternalSitemapEntry entry=(CmsInternalSitemapEntry)OpenCms.getSitemapManager().getEntryForUri(cms,res.getRootPath());
    vfsEntries.add(entry);
  }
  testEntries(vfsEntries,parameters);
  List<CmsInternalSitemapEntry> systemEntries=new ArrayList<CmsInternalSitemapEntry>();
  List<CmsResource> systemResources=cms.readResources("/system/modules/org.opencms.ade.sitemap/schemas/",CmsResourceFilter.ALL);
  for (  CmsResource res : systemResources) {
    CmsInternalSitemapEntry entry=(CmsInternalSitemapEntry)OpenCms.getSitemapManager().getEntryForUri(cms,res.getRootPath());
    systemEntries.add(entry);
  }
  testEntries(systemEntries,parameters);
  assertTrue(compareFiles(TMP_FILE,tobeExportDataFile));
  deleteTmpFile();
}
