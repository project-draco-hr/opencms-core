{
  try {
    CmsADEConfigurationManager manager=OpenCms.getADEConfigurationManager();
    CmsObject cms=rootCms();
    CmsResource page1=cms.readResource("/sites/default/today");
    CmsResource page2=cms.readResource("/sites/default/today/events");
    CmsDetailPageInfo info1=new CmsDetailPageInfo(page1.getStructureId(),page1.getRootPath(),"foo");
    CmsDetailPageInfo info2=new CmsDetailPageInfo(page2.getStructureId(),page2.getRootPath(),"bar");
    cms.lockResource("/sites/default/.content/.config");
    manager.saveDetailPages(cms,"/sites/default/today",list(info1,info2),new CmsUUID());
    CmsADEConfigData configData=manager.lookupConfiguration(cms,"/sites/default/today/");
    List<CmsDetailPageInfo> detailPages=configData.getAllDetailPages();
    assertEquals("/sites/default/today/",detailPages.get(0).getUri());
    assertEquals("foo",detailPages.get(0).getType());
    assertEquals(page1.getStructureId(),detailPages.get(0).getId());
    assertEquals("/sites/default/today/events/",detailPages.get(1).getUri());
    assertEquals("bar",detailPages.get(1).getType());
    assertEquals(page2.getStructureId(),detailPages.get(1).getId());
  }
  finally {
    restoreFiles();
  }
}
