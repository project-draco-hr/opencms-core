{
  CmsObject cms=getCmsObject();
  echo("Testing lock state for basic operations");
  String source="/types/text.txt";
  String destination1="/types/text_new1.txt";
  String destination2="/types/text_new2.txt";
  storeResources(cms,source);
  cms.copyResource(source,destination1,I_CmsConstants.C_COPY_AS_NEW);
  assertLock(cms,source,CmsLock.C_TYPE_UNLOCKED);
  assertLock(cms,destination1,CmsLock.C_TYPE_EXCLUSIVE);
  cms.lockResource(source);
  cms.copyResource(source,destination2,I_CmsConstants.C_COPY_AS_NEW);
  assertLock(cms,source,CmsLock.C_TYPE_EXCLUSIVE);
  assertLock(cms,destination2,CmsLock.C_TYPE_EXCLUSIVE);
  source="/types/jsp.jsp";
  destination1="/types/jsp_new1.html";
  cms.lockResource(source);
  cms.moveResource(source,destination1);
  assertLock(cms,source,CmsLock.C_TYPE_SHARED_EXCLUSIVE);
  assertLock(cms,destination1,CmsLock.C_TYPE_EXCLUSIVE);
}
