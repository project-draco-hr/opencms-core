{
  try {
    CmsResource resource=cms.readResource(id,filter);
    CmsResource parent=cms.readParentFolder(id);
    CmsUUID parentId=parent.getStructureId();
    Item resourceItem=getItem(id);
    if (resourceItem != null) {
      resourceItem.getItemProperty(CmsResourceTableProperty.PROPERTY_RESOURCE_NAME).setValue(parentId == null ? resource.getRootPath() : resource.getName());
      resourceItem.getItemProperty(CmsResourceTableProperty.PROPERTY_STATE).setValue(resource.getState());
      if (parentId != null) {
        setParent(resource.getStructureId(),parentId);
      }
    }
 else {
      addTreeItem(cms,resource,parentId);
    }
  }
 catch (  CmsVfsResourceNotFoundException e) {
    removeItemRecursively(id);
    LOG.debug(e.getLocalizedMessage(),e);
  }
}
