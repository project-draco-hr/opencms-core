{
  Thread.currentThread().setPriority(Thread.MIN_PRIORITY);
  while (true) {
    try {
      LogRecord lr=(LogRecord)m_logQueue.waitObject();
      write(lr);
      if ((System.currentTimeMillis() - lr.m_date) > m_queueMaxage) {
        Thread.currentThread().setPriority(Thread.MAX_PRIORITY);
        write(new LogRecord(CH_QUEUE_STATUS,"Log queue age limit exceeded",null));
        flush();
        Thread.currentThread().setPriority(Thread.MIN_PRIORITY);
      }
    }
 catch (    InterruptedException iex) {
      if (!m_logQueue.isEmpty()) {
        write(new LogRecord(CH_EXCEPTION_TRACING,"Logger thread interrupted, flushing...",iex));
        flush();
        write(new LogRecord(CH_EXCEPTION_TRACING,"Flushed, logging stopped.",null));
      }
      return;
    }
  }
}
