{
  String secretkey=null;
  A_CmsTask project=null;
  try {
    Class.forName("org.gjt.mm.mysql.Driver");
    Connection con=DriverManager.getConnection("jdbc:mysql://localhost:3306/opencms","root","");
    Statement stmt=con.createStatement();
    secretkey=createSecret();
    System.out.println(secretkey);
    String recname=(String)formData.get(C_HASH_FIRSTNAME) + " " + (String)formData.get(C_HASH_SURNAME);
    String recstreet=(String)formData.get(C_HASH_STREET);
    String recpostalcode=(String)formData.get(C_HASH_PLZ);
    String reccity=(String)formData.get(C_HASH_CITY);
    String recphone=(String)formData.get(C_HASH_PRIVATEFON);
    String recfax=(String)formData.get(C_HASH_FAX);
    String recemail=(String)formData.get(C_HASH_EMAIL);
    String receducation="-";
    String recbirthdate=(String)formData.get(C_HASH_BIRTHDATE);
    String rectraining="-";
    String recexperience=(String)formData.get(C_HASH_OLDPOSITION);
    String recstarttime=(String)formData.get(C_HASH_ENTRY);
    String recjob=(String)formData.get(C_HASH_NEWPOSITION);
    String co=(String)formData.get(C_HASH_CO);
    String text=(String)formData.get(C_HASH_TEXT);
    String insert="INSERT INTO GlobeRecruitingData SET " + "name='" + recname + "', "+ "street='"+ recstreet+ "',"+ "postalcode='"+ recpostalcode+ "', "+ "city='"+ reccity+ "', "+ "phone='"+ recphone+ "', "+ "fax='"+ recfax+ "', "+ "email='"+ recemail+ "', "+ "education='"+ receducation+ "', "+ "birthdate='"+ recbirthdate+ "', "+ "training='"+ rectraining+ "', "+ "experience='"+ recexperience+ "', "+ "rowversion=0,"+ "starttime='"+ recstarttime+ "', "+ "incomingtime=CURRENT_TIMESTAMP, "+ "job='"+ recjob+ "',"+ "secretkey='"+ secretkey+ "'";
    stmt.executeUpdate(insert);
    int recdataid=getLastInsertId(con);
    A_CmsGroup role=cms.readGroup("Personalabt.");
    long timeout=System.currentTimeMillis() + 241920000;
    int projtyperef=cms.getTaskType("recruiting");
    int tasktyperef=cms.getTaskType("StartApplication");
    int followingtasktyperef=cms.getTaskType("CheckApplication");
    String projname="Bewerbung als " + recjob;
    String taskname="Bewerbung von " + recname;
    String taskcomment="Emailadresse: " + recemail + "<BR>\n";
    taskcomment+="Firma: " + co + "<BR>\n";
    taskcomment+="Text: " + text + "<BR>\n";
    project=cms.createProject(projname,projtyperef,null,timeout,1);
    A_CmsTask newtask=cms.createTask(project.getId(),null,null,taskname,"",tasktyperef,timeout,1);
    cms.writeTaskLog(newtask.getId(),taskcomment,100);
    cms.endTask(newtask.getId());
    cms.writeTaskLog(newtask.getId(),"Bewerbung eingegangen.",1);
    newtask=cms.createTask(project.getId(),null,role.getName(),taskname,"",followingtasktyperef,timeout,1);
    cms.setTaskPar(project.getId(),"Recruiting",Integer.toString(recdataid));
    cms.writeTaskLog(newtask.getId(),taskcomment,100);
  }
 catch (  ClassNotFoundException e1) {
    if (A_OpenCms.isLogging()) {
      A_OpenCms.log(A_OpenCms.C_OPENCMS_CRITICAL,e1.getMessage());
    }
  }
catch (  SQLException e2) {
    while ((e2=e2.getNextException()) != null) {
      if (A_OpenCms.isLogging()) {
        A_OpenCms.log(A_OpenCms.C_OPENCMS_CRITICAL,e2.getMessage());
      }
    }
  }
  return "http://etm.mindfact.com/extern/etm/recruiting/ApplicantInformation.asp?id=" + project.getId() + "&s="+ secretkey;
}
