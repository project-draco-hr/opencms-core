{
  CmsGalleryDataBean data=new CmsGalleryDataBean();
  data.setMode(galleryMode);
  data.setLocales(buildLocalesMap());
switch (galleryMode) {
case editor:
case view:
case widget:
    List<I_CmsResourceType> types=readResourceTypesFromRequest();
  data.setTypes(buildTypesList(types));
data.setGalleries(buildGalleriesList(readGalleryTypes(types)));
if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(getRequest().getParameter(ReqParam.gallerypath.name()))) {
data.setStartTab(GalleryTabId.cms_tab_results);
}
 else {
data.setStartTab(GalleryTabId.cms_tab_galleries);
}
break;
case ade:
data.setTypes(buildTypesList(readResourceTypesForContainerpage()));
data.setStartTab(GalleryTabId.cms_tab_types);
break;
case sitemap:
data.setTypes(buildTypesList(readResourceTypesForSitemap()));
data.setStartTab(GalleryTabId.cms_tab_search);
break;
default :
break;
}
return data;
}
