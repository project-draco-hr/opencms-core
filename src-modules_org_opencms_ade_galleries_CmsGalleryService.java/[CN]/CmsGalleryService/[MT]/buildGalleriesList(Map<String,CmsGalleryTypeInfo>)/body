{
  LinkedHashMap<String,CmsGalleriesListInfoBean> map=new LinkedHashMap<String,CmsGalleriesListInfoBean>();
  if (galleryTypes == null) {
    return map;
  }
  Iterator<Entry<String,CmsGalleryTypeInfo>> iGalleryTypes=galleryTypes.entrySet().iterator();
  while (iGalleryTypes.hasNext()) {
    Entry<String,CmsGalleryTypeInfo> ent=iGalleryTypes.next();
    CmsGalleryTypeInfo tInfo=ent.getValue();
    String iconPath=CmsWorkplace.getResourceUri(CmsWorkplace.RES_PATH_FILETYPES + OpenCms.getWorkplaceManager().getExplorerTypeSetting(tInfo.getResourceType().getTypeName()).getIcon());
    ArrayList<String> contentTypes=new ArrayList<String>();
    Iterator<I_CmsResourceType> it=tInfo.getContentTypes().iterator();
    while (it.hasNext()) {
      contentTypes.add(String.valueOf(it.next().getTypeName()));
    }
    Iterator<CmsResource> ir=tInfo.getGalleries().iterator();
    while (ir.hasNext()) {
      CmsResource res=ir.next();
      CmsGalleriesListInfoBean bean=new CmsGalleriesListInfoBean();
      String sitePath=getCmsObject().getSitePath(res);
      String title="";
      try {
        title=getCmsObject().readPropertyObject(sitePath,CmsPropertyDefinition.PROPERTY_TITLE,false).getValue("");
      }
 catch (      CmsException e) {
        if (LOG.isErrorEnabled()) {
          LOG.error(e.getLocalizedMessage(),e);
        }
      }
      bean.setId(sitePath);
      bean.setContentTypes(contentTypes);
      bean.setTitle(title);
      bean.setSubTitle(sitePath);
      bean.setIconResource(iconPath);
      bean.setGalleryTypeName(tInfo.getResourceType().getTypeName());
      map.put(sitePath,bean);
    }
  }
  return map;
}
