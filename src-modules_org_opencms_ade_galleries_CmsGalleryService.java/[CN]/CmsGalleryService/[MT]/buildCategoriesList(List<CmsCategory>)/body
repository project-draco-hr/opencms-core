{
  ArrayList<CmsListInfoBean> list=new ArrayList<CmsListInfoBean>();
  if ((categories == null) || (categories.size() == 0)) {
    return list;
  }
  Map<String,CmsCategory> sorted=new TreeMap<String,CmsCategory>();
  Iterator<CmsCategory> i=categories.iterator();
  while (i.hasNext()) {
    CmsCategory category=i.next();
    String categoryPath=category.getPath();
    if (sorted.get(categoryPath) != null) {
      continue;
    }
    sorted.put(categoryPath,category);
  }
  List<CmsCategory> sortedCategories=new ArrayList<CmsCategory>(sorted.values());
  i=sortedCategories.iterator();
  while (i.hasNext()) {
    CmsCategory cat=i.next();
    CmsListInfoBean bean=new CmsListInfoBean();
    try {
      bean.setTitle(cat.getTitle());
      bean.setSubTitle(cat.getPath());
      int level=CmsResource.getPathLevel(cat.getPath());
      String iconPath=CmsWorkplace.getResourceUri(CmsWorkplace.RES_PATH_FILETYPES + OpenCms.getWorkplaceManager().getExplorerTypeSetting(CmsResourceTypeFolder.RESOURCE_TYPE_NAME).getIcon());
      list.add(bean);
    }
 catch (    Exception e) {
      if (LOG.isErrorEnabled()) {
        LOG.error(e.getLocalizedMessage(),e);
      }
    }
  }
  return list;
}
