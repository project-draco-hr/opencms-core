{
  CmsCategoryService catService=CmsCategoryService.getInstance();
  List<String> repositories=new ArrayList<String>();
  if ((galleries != null) && !galleries.isEmpty()) {
    Iterator<CmsResource> iGalleries=galleries.iterator();
    while (iGalleries.hasNext()) {
      CmsResource res=iGalleries.next();
      repositories.addAll(catService.getCategoryRepositories(getCmsObject(),getCmsObject().getSitePath(res)));
    }
  }
 else {
    repositories.add(CmsCategoryService.CENTRALIZED_REPOSITORY);
  }
  List<CmsCategory> categories=null;
  try {
    categories=catService.readCategoriesForRepositories(getCmsObject(),"",true,repositories);
  }
 catch (  CmsException e) {
    logError(e);
  }
  return categories;
}
