{
  ArrayList<CmsResourceTypeBean> list=new ArrayList<CmsResourceTypeBean>();
  if (types == null) {
    return list;
  }
  Map<I_CmsResourceType,I_CmsPreviewProvider> typeMapping=getTypeProviderMapping();
  Iterator<I_CmsResourceType> it=types.iterator();
  while (it.hasNext()) {
    I_CmsResourceType type=it.next();
    try {
      CmsResourceTypeBean bean=new CmsResourceTypeBean();
      bean.setType(type.getTypeName());
      Locale wpLocale=getWorkplaceLocale();
      bean.setTitle(CmsWorkplaceMessages.getResourceTypeName(wpLocale,type.getTypeName()));
      bean.setDescription(CmsWorkplaceMessages.getResourceTypeDescription(wpLocale,type.getTypeName()));
      ArrayList<String> galleryNames=new ArrayList<String>();
      Iterator<I_CmsResourceType> galleryTypes=type.getGalleryTypes().iterator();
      while (galleryTypes.hasNext()) {
        I_CmsResourceType galleryType=galleryTypes.next();
        galleryNames.add(galleryType.getTypeName());
      }
      bean.setGalleryTypeNames(galleryNames);
      I_CmsPreviewProvider preview=typeMapping.get(type);
      if (preview != null) {
        bean.setPreviewProviderName(preview.getPreviewName());
      }
      list.add(bean);
    }
 catch (    Exception e) {
      if (type != null) {
        log(Messages.get().getBundle(getWorkplaceLocale()).key(Messages.ERROR_BUILD_TYPE_LIST_1,type.getTypeName()),e);
      }
    }
  }
  return list;
}
