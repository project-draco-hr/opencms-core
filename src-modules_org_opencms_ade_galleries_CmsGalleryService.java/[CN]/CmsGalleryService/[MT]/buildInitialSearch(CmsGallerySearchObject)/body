{
  CmsGallerySearchObject searchObj=new CmsGallerySearchObject();
  try {
    String resourcePath=initialSearch.getResourcePath();
    if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(resourcePath)) {
      CmsSitemapEntry entry=OpenCms.getSitemapManager().getEntryForUri(getCmsObject(),resourcePath);
      if (entry.isSitemap()) {
      }
 else {
        searchObj=findResourceInGallery(resourcePath,initialSearch);
      }
    }
 else {
      searchObj=search(initialSearch);
    }
    return searchObj;
  }
 catch (  Exception e) {
    LOG.error(e.getLocalizedMessage(),e);
  }
  return searchObj;
}
