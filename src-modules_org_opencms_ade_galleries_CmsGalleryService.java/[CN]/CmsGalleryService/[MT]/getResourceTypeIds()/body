{
  if (m_resourceTypeIds == null) {
    try {
      JSONObject data=CmsGalleryProvider.get().getData(getCmsObject(),getRequest());
      String typesString=data.optString(I_CmsGalleryProviderConstants.ReqParam.types.name());
      String[] typesArray=CmsStringUtil.splitAsArray(typesString,",");
      m_resourceTypeIds=new JSONArray(typesArray);
    }
 catch (    JSONException e) {
      LOG.error(e.getLocalizedMessage(),e);
    }
    if ((m_resourceTypeIds == null) || (m_resourceTypeIds.length() == 0)) {
      m_resourceTypes=getResourceManager().getResourceTypes();
      m_resourceTypeIds=new JSONArray();
      for (      I_CmsResourceType type : m_resourceTypes) {
        m_resourceTypeIds.put(type.getTypeId());
      }
    }
  }
  return m_resourceTypeIds;
}
