{
  CmsGallerySearchObject searchObjBean=new CmsGallerySearchObject(searchObj);
  if (searchObj == null) {
    return searchObjBean;
  }
  CmsGallerySearchParameters params=prepareSearchParams(searchObj);
  CmsGallerySearch searchBean=new CmsGallerySearch();
  searchBean.init(getCmsObject());
  searchBean.setIndex(ADVANCED_GALLERY_INDEX);
  CmsGallerySearchResultList searchResults=searchBean.getResult(params);
  searchObjBean.setSortOrder(params.getSortOrder().name());
  searchObjBean.setResultCount(searchResults.getHitCount());
  searchObjBean.setPage(params.getResultPage());
  searchObjBean.setResults(buildSearchResultList(searchResults));
  return searchObjBean;
}
