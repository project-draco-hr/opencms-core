{
  TermsFilter pathFilter=new TermsFilter();
  if ((roots != null) && (roots.size() > 0)) {
    for (int i=0; i < roots.size(); i++) {
      String searchRoot=cms.getRequestContext().addSiteRoot(roots.get(i));
      extendPathFilter(pathFilter,searchRoot);
    }
  }
 else {
    extendPathFilter(pathFilter,cms.getRequestContext().getSiteRoot());
    extendPathFilter(pathFilter,OpenCms.getSiteManager().getSharedFolder());
    extendPathFilter(pathFilter,"/system/modules/");
  }
  filter.add(new FilterClause(pathFilter,BooleanClause.Occur.MUST));
  return filter;
}
