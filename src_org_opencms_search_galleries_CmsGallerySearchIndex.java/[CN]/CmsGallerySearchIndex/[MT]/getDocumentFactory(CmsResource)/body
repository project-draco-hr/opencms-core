{
  if ((res != null) && (m_sources != null)) {
    if (CmsResourceTypeXmlContent.isXmlContent(res) || CmsResourceTypeXmlContainerPage.isContainerPage(res)) {
      return OpenCms.getSearchManager().getDocumentFactory(TYPE_XMLCONTENT_GALLERIES,null);
    }
 else     if (CmsResourceTypeXmlPage.isXmlPage(res)) {
      return OpenCms.getSearchManager().getDocumentFactory(TYPE_XMLPAGE_GALLERIES,null);
    }
 else {
      return super.getDocumentFactory(res);
    }
  }
  return null;
}
