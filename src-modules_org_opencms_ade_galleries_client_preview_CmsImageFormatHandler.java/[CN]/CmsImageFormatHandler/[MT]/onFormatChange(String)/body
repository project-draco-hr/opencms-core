{
  if (m_currentFormat == m_formats.get(formatKey)) {
    return;
  }
  m_currentFormat=m_formats.get(formatKey);
  m_currentFormat.adjustCroppingParam(m_croppingParam);
  m_formatForm.setHeightInput(m_croppingParam.getTargetHeight() == -1 ? m_croppingParam.getOrgHeight() : m_croppingParam.getTargetHeight());
  m_formatForm.setWidthInput(m_croppingParam.getTargetWidth() == -1 ? m_croppingParam.getOrgWidth() : m_croppingParam.getTargetWidth());
  if (m_currentFormat.isFixedRatio()) {
    m_formatForm.setRatioButton(false,false,"Image ratio is fixed for this format.");
    m_ratioLocked=true;
  }
 else {
    if (!m_currentFormat.isHeightEditable() && !m_currentFormat.isWidthEditable()) {
      m_formatForm.setRatioButton(false,false,"Dimensions are not editable");
    }
 else {
      m_formatForm.setRatioButton(false,true,null);
    }
    m_ratioLocked=false;
  }
  m_formatForm.setHeightInputEnabled(m_currentFormat.isHeightEditable());
  m_formatForm.setWidthInputEnabled(m_currentFormat.isWidthEditable());
  fireValueChangedEvent();
}
