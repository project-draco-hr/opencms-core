{
  m_popup.add(item.getSubMenu());
  m_popup.addAutoHidePartner(item.getElement());
  m_popup.setModal(false);
  m_popup.getDialog().getElement().addClassName(I_CmsLayoutBundle.INSTANCE.contextmenuCss().cmsContextMenuPopup());
  m_popup.show();
  int leftSpace=item.getAbsoluteLeft() - Window.getScrollLeft() - 5;
  int rightSpace=Window.getClientWidth() - (item.getAbsoluteLeft() + item.getOffsetWidth() - 5);
  boolean showRight=item.getSubMenu().getOffsetWidth() < rightSpace;
  if (!showRight) {
    showRight=leftSpace < rightSpace;
  }
  int topSpace=item.getAbsoluteTop() - Window.getScrollTop() + 4;
  int bottomSpace=Window.getClientHeight() + Window.getScrollTop() - (item.getAbsoluteTop() + 4);
  boolean showBottom=item.getSubMenu().getOffsetHeight() < bottomSpace;
  if (!showBottom) {
    showBottom=topSpace < bottomSpace;
  }
  int left;
  int top;
  if (showRight && showBottom) {
    left=item.getAbsoluteLeft() + item.getOffsetWidth() - 4;
    top=item.getAbsoluteTop() - Window.getScrollTop() - 4;
  }
 else   if (showRight && !showBottom) {
    left=item.getAbsoluteLeft() + item.getOffsetWidth() - 4;
    top=item.getAbsoluteTop() - Window.getScrollTop() - item.getSubMenu().getOffsetHeight() + item.getOffsetHeight() - 4;
  }
 else   if (!showRight && showBottom) {
    left=item.getAbsoluteLeft() - Window.getScrollLeft() - item.getSubMenu().getOffsetWidth()- 3;
    top=item.getAbsoluteTop() - Window.getScrollTop() - 4;
  }
 else {
    left=item.getAbsoluteLeft() - Window.getScrollLeft() - item.getSubMenu().getOffsetWidth()- 3;
    top=item.getAbsoluteTop() - Window.getScrollTop() - item.getSubMenu().getOffsetHeight() + item.getOffsetHeight() - 4;
  }
  m_popup.setPosition(left,top);
  if (m_isFixed) {
    m_popup.getDialog().getElement().getStyle().setPosition(Position.FIXED);
  }
}
