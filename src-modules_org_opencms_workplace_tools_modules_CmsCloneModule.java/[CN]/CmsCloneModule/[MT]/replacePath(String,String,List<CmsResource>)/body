{
  for (  CmsResource resource : resources) {
    if (resource.isFile()) {
      CmsFile file=getCmsObject().readFile(resource);
      String encoding=CmsLocaleManager.getResourceEncoding(getCmsObject(),file);
      String oldContent=new String(file.getContents(),encoding);
      String newContent=oldContent.replaceAll(sourceModulePath,targetModulePath);
      Matcher matcher=Pattern.compile(CmsUUID.UUID_REGEX).matcher(newContent);
      newContent=matcher.replaceAll("");
      newContent=newContent.replaceAll("<uuid></uuid>","");
      if (!oldContent.equals(newContent)) {
        file.setContents(newContent.getBytes(encoding));
        if (!resource.getRootPath().startsWith(CmsWorkplace.VFS_PATH_SYSTEM)) {
          if (lockResource(getCmsObject(),resource)) {
            getCmsObject().writeFile(file);
          }
        }
 else {
          getCmsObject().writeFile(file);
        }
      }
    }
  }
}
