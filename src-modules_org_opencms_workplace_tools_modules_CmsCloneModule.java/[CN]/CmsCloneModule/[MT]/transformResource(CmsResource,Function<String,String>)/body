{
  CmsFile file=getCmsObject().readFile(resource);
  String encoding=CmsLocaleManager.getResourceEncoding(getCmsObject(),file);
  String content=new String(file.getContents(),encoding);
  content=transformation.apply(content);
  file.setContents(content.getBytes(encoding));
  lockResource(getCmsObject(),file);
  getCmsObject().writeFile(file);
}
