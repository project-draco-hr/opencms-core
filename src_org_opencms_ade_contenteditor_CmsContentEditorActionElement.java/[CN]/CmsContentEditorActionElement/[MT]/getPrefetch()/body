{
  CmsContentDefinition definition=CmsContentService.newInstance(getRequest()).prefetch();
  StringBuffer sb=new StringBuffer();
  String prefetchedData=serializeForJavascript(I_CmsContentService.class.getMethod("prefetch"),definition);
  sb.append(I_CmsContentService.DICT_CONTENT_DEFINITION).append("='").append(prefetchedData).append("';\n");
  String backlink=getRequest().getParameter(CmsEditor.PARAM_BACKLINK);
  if (CmsStringUtil.isEmptyOrWhitespaceOnly(backlink)) {
    backlink=link(CmsFrameset.JSP_WORKPLACE_URI);
  }
 else {
    backlink=link(backlink);
  }
  sb.append(I_CmsContentService.PARAM_BACKLINK).append("='").append(backlink).append("';\n");
  wrapScript(sb);
  addExternalResourceTags(sb,definition);
  return sb.toString();
}
