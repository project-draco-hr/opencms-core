{
  CmsObject cms=getCmsObject();
  boolean isFolder=resource.isFolder();
  String name=root ? "/" : resource.getName();
  String path=cms.getSitePath(resource);
  boolean hasChildren=false;
  if (isFolder) {
    List<CmsResource> children=cms.getResourcesInFolder(cms.getRequestContext().getSitePath(resource),CmsResourceFilter.DEFAULT);
    if (!children.isEmpty()) {
      hasChildren=true;
    }
  }
  return new CmsVfsEntryBean(path,name,isFolder,hasChildren);
}
