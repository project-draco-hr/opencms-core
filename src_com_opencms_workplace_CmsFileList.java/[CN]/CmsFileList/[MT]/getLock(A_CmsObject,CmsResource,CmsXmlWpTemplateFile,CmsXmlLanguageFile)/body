{
  StringBuffer output=new StringBuffer();
  if (file.isLocked()) {
    int locked=file.isLockedBy();
    if (cms.getRequestContext().currentUser().getId() == locked) {
      template.setXmlData(C_LOCKEDBY,lang.getLanguageValue("explorer.lockedby") + cms.getRequestContext().currentUser().getName());
      output.append(C_LOCKED_VALUE_OWN);
    }
 else {
      template.setXmlData(C_LOCKEDBY,lang.getLanguageValue("explorer.lockedby") + cms.lockedBy(file.getAbsolutePath()).getName());
      output.append(C_LOCKED_VALUE_USER);
    }
  }
 else {
    output.append(C_LOCKED_VALUE_NOLOCK);
  }
  return output.toString();
}
