{
  String contextMenu=null;
  if (res.getState() != C_STATE_DELETED) {
    if ((cms.getRequestContext().currentProject().isOnlineProject()) || (!res.inProject(cms.getRequestContext().currentProject()))) {
      if (res.isFile()) {
        contextMenu=C_DEFAULT_CONTEXTMENU;
      }
 else {
        contextMenu=C_DEFAULT_CONTEXTMENUFOLDER;
      }
    }
 else {
      I_CmsResourceType type=cms.getResourceType(res.getType());
      contextMenu=type.getResourceTypeName();
      if (res.isLocked()) {
        contextMenu+=C_CONTEXT_LOCK;
        if (cms.getRequestContext().currentUser().getId() == res.isLockedBy()) {
          contextMenu+=C_CONTEXT_LOCKUSER;
        }
      }
    }
  }
 else {
    contextMenu="";
  }
  return contextMenu;
}
