{
  StringBuffer output=new StringBuffer();
  if (file.isLocked()) {
    CmsUUID locked=file.isLockedBy();
    if (cms.getRequestContext().currentUser().getId().equals(locked)) {
      template.fastSetXmlData(C_LOCKEDBY,lang.getLanguageValue("explorer.lockedby") + cms.getRequestContext().currentUser().getName());
      output.append(C_LOCKED_VALUE_OWN);
    }
 else {
      template.fastSetXmlData(C_LOCKEDBY,lang.getLanguageValue("explorer.lockedby") + cms.lockedBy(cms.readAbsolutePath(file)).getName());
      output.append(C_LOCKED_VALUE_USER);
    }
  }
 else {
    output.append(C_LOCKED_VALUE_NOLOCK);
  }
  return output.toString();
}
