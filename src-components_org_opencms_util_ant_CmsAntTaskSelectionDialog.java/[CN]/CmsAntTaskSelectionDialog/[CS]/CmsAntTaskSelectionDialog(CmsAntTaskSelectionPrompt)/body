{
  super((JFrame)null,promptTask.getTitle(),true);
  m_promptTask=promptTask;
  m_allList=m_promptTask.getAllValues().split(CmsAntTaskSelectionPrompt.LIST_SEPARATOR);
  m_defList=getDefaultList();
  m_label=new JLabel(m_promptTask.getPrompt());
  addWindowListener(new WindowAdapter(){
    @Override public void windowClosed(    WindowEvent e){
      m_aborted=true;
      setVisible(false);
    }
  }
);
  getRootPane().setDefaultButton(m_ok);
  m_label.setBorder(m_border);
  if (!m_promptTask.isSingleSelection()) {
    JPanel p1=new JPanel();
    p1.add(new JLabel("Select: "));
    m_selAll.addActionListener(this);
    p1.add(m_selAll);
    m_selNone.addActionListener(this);
    p1.add(m_selNone);
    JPanel p=new JPanel(new BorderLayout());
    p.add(m_label,BorderLayout.NORTH);
    p.add(p1,BorderLayout.SOUTH);
    getContentPane().add(p,BorderLayout.NORTH);
  }
 else {
    getContentPane().add(m_label,BorderLayout.NORTH);
  }
  m_view.setBorder(m_border);
  m_selections=new JToggleButton[m_promptTask.getAllValues().split(CmsAntTaskSelectionPrompt.LIST_SEPARATOR).length];
  int elements=m_selections.length;
  GridLayout layout=new GridLayout((elements / m_promptTask.getColumns()) + 1,m_promptTask.getColumns());
  layout.setHgap(20);
  m_content.setLayout(layout);
  for (int i=0; i < m_selections.length; i++) {
    if (m_promptTask.isSingleSelection()) {
      m_selections[i]=new JRadioButton(m_allList[i].trim(),firstPositionOfItemInArray(m_defList,m_allList[i]) != -1);
    }
 else {
      m_selections[i]=new JCheckBox(m_allList[i].trim(),firstPositionOfItemInArray(m_defList,m_allList[i]) != -1);
    }
    m_content.add(m_selections[i]);
  }
  if (m_promptTask.isSingleSelection()) {
    ButtonGroup group=new ButtonGroup();
    for (int i=0; i < m_selections.length; i++) {
      group.add(m_selections[i]);
    }
  }
  getContentPane().add(m_view,BorderLayout.CENTER);
  m_buttons.setBorder(BorderFactory.createEmptyBorder(C_BORDER_SIZE,C_BORDER_SIZE,C_BORDER_SIZE / 2,C_BORDER_SIZE));
  m_ok.addActionListener(this);
  m_buttons.add(m_ok);
  m_cancel.addActionListener(this);
  m_buttons.add(m_cancel);
  getContentPane().add(m_buttons,BorderLayout.SOUTH);
  pack();
}
