{
  if (header == null) {
    m_locales=new ArrayList();
    m_locales.add(defaultLocale);
  }
 else {
    StringTokenizer tok=new StringTokenizer(header,LOCALE_SEPARATOR);
    while (tok.hasMoreTokens()) {
      AcceptLanguage acceptLang=new AcceptLanguage();
      String element=tok.nextToken().trim();
      int index;
      if ((index=element.indexOf(QUALITY_SEPARATOR)) != -1) {
        String q=element.substring(index);
        element=element.substring(0,index);
        if ((index=q.indexOf('=')) != -1) {
          try {
            acceptLang.m_quality=Float.valueOf(q.substring(index + 1));
          }
 catch (          NumberFormatException useDefault) {
          }
        }
      }
      element=element.trim();
      if ((index=element.indexOf('-')) == -1) {
        acceptLang.m_locale=new Locale(element,"");
      }
 else {
        acceptLang.m_locale=new Locale(element.substring(0,index),element.substring(index + 1));
      }
      m_acceptLanguage.add(acceptLang);
    }
    Collections.sort(m_acceptLanguage,Collections.reverseOrder());
    m_locales=new ArrayList(m_acceptLanguage.size());
    Iterator i=m_acceptLanguage.iterator();
    while (i.hasNext()) {
      AcceptLanguage lang=(AcceptLanguage)i.next();
      m_locales.add(lang.m_locale);
    }
  }
}
