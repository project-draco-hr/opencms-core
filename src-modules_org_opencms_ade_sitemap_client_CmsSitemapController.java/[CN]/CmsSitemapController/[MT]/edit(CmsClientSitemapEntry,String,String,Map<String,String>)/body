{
  boolean changedTitle=((title != null) && !title.trim().equals(entry.getTitle()));
  boolean changedVfsRef=((vfsReference != null) && !vfsReference.trim().equals(entry.getVfsPath()));
  boolean changedProperties=false;
  if (properties != null) {
    for (    Map.Entry<String,String> prop : properties.entrySet()) {
      String newValue=prop.getValue();
      String value=entry.getProperties().get(prop.getKey());
      if (newValue == null) {
        if (value != null) {
          changedProperties=true;
          break;
        }
      }
 else       if (!newValue.equals(value)) {
        changedProperties=true;
        break;
      }
    }
  }
  if (!changedTitle && !changedVfsRef && !changedProperties) {
    return;
  }
  CmsClientSitemapEntry newEntry=new CmsClientSitemapEntry(entry);
  if (changedTitle) {
    newEntry.setTitle(title);
  }
  if (changedVfsRef) {
    newEntry.setVfsPath(vfsReference);
  }
  if (changedProperties) {
    newEntry.getProperties().putAll(properties);
  }
  addChange(new CmsClientSitemapChangeEdit(entry,newEntry),false);
}
