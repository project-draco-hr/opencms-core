{
  if (m_uptodateModules == null) {
    m_uptodateModules=new ArrayList();
    m_modulesToUpdate=new ArrayList();
    Map installedModules=getInstalledModules();
    Map availableModules=getAvailableModules();
    Iterator itMods=availableModules.entrySet().iterator();
    while (itMods.hasNext()) {
      Map.Entry entry=(Map.Entry)itMods.next();
      String name=(String)entry.getKey();
      CmsModuleVersion instVer=(CmsModuleVersion)installedModules.get(name);
      CmsModuleVersion availVer=((CmsModule)entry.getValue()).getVersion();
      boolean uptodate=(!UPDATE_ALL_MODULES) && ((instVer != null) && (instVer.compareTo(availVer) >= 0));
      if (uptodate) {
        m_uptodateModules.add(name);
      }
 else {
        m_modulesToUpdate.add(name);
      }
      if (LOG.isDebugEnabled()) {
        LOG.debug(name + " --- installed: " + instVer+ " available: "+ availVer+ " --- uptodate: "+ uptodate);
      }
    }
  }
  return m_uptodateModules;
}
