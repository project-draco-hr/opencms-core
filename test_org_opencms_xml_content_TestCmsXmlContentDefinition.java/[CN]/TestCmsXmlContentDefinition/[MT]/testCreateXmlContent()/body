{
  String schemaUri="http://www.opencms.org/test.xsd";
  CmsXmlContentDefinition cd1=new CmsXmlContentDefinition("Article",schemaUri);
  cd1.addType(new CmsXmlStringValue("Author","1","1"));
  cd1.addType(new CmsXmlStringValue("Teaser","1","1"));
  cd1.addType(new CmsXmlStringValue("Text","1","1"));
  cd1.addType(new CmsXmlDateTimeValue("Date","1","1"));
  cd1.addType(new CmsXmlStringValue("Option","0","1"));
  CmsXmlEntityResolver.cacheSystemId(schemaUri,cd1.getSchema().asXML().getBytes(CmsEncoder.C_UTF8_ENCODING));
  CmsXmlEntityResolver resolver=new CmsXmlEntityResolver(null);
  Locale locale=Locale.ENGLISH;
  CmsXmlContent content=CmsXmlContentFactory.createDocument(null,locale,CmsEncoder.C_UTF8_ENCODING,cd1);
  content.validateXmlStructure(resolver);
  cd1.addType(new CmsXmlStringValue("Kaputt","1","1"));
  CmsXmlEntityResolver.cacheSystemId(schemaUri,cd1.getSchema().asXML().getBytes(CmsEncoder.C_UTF8_ENCODING));
  try {
    content.validateXmlStructure(resolver);
    fail("Validation wrongly works with modified cd");
  }
 catch (  CmsXmlException e) {
  }
  System.out.println(content.toString());
}
