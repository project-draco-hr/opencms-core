{
  CmsGallerySearchResultList result=null;
  if ((m_cms != null) && (m_index != null)) {
    try {
      result=m_index.searchGallery(m_cms,params);
      if (result.size() > 0) {
        result.calculatePages(params.getResultPage(),params.getMatchesPerPage());
      }
 else {
        result=new CmsGallerySearchResultList();
      }
    }
 catch (    Exception exc) {
      if (LOG.isDebugEnabled()) {
        LOG.debug(Messages.get().getBundle().key(Messages.LOG_SEARCHING_FAILED_0),exc);
      }
      m_lastException=exc;
    }
  }
  return result;
}
