{
  m_popup.setWidth(450);
  m_popup.setHeight(280);
  if (m_previewHandlerRegistration != null) {
    m_previewHandlerRegistration.removeHandler();
  }
  m_previewHandlerRegistration=Event.addNativePreviewHandler(new CloseEventPreviewHandler());
  m_popup.showRelativeTo(m_colorField);
  m_popup.addStyleName(org.opencms.ade.contenteditor.client.css.I_CmsLayoutBundle.INSTANCE.widgetCss().colorpickerpopup());
  if (m_popup.getWidgetCount() == 0) {
    m_popup.setModal(false);
    org.opencms.gwt.client.ui.input.colorpicker.CmsColorPicker picker=new org.opencms.gwt.client.ui.input.colorpicker.CmsColorPicker();
    try {
      picker.setHex(m_textboxColorValue.getText().replace("#",""));
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
    m_popup.add(picker);
  }
  m_xcoordspopup=m_popup.getPopupLeft();
  m_ycoordspopup=m_popup.getPopupTop();
}
