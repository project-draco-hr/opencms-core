{
  CmsSearchDocumentType documenttype=null;
  String className=null;
  String name=null;
  I_CmsDocumentFactory documentFactory=null;
  List resourceTypes=null;
  List mimeTypes=null;
  Class c=null;
  m_documentTypes=new HashMap();
  List keys=new ArrayList(m_documentTypeConfigs.keySet());
  for (int i=0, n=keys.size(); i < n; i++) {
    documenttype=(CmsSearchDocumentType)(m_documentTypeConfigs.get(keys.get(i)));
    name=documenttype.getName();
    try {
      className=documenttype.getClassName();
      resourceTypes=documenttype.getResourceTypes();
      mimeTypes=documenttype.getMimeTypes();
      if (name == null) {
        throw new CmsIndexException(Messages.get().container(Messages.ERR_DOCTYPE_NO_NAME_1,this.getClass().getName()));
      }
      if (className == null) {
        throw new CmsIndexException(Messages.get().container(Messages.ERR_DOCTYPE_NO_CLASS_DEF_1,this.getClass().getName()));
      }
      if (resourceTypes.size() == 0) {
        throw new CmsIndexException(Messages.get().container(Messages.ERR_DOCTYPE_NO_RESOURCETYPE_DEF_1,this.getClass().getName()));
      }
      try {
        c=Class.forName(className);
        documentFactory=(I_CmsDocumentFactory)c.getConstructor(new Class[]{String.class}).newInstance(new Object[]{name});
      }
 catch (      ClassNotFoundException exc) {
        throw new CmsIndexException(Messages.get().container(Messages.ERR_DOCCLASS_NOT_FOUND_2,this.getClass().getName(),className),exc);
      }
catch (      Exception exc) {
        throw new CmsIndexException(Messages.get().container(Messages.ERR_DOCCLASS_INIT_2,this.getClass().getName(),className),exc);
      }
      for (Iterator key=documentFactory.getDocumentKeys(resourceTypes,mimeTypes).iterator(); key.hasNext(); ) {
        m_documentTypes.put(key.next(),documentFactory);
      }
    }
 catch (    CmsException e) {
      if (LOG.isWarnEnabled()) {
        LOG.warn(Messages.get().key(Messages.LOG_DOCTYPE_CONFIG_FAILED_1,name),e);
      }
    }
  }
}
