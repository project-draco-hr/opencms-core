{
  CmsSearchDocumentType documenttype=null;
  String className=null;
  String name=null;
  I_CmsDocumentFactory documentFactory=null;
  List resourceTypes=null;
  List mimeTypes=null;
  Class c=null;
  m_documentTypes=new HashMap();
  List keys=new ArrayList(m_documentTypeConfigs.keySet());
  for (int i=0, n=keys.size(); i < n; i++) {
    documenttype=(CmsSearchDocumentType)(m_documentTypeConfigs.get(keys.get(i)));
    name=documenttype.getName();
    try {
      className=documenttype.getClassName();
      resourceTypes=documenttype.getResourceTypes();
      mimeTypes=documenttype.getMimeTypes();
      if (name == null) {
        throw new CmsIndexException("[" + this.getClass().getName() + "] "+ "No name defined for documenttype");
      }
      if (className == null) {
        throw new CmsIndexException("[" + this.getClass().getName() + "] "+ "No class defined for documenttype");
      }
      if (resourceTypes.size() == 0) {
        throw new CmsIndexException("[" + this.getClass().getName() + "] "+ "No resourcetype/moduletype defined for documenttype");
      }
      try {
        c=Class.forName(className);
        documentFactory=(I_CmsDocumentFactory)c.getConstructor(new Class[]{m_cms.getClass(),String.class}).newInstance(new Object[]{m_cms,name});
      }
 catch (      ClassNotFoundException exc) {
        throw new CmsIndexException("[" + this.getClass().getName() + "] "+ "Documentclass "+ className+ " not found",exc);
      }
catch (      Exception exc) {
        throw new CmsIndexException("[" + this.getClass().getName() + "] "+ "Instanciation of documentclass "+ className+ " failed",exc);
      }
      for (Iterator key=documentFactory.getDocumentKeys(resourceTypes,mimeTypes).iterator(); key.hasNext(); ) {
        m_documentTypes.put(key.next(),documentFactory);
      }
    }
 catch (    CmsException e) {
      if (OpenCms.getLog(this).isWarnEnabled()) {
        OpenCms.getLog(this).warn("Configuration of documenttype " + name + " failed",e);
      }
    }
  }
}
