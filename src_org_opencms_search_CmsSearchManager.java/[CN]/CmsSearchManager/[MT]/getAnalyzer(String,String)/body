{
  Analyzer analyzer=null;
  Class<?> analyzerClass;
  try {
    analyzerClass=Class.forName(className);
  }
 catch (  ClassNotFoundException e) {
    analyzerClass=Class.forName(LUCENE_ANALYZER + className);
  }
  if (StandardAnalyzer.class.equals(analyzerClass)) {
    analyzer=new StandardAnalyzer(CmsSearchIndex.LUCENE_VERSION);
  }
 else   if (CmsGallerySearchAnalyzer.class.equals(analyzerClass)) {
    analyzer=new CmsGallerySearchAnalyzer(CmsSearchIndex.LUCENE_VERSION);
  }
 else   if ((snowballStemmer != null) && SnowballAnalyzer.class.equals(analyzerClass)) {
    analyzer=new SnowballAnalyzer(CmsSearchIndex.LUCENE_VERSION,snowballStemmer);
  }
 else {
    boolean hasEmpty=false;
    boolean hasVersion=false;
    Constructor<?>[] constructors=analyzerClass.getConstructors();
    for (int i=0; i < constructors.length; i++) {
      Constructor<?> c=constructors[i];
      Class<?>[] parameters=c.getParameterTypes();
      if (parameters.length == 0) {
        hasEmpty=true;
      }
      if ((parameters.length == 1) && parameters[0].equals(Version.class)) {
        hasVersion=true;
      }
      if (hasVersion) {
        analyzer=(Analyzer)analyzerClass.getDeclaredConstructor(new Class[]{Version.class}).newInstance(CmsSearchIndex.LUCENE_VERSION);
      }
 else       if (hasEmpty) {
        analyzer=(Analyzer)analyzerClass.newInstance();
      }
    }
  }
  return analyzer;
}
