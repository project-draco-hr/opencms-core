{
  String mimeType=OpenCms.getResourceManager().getMimeType(resource.getRootPath(),null,CmsResourceManager.MIMETYPE_TEXT);
  I_CmsDocumentFactory result=null;
  String typeName=null;
  try {
    typeName=OpenCms.getResourceManager().getResourceType(resource.getTypeId()).getTypeName();
  }
 catch (  CmsLoaderException e) {
  }
  if (typeName != null) {
    String documentTypeKey=A_CmsVfsDocument.getDocumentKey(typeName,mimeType);
    result=(I_CmsDocumentFactory)m_documentTypes.get(documentTypeKey);
    if (result == null) {
      result=(I_CmsDocumentFactory)m_documentTypes.get(A_CmsVfsDocument.getDocumentKey(typeName,null));
    }
  }
  return result;
}
