{
  String documentTypeKey=resource.getType() + ":" + OpenCms.getMimeType(resource.getName(),null);
  I_CmsDocumentFactory factory=(I_CmsDocumentFactory)m_documenttypes.get(documentTypeKey);
  if (factory == null) {
    factory=(I_CmsDocumentFactory)m_documenttypes.get(resource.getType() + "");
  }
  return factory;
}
