{
  String documentTypeKey;
  if (resource.getObject() instanceof CmsMasterDataSet) {
    documentTypeKey="COS" + resource.getType();
  }
 else {
    documentTypeKey="VFS" + resource.getType() + ":"+ resource.getMimetype();
  }
  I_CmsDocumentFactory factory=(I_CmsDocumentFactory)m_documenttypes.get(documentTypeKey);
  if (factory == null) {
    factory=(I_CmsDocumentFactory)m_documenttypes.get(resource.getType() + "");
  }
  return factory;
}
