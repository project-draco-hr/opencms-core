{
  cms.checkRole(CmsRole.SEARCH_MANAGER);
  try {
    m_adminCms=OpenCms.initCmsObject(cms);
  }
 catch (  CmsException e) {
  }
  m_adminCms.getRequestContext().setSiteRoot("/");
  LRUMap hashMap=new LRUMap(Integer.parseInt(m_resultCacheSize));
  m_resultCache=Collections.synchronizedMap(hashMap);
  if (OpenCms.getMemoryMonitor().enabled()) {
    OpenCms.getMemoryMonitor().register(getClass().getName() + ".m_resultCache",hashMap);
  }
  initializeIndexes();
  Similarity.setDefault(new CmsSearchSimilarity());
  OpenCms.addCmsEventListener(this,new int[]{I_CmsEventListener.EVENT_CLEAR_CACHES,I_CmsEventListener.EVENT_PUBLISH_PROJECT});
}
