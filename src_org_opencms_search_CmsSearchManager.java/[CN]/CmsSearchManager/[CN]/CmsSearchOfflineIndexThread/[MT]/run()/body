{
  I_CmsReport report=new CmsLogReport(m_adminCms.getRequestContext().getLocale(),CmsSearchManager.class);
  long offlineUpdateFrequency=OpenCms.getSearchManager().getOfflineUpdateFrequency();
  boolean frequencyChange=false;
  try {
    while (m_isAlive) {
      try {
        frequencyChange=false;
        sleep(offlineUpdateFrequency);
      }
 catch (      InterruptedException e) {
        if (!m_isAlive) {
          continue;
        }
        if (offlineUpdateFrequency != OpenCms.getSearchManager().getOfflineUpdateFrequency()) {
          frequencyChange=interrupted();
          offlineUpdateFrequency=OpenCms.getSearchManager().getOfflineUpdateFrequency();
        }
      }
      if (m_isAlive && !frequencyChange) {
        List<CmsPublishedResource> resourcesToIndex=getResourcesToIndex();
        if (resourcesToIndex.size() > 0) {
          updateIndexOffline(report,resourcesToIndex);
        }
      }
    }
  }
  finally {
    m_isAlive=false;
  }
}
