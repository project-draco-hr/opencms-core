{
  int ret=-1;
  I_CmsSession session=CmsXmlTemplateLoader.getSession(cms.getRequestContext(),true);
  String chosenFolder=(String)parameters.get(CmsWorkplaceDefault.C_PARA_FOLDER);
  if (chosenFolder == null) {
    chosenFolder=(String)session.getValue(CmsWorkplaceDefault.C_PARA_FOLDER);
  }
  if (chosenFolder == null) {
    chosenFolder="";
  }
  List folders=cms.getSubFolders(CmsWorkplaceDefault.C_VFS_GALLERY_EXTERNALLINKS);
  int numFolders=folders.size();
  for (int i=0; i < numFolders; i++) {
    CmsResource currFolder=(CmsResource)folders.get(i);
    String name=currFolder.getName();
    if (chosenFolder.equals(cms.getSitePath(currFolder))) {
      ret=i;
    }
    values.addElement(cms.getSitePath(currFolder));
    names.addElement(name);
  }
  return new Integer(ret);
}
