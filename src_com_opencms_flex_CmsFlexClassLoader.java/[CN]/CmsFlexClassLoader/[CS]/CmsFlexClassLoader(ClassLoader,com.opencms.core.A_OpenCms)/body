{
  super(parent);
  if (DEBUG)   System.err.println("FlexClassLoader: Initializing...");
  try {
    m_cms=new com.opencms.file.CmsObject();
    openCms.initUser(m_cms,null,null,com.opencms.core.I_CmsConstants.C_USER_GUEST,com.opencms.core.I_CmsConstants.C_GROUP_GUEST,com.opencms.core.I_CmsConstants.C_PROJECT_ONLINE_ID,null);
  }
 catch (  Exception e) {
    if (DEBUG)     System.err.println("FlexClassLoader: Aborting initialization, phase 1 caught exception " + e);
    log("Aborting initialization, phase 1 (creating CmsObject) caught exception " + e);
    m_cms=null;
    return;
  }
  m_repository=new java.util.Vector();
  try {
    com.opencms.file.I_CmsRegistry reg=m_cms.getRegistry();
    if (reg != null) {
      String[] repositoriesFromRegistry=reg.getRepositories();
      for (int i=0; i < repositoriesFromRegistry.length; i++) {
        if (DEBUG)         System.err.println("FlexClassLoader: Adding repository from registry: " + repositoriesFromRegistry[i]);
        try {
          m_cms.readFileHeader(repositoriesFromRegistry[i]);
          if (!m_repository.contains(repositoriesFromRegistry[i])) {
            m_repository.addElement(repositoriesFromRegistry[i]);
          }
        }
 catch (        com.opencms.core.CmsException e) {
        }
      }
    }
  }
 catch (  Exception e) {
    if (DEBUG)     System.err.println("FlexClassLoader: Aborting initialization, phase 2 caught exception " + e);
    log("Aborting initialization, phase 2 (setting repositories) caught exception " + e);
    m_cms=null;
    return;
  }
  if (DEBUG)   System.err.println("FlexClassLoader: Initializing finished successfully!");
  log("Initializing finished successfully!");
}
