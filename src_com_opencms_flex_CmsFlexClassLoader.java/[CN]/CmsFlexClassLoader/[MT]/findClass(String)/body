{
  if (m_cms == null)   throw new ClassNotFoundException(name);
  if (DEBUG)   System.err.println("FlexClassLoader: Looking for class " + name);
  Class c=null;
  java.util.Enumeration allRepositories=m_repository.elements();
  String filename=null;
  byte[] myClassData=null;
  while ((allRepositories.hasMoreElements()) && (myClassData == null)) {
    filename=(String)allRepositories.nextElement();
    if (filename.endsWith("/")) {
      String classname=name.replace('.','/');
      filename=filename + classname + ".class";
    }
    try {
      com.opencms.file.CmsFile file=m_cms.readFile(filename);
      myClassData=file.getContents();
      if (DEBUG)       System.err.println("FlexClassLoader: Found class " + filename);
    }
 catch (    Exception e) {
      myClassData=null;
    }
  }
  if (myClassData == null) {
    throw new ClassNotFoundException(name);
  }
 else {
    try {
      c=defineClass(null,myClassData,0,myClassData.length);
    }
 catch (    ClassFormatError e) {
      throw new ClassNotFoundException(filename + " seems to be no class file. Sorry.");
    }
catch (    Exception e) {
      throw new ClassNotFoundException(e.toString());
    }
catch (    Error e) {
      throw new ClassNotFoundException("Something really bad happened while loading class " + name + ": "+ e);
    }
  }
  log("Successfully loaded class " + name);
  return c;
}
