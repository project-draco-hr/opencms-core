{
  HttpSession session=((HttpServletRequest)cms.getRequestContext().getRequest().getOriginalRequest()).getSession(true);
  String filename=(String)session.getValue(C_PARA_FILE);
  String suffix=filename.substring(filename.lastIndexOf('.') + 1);
  suffix=suffix.toLowerCase();
  Hashtable extensions=cms.readFileExtensions();
  String resType=new String();
  if (extensions != null) {
    resType=(String)extensions.get(suffix);
  }
  if (resType == null) {
    resType="";
  }
  int ret=-1;
  if (m_names == null || m_values == null) {
    m_names=new Vector();
    m_values=new Vector();
    CmsXmlWpConfigFile configFile=new CmsXmlWpConfigFile(cms);
    configFile.getWorkplaceIniData(m_names,m_values,"RESOURCETYPES","RESOURCE");
  }
  if (names == null) {
    names=new Vector();
  }
  if (values == null) {
    values=new Vector();
  }
  if (descriptions == null) {
    descriptions=new Vector();
  }
  int numViews=m_names.size();
  for (int i=0; i < numViews; i++) {
    String loopValue=(String)m_values.elementAt(i);
    String loopName=(String)m_names.elementAt(i);
    values.addElement(loopValue);
    names.addElement("file_" + loopName);
    String descr;
    if (lang != null) {
      descr=lang.getLanguageValue("fileicon." + loopName);
    }
 else {
      descr=loopName;
    }
    descriptions.addElement(descr);
    if (resType.equals(loopName)) {
      ret=i;
    }
  }
  return ret;
}
