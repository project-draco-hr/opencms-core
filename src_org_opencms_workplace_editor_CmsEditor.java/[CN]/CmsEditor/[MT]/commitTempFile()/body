{
  int curProject=getSettings().getProject();
  int tempProject=0;
  try {
    tempProject=Integer.parseInt(getCms().getRegistry().getSystemValue("tempfileproject"));
  }
 catch (  Exception e) {
    throw new CmsException("Can not read projectId of tempfileproject for creating temporary file for editing! " + e.toString());
  }
  getCms().getRequestContext().setCurrentProject(tempProject);
  CmsFile tempFile=getCms().readFile(getParamTempfile());
  Map properties=getCms().readProperties(getParamTempfile());
  getCms().getRequestContext().setCurrentProject(curProject);
  CmsFile orgFile=getCms().readFile(getParamResource());
  orgFile.setContents(tempFile.getContents());
  getCms().writeFile(orgFile);
  Iterator keys=properties.keySet().iterator();
  while (keys.hasNext()) {
    String keyName=(String)keys.next();
    getCms().writeProperty(getParamResource(),keyName,(String)properties.get(keyName));
  }
  A_CmsXmlContent.clearFileCache(getCms().getRequestContext().currentProject().getName() + ":" + getCms().getRequestContext().addSiteRoot(getParamResource()));
}
