{
  echo("Testing testByContextWithQuery resource collector");
  I_CmsResourceCollector collector=new CmsSolrCollector();
  StringBuffer q=new StringBuffer(128);
  q.append("q=");
  q.append("+type:" + CmsResourceTypePlain.getStaticTypeName());
  q.append("&rows=" + 3);
  q.append("&sort=" + I_CmsSearchField.FIELD_DATE_LASTMODIFIED + " desc");
  List<CmsResource> resources=collector.getResults(getCmsObject(),"byContext",q.toString());
  assertEquals(3,resources.size());
  CmsResource res;
  res=resources.get(0);
  assertEquals("/sites/default/folder1/sub1/file5",res.getRootPath());
  res=resources.get(1);
  assertEquals("/sites/default/folder1/file4",res.getRootPath());
  res=resources.get(2);
  assertEquals("/sites/default/folder1/file3",res.getRootPath());
}
