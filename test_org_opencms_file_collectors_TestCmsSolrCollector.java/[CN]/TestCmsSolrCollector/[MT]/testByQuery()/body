{
  CmsObject cms=getCmsObject();
  String resTypePlainName=CmsResourceTypePlain.getStaticTypeName();
  echo("Testing allInFolderPriorityDateDesc resource collector");
  I_CmsResourceCollector collector=new CmsSolrCollector();
  StringBuffer q=new StringBuffer(128);
  q.append("q=");
  q.append("+parent-folders:/sites/default/folder1/ -parent-folders:/sites/default/folder1/*/");
  q.append(" +type:" + resTypePlainName);
  q.append("&rows=" + 3);
  q.append("&start=0&type=dismax&fl=*,score");
  q.append("&sort=" + I_CmsSearchField.FIELD_DATE_LASTMODIFIED + " desc");
  List<CmsResource> resources=collector.getResults(cms,"byQuery",q.toString());
  assertEquals(3,resources.size());
  CmsResource res;
  res=resources.get(0);
  assertEquals("/sites/default/folder1/file4",res.getRootPath());
  res=resources.get(1);
  assertEquals("/sites/default/folder1/file3",res.getRootPath());
  res=resources.get(2);
  assertEquals("/sites/default/folder1/file2",res.getRootPath());
}
