{
  CmsXmlEntityResolver resolver=new CmsXmlEntityResolver(null);
  String content;
  content=CmsFileUtil.readFile("org/opencms/xml/content/xmlcontent-definition-1.xsd",CmsEncoder.ENCODING_UTF_8);
  CmsXmlContentDefinition definition=CmsXmlContentDefinition.unmarshal(content,SCHEMA_SYSTEM_ID_1,resolver);
  content=CmsFileUtil.readFile("org/opencms/xml/content/xmlcontent-1.xml",CmsEncoder.ENCODING_UTF_8);
  CmsXmlEntityResolver.cacheSystemId(SCHEMA_SYSTEM_ID_1,definition.getSchema().asXML().getBytes(CmsEncoder.ENCODING_UTF_8));
  CmsXmlContent xmlcontent=CmsXmlContentFactory.unmarshal(content,CmsEncoder.ENCODING_UTF_8,resolver);
  String nn="String";
  CmsXmlStringValue stringValue=(CmsXmlStringValue)xmlcontent.getValue(nn,Locale.ENGLISH,0);
  assertEquals("Multitest 1",stringValue.getStringValue(null));
  I_CmsXmlContentValue value=xmlcontent.addValue(null,nn,Locale.ENGLISH,1);
  value.setStringValue(null,"Node 2");
  value=xmlcontent.addValue(null,nn,Locale.ENGLISH,2);
  value.setStringValue(null,"Node 3");
  value=xmlcontent.addValue(null,nn,Locale.ENGLISH,3);
  String node4="Node 4";
  value.setStringValue(null,node4);
  int maxIndex=xmlcontent.getValue(nn,Locale.ENGLISH).getMaxIndex();
  assertEquals(4,maxIndex);
  I_CmsXmlContentValue checkValue=xmlcontent.getValue(nn,Locale.ENGLISH,maxIndex - 1);
  assertEquals(node4,checkValue.getStringValue(null));
  value.moveDown();
  value.moveDown();
  value.moveDown();
  System.out.println(xmlcontent.toString());
  checkValue=xmlcontent.getValue(nn,Locale.ENGLISH,0);
  assertEquals(node4,checkValue.getStringValue(null));
  value.moveDown();
  checkValue=xmlcontent.getValue(nn,Locale.ENGLISH,0);
  assertEquals(node4,checkValue.getStringValue(null));
  value.moveUp();
  value.moveUp();
  value.moveUp();
  System.out.println(xmlcontent.toString());
  checkValue=xmlcontent.getValue(nn,Locale.ENGLISH,maxIndex - 1);
  assertEquals(node4,checkValue.getStringValue(null));
  value.moveUp();
  checkValue=xmlcontent.getValue(nn,Locale.ENGLISH,maxIndex - 1);
  assertEquals(node4,checkValue.getStringValue(null));
}
