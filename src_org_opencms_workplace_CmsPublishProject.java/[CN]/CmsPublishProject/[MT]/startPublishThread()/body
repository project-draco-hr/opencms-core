{
  CmsPublishThread thread=null;
  CmsPublishList publishList=null;
  publishList=getSettings().getPublishList();
  if (publishList != null) {
    thread=new CmsPublishThread(getCms(),publishList);
  }
 else {
    if ("true".equals(getParamDirectpublish())) {
      thread=new CmsPublishThread(getCms(),getParamResource(),"true".equals(getParamPublishsiblings()),getSettings());
    }
 else {
      try {
        int projectId=Integer.parseInt(getParamProjectid());
        getCms().getRequestContext().setCurrentProject(projectId);
      }
 catch (      Exception e) {
        OpenCms.getLog(this).error("Error switching project for publishing",e);
      }
      thread=new CmsPublishThread(getCms());
    }
  }
  setParamThread(thread.getId().toString());
  setParamThreadHasNext("false");
  thread.start();
}
