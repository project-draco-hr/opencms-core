{
  CmsLock lock=cms.getLock(resource);
  if (resource.isFile()) {
    return true;
  }
  if (!lock.isNullLock()) {
    return false;
  }
  List allFiles=cms.getFilesInFolder(cms.readAbsolutePath(resource));
  List allFolders=cms.getSubFolders(cms.readAbsolutePath(resource));
  for (int i=0; i < allFiles.size(); i++) {
    CmsResource curFile=(CmsResource)allFiles.get(i);
    lock=cms.getLock(curFile);
    if (!lock.isNullLock()) {
      return false;
    }
  }
  for (int j=0; j < allFolders.size(); j++) {
    CmsResource curFolder=(CmsResource)allFolders.get(j);
    if (!checkLocked(cms,curFolder)) {
      return false;
    }
  }
  return true;
}
