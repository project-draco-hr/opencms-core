{
  if (resource.isFile()) {
    return true;
  }
  if (resource.isLocked()) {
    return false;
  }
  Vector allFiles=cms.getFilesInFolder(resource.getAbsolutePath());
  Vector allFolders=cms.getSubFolders(resource.getAbsolutePath());
  for (int i=0; i < allFiles.size(); i++) {
    CmsResource curFile=(CmsResource)allFiles.elementAt(i);
    if (curFile.isLocked()) {
      return false;
    }
  }
  for (int j=0; j < allFolders.size(); j++) {
    CmsResource curFolder=(CmsResource)allFolders.elementAt(j);
    if (!checkLocked(cms,curFolder)) {
      return false;
    }
  }
  return true;
}
