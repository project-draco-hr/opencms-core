{
  List resources=securityManager.readChildResources(cms.getRequestContext(),resource,CmsResourceFilter.IGNORE_EXPIRATION,true,true);
  Set deletedResources=new HashSet();
  for (int i=0; i < resources.size(); i++) {
    CmsResource childResource=(CmsResource)resources.get(i);
    if (siblingMode == I_CmsConstants.C_DELETE_OPTION_DELETE_SIBLINGS && deletedResources.contains(childResource.getResourceId())) {
      continue;
    }
    if (childResource.isFolder()) {
      deleteResource(cms,securityManager,childResource,siblingMode);
    }
 else {
      getResourceType(childResource.getTypeId()).deleteResource(cms,securityManager,childResource,siblingMode);
    }
    deletedResources.add(childResource.getResourceId());
  }
  deletedResources.clear();
  super.deleteResource(cms,securityManager,resource,siblingMode);
}
