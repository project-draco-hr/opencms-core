{
  Event nativeEvent=Event.as(event.getNativeEvent());
  if (!hasPageChanged()) {
    return;
  }
  if ((nativeEvent.getTypeInt() == Event.ONCLICK)) {
    EventTarget target=nativeEvent.getEventTarget();
    if (!Element.is(target)) {
      return;
    }
    Element element=Element.as(target);
    element=CmsDomUtil.getAncestor(element,CmsDomUtil.Tag.a);
    if (element == null) {
      return;
    }
    AnchorElement anc=AnchorElement.as(element);
    final String uri=anc.getHref();
    if (CmsStringUtil.isEmptyOrWhitespaceOnly(uri)) {
      return;
    }
    nativeEvent.preventDefault();
    nativeEvent.stopPropagation();
    CmsLeavePageDialog dialog=new CmsLeavePageDialog(uri,this,null);
    dialog.center();
  }
  if ((event.getTypeInt() == Event.ONKEYPRESS) && (nativeEvent.getKeyCode() == 116)) {
    nativeEvent.preventDefault();
    nativeEvent.stopPropagation();
    CmsLeavePageDialog dialog=new CmsLeavePageDialog(Window.Location.getHref(),this,null);
    dialog.center();
  }
}
