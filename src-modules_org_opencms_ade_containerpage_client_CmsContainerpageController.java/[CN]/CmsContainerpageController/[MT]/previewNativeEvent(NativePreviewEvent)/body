{
  Event nativeEvent=Event.as(event.getNativeEvent());
  if (m_pageChanged) {
    if ((nativeEvent.getTypeInt() == Event.ONCLICK)) {
      CmsDebugLog.getInstance().printLine("Previewing event");
      EventTarget target=nativeEvent.getEventTarget();
      if (Element.is(target)) {
        Element element=Element.as(target);
        CmsDebugLog.getInstance().printLine("Checking element");
        element=CmsDomUtil.getAncestor(element,CmsDomUtil.Tag.a);
        if (element != null) {
          AnchorElement anc=AnchorElement.as(element);
          final String uri=anc.getHref();
          if (CmsStringUtil.isEmptyOrWhitespaceOnly(uri)) {
            return;
          }
          nativeEvent.preventDefault();
          nativeEvent.stopPropagation();
          CmsLeavePageDialog dialog=new CmsLeavePageDialog(uri,this,null);
          CmsDebugLog.getInstance().printLine("Event canceled ++");
          dialog.center();
        }
      }
    }
    if ((event.getTypeInt() == Event.ONKEYPRESS) && (nativeEvent.getKeyCode() == 116)) {
      nativeEvent.preventDefault();
      nativeEvent.stopPropagation();
      CmsLeavePageDialog dialog=new CmsLeavePageDialog(Window.Location.getHref(),this,null);
      dialog.center();
      CmsDebugLog.getInstance().printLine("Reload canceled");
    }
  }
}
