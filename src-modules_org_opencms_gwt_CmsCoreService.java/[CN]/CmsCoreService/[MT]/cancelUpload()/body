{
  if (getRequest().getSession().getAttribute(CmsUploadBean.SESSION_ATTRIBUTE_LISTENER_ID) != null) {
    CmsUUID listenerId=(CmsUUID)getRequest().getSession().getAttribute(CmsUploadBean.SESSION_ATTRIBUTE_LISTENER_ID);
    CmsUploadListener listener=CmsUploadBean.getCurrentListener(listenerId);
    if ((listener != null) && !listener.isCanceled()) {
      listener.setException(new CmsUploadException("Upload canceled by the user."));
    }
  }
}
