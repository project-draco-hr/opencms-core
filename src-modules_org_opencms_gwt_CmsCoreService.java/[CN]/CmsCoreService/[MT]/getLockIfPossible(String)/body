{
  CmsLock lock=getCmsObject().getLock(resource);
  if ((lock != null) && lock.isOwnedBy(getCmsObject().getRequestContext().currentUser()) && !lock.isOwnedInProjectBy(getCmsObject().getRequestContext().currentUser(),getCmsObject().getRequestContext().currentProject())) {
    getCmsObject().changeLock(resource);
  }
  getCmsObject().lockResource(resource);
  lock=getCmsObject().getLock(resource);
  return lock;
}
