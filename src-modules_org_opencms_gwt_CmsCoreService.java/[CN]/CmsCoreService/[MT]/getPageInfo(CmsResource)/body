{
  CmsObject cms=getCmsObject();
  try {
    CmsListInfoBean result=new CmsListInfoBean();
    result.setResourceState(res.getState());
    String resourceSitePath=cms.getRequestContext().removeSiteRoot(res.getRootPath());
    String title=cms.readPropertyObject(res,CmsPropertyDefinition.PROPERTY_TITLE,false).getValue();
    if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(title)) {
      result.setTitle(title);
    }
 else {
      result.setTitle("No title attribute set for this resource");
    }
    result.setSubTitle(resourceSitePath);
    String secure=cms.readPropertyObject(res,CmsPropertyDefinition.PROPERTY_SECURE,true).getValue();
    if (Boolean.parseBoolean(secure)) {
      result.setPageIcon(CmsListInfoBean.PageIcon.secure);
    }
 else {
      String export=cms.readPropertyObject(res,CmsPropertyDefinition.PROPERTY_EXPORT,true).getValue();
      if (Boolean.parseBoolean(export)) {
        result.setPageIcon(CmsListInfoBean.PageIcon.export);
      }
 else {
        result.setPageIcon(CmsListInfoBean.PageIcon.standard);
      }
    }
    String resTypeName=OpenCms.getResourceManager().getResourceType(res.getTypeId()).getTypeName();
    String key=OpenCms.getWorkplaceManager().getExplorerTypeSetting(resTypeName).getKey();
    Locale currentLocale=getCmsObject().getRequestContext().getLocale();
    String resTypeNiceName=OpenCms.getWorkplaceManager().getMessages(currentLocale).key(key);
    result.addAdditionalInfo("Type",resTypeNiceName);
    return result;
  }
 catch (  CmsException e) {
    error(e);
    return null;
  }
}
