{
  CmsObject cms=getCmsObject();
  String navigationUri=cms.getRequestContext().getUri();
  boolean toolbarVisible=getSessionCache().isToolbarVisible();
  CmsUUID structureId=null;
  try {
    CmsResource requestedResource=cms.readResource(cms.getRequestContext().getUri());
    structureId=requestedResource.getStructureId();
  }
 catch (  CmsException e) {
    throw new CmsRuntimeException(e.getMessageContainer(),e);
  }
  CmsCoreData data=new CmsCoreData(EDITOR_URI,EDITOR_BACKLINK_URI,EDITOR_DELETE_URI,OpenCms.getSystemInfo().getOpenCmsContext(),cms.getRequestContext().getSiteRoot(),cms.getRequestContext().getLocale().toString(),OpenCms.getWorkplaceManager().getWorkplaceLocale(cms).toString(),cms.getRequestContext().getUri(),navigationUri,structureId,new HashMap<String,String>(OpenCms.getResourceManager().getExtensionMapping()),System.currentTimeMillis(),toolbarVisible);
  return data;
}
