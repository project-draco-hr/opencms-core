{
  String absolutePath=cms.readAbsolutePath(file);
  String templateProp=cms.readProperty(absolutePath,I_CmsConstants.C_XML_CONTROL_TEMPLATE_PROPERTY);
  if (templateProp == null) {
    throw new CmsException("Property '" + I_CmsConstants.C_XML_CONTROL_TEMPLATE_PROPERTY + "' undefined for page file "+ absolutePath,CmsException.C_LAUNCH_ERROR);
  }
  CmsFile templateFile=null;
  try {
    templateFile=(CmsFile)cms.readFile(templateProp);
  }
 catch (  CmsException e) {
    throw new CmsException("Template '" + templateProp + "' unreadable for page file "+ absolutePath,CmsException.C_LAUNCH_ERROR);
  }
  if (templateFile.getLauncherType() == C_TYPE_JSP) {
    A_OpenCms.getLoaderManager().getLauncher(C_TYPE_JSP).initlaunch(cms,templateFile,(String)null,openCms);
  }
 else {
    A_OpenCms.getLoaderManager().getLauncher(C_TYPE_XML).initlaunch(cms,file,(String)null,openCms);
  }
}
