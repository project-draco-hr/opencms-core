{
  CmsFile templateFile=null;
  try {
    templateFile=getTemplateFile(cms,file);
  }
 catch (  CmsException e) {
    throw new ServletException(e.getMessage(),e);
  }
  if (templateFile.getLoaderId() == CmsJspLoader.C_RESOURCE_LOADER_ID) {
    A_OpenCms.getLoaderManager().getLoader(CmsJspLoader.C_RESOURCE_LOADER_ID).load(cms,templateFile,req,res);
  }
 else {
    A_OpenCms.getLoaderManager().getLoader(CmsXmlTemplateLoader.C_RESOURCE_LOADER_ID).load(cms,file,req,res);
  }
}
