{
  Tag t=findAncestorWithClass(this,I_CmsJspTagParamParent.class);
  if (t == null) {
    CmsMessageContainer errMsgContainer=Messages.get().container(Messages.ERR_TAG_PARAM_ORPHAN_0);
    String msg=CmsJspTagLocaleUtil.getLocalizedMessage(errMsgContainer,pageContext);
    throw new JspTagException(msg);
  }
  if (m_name == null || m_name.equals("")) {
    return EVAL_PAGE;
  }
  I_CmsJspTagParamParent parent=(I_CmsJspTagParamParent)t;
  String value=this.m_value;
  if (value == null) {
    if (bodyContent == null || bodyContent.getString() == null) {
      value="";
    }
 else {
      value=bodyContent.getString().trim();
    }
  }
  if (m_encode) {
    parent.addParameter(CmsEncoder.encode(m_name,OpenCms.getSystemInfo().getDefaultEncoding()),CmsEncoder.encode(value,OpenCms.getSystemInfo().getDefaultEncoding()));
  }
 else {
    parent.addParameter(m_name,value);
  }
  return EVAL_PAGE;
}
