{
  File syncpath=null;
  m_cms=cms;
  m_synchronizePath=m_cms.getRegistry().getSystemValue(C_SYNCHRONISATION_PATH);
  if ((resourceName != null) && (m_synchronizePath != null)) {
    m_synchronizeList=new CmsSynchronizeList(m_synchronizePath);
    m_vfsFolders=new Hashtable();
    m_vfsFiles=new Hashtable();
    syncpath=new File(m_synchronizePath.replace('/',File.separatorChar));
    if (!syncpath.exists()) {
      syncpath.mkdirs();
    }
    synchronizeServer(resourceName);
    if (resourceName.endsWith("/")) {
      synchronizeVirtual(resourceName);
    }
    m_synchronizeList.saveSyncList();
    m_vfsFolders.clear();
    m_vfsFiles.clear();
  }
 else {
    throw new CmsException("[" + this.getClass().getName() + "] "+ "Cannot read the registry entries for synchronisation.");
  }
}
