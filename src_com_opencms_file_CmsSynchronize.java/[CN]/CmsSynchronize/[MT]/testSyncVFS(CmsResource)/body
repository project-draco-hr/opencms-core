{
  int action=0;
  File fsFile;
  String resourcename=m_cms.readAbsolutePath(res);
  if (m_syncList.containsKey(resourcename)) {
    CmsSynchronizeList sync=(CmsSynchronizeList)m_syncList.get(translate(resourcename));
    fsFile=getFileInFs(sync.getResName());
    if (res.getDateLastModified() > sync.getModifiedVfs()) {
      if ((fsFile.lastModified() > sync.getModifiedFs()) && (fsFile.lastModified() > res.getDateLastModified())) {
        action=C_UPDATE_VFS;
      }
 else {
        action=C_EXPORT_VFS;
      }
    }
 else {
      if (!fsFile.exists()) {
        action=C_DELETE_VFS;
      }
 else {
        if (fsFile.lastModified() > sync.getModifiedFs()) {
          action=C_UPDATE_VFS;
        }
      }
    }
  }
 else {
    action=C_EXPORT_VFS;
  }
  fsFile=null;
  return action;
}
