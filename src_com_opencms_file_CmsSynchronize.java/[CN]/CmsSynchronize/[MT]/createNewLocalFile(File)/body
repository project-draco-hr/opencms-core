{
  FileOutputStream fOut=null;
  if (newFile.exists()) {
    throw new CmsException("[" + this.getClass().getName() + "] "+ newFile.getPath()+ " already exists on filesystem");
  }
  try {
    File parentFolder=new File(newFile.getPath().replace('/',newFile.separatorChar).substring(0,newFile.getPath().lastIndexOf(newFile.separator)));
    parentFolder.mkdirs();
    if (parentFolder.exists()) {
      fOut=new FileOutputStream(newFile);
    }
 else {
      throw new CmsException("[" + this.getClass().getName() + "]"+ " Cannot create directories for "+ newFile.getPath());
    }
  }
 catch (  IOException e) {
    throw new CmsException("[" + this.getClass().getName() + "]"+ " Cannot create file "+ newFile.getPath()+ " on filesystem",e);
  }
 finally {
    if (fOut != null) {
      try {
        fOut.close();
      }
 catch (      IOException e) {
      }
    }
  }
}
