{
  Object loadedTemplateClass=null;
  try {
    loadedTemplateClass=CmsTemplateClassManager.getClassInstance(cms,classname);
  }
 catch (  ClassNotFoundException e) {
    System.err.println("Class " + classname + " could not be loaded!");
    throw new CmsException("Could not load template class " + classname);
  }
catch (  Exception e) {
    System.err.println("Class " + classname + " could not be instantiated!");
    throw new CmsException("Could not instantiate class " + classname + ". Original Exception: "+ e);
  }
  if (!(loadedTemplateClass instanceof I_CmsTemplate)) {
    System.err.println("Class " + classname + " is no OpenCms template class.");
    throw new CmsException("Cannot launch class " + classname + ". This is no OpenCms template class.");
  }
  I_CmsTemplate cmsTemplate=(I_CmsTemplate)loadedTemplateClass;
  if (!cmsTemplate.isTemplateCacheSet()) {
    cmsTemplate.setTemplateCache(m_templateCache);
  }
  return loadedTemplateClass;
}
