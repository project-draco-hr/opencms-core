{
  CmsObject cms=getCmsObject();
  echo("Testing replacement of file content");
  String path="/types/text.txt";
  String contentStr="Hello this is the new content";
  long timestamp=System.currentTimeMillis();
  storeResources(cms,path);
  cms.lockResource(path);
  cms.replaceResource(path,CmsResourceTypePlain.C_RESOURCE_TYPE_ID,contentStr.getBytes(),null);
  assertProject(cms,path,cms.getRequestContext().currentProject());
  assertState(cms,path,I_CmsConstants.C_STATE_CHANGED);
  assertDateLastModifiedAfter(cms,path,timestamp);
  assertUserLastModified(cms,path,cms.getRequestContext().currentUser());
  assertLock(cms,path,CmsLock.C_TYPE_EXCLUSIVE);
  assertContent(cms,path,contentStr.getBytes());
  assertFilter(cms,path,OpenCmsTestResourceFilter.FILTER_REPLACERESOURCE);
}
