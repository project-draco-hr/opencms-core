{
  byte[] result=null;
  String templateClass=startTemplateClass;
  if (templateClass == null || "".equals(templateClass) || (startTemplateClass.equals(C_UNKNOWN_LAUNCHER))) {
    templateClass="com.opencms.template.CmsDumpTemplate";
  }
  Object tmpl=getTemplateClass(cms,templateClass);
  if (!(tmpl instanceof com.opencms.template.I_CmsDumpTemplate)) {
    String errorMessage="Error in " + file.getAbsolutePath() + ": "+ templateClass+ " is not a Cms dump template class.";
    if (A_OpenCms.isLogging()) {
      A_OpenCms.log(C_OPENCMS_CRITICAL,getClassName() + errorMessage);
    }
    throw new CmsException(errorMessage,CmsException.C_XML_WRONG_TEMPLATE_CLASS);
  }
  Hashtable newParameters=new Hashtable();
  try {
    result=this.callCanonicalRoot(cms,(com.opencms.template.I_CmsTemplate)tmpl,file,newParameters);
  }
 catch (  CmsException e) {
    if (A_OpenCms.isLogging()) {
      A_OpenCms.log(C_OPENCMS_CRITICAL,getClassName() + "There were errors while building output for template file \"" + file.getAbsolutePath()+ "\" and template class \""+ templateClass+ "\". See above for details.");
    }
    throw e;
  }
  if (result != null) {
    writeBytesToResponse(cms,result);
  }
}
