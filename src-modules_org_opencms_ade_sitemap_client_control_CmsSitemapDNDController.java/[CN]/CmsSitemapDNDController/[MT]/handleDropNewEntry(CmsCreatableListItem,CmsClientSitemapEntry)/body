{
  CmsNewResourceInfo typeInfo=createItem.getResourceTypeInfo();
  CmsNewResourceInfo defaultNew=m_controller.getData().getDefaultNewElementInfo();
  CmsClientSitemapEntry entry=new CmsClientSitemapEntry();
  String uniqueName=CmsSitemapController.ensureUniqueName(parent,typeInfo.getTypeName());
  entry.setName(uniqueName);
  entry.setSitePath(m_insertPath + uniqueName + "/");
  entry.setNew(true);
  entry.setVfsPath(null);
  entry.setPosition(m_insertIndex);
  entry.setInNavigation(true);
  createItem.getResourceTypeInfo().getTypeName();
  entry.setResourceTypeName("folder");
  entry.setDefaultFileProperties(Collections.<String,CmsClientProperty>emptyMap());
  if (NewEntryType.detailpage == createItem.getNewEntryType()) {
    entry.setDetailpageTypeName(typeInfo.getTypeName());
  }
  if (NewEntryType.redirect == createItem.getNewEntryType()) {
    entry.setEntryType(EntryType.redirect);
    entry.setSitePath(m_insertPath + uniqueName);
  }
 else {
    entry.setSitePath(m_insertPath + uniqueName + "/");
  }
  int resourceTypeId;
  if (typeInfo.getId() == m_controller.getData().getNewRedirectElementInfo().getId()) {
    resourceTypeId=m_controller.getData().getNewRedirectElementInfo().getId();
  }
 else {
    resourceTypeId=defaultNew.getId();
  }
  m_controller.create(entry,resourceTypeId,defaultNew.getCopyResourceId());
}
