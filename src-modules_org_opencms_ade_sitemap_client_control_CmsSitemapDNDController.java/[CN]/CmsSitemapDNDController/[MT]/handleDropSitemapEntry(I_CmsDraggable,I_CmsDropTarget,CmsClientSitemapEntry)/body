{
  if (isChangedPosition(draggable,target,true)) {
    CmsClientSitemapEntry entry=m_controller.getEntry(((CmsSitemapTreeItem)draggable).getSitePath());
    String uniqueName=CmsSitemapController.ensureUniqueName(parent,entry.getName());
    if (!uniqueName.equals(entry.getName()) && isChangedPosition(draggable,target,false)) {
      m_controller.editAndChangeName(entry,entry.getTitle(),uniqueName,entry.getVfsPath(),entry.getProperties(),!entry.isNew());
      m_controller.move(entry,m_insertPath + uniqueName + "/",m_insertIndex);
    }
 else {
      CmsDebugLog.getInstance().printLine("inserting at " + m_insertPath + entry.getName()+ "/ and index "+ m_insertIndex);
      m_controller.move(entry,m_insertPath + entry.getName() + "/",m_insertIndex);
    }
  }
 else {
    ((CmsSitemapTreeItem)draggable).resetEntry();
  }
}
