{
  String targetFolder=null;
  if (getRequest().getAttribute(I_CmsUploadConstants.ATTR_CURRENT_FOLDER) != null) {
    targetFolder=(String)getRequest().getAttribute(I_CmsUploadConstants.ATTR_CURRENT_FOLDER);
  }
  if (CmsStringUtil.isEmptyOrWhitespaceOnly(targetFolder)) {
    targetFolder=new Dialog(this).computeCurrentFolder();
  }
  StringBuffer sb=new StringBuffer();
  sb.append("var ").append(I_CmsUploadConstants.VAR_TARGET_FOLDER).append(" = \'").append(targetFolder).append("\';");
  wrapScript(sb);
  return sb.toString();
}
