{
  folder=CmsResource.getFolderPath(folder);
  List<CmsJspNavElement> result=new ArrayList<CmsJspNavElement>();
  CmsSitemapEntry folderEntry=null;
  try {
    folderEntry=m_manager.getEntryForUri(m_cms,folder);
  }
 catch (  CmsException e) {
    LOG.error(e.getLocalizedMessage(),e);
  }
  if (folderEntry == null) {
    return result;
  }
  if (folderEntry.isVfs()) {
    return super.getNavigationForFolder(folder);
  }
  try {
    List<CmsSitemapEntry> entries=OpenCms.getSitemapManager().getSubEntries(m_cms,folderEntry.getSitePath(m_cms));
    for (    CmsSitemapEntry entry : entries) {
      CmsJspNavElement element=getNavigationForSiteEntry(entry);
      if ((element != null) && element.isInNavigation()) {
        result.add(element);
      }
    }
  }
 catch (  Exception e) {
    LOG.error(e.getLocalizedMessage(),e);
    return Collections.<CmsJspNavElement>emptyList();
  }
  Collections.sort(result);
  return result;
}
