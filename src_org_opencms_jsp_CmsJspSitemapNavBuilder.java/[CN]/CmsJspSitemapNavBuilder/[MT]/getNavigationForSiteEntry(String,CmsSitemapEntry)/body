{
  int level=CmsResource.getPathLevel(uri);
  if (uri.endsWith("/")) {
    level--;
  }
  Map<String,String> properties=new HashMap<String,String>();
  properties.put(CmsPropertyDefinition.PROPERTY_TITLE,entry.getTitle());
  boolean isInNavigation=Boolean.parseBoolean(entry.getProperties(true).get(CmsSitemapProperty.navigation.getName()));
  if (isInNavigation) {
    properties.put(CmsPropertyDefinition.PROPERTY_NAVTEXT,entry.getTitle());
  }
  properties.putAll(entry.getProperties(false));
  if (!isInNavigation) {
    properties.remove(CmsPropertyDefinition.PROPERTY_NAVPOS);
  }
  return new CmsJspNavElement(uri,properties,level);
}
