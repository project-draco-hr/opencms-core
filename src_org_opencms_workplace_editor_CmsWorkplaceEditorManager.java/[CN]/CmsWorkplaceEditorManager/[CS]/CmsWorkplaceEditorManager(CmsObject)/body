{
  List editorFolders=new ArrayList();
  try {
    editorFolders=cms.getSubFolders(CmsEditor.C_PATH_EDITORS);
  }
 catch (  CmsException e) {
    OpenCms.getLog(this).error("Workplace init: Unable to read editor folder '" + CmsEditor.C_PATH_EDITORS + "', editors disabled!");
    editorFolders=new ArrayList();
  }
  m_editorConfigurations=new ArrayList(editorFolders.size());
  Iterator i=editorFolders.iterator();
  while (i.hasNext()) {
    CmsFolder currentFolder=(CmsFolder)i.next();
    String folderName=CmsEditor.C_PATH_EDITORS + currentFolder.getName();
    if (!folderName.endsWith("/")) {
      folderName+="/";
    }
    CmsFile configFile=null;
    try {
      configFile=cms.readFile(folderName + C_EDITOR_CONFIGURATION_FILENAME,CmsResourceFilter.IGNORE_EXPIRATION);
    }
 catch (    CmsException e) {
      continue;
    }
    byte[] xmlData=configFile.getContents();
    CmsWorkplaceEditorConfiguration editorConfig=new CmsWorkplaceEditorConfiguration(xmlData,folderName + C_EDITOR_FILENAME);
    if (editorConfig.isValidConfiguration()) {
      m_editorConfigurations.add(editorConfig);
    }
  }
  m_preferredEditors=new HashMap(m_editorConfigurations.size());
}
