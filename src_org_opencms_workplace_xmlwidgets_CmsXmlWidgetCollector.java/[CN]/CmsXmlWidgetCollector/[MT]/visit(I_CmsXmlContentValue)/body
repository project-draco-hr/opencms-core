{
  if (LOG.isDebugEnabled()) {
    LOG.debug("Visiting " + value.getPath());
  }
  if (value.isSimpleType()) {
    boolean useLocale=m_locale != null;
    if ((useLocale && value.getLocale() == getLocale()) || (!useLocale)) {
      try {
        I_CmsXmlWidget widget=value.getContentDefinition().getContentHandler().getWidget(value);
        if (!m_uniqueWidgets.contains(widget)) {
          m_uniqueWidgets.add(widget);
        }
        m_widgets.put(value.getPath(),widget);
        m_values.put(value.getPath(),value);
        if (LOG.isDebugEnabled()) {
          LOG.debug("Added " + value.getPath() + " to widgets.");
        }
      }
 catch (      CmsXmlException e) {
        if (LOG.isErrorEnabled()) {
          LOG.error("Could not access widget for content value " + value,e);
        }
      }
    }
  }
}
