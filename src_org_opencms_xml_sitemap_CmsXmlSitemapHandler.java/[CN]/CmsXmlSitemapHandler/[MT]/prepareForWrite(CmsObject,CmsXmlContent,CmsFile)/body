{
  for (  Locale locale : content.getLocales()) {
    String path=CmsXmlSitemap.XmlNode.SiteEntry.name();
    LinkedList<I_CmsXmlContentValue> entries=new LinkedList<I_CmsXmlContentValue>(content.getValues(path,locale));
    while (!entries.isEmpty()) {
      I_CmsXmlContentValue entry=entries.removeFirst();
      String idPath=CmsXmlUtils.concatXpath(entry.getPath(),CmsXmlSitemap.XmlNode.Id.name());
      I_CmsXmlContentValue id=content.getValue(idPath,locale);
      if (id == null) {
        id=content.addValue(cms,idPath,locale,0);
      }
      if (!CmsUUID.isValidUUID(id.getStringValue(cms))) {
        id.setStringValue(cms,new CmsUUID().toString());
      }
      String subentriesPath=CmsXmlUtils.concatXpath(entry.getPath(),CmsXmlSitemap.XmlNode.SiteEntry.name());
      entries.addAll(content.getValues(subentriesPath,locale));
    }
  }
  file.setContents(content.marshal());
  return super.prepareForWrite(cms,content,file);
}
