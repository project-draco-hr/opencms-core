{
  CmsTemplateParts parts=(CmsTemplateParts)OpenCms.getRuntimeProperty(C_RUNTIME_PROPERTY_NAME);
  if (parts == null) {
    parts=new CmsTemplateParts();
    OpenCms.setRuntimeProperty(C_RUNTIME_PROPERTY_NAME,parts);
    if (LOG.isDebugEnabled()) {
      LOG.debug(Messages.get().key(Messages.LOG_CMSTEMPLATEPARTS_NOT_FOUND_0));
    }
  }
 else   if (LOG.isDebugEnabled()) {
    LOG.debug(Messages.get().key(Messages.LOG_CMSTEMPLATEPARTS_FOUND_0));
  }
  if (jsp.getRequestContext().currentProject().isOnlineProject()) {
    parts.setProject(C_PROJECT_ONLINE);
  }
 else {
    parts.setProject(C_PROJECT_OFFLINE);
  }
  parts.setJsp(jsp);
  return parts;
}
