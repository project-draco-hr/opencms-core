{
  String partKey=generateKey(target,element,layout);
  String part="";
  try {
    part=(String)m_parts.get(partKey);
    if (part == null) {
      part=getJsp().getContent(target,element,getJsp().getRequestContext().getLocale());
      if (part != null && !part.startsWith(CmsMessages.C_UNKNOWN_KEY_EXTENSION)) {
        m_parts.put(partKey,part);
        OpenCms.setRuntimeProperty(C_RUNTIME_PROPERTY_NAME,this);
      }
 else {
        part="";
      }
      if (OpenCms.getLog(CmsTemplateParts.class).isDebugEnabled()) {
        OpenCms.getLog(CmsTemplateParts.class).debug("Value for key \"" + partKey + "\" not found, including JSP");
      }
    }
 else     if (OpenCms.getLog(CmsTemplateParts.class).isDebugEnabled()) {
      OpenCms.getLog(CmsTemplateParts.class).debug("Retrieved value for key \"" + partKey + "\" from Map");
    }
  }
 catch (  Throwable t) {
    if (OpenCms.getLog(CmsTemplateParts.class).isErrorEnabled()) {
      OpenCms.getLog(CmsTemplateParts.class).error("Error while trying to include part: \"" + partKey + "\" from Map\n"+ t);
    }
  }
  return part;
}
