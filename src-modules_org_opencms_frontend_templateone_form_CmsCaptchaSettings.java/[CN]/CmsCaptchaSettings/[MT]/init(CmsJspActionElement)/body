{
  List mulipartFileItems=CmsRequestUtil.readMultipartFileItems(jsp.getRequest());
  m_parameterMap=new HashMap();
  if (mulipartFileItems != null) {
    m_parameterMap=CmsRequestUtil.readParameterMapFromMultiPart(jsp.getRequestContext().getEncoding(),mulipartFileItems);
  }
 else {
    m_parameterMap=jsp.getRequest().getParameterMap();
  }
  String stringValue=getParameter(C_PARAM_IMAGE_WIDTH);
  if (CmsStringUtil.isNotEmpty(stringValue)) {
    m_imageWidth=Integer.parseInt(stringValue);
  }
  stringValue=getParameter(C_PARAM_IMAGE_HEIGHT);
  if (CmsStringUtil.isNotEmpty(stringValue)) {
    m_imageHeight=Integer.parseInt(stringValue);
  }
  stringValue=getParameter(C_PARAM_MIN_PHRASE_LENGTH);
  if (CmsStringUtil.isNotEmpty(stringValue)) {
    m_minPhraseLength=Integer.parseInt(stringValue);
  }
  stringValue=getParameter(C_PARAM_MAX_PHRASE_LENGTH);
  if (CmsStringUtil.isNotEmpty(stringValue)) {
    m_maxPhraseLength=Integer.parseInt(stringValue);
  }
  stringValue=getParameter(C_PARAM_MIN_FONT_SIZE);
  if (CmsStringUtil.isNotEmpty(stringValue)) {
    m_minFontSize=Integer.parseInt(stringValue);
  }
  stringValue=getParameter(C_PARAM_MAX_FONT_SIZE);
  if (CmsStringUtil.isNotEmpty(stringValue)) {
    m_maxFontSize=Integer.parseInt(stringValue);
  }
  stringValue=getParameter(C_PARAM_FONT_COLOR);
  if (CmsStringUtil.isNotEmpty(stringValue)) {
    stringValue=CmsEncoder.unescape(stringValue,jsp.getRequestContext().getEncoding());
    setFontColor(stringValue);
  }
  stringValue=getParameter(C_PARAM_BACKGROUND_COLOR);
  if (CmsStringUtil.isNotEmpty(stringValue)) {
    stringValue=CmsEncoder.unescape(stringValue,jsp.getRequestContext().getEncoding());
  }
  setBackgroundColor(stringValue);
  stringValue=getParameter(C_PARAM_HOLES_PER_GLYPH);
  if (CmsStringUtil.isNotEmpty(stringValue)) {
    setHolesPerGlyph(Integer.parseInt(stringValue));
  }
  stringValue=getParameter(C_PARAM_FILTER_AMPLITUDE);
  if (CmsStringUtil.isNotEmpty(stringValue)) {
    setFilterAmplitude(Integer.parseInt(stringValue));
  }
  stringValue=getParameter(C_PARAM_FILTER_WAVE_LENGTH);
  if (CmsStringUtil.isNotEmpty(stringValue)) {
    setFilterWaveLength(Integer.parseInt(stringValue));
  }
  stringValue=getParameter(C_PARAM_USE_BACKGROUND_IMAGE);
  if (CmsStringUtil.isNotEmpty(stringValue)) {
    setUseBackgroundImage(Boolean.valueOf(stringValue).booleanValue());
  }
  stringValue=getParameter(C_PARAM_CHARACTERS);
  if (CmsStringUtil.isNotEmpty(stringValue)) {
    setCharacterPool(stringValue);
  }
  stringValue=getParameter(C_PARAM_CHARACTERS);
  if (CmsStringUtil.isNotEmpty(stringValue)) {
    setCharacterPool(stringValue);
  }
  stringValue=getParameter(C_PARAM_PRESET);
  if (CmsStringUtil.isNotEmpty(stringValue)) {
    m_presetPath=stringValue;
  }
}
