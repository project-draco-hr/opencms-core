{
  if (resource instanceof CmsFile) {
    CmsFile file=(CmsFile)resource;
    if ((file.getContents() != null) && (file.getContents().length > 0)) {
      return file;
    }
  }
  if (resource instanceof CmsBackupResource) {
    CmsFile file=(CmsFile)resource;
    if ((file.getContents() != null) && (file.getContents().length > 0)) {
      return file;
    }
 else {
      CmsBackupResource backupResource=(CmsBackupResource)resource;
      backupResource=cms.readBackupFile(backupResource.getRootPath(),backupResource.getVersionId());
      return backupResource;
    }
  }
  String filename=cms.getSitePath(resource);
  return cms.readFile(filename,CmsResourceFilter.IGNORE_EXPIRATION);
}
