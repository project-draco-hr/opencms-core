{
  performPermissionCheck(cms);
  setResponeHeaders(res);
  CmsSpellcheckingRequest cmsSpellcheckingRequest=null;
  try {
    final JSONObject jsonRequest=new JSONObject(getRequestBody(servletRequest));
    cmsSpellcheckingRequest=parseJsonRequest(jsonRequest);
  }
 catch (  Exception e) {
    cmsSpellcheckingRequest=parseHttpRequest(servletRequest);
  }
  final SpellCheckResponse spellCheckResponse=performSpellcheckQuery(cmsSpellcheckingRequest);
  if (null == spellCheckResponse) {
    cmsSpellcheckingRequest.setWordSuggestions(new JSONObject());
  }
 else {
    cmsSpellcheckingRequest.setWordSuggestions(getSuggestionsAsJsonObject(spellCheckResponse));
  }
  sendResponse(res,cmsSpellcheckingRequest);
}
