{
  CmsResource resource=null;
  List<CmsResource> resources=null;
switch (event.getType()) {
case I_CmsEventListener.EVENT_RESOURCE_AND_PROPERTIES_MODIFIED:
case I_CmsEventListener.EVENT_RESOURCE_MODIFIED:
    Object change=event.getData().get(I_CmsEventListener.KEY_CHANGE);
  if ((change != null) && change.equals(new Integer(CmsDriverManager.NOTHING_CHANGED))) {
    return;
  }
resource=(CmsResource)event.getData().get(I_CmsEventListener.KEY_RESOURCE);
m_offlineCache.checkFlush(resource);
break;
case I_CmsEventListener.EVENT_RESOURCES_AND_PROPERTIES_MODIFIED:
resources=CmsCollectionsGenericWrapper.list(event.getData().get(I_CmsEventListener.KEY_RESOURCES));
for (CmsResource res : resources) {
m_offlineCache.checkFlush(res);
}
break;
case I_CmsEventListener.EVENT_RESOURCE_MOVED:
case I_CmsEventListener.EVENT_RESOURCE_DELETED:
case I_CmsEventListener.EVENT_RESOURCES_MODIFIED:
resources=CmsCollectionsGenericWrapper.list(event.getData().get(I_CmsEventListener.KEY_RESOURCES));
for (CmsResource res : resources) {
m_offlineCache.checkFlush(res);
}
break;
case I_CmsEventListener.EVENT_CLEAR_ONLINE_CACHES:
case I_CmsEventListener.EVENT_PUBLISH_PROJECT:
m_onlineCache.flush();
break;
case I_CmsEventListener.EVENT_CLEAR_CACHES:
m_offlineCache.flush();
m_onlineCache.flush();
break;
case I_CmsEventListener.EVENT_CLEAR_OFFLINE_CACHES:
m_offlineCache.flush();
break;
default :
break;
}
}
