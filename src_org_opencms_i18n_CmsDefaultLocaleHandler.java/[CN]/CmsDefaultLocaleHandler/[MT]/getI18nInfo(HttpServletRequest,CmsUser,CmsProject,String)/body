{
  CmsLocaleManager localeManager=OpenCms.getLocaleManager();
  String encoding;
  List defaultLocales;
synchronized (m_adminCmsObject) {
    m_adminCmsObject.getRequestContext().setCurrentProject(project);
    defaultLocales=localeManager.getDefaultLocales(m_adminCmsObject,resourceName);
    try {
      encoding=m_adminCmsObject.readPropertyObject(resourceName,I_CmsConstants.C_PROPERTY_CONTENT_ENCODING,true).getValue(OpenCms.getSystemInfo().getDefaultEncoding());
    }
 catch (    CmsException e) {
      if (LOG.isInfoEnabled()) {
        LOG.info(Messages.get().container(Messages.ERR_READ_ENCODING_PROP_1,resourceName),e);
      }
      encoding=OpenCms.getSystemInfo().getDefaultEncoding();
    }
  }
  if (req != null) {
    try {
      req.setCharacterEncoding(encoding);
    }
 catch (    UnsupportedEncodingException e) {
      LOG.error(Messages.get().key(Messages.ERR_UNSUPPORTED_REQUEST_ENCODING_1,encoding),e);
    }
  }
  Locale locale;
  if ((defaultLocales != null) && (defaultLocales.size() > 0)) {
    locale=(Locale)defaultLocales.get(0);
  }
 else {
    locale=CmsLocaleManager.getDefaultLocale();
  }
  return new CmsI18nInfo(locale,encoding);
}
