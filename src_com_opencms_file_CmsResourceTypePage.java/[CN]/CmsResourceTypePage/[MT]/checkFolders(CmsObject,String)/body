{
  String completePath=C_VFS_PATH_BODIES;
  StringTokenizer t=new StringTokenizer(path,"/");
  String correspFolder="/";
  while (t.hasMoreTokens()) {
    String foldername=t.nextToken();
    correspFolder=correspFolder + foldername + "/";
    try {
      cms.readFolder(completePath + foldername + "/");
    }
 catch (    CmsException e) {
      String orgFolder=completePath + foldername + "/";
      orgFolder=orgFolder.substring(C_VFS_PATH_BODIES.length() - 1);
      CmsFolder newfolder=cms.doCreateFolder(completePath,foldername);
      CmsFolder folder=cms.readFolder(orgFolder);
      cms.doLockResource(newfolder.getAbsolutePath(),false);
      cms.doChgrp(newfolder.getAbsolutePath(),cms.readGroup(folder).getName());
      cms.doChmod(newfolder.getAbsolutePath(),folder.getAccessFlags());
      cms.doChown(newfolder.getAbsolutePath(),cms.readOwner(folder).getName());
      try {
        CmsFolder correspondingFolder=cms.readFolder(correspFolder);
        if (!correspondingFolder.isLocked()) {
          cms.doUnlockResource(newfolder.getAbsolutePath());
        }
      }
 catch (      CmsException ex) {
      }
    }
    completePath+=foldername + "/";
  }
}
