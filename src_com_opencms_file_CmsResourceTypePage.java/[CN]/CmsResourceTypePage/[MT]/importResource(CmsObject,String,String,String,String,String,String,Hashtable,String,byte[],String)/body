{
  CmsResource importedResource=null;
  destination=importPath + destination;
  boolean changed=true;
  int resourceType=cms.getResourceType(type).getResourceType();
  int launcherType=cms.getResourceType(type).getLauncherType();
  if ((launcherStartClass == null) || ("".equals(launcherStartClass))) {
    launcherStartClass=cms.getResourceType(type).getLauncherClass();
  }
  CmsUser resowner=null;
  CmsGroup resgroup=null;
  try {
    resowner=cms.readUser(user);
  }
 catch (  CmsException e) {
    resowner=cms.getRequestContext().currentUser();
  }
  try {
    resgroup=cms.readGroup(group);
  }
 catch (  CmsException e) {
    resgroup=cms.getRequestContext().currentGroup();
  }
  try {
    importedResource=cms.doCreateResource(destination,resourceType,properties,launcherType,launcherStartClass,resowner.getName(),resgroup.getName(),Integer.parseInt(access),content);
    if (importedResource != null) {
      changed=false;
    }
  }
 catch (  CmsException e) {
  }
  if (changed) {
    lockResource(cms,destination,true);
    cms.doWriteResource(destination,properties,resowner.getName(),resgroup.getName(),Integer.parseInt(access),resourceType,content);
    importedResource=cms.readFileHeader(destination);
  }
  return importedResource;
}
