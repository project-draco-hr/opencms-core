{
  if (isSimpleType(cms,resourcename)) {
    super.undeleteResource(cms,resourcename);
    return;
  }
  CmsFile file=cms.readFile(resourcename,true);
  cms.doUndeleteFile(resourcename);
  String bodyPath=checkBodyPath(cms,(CmsFile)file);
  if (bodyPath != null) {
    try {
      cms.doUndeleteFile(bodyPath);
    }
 catch (    CmsException e) {
      if (e.getType() != CmsException.C_NOT_FOUND) {
        throw e;
      }
    }
  }
  String currentProject=cms.getRequestContext().currentProject().getName();
  CmsXmlControlFile.clearFileCache(currentProject + ":" + resourcename);
  CmsPageLinks linkObject=cms.getPageLinks(cms.readAbsolutePath(file));
  cms.createLinkEntrys(linkObject.getResourceId(),linkObject.getLinkTargets());
}
