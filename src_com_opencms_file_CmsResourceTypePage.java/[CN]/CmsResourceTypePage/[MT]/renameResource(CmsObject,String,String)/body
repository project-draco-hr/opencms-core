{
  CmsFile file=cms.readFile(oldname);
  String bodyPath=readBodyPath(cms,file);
  int help=C_VFS_PATH_BODIES.lastIndexOf("/");
  String hbodyPath=(C_VFS_PATH_BODIES.substring(0,help)) + oldname;
  cms.doRenameFile(oldname,newname);
  if (hbodyPath.equals(bodyPath)) {
    cms.doRenameFile(bodyPath,newname);
    help=bodyPath.lastIndexOf("/") + 1;
    hbodyPath=bodyPath.substring(0,help) + newname;
    changeContent(cms,file.getParent() + newname,hbodyPath);
  }
  int oldId=file.getFileId();
  int newId=cms.readFileHeader(file.getParent() + newname).getFileId();
  cms.createLinkEntrys(newId,cms.readLinkEntrys(oldId));
  cms.deleteLinkEntrys(oldId);
}
