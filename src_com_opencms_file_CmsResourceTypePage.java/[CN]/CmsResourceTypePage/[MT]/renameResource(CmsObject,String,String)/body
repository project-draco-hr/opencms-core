{
  if (isSimpleType(cms,oldname)) {
    super.renameResource(cms,oldname,newname);
    return;
  }
  CmsFile file=cms.readFile(oldname);
  String currentBodyPath=readBodyPath(cms,file);
  int lastSlashIndex=I_CmsWpConstants.C_VFS_PATH_BODIES.lastIndexOf("/");
  String defaultBodyPath=(I_CmsWpConstants.C_VFS_PATH_BODIES.substring(0,lastSlashIndex)) + oldname;
  cms.doRenameResource(oldname,newname);
  if (defaultBodyPath.equals(currentBodyPath)) {
    cms.doRenameResource(currentBodyPath,newname);
    lastSlashIndex=currentBodyPath.lastIndexOf("/") + 1;
    defaultBodyPath=currentBodyPath.substring(0,lastSlashIndex) + newname;
    changeContent(cms,file.getParent() + newname,defaultBodyPath);
  }
  CmsUUID oldId=file.getFileId();
  CmsUUID newId=cms.readFileHeader(file.getParent() + newname).getFileId();
  cms.createLinkEntrys(newId,cms.readLinkEntrys(oldId));
  cms.deleteLinkEntrys(oldId);
}
