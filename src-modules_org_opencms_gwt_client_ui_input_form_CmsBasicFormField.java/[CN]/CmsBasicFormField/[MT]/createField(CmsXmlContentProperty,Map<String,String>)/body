{
  String id=propertyConfig.getPropertyName();
  String widgetConfigStr=propertyConfig.getWidgetConfiguration();
  if (widgetConfigStr == null) {
    widgetConfigStr="";
  }
  String label=propertyConfig.getNiceName();
  if (label == null) {
    label=id;
  }
  Map<String,String> widgetConfig=CmsStringUtil.splitAsMap(widgetConfigStr,"|",":");
  widgetConfig.putAll(additionalParams);
  String widgetType=propertyConfig.getWidget();
  I_CmsFormWidget widget=CmsWidgetFactoryRegistry.instance().createFormWidget(widgetType,widgetConfig);
  CmsBasicFormField field=new CmsBasicFormField(id,propertyConfig.getDescription(),label,propertyConfig.getDefault(),widget,"true".equals(propertyConfig.getAdvanced()));
  String ruleRegex=propertyConfig.getRuleRegex();
  if (!CmsStringUtil.isEmpty(ruleRegex)) {
    field.setValidator(new CmsRegexValidator(ruleRegex,propertyConfig.getError()));
  }
  return field;
}
