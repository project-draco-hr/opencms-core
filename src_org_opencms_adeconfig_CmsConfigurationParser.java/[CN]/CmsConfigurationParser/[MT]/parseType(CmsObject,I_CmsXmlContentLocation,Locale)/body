{
  boolean isDefault=getSubValueBoolean(cms,xmlType,N_IS_DEFAULT);
  CmsUUID source=getSubValueID(cms,xmlType,N_SOURCE);
  CmsResource resource=cms.readResource(source);
  String type=getTypeName(resource.getTypeId());
  CmsUUID folder=getSubValueID(cms,xmlType,CmsXmlUtils.concatXpath(N_DESTINATION,N_FOLDER));
  String pattern=getSubValueString(cms,xmlType,CmsXmlUtils.concatXpath(N_DESTINATION,N_PATTERN));
  CmsResource folderRes=null;
  CmsLazyFolder lazyFolder=null;
  if (folder == null) {
    String path="/" + type;
    lazyFolder=new CmsLazyFolder(path);
  }
 else {
    folderRes=cms.readResource(folder);
    lazyFolder=new CmsLazyFolder(folderRes);
  }
  CmsConfigurationItem configItem=new CmsConfigurationItem(resource,folderRes,lazyFolder,pattern,isDefault);
  List<I_CmsXmlContentValueLocation> fmtValues=xmlType.getSubValues(N_FORMATTER);
  List<CmsFormatterConfigBean> formatterConfigBeans=new ArrayList<CmsFormatterConfigBean>();
  for (  I_CmsXmlContentValueLocation fmtValue : fmtValues) {
    String jsp=getSubValueString(cms,fmtValue,N_JSP);
    String width=getSubValueString(cms,fmtValue,N_WIDTH);
    String fmtType=getSubValueString(cms,fmtValue,N_TYPE);
    formatterConfigBeans.add(new CmsFormatterConfigBean(jsp,fmtType,width));
  }
  if (!formatterConfigBeans.isEmpty()) {
    CmsPair<Map<String,String>,Map<Integer,String>> formatterMaps=CmsFormatterUtil.getFormatterMapsFromConfigBeans(formatterConfigBeans,m_content.getFile().getRootPath());
    CmsTypeFormatterConfiguration fmt=new CmsTypeFormatterConfiguration(formatterMaps.getFirst(),formatterMaps.getSecond());
    m_formatterConfiguration.put(type,fmt);
  }
  m_newElements.add(configItem);
  if (!isDefault && m_configuration.containsKey(type)) {
    return;
  }
  m_configuration.put(type,configItem);
}
