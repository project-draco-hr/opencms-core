{
  CmsObject cms=getCmsObject();
  echo("Testing the value index for nodes in the XML content");
  CmsXmlEntityResolver resolver=new CmsXmlEntityResolver(cms);
  String content;
  CmsXmlContent xmlcontent;
  content=CmsFileUtil.readFile("org/opencms/xml/content/xmlcontent-definition-7.xsd",CmsEncoder.C_UTF8_ENCODING);
  CmsXmlEntityResolver.cacheSystemId(C_SCHEMA_SYSTEM_ID_7,content.getBytes(CmsEncoder.C_UTF8_ENCODING));
  content=CmsFileUtil.readFile("org/opencms/xml/content/xmlcontent-7.xml",CmsEncoder.C_UTF8_ENCODING);
  xmlcontent=CmsXmlContentFactory.unmarshal(content,CmsEncoder.C_UTF8_ENCODING,resolver);
  CmsXmlContentValueSequence toastSequence=xmlcontent.getValueSequence("Toast",Locale.ENGLISH);
  for (int i=0; i < 2; i++) {
    I_CmsXmlContentValue value=toastSequence.addValue(0);
    value.setStringValue("Added toast value " + i);
  }
  System.out.println(xmlcontent.toString());
  assertEquals(toastSequence.getElementCount(),3);
  for (int i=0; i < 3; i++) {
    I_CmsXmlContentValue value=toastSequence.getValue(i);
    assertEquals(i,value.getIndex());
  }
  I_CmsXmlContentValue toastValue=toastSequence.getValue(1);
  assertEquals(1,toastValue.getMinOccurs());
  assertEquals(3,toastValue.getMaxOccurs());
}
