{
  CmsObject cms=getCmsObject();
  echo("Testing mapping of the XML content GUI to different widgets");
  CmsXmlEntityResolver resolver=new CmsXmlEntityResolver(cms);
  String content;
  content=CmsFileUtil.readFile("org/opencms/xml/content/xmlcontent-definition-5.xsd",CmsEncoder.C_UTF8_ENCODING);
  CmsXmlContentDefinition definition=CmsXmlContentDefinition.unmarshal(content,C_SCHEMA_SYSTEM_ID_5,resolver);
  CmsXmlEntityResolver.cacheSystemId(C_SCHEMA_SYSTEM_ID_5,content.getBytes(CmsEncoder.C_UTF8_ENCODING));
  content=CmsFileUtil.readFile("org/opencms/xml/content/xmlcontent-5.xml",CmsEncoder.C_UTF8_ENCODING);
  CmsXmlContent xmlcontent=CmsXmlContentFactory.unmarshal(content,CmsEncoder.C_UTF8_ENCODING,resolver);
  xmlcontent.validateXmlStructure(resolver);
  I_CmsWidget widget;
  I_CmsXmlContentHandler handler=definition.getContentHandler();
  widget=handler.getWidget(xmlcontent.getValue("Title",Locale.ENGLISH));
  assertNotNull(widget);
  assertEquals(CmsCheckboxWidget.class.getName(),widget.getClass().getName());
  widget=handler.getWidget(xmlcontent.getValue("Test",Locale.ENGLISH));
  assertNotNull(widget);
  assertEquals(CmsHtmlAreaWidget.class.getName(),widget.getClass().getName());
  assertEquals("Configuration for Title",handler.getConfiguration(xmlcontent.getValue("Title",Locale.ENGLISH)));
  assertEquals("Configuration for Test",handler.getConfiguration(xmlcontent.getValue("Test",Locale.ENGLISH)));
}
