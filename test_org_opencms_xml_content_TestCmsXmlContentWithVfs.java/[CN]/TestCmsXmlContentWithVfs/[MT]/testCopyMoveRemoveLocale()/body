{
  CmsObject cms=getCmsObject();
  echo("Testing locale copy, move and remove operation on an XML content");
  CmsXmlEntityResolver resolver=new CmsXmlEntityResolver(cms);
  String iso="ISO-8859-1";
  String content;
  CmsXmlContent xmlcontent;
  content=CmsFileUtil.readFile("org/opencms/xml/content/xmlcontent-definition-8.xsd",CmsEncoder.ENCODING_UTF_8);
  CmsXmlEntityResolver.cacheSystemId(SCHEMA_SYSTEM_ID_8,content.getBytes(iso));
  content=CmsFileUtil.readFile("org/opencms/xml/content/xmlcontent-8.xml",iso);
  xmlcontent=CmsXmlContentFactory.unmarshal(content,iso,resolver);
  xmlcontent.validateXmlStructure(resolver);
  List<Locale> locales=xmlcontent.getLocales();
  assertEquals(1,locales.size());
  assertEquals(Locale.ENGLISH,locales.get(0));
  xmlcontent.copyLocale(Locale.ENGLISH,Locale.GERMANY);
  assertEquals(2,xmlcontent.getLocales().size());
  assertTrue(xmlcontent.hasLocale(Locale.ENGLISH));
  assertTrue(xmlcontent.hasLocale(Locale.GERMANY));
  xmlcontent.validateXmlStructure(resolver);
  xmlcontent.moveLocale(Locale.GERMANY,Locale.FRENCH);
  assertEquals(2,xmlcontent.getLocales().size());
  assertTrue(xmlcontent.hasLocale(Locale.ENGLISH));
  assertTrue(xmlcontent.hasLocale(Locale.FRENCH));
  assertFalse(xmlcontent.hasLocale(Locale.GERMANY));
  xmlcontent.validateXmlStructure(resolver);
  xmlcontent.removeLocale(Locale.ENGLISH);
  assertEquals(1,xmlcontent.getLocales().size());
  assertTrue(xmlcontent.hasLocale(Locale.FRENCH));
  assertFalse(xmlcontent.hasLocale(Locale.ENGLISH));
  assertFalse(xmlcontent.hasLocale(Locale.GERMANY));
  assertEquals(Locale.FRENCH,xmlcontent.getLocales().get(0));
  xmlcontent.validateXmlStructure(resolver);
}
