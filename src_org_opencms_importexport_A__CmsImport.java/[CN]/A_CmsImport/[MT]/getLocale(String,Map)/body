{
  String localeName=(String)properties.get(I_CmsConstants.C_PROPERTY_LOCALE);
  if (localeName == null) {
    localeName=m_cms.readProperty(CmsResource.getParentFolder(destination),I_CmsConstants.C_PROPERTY_LOCALE,true);
  }
  if (localeName != null) {
    if (localeName.indexOf(",") >= 0) {
      localeName=localeName.substring(0,localeName.indexOf(","));
    }
    return CmsLocaleManager.getLocale(localeName);
  }
 else {
    return (Locale)OpenCms.getLocaleManager().getDefaultLocales(m_cms,CmsResource.getParentFolder(destination)).get(0);
  }
}
