{
  boolean changedVfsRef=((vfsReference != null) && !vfsReference.trim().equals(entry.getVfsPath()));
  CmsClientSitemapEntry newEntry=new CmsClientSitemapEntry(entry);
  newEntry.setNew(entry.isNew() && isNew);
  if (changedVfsRef) {
    newEntry.setVfsPath(vfsReference);
  }
  CmsSitemapChange change=new CmsSitemapChange(entry.getId(),entry.getSitePath(),ChangeType.modify);
  change.setDefaultFileId(entry.getDefaultFileId());
  change.setLeafType(newEntry.isLeafType());
  List<CmsPropertyModification> propertyChangeData=new ArrayList<CmsPropertyModification>();
  for (  CmsPropertyModification propChange : propertyChanges) {
    propertyChangeData.add(propChange);
  }
  change.setPropertyChanges(propertyChangeData);
  CmsSitemapClipboardData data=getData().getClipboardData().copy();
  data.addModified(entry);
  change.setClipBoardData(data);
  return change;
}
