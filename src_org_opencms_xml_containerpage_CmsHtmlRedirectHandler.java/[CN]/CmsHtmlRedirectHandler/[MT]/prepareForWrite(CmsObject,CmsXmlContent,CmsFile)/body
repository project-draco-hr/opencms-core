{
  CmsFile result=super.prepareForWrite(cms,content,file);
  try {
    I_CmsXmlContentValue linkVal=content.getValue("Link",Locale.ENGLISH);
    if (linkVal != null) {
      String linkStr=linkVal.getStringValue(cms);
      if (!CmsStringUtil.isEmptyOrWhitespaceOnly(linkStr)) {
        boolean hasScheme=false;
        try {
          URI uri=new URI(linkStr);
          hasScheme=uri.getScheme() != null;
        }
 catch (        URISyntaxException e) {
          LOG.debug(e.getLocalizedMessage(),e);
        }
        if (!hasScheme) {
          linkStr=cms.getRequestContext().removeSiteRoot(linkStr);
        }
        Locale locale=OpenCms.getLocaleManager().getDefaultLocale(cms,file);
        String title=org.opencms.xml.containerpage.Messages.get().getBundle(locale).key(org.opencms.xml.containerpage.Messages.GUI_REDIRECT_TITLE_1,linkStr);
        CmsProperty titleProp=new CmsProperty(CmsPropertyDefinition.PROPERTY_TITLE,title,null);
        cms.writePropertyObjects(file,Arrays.asList(titleProp));
      }
    }
  }
 catch (  CmsException e) {
    e.printStackTrace();
  }
  return result;
}
