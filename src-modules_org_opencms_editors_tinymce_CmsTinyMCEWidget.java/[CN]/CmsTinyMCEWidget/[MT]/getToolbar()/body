{
  String result="";
  List<String> barItems=getHtmlWidgetOption().getButtonBarShownItems();
  List<List<String>> blocks=new ArrayList<List<String>>();
  blocks.add(new ArrayList<String>());
  String lastItem=null;
  List<String> processedItems=new ArrayList<String>();
  for (  String barItem : barItems) {
    if (BUTTON_TRANSLATION_MAP.containsKey(barItem)) {
      barItem=BUTTON_TRANSLATION_MAP.get(barItem);
    }
    if (barItem.equals("[") || barItem.equals("]") || barItem.equals("-")) {
      barItem="|";
      if ("|".equals(lastItem)) {
        continue;
      }
    }
    processedItems.add(barItem);
    lastItem=barItem;
  }
  if ((processedItems.size() > 0) && processedItems.get(0).equals("|")) {
    processedItems.remove(0);
  }
  if ((processedItems.size() > 0) && processedItems.get(processedItems.size() - 1).equals("|")) {
    processedItems.remove(processedItems.size() - 1);
  }
  for (  String processedItem : processedItems) {
    blocks.get(blocks.size() - 1).add(processedItem);
    if ("|".equals(processedItem)) {
      blocks.add(new ArrayList<String>());
    }
  }
  int row=1;
  for (  List<String> block : blocks) {
    result=result + "theme_advanced_buttons" + row+ ": '"+ CmsStringUtil.listAsString(block,",")+ "',\n";
    row+=1;
  }
  return result;
}
