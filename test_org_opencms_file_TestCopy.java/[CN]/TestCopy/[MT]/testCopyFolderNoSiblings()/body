{
  CmsObject cms=getCmsObject();
  echo("Testing copy of a folder (no siblings)");
  String source="/folder2/";
  String destination="/folder2_copy/";
  long timestamp=System.currentTimeMillis();
  storeResources(cms,source);
  cms.copyResource(source,destination,I_CmsConstants.C_COPY_AS_NEW);
  List subresources;
  Iterator i;
  subresources=getSubtree(cms,source);
  i=subresources.iterator();
  while (i.hasNext()) {
    CmsResource res=(CmsResource)i.next();
    String resName=cms.getSitePath(res);
    assertFilter(cms,resName,OpenCmsTestResourceFilter.FILTER_EQUAL);
  }
  subresources=getSubtree(cms,destination);
  setMapping(destination,source);
  OpenCmsTestResourceConfigurableFilter filter=new OpenCmsTestResourceConfigurableFilter(OpenCmsTestResourceFilter.FILTER_COPY);
  filter.disableSiblingCountTest();
  i=subresources.iterator();
  while (i.hasNext()) {
    CmsResource res=(CmsResource)i.next();
    String resName=cms.getSitePath(res);
    assertProject(cms,resName,cms.getRequestContext().currentProject());
    assertState(cms,resName,I_CmsConstants.C_STATE_NEW);
    assertDateLastModifiedAfter(cms,resName,timestamp);
    assertDateCreatedAfter(cms,resName,timestamp);
    assertUserLastModified(cms,resName,cms.getRequestContext().currentUser());
    assertUserCreated(cms,resName,cms.getRequestContext().currentUser());
    assertLock(cms,resName);
    assertSiblingCount(cms,resName,1);
    assertFilter(cms,resName,filter);
  }
}
