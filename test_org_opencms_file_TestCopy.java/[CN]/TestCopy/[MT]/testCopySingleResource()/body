{
  CmsObject cms=getCmsObject();
  echo("Testing copy of a file");
  String source="/index.html";
  String destination="/index_copy.html";
  long timestamp=System.currentTimeMillis();
  storeResources(cms,source);
  cms.copyResource(source,destination);
  assertFilter(cms,source,OpenCmsTestResourceFilter.FILTER_EQUAL);
  assertProject(cms,destination,cms.getRequestContext().currentProject());
  assertState(cms,destination,I_CmsConstants.C_STATE_NEW);
  assertDateLastModifiedAfter(cms,destination,timestamp);
  assertDateCreatedAfter(cms,destination,timestamp);
  assertUserLastModified(cms,destination,cms.getRequestContext().currentUser());
  assertUserCreated(cms,destination,cms.getRequestContext().currentUser());
  assertLock(cms,destination,CmsLock.C_TYPE_EXCLUSIVE);
  setMapping(destination,source);
  assertFilter(cms,destination,OpenCmsTestResourceFilter.FILTER_COPY);
}
