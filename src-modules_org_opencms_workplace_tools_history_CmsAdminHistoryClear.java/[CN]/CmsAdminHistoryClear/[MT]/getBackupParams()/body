{
  HttpServletRequest request=getJsp().getRequest();
  Map parameterMap=new HashMap();
  String paramVersions=request.getParameter("versions");
  String paramDate=request.getParameter("date");
  int versions=0;
  long timeStamp=0;
  boolean useVersions=false;
  try {
    versions=Integer.parseInt(paramVersions);
    useVersions=true;
  }
 catch (  NumberFormatException e) {
    try {
      timeStamp=CmsCalendarWidget.getCalendarDate(getMessages(),paramDate,false);
    }
 catch (    ParseException ex) {
      throw new CmsIllegalArgumentException(Messages.get().container(Messages.ERR_INVALID_DATE_1,paramDate),ex);
    }
  }
  if (useVersions) {
    timeStamp=System.currentTimeMillis() + 86400000;
  }
  if (DEBUG) {
    System.err.println("Versions: " + versions + "\nDate: "+ timeStamp);
  }
  parameterMap.put("timeStamp",String.valueOf(timeStamp));
  parameterMap.put("versions",String.valueOf(versions));
  if (DEBUG) {
    System.err.println("Done");
  }
  return parameterMap;
}
