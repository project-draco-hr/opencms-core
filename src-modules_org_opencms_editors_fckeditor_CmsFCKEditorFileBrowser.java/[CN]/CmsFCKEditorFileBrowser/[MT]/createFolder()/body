{
  createXMLHead();
  Element error=getDocument().getRootElement().addElement(NODE_ERROR);
  try {
    getCms().createResource(getParamCurrentFolder() + getParamNewFolderName(),CmsResourceTypeFolder.RESOURCE_TYPE_ID);
    error.addAttribute(ATTR_NUMBER,ERROR_CREATEFOLDER_OK);
  }
 catch (  Exception e) {
    if (e instanceof CmsVfsResourceAlreadyExistsException) {
      error.addAttribute(ATTR_NUMBER,ERROR_CREATEFOLDER_EXISTS);
    }
 else     if (e instanceof CmsIllegalArgumentException) {
      error.addAttribute(ATTR_NUMBER,ERROR_CREATEFOLDER_INVALIDNAME);
    }
 else     if (e instanceof CmsPermissionViolationException) {
      error.addAttribute(ATTR_NUMBER,ERROR_CREATEFOLDER_NOPERMISSIONS);
    }
 else {
      error.addAttribute(ATTR_NUMBER,ERROR_CREATEFOLDER_UNKNOWNERROR);
    }
  }
  try {
    return CmsXmlUtils.marshal(getDocument(),CmsEncoder.ENCODING_UTF_8);
  }
 catch (  CmsException e) {
    return "";
  }
}
