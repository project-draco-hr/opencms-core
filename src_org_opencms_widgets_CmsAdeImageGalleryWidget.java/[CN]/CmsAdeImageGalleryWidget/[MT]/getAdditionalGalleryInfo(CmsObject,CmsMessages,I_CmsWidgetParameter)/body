{
  CmsVfsImageWidgetConfiguration config=getWidgetConfiguration(cms,messages,param);
  JSONObject result=new JSONObject();
  result.put(I_CmsGalleryProviderConstants.ReqParam.useFormats.name(),config.isShowFormat());
  result.put(I_CmsGalleryProviderConstants.ReqParam.imageFormats.name(),new JSONArray(config.getFormatValues()));
  String temp=config.getSelectFormatString();
  String[] formatNames=new String[0];
  if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(temp)) {
    formatNames=config.getSelectFormatString().split("\\|");
  }
  result.put(I_CmsGalleryProviderConstants.ReqParam.imageFormatNames.name(),new JSONArray(formatNames));
  return result;
}
