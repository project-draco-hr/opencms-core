{
  m_controller=controller;
  final CmsMessages messages=OpenCms.getWorkplaceManager().getMessages(locale);
  Map<String,String> macros=Maps.newHashMap();
  macros.put("showSecure","" + controller.isShowSecure());
  String pctype=controller.getPcType();
  CmsVaadinUtils.readAndLocalizeDesign(this,messages,macros);
  m_securityField.addItem("public");
  m_securityField.addItem("private");
  m_securityField.setValue(pctype);
  m_copyright.setContentMode(ContentMode.HTML);
  m_copyright.setValue(CmsLoginHelper.getCopyrightHtml(locale));
  m_securityField.setItemCaption("private",messages.key(org.opencms.workplace.Messages.GUI_LOGIN_PCTYPE_PRIVATE_0));
  m_securityField.setItemCaption("public",messages.key(org.opencms.workplace.Messages.GUI_LOGIN_PCTYPE_PUBLIC_0));
  setWidth("600px");
  m_loginButton.setClickShortcut(KeyCode.ENTER);
  m_loginButton.addClickListener(new ClickListener(){
    public void buttonClick(    ClickEvent event){
      m_controller.onClickLogin();
    }
  }
);
  addAttachListener(new AttachListener(){
    @SuppressWarnings("synthetic-access") public void attach(    AttachEvent event){
      m_userField.focus();
    }
  }
);
  ClickListener forgotPasswordListener=new ClickListener(){
    public void buttonClick(    ClickEvent event){
      m_controller.onClickForgotPassword();
    }
  }
;
  m_forgotPasswordButton.addClickListener(forgotPasswordListener);
  m_optionsButton.addClickListener(new ClickListener(){
    public void buttonClick(    ClickEvent event){
      toggleOptionsVisible();
    }
  }
);
  setOptionsVisible(false);
  m_error.setContentMode(ContentMode.HTML);
}
