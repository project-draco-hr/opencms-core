{
  if (stopLevel != -1) {
    int currentLevel=getPathLevel(item.getPath());
    if (currentLevel > stopLevel) {
      stopLevel=-1;
    }
 else     if (currentLevel == stopLevel) {
      return item;
    }
  }
  if (item.getChildCount() > 0) {
    CmsTreeItem child=item.getChild(item.getChildCount() - 1);
    if (child.isOpen()) {
      return CmsTreeItem.getLastOpenedItem(child,stopLevel);
    }
  }
  return item;
}
