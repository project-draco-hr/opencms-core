{
  if ((m_availableModules == null) || m_availableModules.isEmpty()) {
    m_availableModules=new HashMap();
    m_moduleDependencies=new HashMap();
    m_moduleFilenames=new HashMap();
    m_components=new CmsIdentifiableObjectContainer(true,true);
    try {
      addComponentsFromPath(m_webAppRfsPath + FOLDER_SETUP);
      Map modules=CmsModuleManager.getAllModulesFromPath(getModuleFolder());
      Iterator itMods=modules.entrySet().iterator();
      while (itMods.hasNext()) {
        Map.Entry entry=(Map.Entry)itMods.next();
        CmsModule module=(CmsModule)entry.getKey();
        m_availableModules.put(module.getName(),module);
        m_moduleFilenames.put(module.getName(),entry.getValue());
        addComponentsFromPath(getModuleFolder() + entry.getValue());
      }
    }
 catch (    CmsConfigurationException e) {
      throw new CmsRuntimeException(e.getMessageContainer());
    }
    initializeComponents(new HashSet(m_availableModules.keySet()));
  }
  return m_availableModules;
}
