{
  String internal=request.getParameter("internal");
  CmsFile resource;
  boolean internalValue=false;
  if (internal != null) {
    internalValue=true;
  }
  try {
    resource=(CmsFile)getCms().readFileHeader(getParamResource());
    int flags=resource.getFlags();
    if (internalValue) {
      if ((flags & I_CmsConstants.C_ACCESS_INTERNAL_READ) == 0) {
        flags+=I_CmsConstants.C_ACCESS_INTERNAL_READ;
      }
    }
 else {
      if ((flags & I_CmsConstants.C_ACCESS_INTERNAL_READ) > 0) {
        flags-=I_CmsConstants.C_ACCESS_INTERNAL_READ;
      }
    }
    resource.setFlags(flags);
    getCms().writeFileHeader(resource);
  }
 catch (  CmsException e) {
    m_errorMessages.add(key("dialog.permission.error.internal"));
    return false;
  }
  return true;
}
