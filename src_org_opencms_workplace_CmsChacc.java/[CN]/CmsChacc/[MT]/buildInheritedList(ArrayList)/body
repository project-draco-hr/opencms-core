{
  StringBuffer retValue=new StringBuffer("");
  String view=getSettings().getDetailView();
  Iterator i;
  if ("long".equals(view)) {
    i=entries.iterator();
    while (i.hasNext()) {
      CmsAccessControlEntry curEntry=(CmsAccessControlEntry)i.next();
      retValue.append(buildPermissionEntryForm(curEntry,false,false));
      String connectedResource=getConnectedResource(curEntry);
      if (connectedResource != null) {
        retValue.append("<tr><td colspan=\"3\">inherited from  ");
        retValue.append(connectedResource);
        retValue.append("</td></tr>\n");
      }
    }
  }
 else {
    try {
      CmsAccessControlList acList=getCms().getAccessControlList(getSettings().getFileUri(),true);
      Set principalSet=acList.getPrincipals();
      i=principalSet.iterator();
      while (i.hasNext()) {
        CmsUUID principalId=(CmsUUID)i.next();
        I_CmsPrincipal principal=getCms().lookupPrincipal(principalId);
        CmsPermissionSet permissions=acList.getPermissions(principal);
        retValue.append(buildPermissionEntryForm(principalId,permissions,false,false));
      }
    }
 catch (    CmsException e) {
    }
  }
  return retValue;
}
