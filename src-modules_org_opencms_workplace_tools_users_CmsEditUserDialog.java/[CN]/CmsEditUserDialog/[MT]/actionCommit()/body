{
  List errors=new ArrayList();
  try {
    if (m_user.getId() == null) {
      CmsUser newUser=getCms().createUser(m_user.getName(),m_pwdInfo.getNewPwd(),m_user.getDescription(),m_user.getAdditionalInfo());
      newUser.setFirstname(m_user.getFirstname());
      newUser.setLastname(m_user.getLastname());
      newUser.setEmail(m_user.getEmail());
      newUser.setAddress(m_user.getAddress());
      m_user=newUser;
    }
 else     if (CmsStringUtil.isNotEmpty(m_pwdInfo.getNewPwd())) {
      getCms().setPassword(m_user.getName(),m_pwdInfo.getNewPwd());
    }
    getCms().writeUser(m_user);
    getSettings().setHtmlList(null);
  }
 catch (  Throwable t) {
    errors.add(t);
  }
  setCommitErrors(errors);
}
