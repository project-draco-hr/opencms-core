{
  byte[] reportBytes;
  try {
    reportBytes=OpenCms.getPublishManager().getReportContents(publishJob);
  }
 catch (  CmsException e) {
    if (LOG.isErrorEnabled()) {
      LOG.error(e.getLocalizedMessage());
    }
    return STATE_OK;
  }
  String report=new String(reportBytes);
  if (report.indexOf("<span class='warn'>") > -1) {
    return STATE_WARNING;
  }
  if (report.indexOf("<span class='err'>") > -1) {
    return STATE_ERROR;
  }
  return STATE_OK;
}
