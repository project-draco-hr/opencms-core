{
  int numElements=nl.getLength();
  Vector collectNames=new Vector();
  for (int i=0; i < numElements; i++) {
    Node n=nl.item(i);
    if (n.getNodeType() == Node.ELEMENT_NODE && n.getNodeName().toLowerCase().equals(tag.toLowerCase())) {
      String name=((Element)n).getAttribute("name");
      if (name == null || "".equals(name)) {
        if (unnamedAllowed) {
          name="(default)";
        }
 else {
          if (CmsLog.getLog(this).isErrorEnabled()) {
            CmsLog.getLog(this).error("Unnamed <" + n.getNodeName() + "> found in OpenCms control file "+ getAbsoluteFilename());
          }
          throw new CmsLegacyException("Unnamed \"" + n.getNodeName() + "\" found in OpenCms control file "+ getAbsoluteFilename(),CmsLegacyException.C_XML_TAG_MISSING);
        }
      }
      collectNames.addElement(name);
    }
  }
  return collectNames.elements();
}
