{
  boolean isDefault=getSubValueBoolean(cms,xmlType,N_IS_DEFAULT);
  CmsUUID source=getSubValueID(cms,xmlType,N_SOURCE);
  CmsResource resource=cms.readResource(source);
  String resTypeName=getTypeName(resource.getTypeId());
  CmsUUID folder=getSubValueID(cms,xmlType,CmsXmlUtils.concatXpath(N_DESTINATION,N_FOLDER));
  String pattern=getSubValueString(cms,xmlType,CmsXmlUtils.concatXpath(N_DESTINATION,N_PATTERN));
  CmsResource folderRes=null;
  CmsLazyFolder lazyFolder=null;
  if (folder == null) {
    String path="/" + resTypeName;
    lazyFolder=new CmsLazyFolder(path);
  }
 else {
    folderRes=cms.readResource(folder);
    lazyFolder=new CmsLazyFolder(folderRes);
  }
  CmsConfigurationItem configItem=new CmsConfigurationItem(resource,folderRes,lazyFolder,pattern,isDefault);
  List<I_CmsXmlContentValueLocation> fmtValues=xmlType.getSubValues(N_FORMATTER);
  List<CmsFormatterBean> formatters=new ArrayList<CmsFormatterBean>();
  for (  I_CmsXmlContentValueLocation fmtValue : fmtValues) {
    String jspRootPath=getSubValueString(cms,fmtValue,N_JSP);
    String fmtType=getSubValueString(cms,fmtValue,N_TYPE);
    String minWidth=getSubValueString(cms,fmtValue,N_MINWIDTH);
    String maxwidth=getSubValueString(cms,fmtValue,N_MAXWIDTH);
    String preview=getSubValueString(cms,fmtValue,N_PREVIEW);
    String searchContent=getSubValueString(cms,fmtValue,N_SEARCHCONTENT);
    formatters.add(new CmsFormatterBean(fmtType,jspRootPath,minWidth,maxwidth,preview,searchContent,m_content.getFile().getRootPath()));
  }
  CmsFormatterConfiguration formatterConfiguration=new CmsFormatterConfiguration(formatters);
  if (formatterConfiguration.hasFormatters()) {
    m_formatterConfigurations.put(resTypeName,formatterConfiguration);
  }
  m_newElements.add(configItem);
  if (!isDefault && m_configuration.containsKey(resTypeName)) {
    return;
  }
  m_configuration.put(resTypeName,configItem);
}
