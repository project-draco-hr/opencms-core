{
  Map<String,CmsXmlSitemap> active=m_cache.getActiveSitemaps(cms);
  String rootUri=cms.getRequestContext().addSiteRoot(uri);
  Map.Entry<String,CmsXmlSitemap> bestMatch=null;
  for (  Map.Entry<String,CmsXmlSitemap> entry : active.entrySet()) {
    String key=entry.getKey();
    if (!key.startsWith(rootUri)) {
      continue;
    }
    if ((bestMatch == null) || (!findRoot && key.startsWith(bestMatch.getKey()) && (key.length() != bestMatch.getKey().length())) || (findRoot && bestMatch.getKey().startsWith(key))) {
      if (cms.existsResource(entry.getValue().getFile().getStructureId())) {
        bestMatch=entry;
      }
    }
  }
  if (bestMatch == null) {
    return null;
  }
  return bestMatch.getValue();
}
