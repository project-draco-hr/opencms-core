{
  Map<String,CmsXmlSitemap> active;
  if (project.isOnlineProject()) {
    m_activeOnline=Collections.synchronizedMap(new HashMap<String,CmsXmlSitemap>());
    OpenCms.getMemoryMonitor().register(CmsSitemapCache.class.getName() + ".sitemapActiveOnline",m_activeOnline);
    active=m_activeOnline;
  }
 else {
    m_activeOffline=Collections.synchronizedMap(new HashMap<String,CmsXmlSitemap>());
    OpenCms.getMemoryMonitor().register(CmsSitemapCache.class.getName() + ".sitemapActiveOffline",m_activeOffline);
    active=m_activeOffline;
  }
  m_adminCms.getRequestContext().setCurrentProject(project);
  List<CmsResource> sitemaps=m_adminCms.readResources("/",CmsResourceFilter.DEFAULT_FILES.addRequireType(getSitemapTypeId()).addExcludeFlags(CmsResource.FLAG_TEMPFILE));
  for (  CmsResource resource : sitemaps) {
    if (CmsResource.isTemporaryFileName(resource.getName())) {
      continue;
    }
    CmsXmlSitemap sitemap=CmsXmlSitemapFactory.unmarshal(m_adminCms,resource);
    for (    Locale locale : sitemap.getLocales()) {
      active.put(locale.toString() + sitemap.getSitemap(m_adminCms,locale).getEntryPoint(),sitemap);
    }
  }
  return active;
}
