{
  m_adminCms=adminCms;
  CmsSitemapCacheSettings cacheSettings=systemConfiguration.getSitemapCacheSettings();
  if (cacheSettings == null) {
    cacheSettings=new CmsSitemapCacheSettings();
  }
  m_cache=new CmsOnlineAndOfflineSitemapCache(adminCms,memoryMonitor);
  m_sitemapXmlCaches=new HashMap<Boolean,CmsSitemapXmlCache>();
  CmsSitemapXmlCache onlineXmlCache=new CmsSitemapXmlCache("Online",true,cacheSettings.getDocumentOnlineSize());
  CmsSitemapXmlCache offlineXmlCache=new CmsSitemapXmlCache("Offline",false,cacheSettings.getDocumentOfflineSize());
  m_sitemapXmlCaches.put(Boolean.TRUE,onlineXmlCache);
  m_sitemapXmlCaches.put(Boolean.FALSE,offlineXmlCache);
  if (!isSitemapResourceInitConfigured(systemConfiguration)) {
    LOG.warn(Messages.get().getBundle().key(Messages.LOG_WARN_SITEMAP_HANDLER_NOT_CONFIGURED_1,CmsSitemapResourceHandler.class.getName()));
  }
}
