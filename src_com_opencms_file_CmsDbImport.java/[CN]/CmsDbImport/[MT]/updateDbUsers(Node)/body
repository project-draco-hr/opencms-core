{
  NodeList parentElements=parentNode.getChildNodes();
  Hashtable h_addInfo=new Hashtable();
  int nll=parentElements.getLength();
  int i, htype;
  for (i=0; i < nll; i++) {
    if ((parentElements.item(i).getNodeName()).equals(C_TULOGIN) && (parentElements.item(i).hasChildNodes())) {
      m_uLogin=parentElements.item(i).getFirstChild().getNodeValue();
    }
    if ((parentElements.item(i).getNodeName()).equals(C_TUPASSWD) && (parentElements.item(i).hasChildNodes())) {
      m_uPasswd=parentElements.item(i).getFirstChild().getNodeValue();
    }
    if ((parentElements.item(i).getNodeName()).equals(C_TUNAME) && (parentElements.item(i).hasChildNodes())) {
      m_uName=parentElements.item(i).getFirstChild().getNodeValue();
    }
    if ((parentElements.item(i).getNodeName()).equals(C_TUFIRSTNAME) && (parentElements.item(i).hasChildNodes())) {
      m_uFirstname=parentElements.item(i).getFirstChild().getNodeValue();
    }
    if ((parentElements.item(i).getNodeName()).equals(C_TUDESC) && (parentElements.item(i).hasChildNodes())) {
      m_uDesc=parentElements.item(i).getFirstChild().getNodeValue();
    }
    if ((parentElements.item(i).getNodeName()).equals(C_TUEMAIL) && (parentElements.item(i).hasChildNodes())) {
      m_uEmail=parentElements.item(i).getFirstChild().getNodeValue();
    }
    if ((parentElements.item(i).getNodeName()).equals(C_TUDGROUP) && (parentElements.item(i).hasChildNodes())) {
      m_uDGroup=parentElements.item(i).getFirstChild().getNodeValue();
    }
    if ((parentElements.item(i).getNodeName()).equals(C_TUDISABLED) && (parentElements.item(i).hasChildNodes())) {
      m_uDis=parentElements.item(i).getFirstChild().getNodeValue();
    }
    if ((parentElements.item(i).getNodeName()).equals(C_TUFLAG) && (parentElements.item(i).hasChildNodes())) {
      m_uFlag=parentElements.item(i).getFirstChild().getNodeValue();
    }
    if ((parentElements.item(i).getNodeName()).equals(C_TUNAME) && (parentElements.item(i).hasChildNodes())) {
      m_uName=parentElements.item(i).getFirstChild().getNodeValue();
    }
    if ((parentElements.item(i).getNodeName()).equals(C_TUFIRSTNAME) && (parentElements.item(i).hasChildNodes())) {
      m_uFirstname=parentElements.item(i).getFirstChild().getNodeValue();
    }
    if ((parentElements.item(i).getNodeName()).equals(C_TUEMAIL) && (parentElements.item(i).hasChildNodes())) {
      m_uEmail=parentElements.item(i).getFirstChild().getNodeValue();
    }
    if ((parentElements.item(i).getNodeName()).equals(C_TUADDINFO) && (parentElements.item(i).hasChildNodes())) {
      NodeList childElements=parentElements.item(i).getChildNodes();
      int cnll=childElements.getLength();
      int j=0;
      String key=null;
      for (j=0; j < cnll; j++) {
        if ((childElements.item(j).getNodeName()).equals(C_TUINFOKEY) && (childElements.item(j).hasChildNodes())) {
          key=childElements.item(j).getFirstChild().getNodeValue();
        }
        if ((childElements.item(j).getNodeName()).equals(C_TUINFOVALUE) && (childElements.item(j).hasChildNodes())) {
          String value=childElements.item(j).getFirstChild().getNodeValue();
          h_addInfo.put(key,value);
        }
      }
    }
  }
  try {
    CmsUser newUser=m_RB.addUser(m_user,m_project,m_uLogin,m_uPasswd,m_uDGroup,m_uDesc,h_addInfo,Integer.parseInt(m_uFlag));
    newUser.setEmail(m_uEmail);
    newUser.setFirstname(m_uFirstname);
    newUser.setLastname(m_uName);
    m_RB.writeUser(m_user,m_project,newUser);
  }
 catch (  CmsException e) {
    m_errMsg.addElement(e.getMessage());
  }
  for (i=0; i < nll; i++) {
    if ((parentElements.item(i).getNodeName()).equals(C_TUSERGROUPS) && (parentElements.item(i).hasChildNodes())) {
      NodeList childElements=parentElements.item(i).getChildNodes();
      int cnll=childElements.getLength();
      int j=0;
      for (j=0; j < cnll; j++) {
        if ((childElements.item(j).getNodeName()).equals(C_TUGROUP) && (childElements.item(j).hasChildNodes())) {
          try {
            m_uGroup=(childElements.item(j).getFirstChild().getNodeValue());
            m_RB.addUserToGroup(m_user,m_project,m_uLogin,m_uGroup);
          }
 catch (          CmsException e) {
            m_errMsg.addElement(e.getMessage());
          }
        }
      }
    }
  }
}
