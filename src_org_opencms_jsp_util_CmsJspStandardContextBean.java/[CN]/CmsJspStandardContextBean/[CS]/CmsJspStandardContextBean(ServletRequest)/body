{
  CmsFlexController controller=CmsFlexController.getController(req);
  if (controller != null) {
    m_cms=controller.getCmsObject();
  }
 else {
    m_cms=(CmsObject)req.getAttribute(ATTRIBUTE_CMS_OBJECT);
  }
  if (m_cms == null) {
    throw new CmsRuntimeException(Messages.get().container(Messages.ERR_MISSING_CMS_CONTROLLER_1,CmsJspBean.class.getName()));
  }
  m_detailContentId=CmsDetailPageResourceHandler.getDetailId(req);
}
