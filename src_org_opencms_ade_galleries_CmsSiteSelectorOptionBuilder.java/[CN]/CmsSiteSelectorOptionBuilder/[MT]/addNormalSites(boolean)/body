{
  CmsSiteManagerImpl siteManager=OpenCms.getSiteManager();
  List<CmsSite> sites=siteManager.getAvailableSites(m_cms,true,false,m_cms.getRequestContext().getOuFqn());
  try {
    CmsObject rootCms=OpenCms.initCmsObject(m_cms);
    rootCms.getRequestContext().setSiteRoot("/");
    for (    CmsSite site : sites) {
      String siteRoot=site.getSiteRoot();
      if (rootCms.existsResource(siteRoot,CmsResourceFilter.ONLY_VISIBLE_NO_DELETED)) {
        Type type=Type.site;
        String message=siteRoot;
        if (siteRoot.equals("")) {
          type=Type.root;
          message="/";
          if (!includeRoot) {
            continue;
          }
        }
        addOption(type,siteRoot,message);
      }
    }
  }
 catch (  CmsException e) {
  }
}
