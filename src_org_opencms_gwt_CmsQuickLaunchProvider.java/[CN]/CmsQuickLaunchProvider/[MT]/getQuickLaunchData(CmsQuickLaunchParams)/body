{
  List<CmsQuickLaunchData> result=Lists.newArrayList();
  CmsUserSettings userSettings=new CmsUserSettings(m_cms);
  boolean usesNewWorkplace=userSettings.usesNewWorkplace();
  for (  I_CmsWorkplaceAppConfiguration config : OpenCms.getWorkplaceAppManager().getQuickLaunchConfigurations(m_cms)) {
    try {
      boolean reload=false;
      String link=null;
      if (CmsFileExplorerConfiguration.APP_ID.equals(config.getId())) {
        if (!usesNewWorkplace) {
          continue;
        }
        link=CmsCoreService.getVaadinWorkplaceLink(m_cms,params.getPageId());
      }
 else       if (CmsPageEditorConfiguration.APP_ID.equals(config.getId())) {
        if (params.isPageContext()) {
          reload=true;
        }
 else         if (params.isSitemapContext()) {
          if (params.getReturnCode() != null) {
            CmsReturnLinkInfo linkInfo=CmsCoreService.internalGetLinkForReturnCode(m_cms,params.getReturnCode());
            link=linkInfo.getLink();
          }
 else {
            CmsResource resource=m_cms.readDefaultFile("/");
            CmsReturnLinkInfo linkInfo=CmsCoreService.internalGetLinkForReturnCode(m_cms,"" + resource.getStructureId());
            link=linkInfo.getLink();
          }
        }
      }
 else       if (CmsSitemapEditorConfiguration.APP_ID.equals(config.getId())) {
        if (params.isSitemapContext()) {
          reload=true;
        }
 else         if (params.isPageContext()) {
          String sitemapLink=OpenCms.getLinkManager().substituteLinkForUnknownTarget(m_cms,CmsADEManager.PATH_SITEMAP_EDITOR_JSP);
          String returnCode=params.getDetailId() != null ? "" + params.getPageId() + ":"+ params.getDetailId() : "" + params.getPageId();
          link=sitemapLink + "?path=" + params.getPath()+ "&returncode="+ returnCode;
        }
      }
 else {
        if (!usesNewWorkplace) {
          continue;
        }
        link=OpenCms.getSystemInfo().getWorkplaceContext() + "#!" + config.getId();
      }
      Resource icon=config.getIcon();
      String imageLink="";
      if (icon instanceof ExternalResource) {
        imageLink=((ExternalResource)icon).getURL();
      }
      String name=config.getName(OpenCms.getWorkplaceManager().getWorkplaceLocale(m_cms));
      CmsQuickLaunchData data=new CmsQuickLaunchData(link,name,imageLink,config instanceof CmsLegacyAppConfiguration,reload);
      result.add(data);
    }
 catch (    Exception e) {
      LOG.error(e.getLocalizedMessage());
      throw new RuntimeException(e);
    }
  }
  return result;
}
