{
  List<CmsSearchResult> result=getSearchResults(params);
  int count=getSearchBean(params).getSearchResultCount();
  CmsResource[] resources=new CmsResource[count];
  int from=(getSearchBean(params).getSearchPage() - 1) * getSearchBean(params).getMatchesPerPage();
  int siteLen=cms.getRequestContext().getSiteRoot().length();
  Iterator<CmsSearchResult> it=result.iterator();
  while (it.hasNext()) {
    CmsSearchResult sr=it.next();
    CmsResource resource=cms.readResource(sr.getPath().substring(siteLen),CmsResourceFilter.ALL);
    m_resCache.put(resource.getStructureId().toString(),resource);
    m_srCache.put(resource.getStructureId().toString(),sr);
    resources[from]=resource;
    from++;
  }
  return Arrays.asList(resources);
}
