{
  if (defaultValue == null)   defaultValue="";
  String value;
  if ("parent".equals(action)) {
    value=req.getCmsObject().readProperty(req.getCmsRequestedResource(),property,false,defaultValue);
  }
 else   if ("this".equals(action)) {
    value=req.getCmsObject().readProperty(req.getCmsResource(),property,false,defaultValue);
  }
 else   if ("search-this".equals(action)) {
    value=req.getCmsObject().readProperty(req.getCmsResource(),property,true,defaultValue);
  }
 else   if ("search-parent".equals(action) || "search".equals(action)) {
    value=req.getCmsObject().readProperty(req.getCmsRequestedResource(),property,true,defaultValue);
  }
 else {
    value=req.getCmsObject().readProperty(req.toAbsolute(action),property,false,defaultValue);
  }
  if (escape)   value=Encoder.escapeHtml(value);
  return value;
}
