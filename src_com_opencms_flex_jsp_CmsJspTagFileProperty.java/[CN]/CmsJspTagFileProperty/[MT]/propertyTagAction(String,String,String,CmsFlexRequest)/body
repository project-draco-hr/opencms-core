{
  String result=null;
  if ("parent".equals(action)) {
    result=CmsPropertyLookup.lookupProperty(req.getCmsObject(),req.getCmsRequestedResource(),property,false);
  }
 else   if ("this".equals(action)) {
    result=CmsPropertyLookup.lookupProperty(req.getCmsObject(),req.getCmsResource(),property,false);
  }
 else   if ("search-this".equals(action)) {
    result=CmsPropertyLookup.lookupProperty(req.getCmsObject(),req.getCmsResource(),property,true);
  }
 else   if ("search-parent".equals(action) || "search".equals(action)) {
    result=CmsPropertyLookup.lookupProperty(req.getCmsObject(),req.getCmsRequestedResource(),property,true);
  }
 else {
    result=CmsPropertyLookup.lookupProperty(req.getCmsObject(),req.toAbsolute(action),property,false);
  }
  if ((defaultValue != null) && (result == null)) {
    result=defaultValue;
  }
  return result;
}
