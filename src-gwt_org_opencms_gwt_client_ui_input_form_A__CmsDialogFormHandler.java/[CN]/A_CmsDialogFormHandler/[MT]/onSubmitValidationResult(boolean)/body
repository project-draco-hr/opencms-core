{
  if (ok) {
    m_dialog.closeDialog();
    Map<String,String> values=m_form.collectValues();
    Set<String> editedFields=new HashSet<String>(m_form.getEditedFields());
    editedFields.retainAll(values.keySet());
    onSubmitForm(values,editedFields);
  }
 else {
    m_dialog.setOkButtonEnabled(m_form.noFieldsInvalid());
  }
}
