{
  boolean editProps=Boolean.valueOf(getParamNewResourceEditProps()).booleanValue();
  boolean createIndex=Boolean.valueOf(getParamCreateIndex()).booleanValue();
  if (editProps || createIndex) {
    if (editProps) {
      Map params=new HashMap();
      params.put(PARAM_RESOURCE,getParamResource());
      if (createIndex) {
        params.put(CmsPropertyAdvanced.PARAM_DIALOGMODE,CmsPropertyAdvanced.MODE_WIZARD_CREATEINDEX);
      }
 else {
        params.put(CmsPropertyAdvanced.PARAM_DIALOGMODE,CmsPropertyAdvanced.MODE_WIZARD);
      }
      sendForward(CmsPropertyAdvanced.URI_PROPERTY_DIALOG_HANDLER,params);
    }
 else     if (createIndex) {
      String newFolder=getParamResource();
      if (!newFolder.endsWith("/")) {
        newFolder+="/";
      }
      getSettings().setExplorerResource(newFolder);
      String newUri=PATH_DIALOGS + OpenCms.getWorkplaceManager().getExplorerTypeSetting(CmsResourceTypeXmlPage.getStaticTypeName()).getNewResourceUri();
      String[] uri=CmsRequestUtil.splitUri(newUri);
      Map params=CmsRequestUtil.createParameterMap(uri[2]);
      params.put(CmsPropertyAdvanced.PARAM_DIALOGMODE,CmsPropertyAdvanced.MODE_WIZARD_CREATEINDEX);
      sendForward(uri[0],params);
    }
  }
  List folderList=new ArrayList(1);
  folderList.add(CmsResource.getParentFolder(getParamResource()));
  getJsp().getRequest().setAttribute(REQUEST_ATTRIBUTE_RELOADTREE,folderList);
  actionCloseDialog();
}
