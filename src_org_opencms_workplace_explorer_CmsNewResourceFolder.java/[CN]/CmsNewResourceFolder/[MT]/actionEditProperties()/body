{
  boolean editProps=Boolean.valueOf(getParamNewResourceEditProps()).booleanValue();
  boolean createIndex=Boolean.valueOf(getParamCreateIndex()).booleanValue();
  if (editProps || createIndex) {
    String params="?" + PARAM_RESOURCE + "="+ CmsEncoder.encode(getParamResource());
    if (createIndex) {
      params+="&" + CmsPropertyAdvanced.PARAM_DIALOGMODE + "="+ CmsPropertyAdvanced.MODE_WIZARD_CREATEINDEX;
    }
 else {
      params+="&" + CmsPropertyAdvanced.PARAM_DIALOGMODE + "="+ CmsPropertyAdvanced.MODE_WIZARD;
    }
    if (editProps) {
      sendCmsRedirect(CmsPropertyAdvanced.URI_PROPERTY_DIALOG_HANDLER + params);
    }
 else     if (createIndex) {
      String newUri=OpenCms.getWorkplaceManager().getExplorerTypeSetting(CmsResourceTypeXmlPage.C_RESOURCE_TYPE_NAME).getNewResourceUri();
      try {
        sendCmsRedirect(C_PATH_DIALOGS + newUri);
      }
 catch (      Exception e) {
        if (OpenCms.getLog(this).isErrorEnabled()) {
          OpenCms.getLog(this).error("Error redirecting to new xmlpage dialog " + C_PATH_DIALOGS + newUri);
        }
      }
    }
  }
  List folderList=new ArrayList(1);
  folderList.add(CmsResource.getParentFolder(getParamResource()));
  getJsp().getRequest().setAttribute(C_REQUEST_ATTRIBUTE_RELOADTREE,folderList);
  actionCloseDialog();
}
