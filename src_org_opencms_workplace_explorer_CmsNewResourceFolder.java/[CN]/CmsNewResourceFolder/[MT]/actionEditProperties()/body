{
  boolean editProps=Boolean.valueOf(getParamNewResourceEditProps()).booleanValue();
  boolean createIndex=Boolean.valueOf(getParamCreateIndex()).booleanValue();
  if (editProps || createIndex) {
    String params="?" + PARAM_RESOURCE + "="+ CmsEncoder.encode(getParamResource());
    if (createIndex) {
      params+="&" + CmsPropertyAdvanced.PARAM_DIALOGMODE + "="+ CmsPropertyAdvanced.MODE_WIZARD_CREATEINDEX;
    }
 else {
      params+="&" + CmsPropertyAdvanced.PARAM_DIALOGMODE + "="+ CmsPropertyAdvanced.MODE_WIZARD;
    }
    if (editProps) {
      sendCmsRedirect(CmsPropertyAdvanced.URI_PROPERTY_DIALOG_HANDLER + params);
    }
 else     if (createIndex) {
      String newFolder=getParamResource();
      if (!newFolder.endsWith("/")) {
        newFolder+="/";
      }
      getSettings().setExplorerResource(newFolder);
      String newUri=OpenCms.getWorkplaceManager().getExplorerTypeSetting(CmsResourceTypeXmlPage.getStaticTypeName()).getNewResourceUri();
      newUri+="?" + CmsPropertyAdvanced.PARAM_DIALOGMODE + "="+ CmsPropertyAdvanced.MODE_WIZARD_CREATEINDEX;
      try {
        sendCmsRedirect(C_PATH_DIALOGS + newUri);
        return;
      }
 catch (      IOException e) {
        LOG.error(Messages.get().key(Messages.LOG_REDIRECT_XMLPAGE_FAILED_1,C_PATH_DIALOGS + newUri));
      }
    }
  }
  List folderList=new ArrayList(1);
  folderList.add(CmsResource.getParentFolder(getParamResource()));
  getJsp().getRequest().setAttribute(REQUEST_ATTRIBUTE_RELOADTREE,folderList);
  actionCloseDialog();
}
