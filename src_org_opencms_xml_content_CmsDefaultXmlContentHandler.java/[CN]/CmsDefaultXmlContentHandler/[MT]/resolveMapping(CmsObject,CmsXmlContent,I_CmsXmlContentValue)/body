{
  if (!value.isSimpleType()) {
    return;
  }
  CmsFile file=content.getFile();
  if (file == null) {
    throw new CmsXmlException(Messages.get().container(Messages.ERR_XMLCONTENT_RESOLVE_FILE_NOT_FOUND_0));
  }
  String[] mappings=getMappings(value.getPath());
  if (mappings == null) {
    return;
  }
  CmsObject rootCms=OpenCms.initCmsObject(cms);
  Object logEntry=cms.getRequestContext().getAttribute(CmsLogEntry.ATTR_LOG_ENTRY);
  if (logEntry != null) {
    rootCms.getRequestContext().setAttribute(CmsLogEntry.ATTR_LOG_ENTRY,logEntry);
  }
  rootCms.getRequestContext().setSiteRoot("/");
  List<CmsResource> siblings=rootCms.readSiblings(content.getFile().getRootPath(),CmsResourceFilter.IGNORE_EXPIRATION);
  for (int m=mappings.length - 1; m >= 0; m--) {
    String mapping=mappings[m];
    if (CmsStringUtil.isNotEmpty(mapping)) {
      for (int i=(siblings.size() - 1); i >= 0; i--) {
        String filename=(siblings.get(i)).getRootPath();
        Locale locale=OpenCms.getLocaleManager().getDefaultLocale(rootCms,filename);
        if (!locale.equals(value.getLocale())) {
          continue;
        }
        CmsLock lock=rootCms.getLock(filename);
        if (lock.isUnlocked()) {
          rootCms.lockResource(filename);
        }
 else         if (!lock.isDirectlyOwnedInProjectBy(rootCms)) {
          rootCms.changeLock(filename);
        }
        String stringValue=value.getStringValue(rootCms);
        if (mapping.startsWith(MAPTO_PROPERTY_LIST) && (value.getIndex() == 0)) {
          boolean mapToShared;
          int prefixLength;
          if (mapping.startsWith(MAPTO_PROPERTY_LIST_SHARED)) {
            mapToShared=true;
            prefixLength=MAPTO_PROPERTY_LIST_SHARED.length();
          }
 else           if (mapping.startsWith(MAPTO_PROPERTY_LIST_INDIVIDUAL)) {
            mapToShared=false;
            prefixLength=MAPTO_PROPERTY_LIST_INDIVIDUAL.length();
          }
 else {
            mapToShared=false;
            prefixLength=MAPTO_PROPERTY_LIST.length();
          }
          String property=mapping.substring(prefixLength);
          String path=CmsXmlUtils.removeXpathIndex(value.getPath());
          List<I_CmsXmlContentValue> values=content.getValues(path,locale);
          Iterator<I_CmsXmlContentValue> j=values.iterator();
          StringBuffer result=new StringBuffer(values.size() * 64);
          while (j.hasNext()) {
            I_CmsXmlContentValue val=j.next();
            result.append(val.getStringValue(rootCms));
            if (j.hasNext()) {
              result.append(CmsProperty.VALUE_LIST_DELIMITER);
            }
          }
          CmsProperty p;
          if (mapToShared) {
            p=new CmsProperty(property,null,result.toString());
          }
 else {
            p=new CmsProperty(property,result.toString(),null);
          }
          rootCms.writePropertyObject(filename,p);
          if (mapToShared) {
            i=0;
          }
        }
 else         if (mapping.startsWith(MAPTO_PROPERTY)) {
          boolean mapToShared;
          int prefixLength;
          if (mapping.startsWith(MAPTO_PROPERTY_SHARED)) {
            mapToShared=true;
            prefixLength=MAPTO_PROPERTY_SHARED.length();
          }
 else           if (mapping.startsWith(MAPTO_PROPERTY_INDIVIDUAL)) {
            mapToShared=false;
            prefixLength=MAPTO_PROPERTY_INDIVIDUAL.length();
          }
 else {
            mapToShared=false;
            prefixLength=MAPTO_PROPERTY.length();
          }
          String property=mapping.substring(prefixLength);
          CmsProperty p;
          if (mapToShared) {
            p=new CmsProperty(property,null,stringValue);
          }
 else {
            p=new CmsProperty(property,stringValue,null);
          }
          rootCms.writePropertyObject(filename,p);
          if (mapToShared) {
            i=0;
          }
        }
 else         if (mapping.startsWith(MAPTO_ATTRIBUTE)) {
          String attribute=mapping.substring(MAPTO_ATTRIBUTE.length());
switch (ATTRIBUTES.indexOf(attribute)) {
case 0:
            long date=0;
          try {
            date=Long.valueOf(stringValue).longValue();
          }
 catch (          NumberFormatException e) {
          }
        if (date == 0) {
          date=CmsResource.DATE_RELEASED_DEFAULT;
        }
      rootCms.setDateReleased(filename,date,false);
    if (filename.equals(rootCms.getSitePath(file))) {
      file.setDateReleased(date);
    }
  break;
case 1:
date=0;
try {
date=Long.valueOf(stringValue).longValue();
}
 catch (NumberFormatException e) {
}
if (date == 0) {
date=CmsResource.DATE_EXPIRED_DEFAULT;
}
rootCms.setDateExpired(filename,date,false);
if (filename.equals(rootCms.getSitePath(file))) {
file.setDateExpired(date);
}
break;
default :
}
}
}
}
}
CmsLock lock=rootCms.getLock(file);
if (lock.isUnlocked()) {
rootCms.lockResource(file.getRootPath());
}
 else if (!lock.isExclusiveOwnedBy(rootCms.getRequestContext().currentUser())) {
rootCms.changeLock(file.getRootPath());
}
}
