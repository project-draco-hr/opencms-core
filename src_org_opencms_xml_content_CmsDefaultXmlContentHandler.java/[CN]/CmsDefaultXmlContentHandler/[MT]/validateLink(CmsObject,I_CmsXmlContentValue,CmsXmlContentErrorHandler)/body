{
  if ((value == null) || (!(value instanceof CmsXmlVfsFileValue) && !(value instanceof CmsXmlVarLinkValue))) {
    return false;
  }
  CmsLink link=null;
  if (value instanceof CmsXmlVfsFileValue) {
    link=((CmsXmlVfsFileValue)value).getLink(cms);
  }
 else   if (value instanceof CmsXmlVarLinkValue) {
    link=((CmsXmlVarLinkValue)value).getLink(cms);
  }
  if ((link == null) || !link.isInternal()) {
    return false;
  }
  String siteRoot=CmsSiteManager.getSiteRoot(link.getTarget());
  String oldSite=cms.getRequestContext().getSiteRoot();
  try {
    if (siteRoot != null) {
      cms.getRequestContext().setSiteRoot(siteRoot);
    }
    String resName=cms.getRequestContext().removeSiteRoot(link.getTarget());
    CmsResource res=cms.readResource(resName,CmsResourceFilter.IGNORE_EXPIRATION);
    if (res != null) {
      long time=System.currentTimeMillis();
      if (!res.isReleased(time)) {
        if (errorHandler != null) {
          errorHandler.addWarning(value,Messages.get().getBundle(value.getLocale()).key(Messages.GUI_XMLCONTENT_CHECK_WARNING_NOT_RELEASED_0));
        }
        return true;
      }
 else       if (res.isExpired(time)) {
        if (errorHandler != null) {
          errorHandler.addWarning(value,Messages.get().getBundle(value.getLocale()).key(Messages.GUI_XMLCONTENT_CHECK_WARNING_EXPIRED_0));
        }
        return true;
      }
    }
  }
 catch (  CmsException e) {
    if (errorHandler != null) {
      errorHandler.addError(value,Messages.get().getBundle(value.getLocale()).key(Messages.GUI_XMLCONTENT_CHECK_ERROR_0));
    }
    return true;
  }
 finally {
    cms.getRequestContext().setSiteRoot(oldSite);
  }
  return false;
}
