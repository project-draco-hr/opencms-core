{
  String message=null;
  if (isWarning) {
    message=(String)m_validationWarningMessages.get(value.getElementName());
  }
 else {
    message=(String)m_validationErrorMessages.get(value.getElementName());
  }
  if (message == null) {
    if (isWarning) {
      message=MESSAGE_VALIDATION_DEFAULT_WARNING;
    }
 else {
      message=MESSAGE_VALIDATION_DEFAULT_ERROR;
    }
  }
  Map additionalValues=new HashMap();
  additionalValues.put(CmsMacroResolver.KEY_VALIDATION_VALUE,valueStr);
  additionalValues.put(CmsMacroResolver.KEY_VALIDATION_REGEX,((!matchResult) ? "!" : "") + regex);
  additionalValues.put(CmsMacroResolver.KEY_VALIDATION_PATH,value.getPath());
  CmsMacroResolver resolver=CmsMacroResolver.newInstance().setCmsObject(cms).setMessages(getMessages(cms.getRequestContext().getLocale())).setAdditionalMacros(additionalValues);
  return resolver.resolveMacros(message);
}
