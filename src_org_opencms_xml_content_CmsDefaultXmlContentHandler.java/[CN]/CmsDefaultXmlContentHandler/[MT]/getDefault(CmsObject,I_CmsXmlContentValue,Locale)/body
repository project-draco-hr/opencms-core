{
  String defaultValue;
  if (value.getElement() == null) {
    defaultValue=value.getDefault(locale);
  }
 else {
    String xpath=value.getPath();
    defaultValue=m_defaultValues.get(xpath);
    if (defaultValue == null) {
      xpath=CmsXmlUtils.removeXpath(xpath);
      xpath=CmsXmlUtils.createXpath(xpath,1);
      defaultValue=m_defaultValues.get(xpath);
    }
  }
  if (defaultValue != null) {
    CmsObject newCms=cms;
    try {
      CmsResource file=value.getDocument().getFile();
      CmsSite site=OpenCms.getSiteManager().getSiteForRootPath(file.getRootPath());
      if (site != null) {
        newCms=OpenCms.initCmsObject(cms);
        newCms.getRequestContext().setSiteRoot(site.getSiteRoot());
        newCms.getRequestContext().setUri(newCms.getSitePath(file));
      }
    }
 catch (    Exception e) {
    }
    CmsMacroResolver resolver=CmsMacroResolver.newInstance().setCmsObject(newCms).setMessages(getMessages(locale));
    return resolver.resolveMacros(defaultValue);
  }
  return null;
}
