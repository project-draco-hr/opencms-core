{
  if (KEY_CURRENT_TIME.equals(key)) {
    return String.valueOf(System.currentTimeMillis());
  }
  if (KEY_CURRENT_USER_NAME.equals(key) && m_cms != null) {
    return m_cms.getRequestContext().currentUser().getName();
  }
  if (KEY_CURRENT_USER_FIRSTNAME.equals(key) && m_cms != null) {
    return m_cms.getRequestContext().currentUser().getFirstname();
  }
  if (KEY_CURRENT_USER_LASTNAME.equals(key) && m_cms != null) {
    return m_cms.getRequestContext().currentUser().getLastname();
  }
  if (KEY_CURRENT_USER_FULLNAME.equals(key) && m_cms != null) {
    return m_cms.getRequestContext().currentUser().getFullName();
  }
  if (KEY_CURRENT_USER_EMAIL.equals(key) && m_cms != null) {
    return m_cms.getRequestContext().currentUser().getEmail();
  }
  if (KEY_CURRENT_USER_ADDRESS.equals(key) && m_cms != null) {
    return m_cms.getRequestContext().currentUser().getAddress();
  }
  if (key.startsWith(KEY_LOCALIZED_PREFIX) && m_locale != null) {
    return key(key.substring(KEY_LOCALIZED_PREFIX.length()),m_locale);
  }
  if (key.startsWith(KEY_LOCALIZED_PREFIX) && m_locale == null) {
    return CmsStringUtil.C_MACRO_DELIMITER + CmsStringUtil.C_MACRO_START + key+ CmsStringUtil.C_MACRO_END;
  }
  if (m_values != null) {
    return (String)m_values.get(key);
  }
  return null;
}
