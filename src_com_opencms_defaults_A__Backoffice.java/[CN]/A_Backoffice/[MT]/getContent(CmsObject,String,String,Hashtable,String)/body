{
  byte[] returnProcess=null;
  I_CmsSession session=(CmsSession)cms.getRequestContext().getSession(true);
  CmsXmlWpTemplateFile template=new CmsXmlWpTemplateFile(cms,templateFile);
  String selectbox=(String)parameters.get("selectbox");
  String id=(String)parameters.get("id");
  String idlock=(String)parameters.get("idlock");
  String iddelete=(String)parameters.get("iddelete");
  String idedit=(String)parameters.get("idedit");
  String action=(String)parameters.get("action");
  String ok=(String)parameters.get("ok");
  if (action != null)   parameters.put("action",action);
  if (idlock != null) {
    id=idlock;
    session.putValue("idlock",idlock);
    session.removeValue("idedit");
    session.removeValue("idnew");
    session.removeValue("iddelete");
  }
  if (idedit != null) {
    id=idedit;
    session.putValue("idedit",idedit);
    session.removeValue("idlock");
    session.removeValue("idnew");
    session.removeValue("iddelete");
  }
  if (iddelete != null) {
    id=iddelete;
    session.putValue("iddelete",iddelete);
    session.removeValue("idedit");
    session.removeValue("idnew");
    session.removeValue("idlock");
  }
  if ((id != null) && (id.equals("new"))) {
    session.putValue("idnew",id);
    session.removeValue("idedit");
    session.removeValue("idnew");
    session.removeValue("iddelete");
    session.removeValue("idlock");
  }
  String idsave=(String)session.getValue("idsave");
  if (ok == null)   idsave=null;
  String idnewsave=(String)session.getValue("idnew");
  if ((id != null) && (id.equals("new")) || ((idsave != null) && (idsave.equals("new")))) {
    if (idsave != null)     parameters.put("idsave",idsave);
    if (id != null)     parameters.put("id",id);
    returnProcess=getContentNew(cms,template,elementName,parameters,templateSelector);
    return returnProcess;
  }
  if ((selectbox == null) && (id == null) && (idsave == null)&& (action == null)) {
    returnProcess=getContentHead(cms,template,elementName,parameters,templateSelector);
    return returnProcess;
  }
 else {
    if (selectbox != null) {
      returnProcess=getContentList(cms,template,elementName,parameters,templateSelector);
      return returnProcess;
    }
 else {
      String ideditsave=(String)session.getValue("idedit");
      if ((idedit != null) || (ideditsave != null)) {
        if (idsave != null)         parameters.put("idsave",idsave);
        if (id != null)         parameters.put("id",id);
        returnProcess=getContentEdit(cms,template,elementName,parameters,templateSelector);
        return returnProcess;
      }
 else {
        if (idsave != null) {
          parameters.put("id",idsave);
        }
 else {
          parameters.put("id",id);
        }
        String iddeletesave=(String)session.getValue("iddelete");
        if ((iddelete != null) || (iddeletesave != null)) {
          returnProcess=getContentDelete(cms,template,elementName,parameters,templateSelector);
          return returnProcess;
        }
 else {
          returnProcess=getContentLock(cms,template,elementName,parameters,templateSelector);
          return returnProcess;
        }
      }
    }
  }
}
