{
  try {
    List<CmsSiteMatcher> aliases=new ArrayList<CmsSiteMatcher>();
    for (    String ali : m_aliases) {
      aliases.add(new CmsSiteMatcher(ali));
    }
    m_site.setAliases(aliases);
    if (CmsStringUtil.isEmptyOrWhitespaceOnly(m_site.getServer())) {
      throw new CmsException(Messages.get().container(Messages.ERR_EMPTY_SERVER_URL_0));
    }
    CmsSite site=m_site.toCmsSite();
    CmsObject cms=OpenCms.initCmsObject(getCms());
    cms.getRequestContext().setSiteRoot("");
    cms.readResource(site.getSiteRoot());
    OpenCms.getSiteManager().updateSite(getCms(),m_site.getOriginalSite(),site);
    OpenCms.writeConfiguration(CmsSystemConfiguration.class);
    Map<?,?> objects=(Map<?,?>)getSettings().getListObject();
    if (objects != null) {
      objects.remove(CmsSitesList.class.getName());
    }
  }
 catch (  Exception e) {
    addCommitError(e);
  }
}
