{
  CmsUriSplitter splitter=new CmsUriSplitter(uri);
  String result=splitter.getPrefix();
  try {
    CmsResource res=cms.readResource(result);
    I_CmsDetailPageFinder finder=OpenCms.getADEManager().getDetailPageFinder();
    String detailPage=finder.getDetailPage(cms,res,cms.getRequestContext().getUri());
    if (detailPage != null) {
      result=CmsStringUtil.joinPaths(detailPage,cms.getDetailName(res),"/");
    }
  }
 catch (  CmsException e) {
    LOG.debug(e.getLocalizedMessage(),e);
  }
  result+=splitter.getSuffix();
  return result;
}
