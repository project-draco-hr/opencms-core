{
  List options=new ArrayList();
  List values=new ArrayList();
  int selectedIndex=0;
  Iterator i=OpenCms.getWorkplaceManager().getViews().iterator();
  int count=-1;
  while (i.hasNext()) {
    count++;
    CmsWorkplaceView view=(CmsWorkplaceView)i.next();
    String viewKey=view.getKey();
    String viewUri=view.getUri();
    boolean visible=true;
    try {
      getCms().readResource(viewUri);
    }
 catch (    CmsException e) {
      if (OpenCms.getLog(this).isInfoEnabled()) {
        OpenCms.getLog(this).info(e);
      }
      visible=false;
    }
    if (visible) {
      String loopLink=getJsp().link(viewUri);
      options.add(key(viewKey));
      values.add(loopLink);
      if (loopLink.equals(getSettings().getViewUri())) {
        selectedIndex=count;
      }
    }
  }
  return buildSelect(htmlAttributes,options,values,selectedIndex);
}
