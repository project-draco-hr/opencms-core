{
  Vector allProjects;
  try {
    allProjects=getCms().getAllAccessibleProjects();
  }
 catch (  CmsException e) {
    allProjects=new Vector();
  }
  List options=new ArrayList();
  List values=new ArrayList();
  int selectedIndex=0;
  int maxNameLength=0;
  int numProjects=allProjects.size();
  for (int i=0; i < numProjects; i++) {
    CmsProject loopProject=(CmsProject)allProjects.get(i);
    String loopProjectName=loopProject.getName();
    String loopProjectId=Integer.toString(loopProject.getId());
    values.add(loopProjectId);
    options.add(loopProjectName);
    if (loopProject.getId() == getSettings().getProject()) {
      selectedIndex=i;
    }
    maxNameLength=Math.max(loopProjectName.length(),maxNameLength);
  }
  if (maxNameLength <= 20) {
    StringBuffer buf=new StringBuffer(htmlAttributes.length() + htmlWidth.length() + 5);
    buf.append(htmlAttributes);
    buf.append(" ");
    buf.append(htmlWidth);
    htmlAttributes=buf.toString();
  }
  return buildSelect(htmlAttributes,options,values,selectedIndex);
}
