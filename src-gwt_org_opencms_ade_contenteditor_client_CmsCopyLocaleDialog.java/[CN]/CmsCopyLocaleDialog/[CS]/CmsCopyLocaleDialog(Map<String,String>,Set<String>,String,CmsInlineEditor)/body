{
  super("Copy locale");
  FlowPanel main=new FlowPanel();
  CmsMessageWidget message=new CmsMessageWidget();
  message.setMessageText("Copy Fields in current language \"" + availableLocales.get(currentLocale) + "\" to selected languages. This will overwrite the contents of the selected locales completely!");
  main.add(message);
  CmsFieldSet fieldset=new CmsFieldSet();
  m_targetLocales=new HashSet<String>();
  for (  Entry<String,String> availableLocaleEntry : availableLocales.entrySet()) {
    if (!availableLocaleEntry.getKey().equals(currentLocale)) {
      String label=availableLocaleEntry.getValue();
      if (!contentLocales.contains(availableLocaleEntry.getKey())) {
        label+=" [-]";
      }
      CmsCheckBox checkBox=new CmsCheckBox(label);
      checkBox.addValueChangeHandler(new CopyLocaleChangeHandler(availableLocaleEntry.getKey()));
      fieldset.addContent(checkBox);
    }
  }
  m_okButton=new CmsPushButton();
  m_okButton.setButtonStyle(ButtonStyle.TEXT,ButtonColor.RED);
  m_okButton.setText("OK");
  m_okButton.disable("No language selected");
  m_okButton.addClickHandler(new ClickHandler(){
    public void onClick(    ClickEvent event){
      hide();
      editor.copyLocales(m_targetLocales);
    }
  }
);
  CmsPushButton cancelButton=new CmsPushButton();
  cancelButton.setText("Cancel");
  cancelButton.addClickHandler(new ClickHandler(){
    public void onClick(    ClickEvent event){
      hide();
    }
  }
);
  main.add(fieldset);
  setMainContent(main);
  addButton(cancelButton);
  addButton(m_okButton);
  setGlassEnabled(true);
}
