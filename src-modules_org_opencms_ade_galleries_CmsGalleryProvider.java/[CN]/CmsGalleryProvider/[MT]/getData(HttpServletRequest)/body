{
  JSONObject keys=new JSONObject();
  GalleryMode dialogMode=getDialogMode(request);
switch (dialogMode) {
case editor:
case view:
case widget:
    try {
      keys.put(ReqParam.dialogmode.name(),dialogMode.name());
      keys.put(ReqParam.gallerypath.name(),getGalleryPath(request));
      keys.put(ReqParam.gallerytabid.name(),I_CmsGalleryProviderConstants.GalleryTabId.cms_tab_galleries.name());
      keys.put(ReqParam.tabs.name(),GalleryConfiguration.TABS_DEFAULT.getConfig());
      keys.put(ReqParam.types.name(),getTypesFromRequest(request));
    }
 catch (    Throwable e) {
      LOG.error(e.getLocalizedMessage(),e);
      try {
        keys.put("error",e.getLocalizedMessage());
      }
 catch (      JSONException e1) {
        LOG.error(e1.getLocalizedMessage(),e1);
      }
    }
  break;
case ade:
try {
  keys.put(ReqParam.dialogmode.name(),dialogMode.name());
  keys.put(ReqParam.gallerypath.name(),"");
  keys.put(ReqParam.gallerytabid.name(),I_CmsGalleryProviderConstants.GalleryTabId.cms_tab_types.name());
  keys.put(ReqParam.tabs.name(),GalleryConfiguration.TABS_ADE.getConfig());
  keys.put(ReqParam.types.name(),getTypesForContainerpage(request));
}
 catch (Throwable e) {
  LOG.error(e.getLocalizedMessage(),e);
  try {
    keys.put("error",e.getLocalizedMessage());
  }
 catch (  JSONException e1) {
    LOG.error(e1.getLocalizedMessage(),e1);
  }
}
break;
case sitemap:
try {
keys.put(ReqParam.dialogmode.name(),dialogMode.name());
keys.put(ReqParam.gallerypath.name(),"");
keys.put(ReqParam.gallerytabid.name(),I_CmsGalleryProviderConstants.GalleryTabId.cms_tab_vfstree.name());
keys.put(ReqParam.tabs.name(),GalleryConfiguration.TABS_SITEMAP.getConfig());
keys.put(ReqParam.types.name(),getTypesForSitemap(request));
}
 catch (Throwable e) {
LOG.error(e.getLocalizedMessage(),e);
try {
keys.put("error",e.getLocalizedMessage());
}
 catch (JSONException e1) {
LOG.error(e1.getLocalizedMessage(),e1);
}
}
break;
default :
break;
}
return keys;
}
