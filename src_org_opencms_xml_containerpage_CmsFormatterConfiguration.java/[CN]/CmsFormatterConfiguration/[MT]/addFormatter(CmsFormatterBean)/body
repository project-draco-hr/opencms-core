{
  String oldUri=null;
  Object key;
  if (formatter.isTypeFormatter()) {
    String type=formatter.getType();
    key=type;
    oldUri=m_formattersByType.get(type);
    m_formattersByType.put(type,formatter.getJspRootPath());
  }
 else {
    Integer minWidth=Integer.valueOf(formatter.getMinWidth());
    key=minWidth;
    int old=m_formattersByWidth.lastIndexOf(formatter);
    if (old >= 0) {
      oldUri=m_formattersByWidth.remove(old).getJspRootPath();
    }
    m_formattersByWidth.add(formatter);
  }
  if (oldUri != null) {
    LOG.warn(Messages.get().getBundle().key(Messages.LOG_CONTENT_DEFINITION_DUPLICATE_FORMATTER_4,new Object[]{key,oldUri,formatter.getJspRootPath(),formatter.getLocation()}));
  }
}
