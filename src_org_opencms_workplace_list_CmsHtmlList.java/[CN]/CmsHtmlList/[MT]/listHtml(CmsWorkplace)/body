{
  if (displayedFrom() == 0) {
    m_visibleItems=new ArrayList();
  }
 else {
    m_visibleItems=new ArrayList(getContent().subList(displayedFrom() - 1,displayedTo()));
  }
  StringBuffer html=new StringBuffer(5120);
  html.append(htmlBegin(wp));
  html.append(htmlTitle(wp));
  html.append(htmlToolBar(wp));
  html.append("<table width='100%' cellpadding='1' cellspacing='0' class='list'>\n");
  html.append(m_metadata.htmlHeader(this,wp));
  if (m_visibleItems.isEmpty()) {
    html.append(m_metadata.htmlEmptyTable(wp.getLocale()));
  }
 else {
    Iterator itItems=m_visibleItems.iterator();
    boolean odd=true;
    while (itItems.hasNext()) {
      CmsListItem item=(CmsListItem)itItems.next();
      html.append(m_metadata.htmlItem(item,wp,odd));
      odd=!odd;
    }
  }
  html.append("</table>\n");
  html.append(htmlPagingBar(wp));
  html.append(htmlEnd(wp));
  return wp.resolveMacros(html.toString());
}
