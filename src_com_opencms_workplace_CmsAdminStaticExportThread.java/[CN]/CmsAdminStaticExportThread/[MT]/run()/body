{
  I_CmsSession session=m_cms.getRequestContext().getSession(true);
  boolean everythingOk=true;
  String errormessage="Error exporting resources:\n";
  Vector folderNames=new Vector();
  Vector fileNames=new Vector();
  for (int i=0; i < m_exportPaths.length; i++) {
    if (m_exportPaths[i].endsWith("/")) {
      folderNames.addElement(m_exportPaths[i]);
    }
 else {
      fileNames.addElement(m_exportPaths[i]);
    }
  }
  checkRedundancies(folderNames,fileNames);
  for (int i=0; i < fileNames.size(); i++) {
    folderNames.addElement(fileNames.elementAt(i));
  }
  for (int i=0; i < folderNames.size(); i++) {
    try {
      m_cms.exportStaticResources(m_exportTo,(String)folderNames.elementAt(i));
    }
 catch (    CmsException e) {
      everythingOk=false;
      errormessage+=(String)folderNames.elementAt(i) + " : " + e.getTypeText()+ " "+ e.getMessage()+ "\n";
      if ((A_OpenCms.isLogging() && I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING)) {
        A_OpenCms.log(A_OpenCms.C_OPENCMS_CRITICAL,"error exporting " + folderNames.elementAt(i) + " : "+ e.getMessage());
      }
    }
  }
  if (!everythingOk) {
    session.putValue(C_SESSION_THREAD_ERROR,errormessage);
  }
}
