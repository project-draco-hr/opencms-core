{
  if (CmsStringUtil.isNotEmpty(getParamVersion())) {
    showHistoricVersion();
  }
 else {
    String resourceStr=getParamResource();
    CmsResource resource=readResource(resourceStr);
    if (isDeleted(resource)) {
      throw new CmsVfsResourceNotFoundException(Messages.get().container(Messages.ERR_RESOURCE_DELETED_2,resourceStr,getCms().getRequestContext().currentProject().getName()));
    }
    autoTimeWarp(resource);
    if (CmsResourceTypeXmlContainerPage.isContainerPage(resource)) {
      List<CmsInternalSitemapEntry> entries=OpenCms.getSitemapManager().getEntriesForStructureId(getJsp().getCmsObject(),resource.getStructureId());
      if (!entries.isEmpty()) {
        CmsInternalSitemapEntry entry=entries.get(0);
        resourceStr=entry.getRootPath();
      }
    }
    String url=getJsp().link(resourceStr);
    if ((url.indexOf("://") < 0) && getCms().getRequestContext().currentProject().isOnlineProject()) {
      url=prependSiteRoot(url);
    }
    getJsp().getResponse().sendRedirect(url);
  }
}
