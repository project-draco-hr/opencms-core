{
  String url=getJsp().link(getParamResource());
  if (CmsStringUtil.isNotEmpty(getParamVersionid())) {
    byte[] result=getBackupResourceContent(getCms(),getParamResource(),getParamVersionid());
    if (result != null) {
      getJsp().getResponse().setContentType(OpenCms.getResourceManager().getMimeType(getParamResource(),getCms().getRequestContext().getEncoding()) + ":cms");
      getJsp().getResponse().setContentLength(result.length);
      try {
        getJsp().getResponse().getOutputStream().write(result);
        getJsp().getResponse().getOutputStream().flush();
      }
 catch (      IOException e) {
        if (OpenCms.getLog(this).isInfoEnabled()) {
          OpenCms.getLog(this).info(e);
        }
        return;
      }
    }
  }
 else {
    getJsp().getResponse().sendRedirect(url);
  }
}
