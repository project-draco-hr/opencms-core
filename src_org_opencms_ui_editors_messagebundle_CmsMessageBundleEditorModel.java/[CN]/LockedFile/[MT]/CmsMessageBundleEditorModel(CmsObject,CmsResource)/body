{
  if (cms == null) {
    throw new CmsException(Messages.get().container(Messages.ERROR_LOADING_BUNDLE_CMS_OBJECT_NULL_0));
  }
  if (resource == null) {
    throw new CmsException(Messages.get().container(Messages.ERROR_LOADING_BUNDLE_FILENAME_NULL_0));
  }
  m_cms=cms;
  m_resource=resource;
  m_bundleFiles=new HashMap<Locale,LockedFile>();
  m_localizations=new HashMap<Locale,Properties>();
  m_bundleType=initBundleType();
  if (m_bundleType.equals(BundleType.XML)) {
    initXmlBundle();
  }
  setResourceInformation();
  m_locales=OpenCms.getLocaleManager().getAvailableLocales(m_cms,resource);
  initDescriptor();
}
