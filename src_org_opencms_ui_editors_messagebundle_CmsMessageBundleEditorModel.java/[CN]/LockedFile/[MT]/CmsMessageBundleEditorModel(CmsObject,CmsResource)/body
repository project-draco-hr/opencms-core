{
  if (cms == null) {
    throw new CmsException(Messages.get().container(Messages.ERROR_LOADING_BUNDLE_CMS_OBJECT_NULL_0));
  }
  if (resource == null) {
    throw new CmsException(Messages.get().container(Messages.ERROR_LOADING_BUNDLE_FILENAME_NULL_0));
  }
  m_cms=cms;
  m_resource=resource;
  m_editMode=EditMode.DEFAULT;
  m_bundleFiles=new HashMap<Locale,LockedFile>();
  m_localizations=new HashMap<Locale,Properties>();
  m_bundleType=initBundleType();
  if (m_bundleType.equals(BundleType.XML)) {
    initXmlBundle();
  }
  setResourceInformation();
  if (m_bundleType.equals(BundleType.DESCRIPTOR)) {
    m_locales=new ArrayList<Locale>(1);
    m_locales.add(LOCALE_BUNDLE_DESCRIPTOR);
  }
 else {
    m_locales=OpenCms.getLocaleManager().getAvailableLocales(m_cms,resource);
  }
  initDescriptor();
  initHasMasterMode();
  initEditorStates();
}
