{
  String KEY_TITLE="field_title";
  String KEY_NAME="field_urlname";
  Map<String,String> configMap=CmsStringUtil.splitAsMap(config,"|",":");
  String forbiddenNamesStr=configMap.get("forbidden").replace('#','|');
  boolean hasTitleQuery=queries.get(KEY_TITLE) != null;
  boolean hasNameQuery=queries.get(KEY_NAME) != null;
  boolean isNew="true".equals(configMap.get("new"));
  boolean isRoot=false;
  if (hasTitleQuery && !hasNameQuery && !isRoot&& isNew&& !CmsStringUtil.isEmptyOrWhitespaceOnly(queries.get(KEY_TITLE).getValue())) {
    String title=queries.get(KEY_TITLE).getValue();
    CmsValidationQuery nameQuery=new CmsValidationQuery("org.opencms.ade.sitemap.CmsUrlNameValidationService",title,forbiddenNamesStr);
    queries.put(KEY_NAME,nameQuery);
    return m_defaultValidator.validate(cms,queries,values,null);
  }
 else {
    Map<String,CmsValidationResult> result=m_defaultValidator.validate(cms,queries,values,config);
    return result;
  }
}
