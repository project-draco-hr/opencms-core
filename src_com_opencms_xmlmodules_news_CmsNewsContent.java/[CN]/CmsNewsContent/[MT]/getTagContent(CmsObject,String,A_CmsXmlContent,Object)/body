{
  CmsRequestContext reqCont=cms.getRequestContext();
  HttpServletRequest orgReq=(HttpServletRequest)reqCont.getRequest().getOriginalRequest();
  String servletPath=orgReq.getServletPath();
  Hashtable parameters=(Hashtable)userObj;
  CmsXmlTemplateFile templateFile=(CmsXmlTemplateFile)doc;
  CmsNewsObject article=(CmsNewsObject)parameters.get("_ARTICLE_");
  String elementName=(String)parameters.get("_ELEMENT_");
  String result="";
  if (article != null) {
    if (tagcontent.toLowerCase().equals("externallink")) {
      result=article.getExternalLink();
    }
 else {
      if (tagcontent.toLowerCase().equals("date")) {
        long date=article.getDate();
        if (date != 0) {
          result=Utils.getNiceShortDate(article.getDate());
        }
      }
 else {
        if (tagcontent.toLowerCase().equals("author")) {
          result=Encoder.escapeXml(article.getAuthor());
        }
 else {
          if (tagcontent.toLowerCase().equals("headline")) {
            result=Encoder.escapeXml(article.getHeadline());
          }
 else {
            if (tagcontent.toLowerCase().equals("shorttext")) {
              result=Encoder.escapeXml(article.getShortText());
            }
 else {
              if (tagcontent.toLowerCase().equals("text")) {
                result=article.getText(templateFile.getDataValue(C_TAG_PARAGRAPHSEP),true);
              }
 else {
                if (tagcontent.toLowerCase().equals("file")) {
                  result=servletPath + C_FOLDER_PAGE + article.getFilename()+ "/index.html";
                }
 else {
                  if (tagcontent.toLowerCase().equals("linktext")) {
                    result="Artikel lesen";
                  }
 else {
                    if (tagcontent.toLowerCase().equals("servletPath")) {
                      result=servletPath + "/";
                    }
 else {
                      if (tagcontent.toLowerCase().equals("index")) {
                        String folder=getFolder(elementName,parameters);
                        Vector v=getAllArticles(cms,folder);
                        for (int i=0; i < v.size(); i++) {
                          Object o=v.elementAt(i);
                          CmsNewsObject doc2=(CmsNewsObject)o;
                          if (doc2.getAbsoluteFilename().equals(article.getAbsoluteFilename())) {
                            result="" + i;
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  return result;
}
