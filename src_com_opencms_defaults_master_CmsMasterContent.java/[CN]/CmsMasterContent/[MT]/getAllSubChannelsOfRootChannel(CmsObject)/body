{
  Vector allChannels=new Vector();
  String rootChannel=getDbAccessObject(this.getSubId()).getRootChannel();
  Vector subChannels=cms.getResourcesInFolder("//cos" + rootChannel);
  int offset=rootChannel.length() - 1;
  for (int i=0; i < subChannels.size(); i++) {
    CmsResource resource=(CmsResource)subChannels.get(i);
    if (resource.getState() != CmsResource.C_STATE_DELETED) {
      String folder=resource.getAbsolutePath();
      Vector v=getAllSubChannelsOf(cms,folder);
      if (v.size() == 0 && hasWriteAccess(cms,resource)) {
        allChannels.add(folder.substring(offset));
      }
 else {
        for (int j=0; j < v.size(); j++) {
          allChannels.add(((String)v.get(j)).substring(offset));
        }
      }
    }
  }
  return allChannels;
}
