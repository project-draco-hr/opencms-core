{
  Vector changedResources=new Vector();
  Vector changedModuleData=new Vector();
  int versionId=0;
  long publishDate=System.currentTimeMillis();
  boolean enableHistory=cms.isHistoryEnabled();
  if (enableHistory) {
    versionId=cms.getBackupTagId();
    cms.backupProject(cms.getRequestContext().currentProject().getId(),versionId,publishDate);
  }
  getDbAccessObject(getSubId()).publishResource(cms,m_dataSet,getSubId(),this.getClass().getName(),enableHistory,versionId,publishDate,changedResources,changedModuleData);
  if (CmsXmlTemplateLoader.isElementCacheEnabled(cms)) {
    CmsXmlTemplateLoader.getOnlineElementCache().cleanupCache(changedResources,changedModuleData);
  }
  OpenCms.fireCmsEvent(new CmsEvent(cms,I_CmsEventListener.EVENT_PUBLISH_BO_RESOURCE,Collections.EMPTY_MAP));
}
