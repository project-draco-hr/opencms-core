{
  JSONArray resources=new JSONArray();
  CmsObject cms=getCmsObject();
  Locale locale=cms.getRequestContext().getLocale();
  String sourceMsg=org.opencms.workplace.commons.Messages.get().getBundle(locale).key(org.opencms.workplace.commons.Messages.GUI_PUBLISH_BROKENRELATIONS_DETAIL_RELATION_SOURCES_0);
  String targetMsg=org.opencms.workplace.commons.Messages.get().getBundle(locale).key(org.opencms.workplace.commons.Messages.GUI_PUBLISH_BROKENRELATIONS_DETAIL_RELATION_TARGETS_0);
  CmsPublishList publishList=new CmsPublishList(resourcesFromJson(ids),m_includeSiblings,false);
  CmsRelationPublishValidator validator=new CmsRelationPublishValidator(cms,publishList);
  List<String> resourceList=new ArrayList<String>(validator.keySet());
  Collections.sort(resourceList);
  for (  String resourceName : validator.keySet()) {
    CmsRelationValidatorInfoEntry infoEntry=validator.getInfoEntry(resourceName);
    CmsResource resource=cms.readResource(resourceName);
    JSONArray info=getInfoForLinkCheck(cms,resource,infoEntry);
    JSONObject jsonRes=resourceToJson(resource);
    if (info != null) {
      if (resource.getState().isDeleted()) {
        jsonRes.put(JsonResource.INFO_NAME.getName(),sourceMsg);
      }
 else {
        jsonRes.put(JsonResource.INFO_NAME.getName(),targetMsg);
      }
      jsonRes.put(JsonResource.INFO_VALUE.getName(),info);
    }
    resources.put(jsonRes);
  }
  return resources;
}
