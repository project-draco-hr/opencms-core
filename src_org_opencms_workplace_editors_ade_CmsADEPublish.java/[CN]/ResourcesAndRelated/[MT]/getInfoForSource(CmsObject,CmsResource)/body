{
  JSONArray infoValue=new JSONArray();
  try {
    String siteRoot=cms.getRequestContext().getSiteRoot();
    Set<CmsResource> resources=getPublishResources().getRelatedResources();
    for (    CmsRelation relation : cms.getRelationsForResource(resource,CmsRelationFilter.TARGETS.filterStrong().filterIncludeChildren())) {
      CmsResource target=null;
      try {
        target=relation.getTarget(cms,CmsResourceFilter.ALL);
      }
 catch (      CmsException e) {
        if (LOG.isErrorEnabled()) {
          LOG.error(e.getLocalizedMessage(),e);
        }
        continue;
      }
      if (resources.contains(target)) {
        infoValue.put(getResourceName(cms,target.getRootPath(),siteRoot));
      }
 else       if (!target.getState().isUnchanged()) {
        infoValue.put("<span style='color: red;'>" + getResourceName(cms,target.getRootPath(),siteRoot) + "</span>");
      }
    }
  }
 catch (  CmsException e) {
    if (LOG.isErrorEnabled()) {
      LOG.error(e.getLocalizedMessage(),e);
    }
  }
  return infoValue.length() > 0 ? infoValue : null;
}
