{
  JSONArray resources=new JSONArray();
  CmsObject cms=getCmsObject();
  Locale locale=cms.getRequestContext().getLocale();
  ResourcesAndRelated pubResources=getPublishResources();
  String sourceMsg=org.opencms.workplace.commons.Messages.get().getBundle(locale).key(org.opencms.workplace.commons.Messages.GUI_PUBLISH_DETAIL_RELATED_RESOURCE_0);
  for (  CmsResource resource : pubResources.getResources()) {
    JSONArray infoForSource=getInfoForSource(cms,resource);
    JSONObject jsonRes=resourceToJson(resource);
    if (infoForSource != null) {
      jsonRes.put(JsonResource.INFO_NAME.getName(),sourceMsg);
      jsonRes.put(JsonResource.INFO_VALUE.getName(),infoForSource);
    }
    resources.put(jsonRes);
  }
  String relatedMsg=org.opencms.workplace.commons.Messages.get().getBundle(locale).key(org.opencms.workplace.commons.Messages.GUI_PUBLISH_DETAIL_REVERSE_REFERENCE_0);
  for (  CmsResource resource : pubResources.getRelatedResources()) {
    JSONArray infoForRelated=getInfoForRelated(cms,locale,resource);
    if (infoForRelated == null) {
      continue;
    }
    JSONObject jsonRes=resourceToJson(resource);
    jsonRes.put(JsonResource.INFO_NAME.getName(),relatedMsg);
    jsonRes.put(JsonResource.INFO_VALUE.getName(),infoForRelated);
    resources.put(jsonRes);
  }
  return resources;
}
