{
  if (!m_state.getCheckedEntries().isEmpty()) {
    query.append("&fq={!tag=").append(m_config.getField()).append('}');
    query.append(m_config.getField());
    query.append(":(");
    final Iterator<String> fieldIterator=m_state.getCheckedEntries().iterator();
    query.append(m_config.modifyFilterQuery(fieldIterator.next()));
    final String concater=m_config.getIsAndFacet() ? " AND " : " OR ";
    while (fieldIterator.hasNext()) {
      query.append(concater);
      query.append(m_config.modifyFilterQuery(fieldIterator.next()));
    }
    query.append(')');
  }
}
