{
  StringBuffer result=new StringBuffer(1024);
  Iterator i=OpenCms.getWorkplaceManager().getGalleries().keySet().iterator();
  while (i.hasNext()) {
    String galleryType=(String)i.next();
    if (CmsImageGallery.GALLERYTYPE_NAME.equals(galleryType)) {
      continue;
    }
    String galleryName=CmsStringUtil.substitute(galleryType,"gallery","");
    result.append("\n\nvar ").append(galleryType).append("Command = function() { this.Name = \"").append(galleryType).append("\"; }\n");
    result.append(galleryType).append("Command.prototype.GetState = function() { return FCK_TRISTATE_OFF ; }\n");
    result.append(galleryType).append("Command.prototype.Execute = function() {\n");
    result.append("\topenGallery(\"").append(galleryType).append("\");\n");
    result.append("}\n");
    result.append("FCKCommands.RegisterCommand(\"oc-").append(galleryType).append("\", new ").append(galleryType).append("Command());\n");
    result.append("FCKToolbarItems.RegisterItem(\"oc-").append(galleryType).append("\", ");
    result.append("new FCKToolbarButton(\"oc-").append(galleryType).append("\", \"");
    result.append(key(org.opencms.workplace.editors.Messages.getGalleryKey(galleryName))).append("\"));");
  }
  return result.toString();
}
