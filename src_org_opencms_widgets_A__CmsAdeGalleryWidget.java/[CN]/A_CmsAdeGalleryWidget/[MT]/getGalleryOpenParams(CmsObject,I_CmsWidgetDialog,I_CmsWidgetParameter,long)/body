{
  Map<String,String> result=new HashMap<String,String>();
  result.put(GALLERY_PARAM.dialogmode.name(),A_CmsAjaxGallery.MODE_WIDGET);
  result.put(GALLERY_PARAM.types.name(),getGalleryTypes());
  result.put(GALLERY_PARAM.fieldid.name(),param.getId());
  result.put(GALLERY_PARAM.hashid.name(),"" + hashId);
  result.put(GALLERY_PARAM.currentelement.name(),"'+document.getElementById('" + param.getId() + "').getAttribute('value')+'");
  if (widgetDialog instanceof CmsDialog) {
    String paramResource=((CmsDialog)widgetDialog).getParamResource();
    if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(paramResource)) {
      result.put(GALLERY_PARAM.resource.name(),paramResource);
    }
  }
  CmsGalleryWidgetConfiguration configuration=getWidgetConfiguration(cms,widgetDialog,param);
  if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(configuration.getStartup())) {
    result.put(GALLERY_PARAM.gallerypath.name(),configuration.getStartup());
  }
  return result;
}
