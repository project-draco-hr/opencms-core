{
  CmsSitemapChange change=new CmsSitemapChange(m_entry.getId(),m_entry.getSitePath());
  change.setNew(!m_restoreFromDeleted);
  change.setParentId(m_parentId);
  change.setName(m_entry.getName());
  change.setPosition(m_entry.getPosition());
  change.setTitle(m_entry.getTitle());
  change.setProperties(m_entry.getProperties());
  if (isChangingDetailPages()) {
    CmsDetailPageTable table=CmsSitemapView.getInstance().getController().getDetailPageTable().copy();
    if (!table.contains(m_entry.getId())) {
      CmsDetailPageInfo info=new CmsDetailPageInfo(m_entry.getId(),m_entry.getSitePath(),m_entry.getTypeInfo().getName());
      table.add(info);
    }
    change.setDetailPageInfos(table.toList());
  }
  CmsSitemapClipboardData data=CmsSitemapView.getInstance().getController().getData().getClipboardData().copy();
  applyToClipboardData(data);
  change.setClipBoardData(data);
  return change;
}
