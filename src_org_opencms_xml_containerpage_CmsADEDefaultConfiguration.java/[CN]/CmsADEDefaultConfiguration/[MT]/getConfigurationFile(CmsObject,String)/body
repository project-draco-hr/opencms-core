{
  String cfgPath=null;
  try {
    cfgPath=cms.readPropertyObject(containerPageUri,CmsPropertyDefinition.PROPERTY_ADE_CNTPAGE_CONFIG,true).getValue();
  }
 catch (  CmsException e) {
    LOG.error(e.getLocalizedMessage(),e);
  }
  if (CmsStringUtil.isEmptyOrWhitespaceOnly(cfgPath)) {
    try {
      String templateUri=cms.readPropertyObject(containerPageUri,CmsPropertyDefinition.PROPERTY_TEMPLATE,true).getValue();
      cfgPath=cms.readPropertyObject(templateUri,CmsPropertyDefinition.PROPERTY_ADE_CNTPAGE_CONFIG,true).getValue();
    }
 catch (    CmsException e) {
      LOG.error(e.getLocalizedMessage(),e);
    }
  }
  if (CmsStringUtil.isEmptyOrWhitespaceOnly(cfgPath)) {
    LOG.warn(Messages.get().getBundle().key(Messages.ERR_CONFIG_NOT_SET_2,containerPageUri,CmsPropertyDefinition.PROPERTY_ADE_CNTPAGE_CONFIG));
    return null;
  }
  try {
    return cms.readResource(cfgPath);
  }
 catch (  Exception e) {
    throw new CmsIllegalStateException(Messages.get().container(Messages.ERR_CONFIG_NOT_FOUND_3,containerPageUri,CmsPropertyDefinition.PROPERTY_ADE_CNTPAGE_CONFIG,cfgPath));
  }
}
