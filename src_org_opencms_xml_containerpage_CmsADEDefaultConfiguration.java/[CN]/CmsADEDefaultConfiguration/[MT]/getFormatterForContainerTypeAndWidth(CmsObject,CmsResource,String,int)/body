{
  I_CmsResourceType resType=OpenCms.getResourceManager().getResourceType(res);
  String typeName=resType.getTypeName();
  CmsConfigurationParser parser=getConfigurationParser(cms,cms.getSitePath(res));
  CmsPair<Map<String,String>,Map<Integer,String>> fmtConfig=null;
  if (parser != null) {
    fmtConfig=parser.getFormatterConfigurationForType(typeName);
  }
  if (fmtConfig != null) {
    return CmsFormatterUtil.selectFormatter(fmtConfig.getFirst(),fmtConfig.getSecond(),cntType,width);
  }
  if (m_moduleConfig != null) {
    CmsConfigurationParser moduleConfig=m_moduleConfig.getConfigurationParser(getAdminCmsObject(cms));
    fmtConfig=moduleConfig.getFormatterConfigurationForType(typeName);
    if (fmtConfig != null) {
      return CmsFormatterUtil.selectFormatter(fmtConfig.getFirst(),fmtConfig.getSecond(),cntType,width);
    }
  }
  return OpenCms.getResourceManager().getResourceType(res).getFormatterForContainerTypeAndWidth(cms,res,cntType,width);
}
