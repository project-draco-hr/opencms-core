{
  HashMap result=new HashMap();
  HashMap destinationMap=target.getPermissionMap();
  HashMap sourceMap=source.getPermissionMap();
  Iterator i=sourceMap.keySet().iterator();
  while (i.hasNext()) {
    CmsUUID key=(CmsUUID)i.next();
    CmsPermissionSet value=(CmsPermissionSet)sourceMap.get(key);
    if (destinationMap.containsKey(key)) {
      CmsPermissionSet destValue=(CmsPermissionSet)destinationMap.get(key);
      if (!destValue.equals(value)) {
        result.put(key,key + " " + value+ " != "+ destValue);
      }
    }
 else {
      result.put(key,"missing " + key);
    }
  }
  if (exclude != null) {
    Iterator l=exclude.iterator();
    while (l.hasNext()) {
      CmsUUID excludeUUID=(CmsUUID)l.next();
      if (result.containsKey(excludeUUID)) {
        result.remove(excludeUUID);
      }
    }
  }
  return new ArrayList(result.values());
}
