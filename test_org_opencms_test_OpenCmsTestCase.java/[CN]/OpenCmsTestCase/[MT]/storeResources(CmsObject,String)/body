{
  String resName="";
  try {
    CmsResource resource=cms.readFileHeader(resourceName,CmsResourceFilter.ALL);
    if (resource.isFile()) {
      m_currentResourceStrorage.add(cms,resourceName,resource);
    }
 else {
      m_currentResourceStrorage.add(cms,resourceName,resource);
      List resources=getSubtree(cms,resourceName);
      Iterator i=resources.iterator();
      while (i.hasNext()) {
        CmsResource res=(CmsResource)i.next();
        resName=cms.readAbsolutePath(res,CmsResourceFilter.ALL);
        m_currentResourceStrorage.add(cms,resName,res);
      }
    }
  }
 catch (  CmsException e) {
    fail("cannot read resource " + resourceName + " or "+ resName+ " "+ CmsException.getStackTraceAsString(e));
  }
}
