{
  boolean isOverwriteAll=false;
  Iterator itTargets=target.iterator();
  while (itTargets.hasNext()) {
    CmsAccessControlEntry ace=(CmsAccessControlEntry)itTargets.next();
    if (ace.isOverwriteAll()) {
      isOverwriteAll=true;
    }
  }
  List result=new ArrayList();
  Iterator i=source.iterator();
  while (i.hasNext()) {
    CmsAccessControlEntry ace=(CmsAccessControlEntry)i.next();
    if (!target.contains(ace) && !isOverwriteAll) {
      result.add(ace);
    }
  }
  if (exclude != null) {
    Iterator l=exclude.iterator();
    while (l.hasNext()) {
      CmsAccessControlEntry excludeAce=(CmsAccessControlEntry)l.next();
      if (result.contains(excludeAce)) {
        result.remove(excludeAce);
      }
    }
  }
  return result;
}
