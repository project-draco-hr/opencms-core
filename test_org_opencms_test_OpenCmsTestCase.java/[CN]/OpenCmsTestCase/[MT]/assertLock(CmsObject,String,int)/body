{
  try {
    CmsResource res=cms.readResource(resourceName,CmsResourceFilter.ALL);
    CmsLock lock=cms.getLock(res);
    if (lockType == CmsLock.C_TYPE_UNLOCKED) {
      if (!lock.isNullLock()) {
        fail("[Lock " + resourceName + " must be unlocked]");
      }
    }
 else     if (lock.isNullLock() || lock.getType() != lockType || !lock.getUserId().equals(cms.getRequestContext().currentUser().getId())) {
      fail("[Lock " + resourceName + " requires a lock of type "+ lockType+ " for user "+ cms.getRequestContext().currentUser().getId()+ " but has a lock of type "+ lock.getType()+ " for user "+ lock.getUserId()+ "]");
    }
  }
 catch (  CmsException e) {
    fail("cannot read resource " + resourceName + " "+ CmsException.getStackTraceAsString(e));
  }
}
