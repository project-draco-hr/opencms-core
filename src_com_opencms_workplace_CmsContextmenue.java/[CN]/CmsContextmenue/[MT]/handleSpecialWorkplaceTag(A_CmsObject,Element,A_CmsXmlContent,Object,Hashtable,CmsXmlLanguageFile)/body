{
  String name=n.getAttribute("name");
  String output;
  Hashtable startSettings=null;
  String currentLanguage=null;
  startSettings=(Hashtable)cms.getRequestContext().currentUser().getAdditionalInfo(C_ADDITIONAL_INFO_STARTSETTINGS);
  if (startSettings != null) {
    currentLanguage=(String)startSettings.get(C_START_LANGUAGE);
  }
  if (currentLanguage == null) {
    currentLanguage=C_DEFAULT_LANGUAGE;
  }
  StringBuffer result=new StringBuffer();
  output=(String)m_storage.get(currentLanguage + name);
  if (output == null) {
    CmsXmlWpTemplateFile context=getContextmenueDefinitions(cms);
    context.setXmlData("name",name);
    result.append(context.getProcessedXmlDataValue("CONTEXTHEAD",callingObject,parameters));
    NodeList nl=n.getChildNodes();
    for (int i=0; i < nl.getLength(); i++) {
      Node actualNode=nl.item(i);
      if (actualNode.getNodeType() != Node.TEXT_NODE) {
        Element e=(Element)actualNode;
        if (e.getTagName().toLowerCase().equals("contextspacer")) {
          result.append(context.getProcessedXmlDataValue("CONTEXTSPACER",callingObject,parameters));
        }
 else         if (e.getTagName().toLowerCase().equals("contextentry")) {
          context.setXmlData("name",lang.getLanguageValue(e.getAttribute("name")));
          context.setXmlData("href",e.getAttribute("href"));
          result.append(context.getProcessedXmlDataValue("CONTEXTENTRY",callingObject,parameters));
        }
 else         if (e.getTagName().toLowerCase().equals("contextdisabled")) {
          context.setXmlData("name",lang.getLanguageValue(e.getAttribute("name")));
          result.append(context.getProcessedXmlDataValue("CONTEXTDISABLED",callingObject,parameters));
        }
      }
    }
    result.append(context.getProcessedXmlDataValue("CONTEXTFOOT",callingObject,parameters));
    output=result.toString();
    m_storage.put(currentLanguage + name,output);
  }
  return output;
}
