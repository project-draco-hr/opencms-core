{
  m_groupContainer.clear();
  CmsAdminMenuGroup helpMenu=new CmsAdminMenuGroup("help",key("admin.menu.groups.help"));
  helpMenu.addMenuItem(new CmsAdminContextHelpMenuItem());
  addGroup(helpMenu);
  Iterator itElems=getToolManager().getToolHandlers().iterator();
  while (itElems.hasNext()) {
    I_CmsToolHandler handler=(I_CmsToolHandler)itElems.next();
    if (!getCms().existsResource(handler.getLink()) || !handler.isVisible(getCms())) {
      continue;
    }
    if (!handler.getPath().startsWith(getToolManager().getRootToolPath(getCms()))) {
      continue;
    }
    String path=handler.getPath().substring(getToolManager().getRootToolPath(getCms()).length());
    if (CmsStringUtil.isEmpty(path)) {
      continue;
    }
    int pos=handler.getPath().indexOf(CmsToolManager.C_TOOLPATH_SEPARATOR);
    if (path.indexOf(CmsToolManager.C_TOOLPATH_SEPARATOR,pos + 1) < 0) {
      String groupName=resolveMacros(handler.getGroup());
      CmsAdminMenuGroup group=getGroup(groupName);
      if (group == null) {
        String gid="group" + m_groupContainer.elementList().size();
        group=new CmsAdminMenuGroup(gid,groupName);
        addGroup(group,handler.getPosition());
      }
      String id="item" + group.getMenuItems().size();
      CmsAdminMenuItem item=new CmsAdminMenuItem(id,handler.getName(),handler.getSmallIconPath(),getToolManager().linkForPath(handler.getPath()),handler.getHelpText(),handler.isEnabled(getCms()),CmsAdminMenu.DEFAULT_TARGET);
      group.addMenuItem(item,handler.getPosition());
    }
  }
}
