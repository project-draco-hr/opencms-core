{
  String editLocale=m_cms.getRequestContext().getLocale().toString();
  String editId=getNextDirectEditId();
  String editNewLink=CmsEncoder.encode(params.getLinkForNew());
  JSONObject editableData=new JSONObject();
  editableData.put("editId",editId);
  editableData.put("structureId",resourceInfo.getResource().getStructureId());
  editableData.put("sitePath",params.getResourceName());
  editableData.put("elementlanguage",editLocale);
  editableData.put("elementname",params.getElement());
  editableData.put("newlink",editNewLink);
  editableData.put("hasEdit",params.getButtonSelection().isShowEdit());
  editableData.put("hasDelete",params.getButtonSelection().isShowDelete());
  editableData.put("hasNew",params.getButtonSelection().isShowNew());
  editableData.put("newtitle",m_messages.key(Messages.GUI_EDITOR_TITLE_NEW_0));
  StringBuffer result=new StringBuffer(512);
  if (m_useIds) {
    result.append("<div id=\"" + getRandomId() + "\" class='cms-editable' rel='").append(editableData.toString()).append("'></div>");
  }
 else {
    result.append("<div class='cms-editable' rel='").append(editableData.toString()).append("'></div>");
  }
  return result.toString();
}
