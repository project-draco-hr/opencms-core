{
  String content=null;
  I_CmsFormatterBean formatter;
  String formatterId=element.getSettings().get(CmsFormatterConfig.getSettingsKeyForContainer(container.getName()));
  if (formatterId != null) {
    Map<String,I_CmsFormatterBean> formatters=configs.getFormatterSelection(container.getType(),container.getWidth(),allowNested);
    formatter=formatters.get(formatterId);
  }
 else {
    formatter=configs.getDefaultFormatter(container.getType(),container.getWidth(),allowNested);
  }
  if (formatter != null) {
    element.initSettings(m_cms,formatter);
    try {
      content=getElementContent(element,m_cms.readResource(formatter.getJspStructureId()),container);
    }
 catch (    Exception e) {
      LOG.error(e.getLocalizedMessage(),e);
    }
    if (content != null) {
      content=removeScriptTags(content);
    }
  }
  return content;
}
