{
  if (CmsResourceTypeFolder.C_RESOURCE_TYPE_NAME.equals(type)) {
    return true;
  }
  if (name == null) {
    return false;
  }
  if (name.startsWith(I_CmsWpConstants.C_VFS_PATH_BODIES)) {
    if (!CmsResourceTypePlain.C_RESOURCE_TYPE_NAME.equals(type)) {
      return false;
    }
    try {
      org.w3c.dom.Document xmlDoc=A_CmsXmlContent.getXmlParser().parse(new java.io.StringReader(new String(content)));
      for (Node n=xmlDoc.getFirstChild(); n != null; n=treeWalker(xmlDoc,n)) {
        short ntype=n.getNodeType();
        if (((ntype > Node.CDATA_SECTION_NODE) && ntype < Node.DOCUMENT_TYPE_NODE) || (ntype == Node.ATTRIBUTE_NODE)) {
          return false;
        }
        if (n.getNodeType() == Node.ELEMENT_NODE) {
          String tagName=n.getNodeName();
          if (!("template".equalsIgnoreCase(tagName) || "xmltemplate".equalsIgnoreCase(tagName))) {
            return false;
          }
        }
      }
    }
 catch (    Exception e) {
      return false;
    }
  }
 else   if (name.startsWith(I_CmsWpConstants.C_VFS_PATH_DEFAULT_TEMPLATES) || (name.startsWith(I_CmsWpConstants.C_VFS_PATH_MODULES) && name.indexOf("/" + I_CmsWpConstants.C_VFS_DIR_TEMPLATES) > -1)) {
    if (!CmsResourceTypePlain.C_RESOURCE_TYPE_NAME.equals(type)) {
      return false;
    }
    try {
      org.w3c.dom.Document xmlDoc=A_CmsXmlContent.getXmlParser().parse(new java.io.StringReader(new String(content)));
      NodeList list=xmlDoc.getChildNodes();
      list=(list.item(0)).getChildNodes();
      int counterEldefs=0;
      int counterTeplate=0;
      for (int i=0; i < list.getLength(); i++) {
        Node n=list.item(i);
        short nodeType=n.getNodeType();
        if (nodeType == Node.ELEMENT_NODE) {
          String nodeName=n.getNodeName();
          if ("elementdef".equalsIgnoreCase(nodeName)) {
            if (!isElementDefOk((Element)n)) {
              return false;
            }
            counterEldefs++;
          }
 else           if ("template".equalsIgnoreCase(nodeName)) {
            if (!isTemplateTagOk((Element)n)) {
              return false;
            }
            counterTeplate++;
          }
 else {
            return false;
          }
        }
 else         if (nodeType == Node.TEXT_NODE) {
          String nodeValue=n.getNodeValue();
          if ((nodeValue != null) && (nodeValue.trim().length() > 0)) {
            return false;
          }
        }
 else {
          return false;
        }
      }
      if (counterEldefs != 2 || counterTeplate != 1) {
        return false;
      }
    }
 catch (    Exception e) {
      return false;
    }
  }
  return true;
}
