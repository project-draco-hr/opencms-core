{
  if (LOG.isInfoEnabled()) {
    LOG.info("workflow action: " + userCms.getRequestContext().getCurrentUser().getName() + " "+ actionKey);
    List<String> resourceNames=new ArrayList<String>();
    for (    CmsResource resource : resources) {
      resourceNames.add(resource.getRootPath());
    }
    LOG.info("Resources: " + CmsStringUtil.listAsString(resourceNames,","));
  }
  try {
    if (actionKey.equals(ACTION_PUBLISH)) {
      return actionPublish(userCms,resources);
    }
 else     if (actionKey.equals(ACTION_RELEASE)) {
      return actionRelease(userCms,resources);
    }
 else     if (actionKey.equals(ACTION_FORCE_PUBLISH)) {
      return actionForcePublish(userCms,resources);
    }
  }
 catch (  CmsException e) {
    LOG.info("workflow action failed");
    LOG.info(e.getLocalizedMessage(),e);
    throw e;
  }
  throw new CmsInvalidActionException(actionKey);
}
