{
  Document manifest=null;
  ZipFile zipFile=null;
  ZipEntry zipFileEntry=null;
  InputStream input=null;
  Reader reader=null;
  SAXReader saxReader=null;
  File manifestFile=null;
  try {
    if (resource.isFile()) {
      if (!resource.getName().toLowerCase().endsWith(".zip")) {
        return null;
      }
      zipFile=new ZipFile(resource);
      zipFileEntry=zipFile.getEntry("manifest.xml");
      input=zipFile.getInputStream(zipFileEntry);
      reader=new BufferedReader(new InputStreamReader(input));
    }
 else     if (resource.isDirectory()) {
      manifestFile=new File(resource,"manifest.xml");
      reader=new BufferedReader(new FileReader(manifestFile));
    }
    saxReader=new SAXReader();
    manifest=saxReader.read(reader);
  }
 catch (  Exception e) {
    System.err.println("Error reading manifest.xml from resource: " + resource);
    System.err.println(e.getMessage());
    manifest=null;
  }
 finally {
    try {
      if (reader != null) {
        reader.close();
      }
    }
 catch (    Exception e) {
    }
  }
  return manifest;
}
