{
  try {
    if (resource.isFile()) {
      if (!resource.getName().toLowerCase().endsWith(".zip")) {
        return null;
      }
      ZipFile zipFile=new ZipFile(resource);
      ZipEntry zipFileEntry=zipFile.getEntry(EXPORT_MANIFEST);
      if (zipFileEntry == null) {
        throw new CmsImportExportException(Messages.get().container(Messages.ERR_IMPORTEXPORT_FILE_NOT_FOUND_1,EXPORT_MANIFEST));
      }
      InputStream input=null;
      try {
        input=zipFile.getInputStream(zipFileEntry);
        return new SAXReader().read(input);
      }
  finally {
        try {
          if (input != null) {
            input.close();
          }
        }
 catch (        Exception e) {
        }
      }
    }
 else     if (resource.isDirectory()) {
      File manifestFile=new File(resource,EXPORT_MANIFEST);
      if (!manifestFile.exists()) {
        throw new CmsImportExportException(Messages.get().container(Messages.ERR_IMPORTEXPORT_FILE_NOT_FOUND_1,EXPORT_MANIFEST));
      }
      Reader reader=null;
      try {
        reader=new BufferedReader(new FileReader(manifestFile));
        return new SAXReader().read(reader);
      }
  finally {
        try {
          if (reader != null) {
            reader.close();
          }
        }
 catch (        Exception e) {
        }
      }
    }
  }
 catch (  Throwable e) {
    if (LOG.isWarnEnabled()) {
      LOG.warn(Messages.get().getBundle().key(Messages.LOG_IMPORTEXPORT_ERROR_READING_MANIFEST_1,resource),e);
    }
  }
  return null;
}
