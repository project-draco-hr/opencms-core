{
  AccessControlListImpl result=new AccessControlListImpl();
  result.setAces(new ArrayList<Ace>());
  for (  Map.Entry<String,Boolean> ue : userMap.entrySet()) {
    AccessControlPrincipalDataImpl principal=new AccessControlPrincipalDataImpl();
    principal.setPrincipalId(ue.getKey());
    AccessControlEntryImpl entry=new AccessControlEntryImpl();
    entry.setPrincipal(principal);
    entry.setPermissions(new ArrayList<String>());
    entry.getPermissions().add(CMIS_READ);
    if (!ue.getValue().booleanValue() && file.canWrite()) {
      entry.getPermissions().add(CMIS_WRITE);
      entry.getPermissions().add(CMIS_ALL);
    }
    entry.setDirect(true);
    result.getAces().add(entry);
  }
  return result;
}
