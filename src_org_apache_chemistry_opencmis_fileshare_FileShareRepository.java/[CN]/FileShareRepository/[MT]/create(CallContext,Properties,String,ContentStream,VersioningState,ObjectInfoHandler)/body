{
  debug("create");
  boolean userReadOnly=checkUser(context,true);
  String typeId=getTypeId(properties);
  TypeDefinition type=types.getType(typeId);
  if (type == null) {
    throw new CmisObjectNotFoundException("Type '" + typeId + "' is unknown!");
  }
  String objectId=null;
  if (type.getBaseTypeId() == BaseTypeId.CMIS_DOCUMENT) {
    objectId=createDocument(context,properties,folderId,contentStream,versioningState);
  }
 else   if (type.getBaseTypeId() == BaseTypeId.CMIS_FOLDER) {
    objectId=createFolder(context,properties,folderId);
  }
 else {
    throw new CmisObjectNotFoundException("Cannot create object of type '" + typeId + "'!");
  }
  return compileObjectType(context,getFile(objectId),null,false,false,userReadOnly,objectInfos);
}
