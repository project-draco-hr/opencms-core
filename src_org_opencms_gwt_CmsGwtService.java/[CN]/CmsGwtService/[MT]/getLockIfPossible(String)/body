{
  CmsLock lock=getCmsObject().getLock(resource);
  if ((lock != null) && lock.isOwnedBy(getCmsObject().getRequestContext().getCurrentUser()) && !lock.isOwnedInProjectBy(getCmsObject().getRequestContext().getCurrentUser(),getCmsObject().getRequestContext().getCurrentProject())) {
    getCmsObject().changeLock(resource);
  }
  getCmsObject().lockResource(resource);
  lock=getCmsObject().getLock(resource);
  return lock;
}
