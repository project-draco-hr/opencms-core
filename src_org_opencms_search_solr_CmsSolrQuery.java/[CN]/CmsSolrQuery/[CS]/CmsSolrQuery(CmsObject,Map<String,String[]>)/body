{
  this();
  Map<String,String[]> newParams=new HashMap<String,String[]>();
  if ((params == null) || params.isEmpty()) {
    throw new CmsSearchException(Messages.get().container(Messages.ERR_SEARCH_INVALID_SEARCH_1,Messages.get().container(Messages.ERR_SEARCH_INVALID_SEARCH_NO_PARAMS_0)));
  }
  newParams=params;
  if (newParams.containsKey(CommonParams.FL)) {
    String[] fl=newParams.get(CommonParams.FL);
    String commasep=fl[0].replaceAll(" ",",");
    List<String> list=CmsStringUtil.splitAsList(commasep,',');
    if (!list.contains(I_CmsSearchField.FIELD_PATH)) {
      list.add(I_CmsSearchField.FIELD_PATH);
    }
    if (!list.contains(I_CmsSearchField.FIELD_TYPE)) {
      list.add(I_CmsSearchField.FIELD_TYPE);
    }
    newParams.put(CommonParams.FL,new String[]{CmsStringUtil.listAsString(list,",")});
  }
  ModifiableSolrParams p=new ModifiableSolrParams(newParams);
  add(p);
  Locale locale=cms.getRequestContext().getLocale();
  m_textField=I_CmsSearchField.FIELD_PREFIX_TEXT + locale.toString();
}
