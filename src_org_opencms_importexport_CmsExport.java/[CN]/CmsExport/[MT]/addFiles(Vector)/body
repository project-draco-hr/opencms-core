{
  if (fileNames != null) {
    for (int i=0; i < fileNames.size(); i++) {
      String fileName=(String)fileNames.elementAt(i);
      try {
        CmsFile file=getCms().readFile(fileName,CmsResourceFilter.IGNORE_EXPIRATION);
        if ((file.getState() != I_CmsConstants.C_STATE_DELETED) && (!file.getName().startsWith("~"))) {
          addParentFolders(fileName);
          exportFile(file);
        }
      }
 catch (      CmsImportExportException e) {
        throw e;
      }
catch (      CmsException e) {
        if (e instanceof CmsVfsException) {
          CmsMessageContainer message=Messages.get().container(Messages.ERR_IMPORTEXPORT_ERROR_ADDING_FILE_1,fileName);
          if (LOG.isDebugEnabled()) {
            LOG.debug(message.key(),e);
          }
          throw new CmsImportExportException(message,e);
        }
      }
    }
  }
}
