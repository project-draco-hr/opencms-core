{
  try {
    I_CmsReport report=getReport();
    List allUsers=new ArrayList();
    if (m_exportUserdata) {
      allUsers.addAll(getCms().getUsers());
    }
    if (m_exportWebusers) {
      allUsers.addAll(getCms().getUsers(CmsUser.USER_TYPE_WEBUSER));
    }
    for (int i=0, l=allUsers.size(); i < l; i++) {
      CmsUser user=(CmsUser)allUsers.get(i);
      report.print(org.opencms.report.Messages.get().container(org.opencms.report.Messages.RPT_SUCCESSION_2,String.valueOf(i + 1),String.valueOf(l)),I_CmsReport.FORMAT_NOTE);
      report.print(Messages.get().container(Messages.RPT_EXPORT_USER_0),I_CmsReport.FORMAT_NOTE);
      report.print(org.opencms.report.Messages.get().container(org.opencms.report.Messages.RPT_ARGUMENT_1,user.getName()));
      report.print(org.opencms.report.Messages.get().container(org.opencms.report.Messages.RPT_DOTS_0));
      exportUser(parent,user);
      report.println(org.opencms.report.Messages.get().container(org.opencms.report.Messages.RPT_OK_0),I_CmsReport.FORMAT_OK);
    }
  }
 catch (  CmsImportExportException e) {
    throw e;
  }
catch (  CmsException e) {
    CmsMessageContainer message=org.opencms.db.Messages.get().container(org.opencms.db.Messages.ERR_GET_USERS_0);
    if (LOG.isDebugEnabled()) {
      LOG.debug(message.key(),e);
    }
    throw new CmsImportExportException(message,e);
  }
}
