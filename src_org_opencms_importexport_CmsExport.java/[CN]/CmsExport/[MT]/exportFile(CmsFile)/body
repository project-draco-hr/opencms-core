{
  String source=trimResourceName(getCms().getSitePath(file));
  getReport().print(" ( " + ++m_exportCount + " ) ",I_CmsReport.C_FORMAT_NOTE);
  getReport().print(getReport().key("report.exporting"),I_CmsReport.C_FORMAT_NOTE);
  getReport().print(getCms().getSitePath(file));
  getReport().print(getReport().key("report.dots"));
  try {
    if (!m_exportedResources.contains(file.getResourceId())) {
      ZipEntry entry=new ZipEntry(source);
      entry.setTime(file.getDateLastModified());
      getExportZipStream().putNextEntry(entry);
      getExportZipStream().write(file.getContents());
      getExportZipStream().closeEntry();
      m_exportedResources.add(file.getResourceId());
      appendResourceToManifest(file,true);
    }
 else {
      appendResourceToManifest(file,false);
    }
    if (OpenCms.getResourceManager().getResourceType(file.getTypeId()).getTypeName().equals("page")) {
      m_exportedPageFiles.add("/" + source);
    }
    if (OpenCms.getLog(this).isInfoEnabled()) {
      OpenCms.getLog(this).info("( " + m_exportCount + " ) "+ m_report.key("report.exporting")+ source+ m_report.key("report.dots")+ m_report.key("report.ok"));
    }
  }
 catch (  Exception exc) {
    getReport().println(exc);
    throw new CmsException(CmsException.C_UNKNOWN_EXCEPTION,exc);
  }
  getReport().println(" " + getReport().key("report.ok"),I_CmsReport.C_FORMAT_OK);
}
