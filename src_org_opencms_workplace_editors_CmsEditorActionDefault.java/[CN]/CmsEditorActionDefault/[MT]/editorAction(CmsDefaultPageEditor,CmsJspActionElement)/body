{
  editor.actionSave();
  editor.actionClear(true);
  String publishLink=jsp.link(CmsWorkplace.C_PATH_DIALOGS + "publishresource.jsp");
  StringBuffer params=new StringBuffer(64);
  params.append("?resource=");
  params.append(editor.getParamResource());
  params.append("&action=");
  params.append(CmsDialog.DIALOG_CONFIRMED);
  params.append("&reporttype=simple&directpublish=true&publishsiblings=true");
  params.append("&title=");
  params.append(CmsEncoder.escapeWBlanks(editor.key("messagebox.title.publishresource") + ": " + editor.getParamResource(),CmsEncoder.C_UTF8_ENCODING));
  params.append("&closelink=");
  if ("true".equals(editor.getParamDirectedit())) {
    String linkTarget;
    if (!"".equals(editor.getParamBacklink())) {
      linkTarget=jsp.link(editor.getParamBacklink());
    }
 else {
      linkTarget=jsp.link(editor.getParamResource());
    }
    publishLink+=params.toString() + CmsEncoder.escapeWBlanks(linkTarget,CmsEncoder.C_UTF8_ENCODING);
  }
 else {
    publishLink+=params.toString() + CmsEncoder.escapeWBlanks(jsp.link(CmsWorkplaceAction.C_JSP_WORKPLACE_URI),CmsEncoder.C_UTF8_ENCODING);
  }
  jsp.getResponse().sendRedirect(publishLink);
}
