{
  if (getFile() != null) {
    pageContext.getRequest().removeAttribute(ATTRIBUTE_FILENAME);
    pageContext.getRequest().removeAttribute(ATTRIBUTE_XMLCONTENT);
    if (m_wasEditable) {
      CmsFlexController controller=(CmsFlexController)pageContext.getRequest().getAttribute(CmsFlexController.ATTRIBUTE_NAME);
      String directEditPermissions=null;
      String directEditIncludeFile=null;
      directEditIncludeFile=(String)pageContext.getRequest().getAttribute(I_CmsEditorActionHandler.C_DIRECT_EDIT_INCLUDE_FILE_URI);
      if (directEditIncludeFile != null) {
        directEditPermissions=OpenCms.getWorkplaceManager().getEditorActionHandler().getEditMode(controller.getCmsObject(),getFile(),null,pageContext.getRequest());
      }
      includeDirectEditElement(pageContext,directEditIncludeFile,I_CmsEditorActionHandler.C_DIRECT_EDIT_AREA_END + "_" + directEditPermissions,getFile(),null,null,pageContext.getRequest(),pageContext.getResponse());
    }
  }
  return EVAL_PAGE;
}
