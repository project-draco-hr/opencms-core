{
  String wpLocale=OpenCms.getWorkplaceManager().getWorkplaceLocale(getCmsObject()).getLanguage();
  if (CmsStringUtil.isEmptyOrWhitespaceOnly(wpLocale)) {
    wpLocale=Locale.ENGLISH.getLanguage();
  }
  StringBuffer localeMetaTag=new StringBuffer();
  String metaLocale="<meta name=\"gwt:property\" content=\"locale=" + wpLocale + "\">";
  localeMetaTag.append(metaLocale);
  StringBuffer sb=new StringBuffer();
  String prefetchedData=serialize(I_CmsCoreService.class.getMethod("prefetch"),getCoreData());
  sb.append(CmsCoreData.DICT_NAME).append("='").append(prefetchedData).append("';");
  sb.append(ClientMessages.get().export(getRequest()));
  wrapScript(sb);
  sb.append("<style type=\"text/css\">\n @import url(\"").append(iconCssLink(iconCssClassPrefix)).append("\");\n</style>\n");
  return localeMetaTag.append(sb).toString();
}
