{
  List result=new ArrayList();
  CmsFile resource1=CmsResourceComparisonDialog.readFile(getCms(),getParamPath1(),getParamVersion1(),Integer.parseInt(getParamTagId1()));
  CmsFile resource2=CmsResourceComparisonDialog.readFile(getCms(),getParamPath2(),getParamVersion2(),Integer.parseInt(getParamTagId2()));
  Iterator diffs=new CmsXmlDocumentComparison(getCms(),resource1,resource2).getElements().iterator();
  while (diffs.hasNext()) {
    CmsElementComparison comparison=(CmsElementComparison)diffs.next();
    String locale=comparison.getLocale();
    String attribute=comparison.getName();
    CmsListItem item=getList().newItem(locale + attribute);
    item.set(LIST_COLUMN_LOCALE,locale);
    item.set(LIST_COLUMN_ATTRIBUTE,attribute);
    if (comparison instanceof CmsXmlContentElementComparison) {
      m_xmlContentComparisonMode=true;
      item.set(LIST_COLUMN_TYPE,((CmsXmlContentElementComparison)comparison).getType());
    }
    if (CmsResourceComparison.TYPE_ADDED.equals(comparison.getStatus())) {
      item.set(LIST_COLUMN_STATUS,key(Messages.GUI_COMPARE_ADDED_0));
    }
 else     if (CmsResourceComparison.TYPE_REMOVED.equals(comparison.getStatus())) {
      item.set(LIST_COLUMN_STATUS,key(Messages.GUI_COMPARE_REMOVED_0));
    }
 else     if (CmsResourceComparison.TYPE_CHANGED.equals(comparison.getStatus())) {
      item.set(LIST_COLUMN_STATUS,key(Messages.GUI_COMPARE_CHANGED_0));
    }
 else {
      if (!getList().getMetadata().getItemDetailDefinition(LIST_IACTION_SHOW).isVisible()) {
        continue;
      }
 else {
        item.set(LIST_COLUMN_STATUS,key(Messages.GUI_COMPARE_UNCHANGED_0));
      }
    }
    item.set(LIST_COLUMN_VERSION_1,CmsStringUtil.escapeHtml(CmsStringUtil.substitute(CmsStringUtil.trimToSize(comparison.getVersion1(),CmsPropertyComparisonList.TRIM_AT_LENGTH),"\n","")));
    item.set(LIST_COLUMN_VERSION_2,CmsStringUtil.escapeHtml(CmsStringUtil.substitute(CmsStringUtil.trimToSize(comparison.getVersion2(),CmsPropertyComparisonList.TRIM_AT_LENGTH),"\n","")));
    result.add(item);
  }
  getList().getMetadata().getColumnDefinition(LIST_COLUMN_VERSION_1).setName(Messages.get().container(Messages.GUI_COMPARE_VERSION_1,getParamVersion1()));
  getList().getMetadata().getColumnDefinition(LIST_COLUMN_VERSION_2).setName(Messages.get().container(Messages.GUI_COMPARE_VERSION_1,getParamVersion2()));
  return result;
}
