{
  m_mode=mode;
  initWidget(uiBinder.createAndBindUi(this));
  m_selectBoxState=new CmsStyleVariable(m_opener,m_selector);
  m_selectBoxState.setValue(CSS.selectBoxClosed());
  m_opener.addStyleName(CSS.selectBoxSelected());
  m_arrow.setStyleName(CSS.selectClosedIcon());
  m_popup.setWidget(m_selector);
  m_selector.setStyleName(CSS.selectBoxSelector());
  m_popup.addCloseHandler(new CloseHandler<PopupPanel>(){
    public void onClose(    CloseEvent<PopupPanel> e){
      m_arrow.setStyleName(CSS.selectClosedIcon());
      m_selectBoxState.setValue(CSS.selectBoxClosed());
      if (e.isAutoClosed() && m_overOpener) {
        m_ignoreNextToggle=true;
      }
    }
  }
);
  m_opener.addMouseOverHandler(new MouseOverHandler(){
    public void onMouseOver(    MouseOverEvent e){
      m_overOpener=true;
    }
  }
);
  m_opener.addMouseOutHandler(new MouseOutHandler(){
    public void onMouseOut(    MouseOutEvent e){
      m_overOpener=false;
    }
  }
);
}
