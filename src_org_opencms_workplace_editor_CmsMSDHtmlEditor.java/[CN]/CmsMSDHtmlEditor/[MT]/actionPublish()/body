{
  deleteTempFile();
  try {
    getCms().unlockResource(getParamResource(),false);
  }
 catch (  CmsException e) {
  }
  String publishLink=getJsp().link(CmsWorkplace.C_PATH_DIALOGS + "publishresource.html");
  String params="?resource=" + getParamResource() + "&action="+ DIALOG_CONFIRMED+ "&oklink=";
  if ("true".equals(getParamDirectedit())) {
    publishLink+=params + Encoder.escapeWBlanks("onclick=\"location.href('" + getJsp().link(getParamResource()) + "');\"",Encoder.C_UTF8_ENCODING);
  }
 else {
    publishLink+=params + Encoder.escapeWBlanks("onclick=\"location.href('" + getJsp().link(CmsWorkplaceAction.C_JSP_WORKPLACE_URI) + "');\"",Encoder.C_UTF8_ENCODING);
  }
  getJsp().getResponse().sendRedirect(publishLink);
}
