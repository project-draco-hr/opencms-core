{
  fillParamValues(request);
  setParamDialogtype(EDITOR_TYPE);
  if (getParamTempfile() != null && !"null".equals(getParamTempfile())) {
    try {
      m_file=getCms().readFile(this.getParamTempfile());
      m_page=new CmsXmlPage().read(getCms(),m_file);
    }
 catch (    CmsException e) {
      try {
        showErrorPage(this,e,"read");
      }
 catch (      JspException exc) {
      }
    }
  }
  if (EDITOR_SAVE.equals(getParamAction())) {
    setAction(ACTION_SAVE);
  }
 else   if (EDITOR_SAVEEXIT.equals(getParamAction())) {
    setAction(ACTION_SAVEEXIT);
  }
 else   if (EDITOR_EXIT.equals(getParamAction())) {
    setAction(ACTION_EXIT);
  }
 else   if (EDITOR_CHANGE_BODY.equals(getParamAction())) {
    setAction(ACTION_SHOW);
    actionChangeBodyElement();
  }
 else   if (EDITOR_CHANGE_TEMPLATE.equals(getParamAction())) {
    setAction(ACTION_SHOW);
    actionChangeTemplate();
  }
 else   if (EDITOR_NEW_BODY.equals(getParamAction())) {
    setAction(ACTION_SHOW);
    actionNewBody();
  }
 else   if (EDITOR_SHOW.equals(getParamAction())) {
    setAction(ACTION_SHOW);
  }
 else   if (EDITOR_PREVIEW.equals(getParamAction())) {
    setAction(ACTION_PREVIEW);
  }
 else {
    setAction(ACTION_DEFAULT);
    try {
      checkLock(getParamResource());
      setParamTempfile(createTempFile());
      m_file=getCms().readFile(this.getParamTempfile());
      m_page=new CmsXmlPage().read(getCms(),m_file);
    }
 catch (    CmsException e) {
      try {
        showErrorPage(this,e,"read");
      }
 catch (      JspException exc) {
      }
    }
    if (getParamBodylanguage() == null) {
      initBodyElementLanguage();
    }
    if (getParamBodyname() == null) {
      initBodyElementName();
    }
    initContent();
    setParamPagetemplate(getJsp().property(I_CmsConstants.C_PROPERTY_TEMPLATE,getParamTempfile(),""));
    setParamPagetitle(getJsp().property(I_CmsConstants.C_PROPERTY_TITLE,getParamTempfile(),""));
  }
  prepareContent(false);
}
