{
  try {
    if (getParamPagetitle() != null && !"null".equals(getParamPagetitle())) {
      getCms().writeProperty(getParamTempfile(),I_CmsConstants.C_PROPERTY_TITLE,getParamPagetitle());
    }
    String content=prepareContent(true);
    CmsDefaultPage page=(CmsDefaultPage)CmsXmlPage.newInstance(getCms(),getCms().readFile(this.getParamTempfile()));
    if (!page.hasElement("body","en")) {
      page.addElement("body","en");
    }
    page.setElementData("body","en",content.getBytes());
    getCms().writeFile(page.marshal());
    commitTempFile();
  }
 catch (  CmsException e) {
    setParamErrorstack(e.getStackTraceAsString());
    setParamTitle(key("error.title.editorsave"));
    setParamMessage(key("error.message.editorsave"));
    String reasonSuggestion=key("error.reason.editorsave") + "<br>\n" + key("error.suggestion.editorsave")+ "\n";
    setParamReasonSuggestion(reasonSuggestion);
    getJsp().include(C_FILE_DIALOG_SCREEN_ERROR);
  }
  setParamPagetitle(Encoder.escapeXml(getParamPagetitle()));
}
