{
  String content=getParamContent();
  content=CmsStringSubstitution.extractHtmlBody(content);
  content=filterAnchors(content);
  content=CmsEncoder.adjustHtmlEncoding(content,getFileEncoding());
  if (!("edit".equals(getParamEditormode()) || save)) {
    String stylesheet=getUriStyleSheet();
    String server=getJsp().getRequest().getScheme() + "://" + getJsp().getRequest().getServerName()+ ":"+ getJsp().getRequest().getServerPort();
    StringBuffer result=new StringBuffer(content.length() + 1024);
    result.append("<html><head>");
    if (!"".equals(stylesheet)) {
      stylesheet=getJsp().link(stylesheet);
      result.append("<link href=\"");
      result.append(server);
      result.append(stylesheet);
      result.append("\" rel=\"stylesheet\" type=\"text/css\">");
    }
    result.append("<base href=\"");
    result.append(server);
    result.append(OpenCms.getSystemInfo().getOpenCmsContext());
    result.append("\"></base></head><body>");
    result.append(content);
    result.append("</body></html>");
    content=result.toString();
  }
  if (!save) {
    setParamContent(content);
  }
  return content.trim();
}
