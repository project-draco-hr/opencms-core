{
  CmsMacroResolver resolver=new CmsMacroResolver();
  String nicePath=OpenCms.getResourceManager().getFileTranslator().translateResource(m_sitePath);
  nicePath=nicePath.replaceAll("/$","");
  nicePath=nicePath.replaceAll("^/","");
  nicePath=nicePath.replace('/','_');
  String niceTitle=OpenCms.getResourceManager().getFileTranslator().translateResource(m_title);
  niceTitle=niceTitle.replace('/','_');
  resolver.addDynamicMacro("number",new Factory(){
    /** 
 * @see org.apache.commons.collections.Factory#create()
 */
    public String create(){
      try {
        PrintfFormat fmt=new PrintfFormat("%0.6d");
        String result=fmt.sprintf(m_cms.incrementCounter(CmsResourceTypeXmlContainerPage.getStaticTypeName()));
        return result;
      }
 catch (      CmsException e) {
        throw new RuntimeException(e);
      }
    }
  }
);
  resolver.addMacro("sitepath",nicePath);
  resolver.addMacro("title",niceTitle);
  try {
    return resolver.resolveMacros(m_pattern);
  }
 catch (  RuntimeException e) {
    if (e.getCause() instanceof CmsException) {
      throw (CmsException)e.getCause();
    }
 else {
      throw e;
    }
  }
}
