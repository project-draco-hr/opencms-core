{
  I_CmsRbUserGroup userGroupRb=new CmsRbUserGroupCache(new CmsAccessUserGroup(new CmsAccessUserMySql(propertyDriver,propertyConnectString),new CmsAccessUserInfoMySql(propertyDriver,propertyConnectString),new CmsAccessGroupMySql(propertyDriver,propertyConnectString)));
  if (A_OpenCms.isLogging()) {
    A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_INIT,"[CmsInitMySqlCache] initialized rb for user and groups");
  }
  I_CmsRbMetadefinition metadefinitionRb=new CmsRbMetadefinitionCache(new CmsAccessMetadefinitionMySql(propertyDriver,propertyConnectString));
  if (A_OpenCms.isLogging()) {
    A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_INIT,"[CmsInitMySqlCache] initialized rb for propertydefinitions and properties");
  }
  I_CmsRbSystemProperty propertyRb=new CmsRbSystemProperty(new CmsAccessSystemPropertyMySql(propertyDriver,propertyConnectString));
  if (A_OpenCms.isLogging()) {
    A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_INIT,"[CmsInitMySqlCache] initialized rb for properties");
  }
  I_CmsRbProject projectRb=new CmsRbProjectCache(new CmsAccessProjectMySql(propertyDriver,propertyConnectString));
  if (A_OpenCms.isLogging()) {
    A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_INIT,"[CmsInitMySqlCache] initialized rb for projects");
  }
  I_CmsRbTask taskRb=new CmsRbTask(new CmsAccessTask(propertyDriver,propertyConnectString));
  if (A_OpenCms.isLogging()) {
    A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_INIT,"[CmsInitMySqlCache] initialized rb for tasks");
  }
  Hashtable mountPoints=(Hashtable)propertyRb.readProperty(C_SYSTEMPROPERTY_MOUNTPOINT);
  A_CmsMountPoint mountPoint;
  Hashtable mountedAccessModules=new Hashtable();
  Enumeration keys=mountPoints.keys();
  Object key;
  Object accessModule;
  while (keys.hasMoreElements()) {
    key=keys.nextElement();
    mountPoint=(A_CmsMountPoint)mountPoints.get(key);
    if (mountPoint.getMountpointType() == C_MOUNTPOINT_MYSQL) {
      accessModule=new CmsAccessFileMySql(mountPoint);
    }
 else {
      accessModule=new CmsAccessFileFilesystem(mountPoint);
    }
    mountedAccessModules.put(key,accessModule);
    if (A_OpenCms.isLogging()) {
      A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_INIT,"[CmsInitMySqlCache] added mountpoint " + key + " via access module: "+ accessModule.getClass().getName());
    }
  }
  I_CmsRbFile fileRb=new CmsRbFileCache(new CmsAccessFile(mountedAccessModules));
  if (A_OpenCms.isLogging()) {
    A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_INIT,"[CmsInitMySql] initialized rb for files");
  }
  return (new CmsResourceBroker(userGroupRb,fileRb,metadefinitionRb,propertyRb,projectRb,taskRb));
}
