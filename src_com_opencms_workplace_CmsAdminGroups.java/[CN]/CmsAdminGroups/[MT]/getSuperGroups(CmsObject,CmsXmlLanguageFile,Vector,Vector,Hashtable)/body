{
  int retValue=-1;
  I_CmsSession session=CmsXmlTemplateLoader.getSession(cms.getRequestContext(),true);
  String actualGroup=(String)session.getValue("GROUPNAME");
  String temp=(String)parameters.get("GROUPNAME");
  if (temp != null) {
    actualGroup=temp;
  }
  if (parameters.get("NEW") != null) {
    actualGroup="";
  }
  String supergroup=(String)session.getValue("SUPERGROUP");
  temp=(String)parameters.get("SUPERGROUP");
  if (temp != null) {
    supergroup=temp;
  }
  if (supergroup == null) {
    supergroup="";
  }
  names.addElement(lang.getLanguageValue("input.none"));
  values.addElement(C_NO_SUPERGROUP_SELECTED);
  Vector groups=cms.getGroups();
  int selectedGroup=0;
  for (int z=0; z < groups.size(); z++) {
    String name=((CmsGroup)groups.elementAt(z)).getName();
    if (name.equals(supergroup)) {
      retValue=selectedGroup;
    }
    if (!name.equals(actualGroup)) {
      names.addElement(name);
      values.addElement(name);
      selectedGroup++;
    }
  }
  return new Integer(retValue + 1);
}
