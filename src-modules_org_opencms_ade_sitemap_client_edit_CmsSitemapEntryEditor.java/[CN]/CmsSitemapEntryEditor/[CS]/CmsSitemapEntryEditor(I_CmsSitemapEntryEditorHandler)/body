{
  CmsForm form=new CmsForm(null);
  m_dialog=new CmsFormDialog(handler.getDialogTitle(),form);
  m_controller=handler.getController();
  m_propertyConfig=removeHiddenProperties(m_controller.getData().getProperties());
  m_handler=handler;
  m_dialog.setFormHandler(new I_CmsFormHandler(){
    /** 
 * @see org.opencms.gwt.client.ui.input.form.I_CmsFormHandler#onSubmitForm(java.util.Map,java.util.Set)
 */
    public void onSubmitForm(    Map<String,String> fieldValues,    Set<String> editedFields){
      Map<String,String> changedFieldValues=new HashMap<String,String>(fieldValues);
      changedFieldValues.keySet().retainAll(editedFields);
      List<CmsPropertyModification> propChanges=getPropertyChanges(changedFieldValues);
      String titleValue=getTitle(fieldValues);
      if (titleValue == null) {
        titleValue=m_handler.getEntry().getTitle();
      }
      if (!m_handler.hasEditableName()) {
        m_dialog.hide();
        m_handler.handleSubmit(titleValue,"",null,propChanges,editedFields.contains(FIELD_URLNAME));
        return;
      }
      final String urlNameValue=getAndRemoveValue(fieldValues,FIELD_URLNAME);
      fieldValues.remove(FIELD_LINK);
      m_handler.handleSubmit(titleValue,urlNameValue,null,propChanges,editedFields.contains(FIELD_URLNAME));
    }
  }
);
}
