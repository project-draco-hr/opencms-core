{
  super(handler.getDialogTitle());
  m_controller=handler.getController();
  m_propertyConfig=removeHiddenProperties(m_controller.getData().getProperties());
  m_handler=handler;
  setFormHandler(new I_CmsFormHandler(){
    /** 
 * @see org.opencms.gwt.client.ui.input.form.I_CmsFormHandler#onSubmitForm(java.util.Map,java.util.Set)
 */
    public void onSubmitForm(    Map<String,String> fieldValues,    Set<String> editedFields){
      final String titleValue=getAndRemoveValue(fieldValues,FIELD_TITLE);
      CmsPair<String,String> templateProps=getTemplateProperties(fieldValues);
      fieldValues.put(CmsSitemapManager.Property.template.toString(),templateProps.getFirst());
      fieldValues.put(CmsSitemapManager.Property.templateInherited.toString(),templateProps.getSecond());
      if (!m_handler.hasEditableName()) {
        hide();
        m_handler.handleSubmit(titleValue,"",null,fieldValues,editedFields.contains("field_urlname"));
        return;
      }
      final String urlNameValue=getAndRemoveValue(fieldValues,FIELD_URLNAME);
      m_handler.handleSubmit(titleValue,urlNameValue,null,fieldValues,editedFields.contains(FIELD_URLNAME));
    }
  }
);
}
