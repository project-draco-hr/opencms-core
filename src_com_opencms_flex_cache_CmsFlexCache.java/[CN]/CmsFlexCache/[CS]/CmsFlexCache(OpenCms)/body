{
  Configurations opencmsProperties=openCms.getConfiguration();
  m_enabled=opencmsProperties.getBoolean("flex.cache.enabled",true);
  m_cacheOffline=opencmsProperties.getBoolean("flex.cache.offline",true);
  boolean forceGC=opencmsProperties.getBoolean("flex.cache.forceGC",false);
  int maxCacheBytes=opencmsProperties.getInteger("flex.cache.maxCacheBytes",2000000);
  int avgCacheBytes=opencmsProperties.getInteger("flex.cache.avgCacheBytes",1500000);
  int maxEntryBytes=opencmsProperties.getInteger("flex.cache.maxEntryBytes",400000);
  int maxVariations=opencmsProperties.getInteger("flex.cache.maxEntries",4000);
  int maxKeys=opencmsProperties.getInteger("flex.cache.maxKeys",4000);
  this.m_entryLruCache=new CmsFlexLruCache(maxCacheBytes,avgCacheBytes,maxEntryBytes,forceGC);
  this.m_variationCache=new CmsFlexLruCache(maxVariations,(int)(maxVariations * 0.75),-1,false);
  if (m_enabled) {
    this.m_resourceMap=java.util.Collections.synchronizedMap(new CmsLruHashMap(CmsFlexCache.C_INITIAL_CAPACITY_CACHE,maxKeys));
    A_OpenCms.addCmsEventListener(this);
  }
  A_OpenCms.setRuntimeProperty(I_CmsResourceLoader.C_LOADER_CACHENAME,this);
  if (DEBUG > 0)   System.err.println("FlexCache: Initializing with parameters enabled=" + m_enabled + " cacheOffline="+ m_cacheOffline);
}
