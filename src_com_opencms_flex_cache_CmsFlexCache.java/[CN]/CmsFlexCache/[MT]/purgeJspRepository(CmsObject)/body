{
  if (!isAdmin(cms) && !cms.getRequestContext().isEventControlled())   return;
  java.io.File d;
  if (DEBUG > 0)   System.err.println("FlexCache.purgeJspRepository() purging JSP repositories!");
  d=new java.io.File(com.opencms.flex.CmsJspLoader.getJspRepository() + "online" + java.io.File.separator);
  if (DEBUG > 0)   System.err.println("FlexCache.purgeJspRepository() trying to purge ONLINE repository: " + d);
  if (d.canRead() && d.isDirectory()) {
    java.io.File files[]=d.listFiles();
    if (DEBUG > 0)     System.err.println("FlexCache.purgeJspRepository() Files in ONLINE repository = " + files.length);
    for (int i=0; i < files.length; i++) {
      java.io.File f=files[i];
      if (f.canWrite()) {
        f.delete();
      }
 else       if (DEBUG > 0) {
        System.err.println("FlexCache.purgeJspRepository() could not delete file = " + f);
      }
    }
  }
 else   if (DEBUG > 0) {
    System.err.println("FlexCache.purgeJspRepository() could not access ONLINE repository: " + d);
    System.err.println("FlexCache.purgeJspRepository() d.isDirectory() = " + d.canWrite());
    System.err.println("FlexCache.purgeJspRepository() d.canRead() = " + d.canRead());
  }
  d=new java.io.File(com.opencms.flex.CmsJspLoader.getJspRepository() + "offline" + java.io.File.separator);
  if (DEBUG > 1)   System.err.println("FlexCache.purgeJspRepository() trying to purge OFFLINE repository: " + d);
  if (d.canRead() && d.isDirectory()) {
    java.io.File files[]=d.listFiles();
    if (DEBUG > 0)     System.err.println("FlexCache.purgeJspRepository() Files in OFFLINE repository = " + files.length);
    for (int i=0; i < files.length; i++) {
      java.io.File f=files[i];
      if (f.canWrite()) {
        f.delete();
      }
 else       if (DEBUG > 0) {
        System.err.println("FlexCache.purgeJspRepository() could not delete file = " + f);
      }
    }
  }
 else   if (DEBUG > 0) {
    System.err.println("FlexCache.purgeJspRepository() could not access OFFLINE repository: " + d);
    System.err.println("FlexCache.purgeJspRepository() d.isDirectory() = " + d.canWrite());
    System.err.println("FlexCache.purgeJspRepository() d.canRead() = " + d.canRead());
  }
  clear();
  log("JSP repository purged - purgeJspRepository() called");
}
