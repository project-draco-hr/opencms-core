{
  driverManager.checkPermissions(cms.getRequestContext(),resource,CmsPermissionSet.ACCESS_WRITE,true,CmsResourceFilter.IGNORE_EXPIRATION);
  boolean isNew=resource.getState() == I_CmsConstants.C_STATE_NEW;
  copyResource(cms,driverManager,resource,destination,I_CmsConstants.C_COPY_AS_SIBLING);
  deleteResource(cms,driverManager,resource,I_CmsConstants.C_DELETE_OPTION_PRESERVE_SIBLINGS);
  CmsResource destinationResource=driverManager.readResource(cms.getRequestContext(),cms.getRequestContext().addSiteRoot(destination),CmsResourceFilter.ALL);
  if (isNew) {
    driverManager.lockResource(cms.getRequestContext(),destinationResource,CmsLock.C_MODE_COMMON);
  }
 else {
    driverManager.changeLock(cms.getRequestContext(),destinationResource);
  }
}
