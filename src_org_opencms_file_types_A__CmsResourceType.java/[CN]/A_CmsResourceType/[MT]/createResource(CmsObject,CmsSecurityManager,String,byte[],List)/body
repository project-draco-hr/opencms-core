{
  CmsMacroResolver resolver=getMacroResolver(cms,resourcename);
  List newProperties=processDefaultProperties(properties,resolver);
  CmsResource result=securityManager.createResource(cms.getRequestContext(),cms.getRequestContext().addSiteRoot(resourcename),getTypeId(),content,newProperties);
  processCopyResources(cms,resourcename,resolver);
  createRelations(cms,securityManager,cms.getRequestContext().addSiteRoot(resourcename));
  return result;
}
