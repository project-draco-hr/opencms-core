{
  if (cms.existsResource(resourcename,CmsResourceFilter.IGNORE_EXPIRATION)) {
    int todo_v7;
    throw new CmsVfsResourceAlreadyExistsException(org.opencms.db.generic.Messages.get().container(org.opencms.db.generic.Messages.ERR_RESOURCE_WITH_NAME_ALREADY_EXISTS_1,resourcename));
  }
  CmsMacroResolver resolver=getMacroResolver(cms,resourcename);
  List newProperties=processDefaultProperties(properties,resolver);
  CmsResource result=securityManager.createResource(cms.getRequestContext(),cms.getRequestContext().addSiteRoot(resourcename),getTypeId(),content,newProperties);
  processCopyResources(cms,resourcename,resolver);
  return result;
}
