{
  if (m_propertyValues != null) {
    List propertyObjects=new ArrayList(m_propertyValues.size());
    Iterator i=m_propertyValues.keySet().iterator();
    while (i.hasNext()) {
      String key=(String)i.next();
      CmsProperty property=new CmsProperty();
      property.setAutoCreatePropertyDefinition(true);
      property.setKey(key);
      String value=(String)m_propertyValues.get(key);
      StringTokenizer T=new StringTokenizer(value.trim(),"|");
      String propValue=T.nextToken();
      propValue=CmsStringUtil.substituteMacros(propValue,new CmsStringMapper(cms,null));
      String propRecord="";
      if (T.hasMoreTokens()) {
        propRecord=T.nextToken();
      }
      if (C_PROPERTY_ON_RESOURCE.equals(propRecord) || (CmsStringUtil.isEmpty(propRecord) && !OpenCms.getWorkplaceManager().isDefaultPropertiesOnStructure())) {
        property.setResourceValue(propValue);
      }
 else {
        property.setStructureValue(propValue);
      }
      propertyObjects.add(property);
    }
    return propertyObjects;
  }
  return Collections.EMPTY_LIST;
}
