{
  if ((m_defaultProperties == null) || (m_defaultProperties.size() == 0)) {
    return properties;
  }
  ArrayList result=new ArrayList();
  Iterator i=m_defaultProperties.iterator();
  while (i.hasNext()) {
    CmsProperty property=(CmsProperty)((CmsProperty)i.next()).clone();
    if (property.getResourceValue() != null) {
      property.setResourceValue(CmsStringUtil.substituteMacros(property.getResourceValue(),mapper));
    }
    if (property.getStructureValue() != null) {
      property.setStructureValue(CmsStringUtil.substituteMacros(property.getStructureValue(),mapper));
    }
    result.add(property);
  }
  if (properties != null) {
    result.addAll(properties);
  }
  return result;
}
