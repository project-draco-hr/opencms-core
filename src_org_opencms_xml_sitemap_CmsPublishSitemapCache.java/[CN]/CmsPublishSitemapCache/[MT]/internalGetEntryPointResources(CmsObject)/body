{
  CmsObject onlineCms=getCmsObject(true);
  CmsObject offlineCms=getCmsObject(false);
  List<CmsResource> onlineEntryPoints=readEntryPointResources(onlineCms);
  List<CmsResource> offlineEntryPoints=readEntryPointResources(offlineCms);
  List<CmsResource> result=new ArrayList<CmsResource>(onlineEntryPoints);
  Iterator<CmsResource> resourceIterator=result.iterator();
  while (resourceIterator.hasNext()) {
    CmsResource onlineResource=resourceIterator.next();
    if (willBeDeleted(onlineResource.getStructureId())) {
      resourceIterator.remove();
    }
  }
  for (  CmsResource res : offlineEntryPoints) {
    if (m_publishResourcesById.containsKey(res.getStructureId()) && !res.getState().equals(CmsResourceState.STATE_DELETED) && !result.contains(res)) {
      result.add(res);
    }
  }
  return result;
}
