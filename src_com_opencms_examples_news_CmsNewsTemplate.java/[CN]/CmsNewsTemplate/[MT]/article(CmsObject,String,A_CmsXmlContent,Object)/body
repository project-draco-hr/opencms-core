{
  CmsRequestContext reqCont=cms.getRequestContext();
  HttpServletRequest orgReq=(HttpServletRequest)reqCont.getRequest().getOriginalRequest();
  String servletPath=orgReq.getServletPath();
  Hashtable parameters=(Hashtable)userObj;
  CmsXmlTemplateFile templateFile=(CmsXmlTemplateFile)doc;
  CmsNewsContentFile article=(CmsNewsContentFile)parameters.get("_ARTICLE_");
  String elementName=(String)parameters.get("_ELEMENT_");
  String result=null;
  if (article != null) {
    if (tagcontent.toLowerCase().equals("externallink")) {
      result=article.getNewsExternalLink();
    }
 else     if (tagcontent.toLowerCase().equals("date")) {
      long newsDate=article.getNewsDate();
      if (newsDate != 0) {
        result=Utils.getNiceShortDate(article.getNewsDate());
      }
    }
 else     if (tagcontent.toLowerCase().equals("author")) {
      result=Encoder.escapeXml(article.getNewsAuthor());
    }
 else     if (tagcontent.toLowerCase().equals("headline")) {
      result=Encoder.escapeXml(article.getNewsHeadline());
    }
 else     if (tagcontent.toLowerCase().equals("shorttext")) {
      result=Encoder.escapeXml(article.getNewsShortText());
    }
 else     if (tagcontent.toLowerCase().equals("text")) {
      result=article.getNewsText(templateFile.getDataValue(C_TAG_PARAGRAPHSEP),true);
    }
 else     if (tagcontent.toLowerCase().equals("file")) {
      result=servletPath + C_NEWS_FOLDER_PAGE + article.getFilename()+ "/index.html";
    }
 else     if (tagcontent.toLowerCase().equals("linktext")) {
      result="Artikel lesen";
    }
 else     if (tagcontent.toLowerCase().equals("path")) {
      result=servletPath;
    }
 else     if (tagcontent.toLowerCase().equals("index")) {
      String newsFolder=getNewsFolder(elementName,parameters);
      Vector v=CmsNewsContentFile.getAllArticles(cms,newsFolder);
      for (int i=0; i < v.size(); i++) {
        Object o=v.elementAt(i);
        CmsNewsContentFile doc2=(CmsNewsContentFile)o;
        if (doc2.getAbsoluteFilename().equals(article.getAbsoluteFilename())) {
          result="" + i;
        }
      }
    }
  }
  return result;
}
