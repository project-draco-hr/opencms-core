{
  Hashtable parameters=(Hashtable)userObj;
  String elementName=(String)parameters.get("_ELEMENT_");
  CmsXmlTemplateFile newsTemplateFile=(CmsXmlTemplateFile)doc;
  String newsFolder=getNewsFolder(elementName,parameters);
  Vector v=CmsNewsTemplateFile.getAllArticles(cms,newsFolder);
  String result="";
  for (int i=0; i < v.size(); i++) {
    Object o=v.elementAt(i);
    CmsNewsTemplateFile doc2=(CmsNewsTemplateFile)o;
    newsTemplateFile.setData("date",Utils.getNiceShortDate(doc2.getNewsDate()));
    newsTemplateFile.setData("headline",doc2.getNewsHeadline());
    newsTemplateFile.setData("shorttext",doc2.getNewsShortText());
    newsTemplateFile.setData("link",doc2.getFilename() + "/index.html");
    result=result + newsTemplateFile.getProcessedDataValue("newslistentry");
  }
  return result;
}
