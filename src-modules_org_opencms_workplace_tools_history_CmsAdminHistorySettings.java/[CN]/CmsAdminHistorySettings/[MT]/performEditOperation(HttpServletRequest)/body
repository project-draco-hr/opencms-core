{
  String paramEnabled=request.getParameter("enable");
  String paramVersions=request.getParameter("versions");
  boolean enabled=Boolean.valueOf(paramEnabled).booleanValue();
  int versions=0;
  try {
    versions=Integer.parseInt(paramVersions);
  }
 catch (  NumberFormatException e) {
    throw new CmsIllegalArgumentException(Messages.get().container(Messages.ERR_NO_INT_ENTERED_0),e);
  }
  if (versions < 1) {
    throw new CmsIllegalArgumentException(Messages.get().container(Messages.ERR_NO_POSITIVE_INT_0));
  }
  OpenCms.getSystemInfo().setVersionHistorySettings(enabled,versions);
  OpenCms.writeConfiguration(CmsSystemConfiguration.class);
  return true;
}
