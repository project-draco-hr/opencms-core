{
  m_action=m_actionOutputUpload;
  repaint();
  MultipartPostMethod filePost=new MultipartPostMethod(m_targetUrl);
  try {
    filePost.addParameter(uploadFile.getName(),uploadFile);
    filePost.addParameter("action","submitform");
    filePost.addParameter("unzipfile","true");
    filePost.addParameter("uploadfolder",m_uploadFolder);
    filePost.setQueryString(getParameter("browserCookie"));
    filePost.addRequestHeader("Cookie",getParameter("browserCookie"));
    HttpClient client=new HttpClient();
    client.setConnectionTimeout(5000);
    int status=client.executeMethod(filePost);
    if (status == HttpStatus.SC_OK) {
      getAppletContext().showDocument(new URL(m_redirectUrl),"explorer_files");
    }
 else {
      String error=m_errorLine1 + "\n" + filePost.getStatusLine();
      getAppletContext().showDocument(new URL(m_errorUrl + "?action=showerror&uploaderror=" + error),"explorer_files");
    }
  }
 catch (  Exception ex) {
    ex.printStackTrace();
  }
 finally {
    filePost.releaseConnection();
    uploadFile.delete();
  }
}
