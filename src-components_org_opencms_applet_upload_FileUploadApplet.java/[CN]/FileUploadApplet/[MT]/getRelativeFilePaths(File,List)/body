{
  if (file.isDirectory()) {
    File[] children=file.listFiles();
    for (int i=0; i < children.length; i++) {
      getRelativeFilePaths(children[i],fileNames);
    }
  }
 else {
    FileFilter filter=m_fileSelector.getFileFilter();
    if (filter.accept(file)) {
      String rootDir=m_fileSelector.getCurrentDirectory().getAbsolutePath();
      int rootDirLength=rootDir.length();
      String filePath=file.getAbsolutePath();
      filePath=filePath.substring(rootDirLength);
      filePath=filePath.replace('\\','/');
      fileNames.add(filePath);
    }
  }
}
