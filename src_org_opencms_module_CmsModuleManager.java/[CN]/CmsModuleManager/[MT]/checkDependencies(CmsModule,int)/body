{
  List result=new ArrayList();
  if (mode == C_DEPENDENCY_MODE_DELETE) {
    Iterator i=m_modules.values().iterator();
    while (i.hasNext()) {
      CmsModule otherModule=(CmsModule)i.next();
      CmsModuleDependency dependency=otherModule.checkDependency(module);
      if (dependency != null) {
        result.add(new CmsModuleDependency(otherModule.getName(),otherModule.getVersion()));
      }
    }
  }
 else   if (mode == C_DEPENDENCY_MODE_IMPORT) {
    Iterator i=m_modules.values().iterator();
    result.addAll(module.getDependencies());
    while (i.hasNext() && (result.size() > 0)) {
      CmsModule otherModule=(CmsModule)i.next();
      CmsModuleDependency dependency=module.checkDependency(otherModule);
      if (dependency != null) {
        result.remove(dependency);
      }
    }
  }
 else {
    throw new RuntimeException("checkDependencies() invalid mode parameter: " + mode);
  }
  return result;
}
