{
  Map moduleDependencies=buildDepsForAllModules(rfsAbsPath,forDeletion);
  Iterator itMods=moduleNames.iterator();
  while (itMods.hasNext()) {
    String moduleName=(String)itMods.next();
    List dependencies=(List)moduleDependencies.get(moduleName);
    if (dependencies != null) {
      List depModules=new ArrayList(dependencies);
      depModules.removeAll(moduleNames);
      if (!depModules.isEmpty()) {
        throw new CmsIllegalArgumentException(Messages.get().container(Messages.ERR_MODULE_SELECTION_INCONSISTENT_2,moduleName,depModules.toString()));
      }
    }
  }
}
