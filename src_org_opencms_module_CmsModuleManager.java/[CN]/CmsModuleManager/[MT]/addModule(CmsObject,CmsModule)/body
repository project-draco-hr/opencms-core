{
  cms.checkRole(CmsRole.MODULE_MANAGER);
  if (m_modules.containsKey(module.getName())) {
    throw new CmsConfigurationException(CmsConfigurationException.C_CONFIGURATION_ERROR);
  }
  if (OpenCms.getLog(this).isInfoEnabled()) {
    OpenCms.getLog(this).info("Creating new module '" + module.getName() + "'");
  }
  m_modules.put(module.getName(),module);
  try {
    I_CmsModuleAction moduleAction=(I_CmsModuleAction)m_moduleActionInstances.get(module.getName());
    if (moduleAction != null) {
      moduleAction.moduleUpdate(module);
    }
  }
 catch (  Throwable t) {
    OpenCms.getLog(this).error("Error during module action instance update for module '" + module.getName() + "'",t);
  }
  initModuleExportPoints();
  updateModuleConfiguration();
}
