{
  cms.checkRole(CmsRole.MODULE_MANAGER);
  if (m_modules.containsKey(module.getName())) {
    throw new CmsConfigurationException(CmsConfigurationException.C_CONFIGURATION_ERROR);
  }
  if (LOG.isInfoEnabled()) {
    LOG.info(Messages.get().key(Messages.LOG_CREATE_NEW_MOD_1,module.getName()));
  }
  m_modules.put(module.getName(),module);
  try {
    I_CmsModuleAction moduleAction=(I_CmsModuleAction)m_moduleActionInstances.get(module.getName());
    if (moduleAction != null) {
      moduleAction.moduleUpdate(module);
    }
  }
 catch (  Throwable t) {
    LOG.error(Messages.get().key(Messages.LOG_MOD_UPDATE_ERR_1,module.getName()),t);
  }
  initModuleExportPoints();
  updateModuleConfiguration();
}
