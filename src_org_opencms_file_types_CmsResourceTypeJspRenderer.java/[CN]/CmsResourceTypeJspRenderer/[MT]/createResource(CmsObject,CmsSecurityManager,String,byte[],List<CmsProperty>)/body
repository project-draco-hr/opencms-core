{
  boolean addPropertyFormatter=true;
  boolean addPropertyContainerTypes=true;
  for (Iterator<CmsProperty> i=properties.iterator(); i.hasNext(); ) {
    CmsProperty property=i.next();
    if (property.getName().equals(PROPERTY_CONTAINERTYPES)) {
      addPropertyContainerTypes=false;
    }
 else     if (property.getName().equals(PROPERTY_FORMATTER)) {
      addPropertyFormatter=false;
    }
  }
  if (addPropertyContainerTypes || addPropertyFormatter) {
    I_CmsResourceType resType=OpenCms.getResourceManager().getResourceType(getTypeId());
    if (resType.isAdditionalModuleResourceType()) {
      String moduleName=resType.getModuleName();
      CmsModule module=OpenCms.getModuleManager().getModule(moduleName);
      if (addPropertyContainerTypes) {
        String types=module.getParameter(resType.getTypeName() + MODULE_PARAM_SUFFIX_CONTAINERTYPES);
        if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(types)) {
          properties.add(new CmsProperty(PROPERTY_CONTAINERTYPES,null,types));
        }
      }
      if (addPropertyFormatter) {
        String formatter=module.getParameter(resType.getTypeName() + MODULE_PARAM_SUFFIX_FORMATTER);
        if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(formatter)) {
          properties.add(new CmsProperty(PROPERTY_FORMATTER,null,formatter));
        }
      }
    }
  }
  return super.createResource(cms,securityManager,resourcename,content,properties);
}
