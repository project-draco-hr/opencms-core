{
  super.onModuleLoad();
  I_CmsLayoutBundle.INSTANCE.rootCss().ensureInjected();
  I_CmsLayoutBundle.INSTANCE.pageCss().ensureInjected();
  I_CmsToolbarButtonLayoutBundle.INSTANCE.toolbarButtonCss().ensureInjected();
  RootPanel.getBodyElement().addClassName(I_CmsLayoutBundle.INSTANCE.rootCss().root());
  final CmsSitemapController controller=new CmsSitemapController(this);
  CmsSitemapToolbarHandler handler=new CmsSitemapToolbarHandler(controller);
  CmsSitemapToolbar toolbar=new CmsSitemapToolbar(handler);
  controller.setToolbar(toolbar);
  RootPanel.get().add(toolbar);
  RootPanel.get().add(new CmsToolbarPlaceHolder());
  CmsHeader title=new CmsHeader(Messages.get().key(Messages.GUI_EDITOR_TITLE_0),CmsSitemapProvider.get().getUri());
  title.addStyleName(I_CmsLayoutBundle.INSTANCE.rootCss().pageCenter());
  RootPanel.get().add(title);
  final CmsPage page=new CmsPage();
  RootPanel.get().add(page);
  final Label loadingLabel=new Label(Messages.get().key(Messages.GUI_LOADING_0));
  page.add(loadingLabel);
  CmsRpcAction<CmsClientSitemapEntry> getRootAction=new CmsRpcAction<CmsClientSitemapEntry>(){
    /** 
 * @see org.opencms.gwt.client.rpc.CmsRpcAction#execute()
 */
    @Override public void execute(){
      start(500);
      CmsSitemapProvider.getService().getRoot(CmsSitemapProvider.get().getUri(),this);
    }
    /** 
 * @see org.opencms.gwt.client.rpc.CmsRpcAction#onResponse(java.lang.Object)
 */
    @Override public void onResponse(    CmsClientSitemapEntry root){
      page.remove(loadingLabel);
      controller.setRoot(root);
      m_tree=new CmsLazyTree<CmsSitemapTreeItem>(new A_CmsLazyOpenHandler<CmsSitemapTreeItem>(){
        /** 
 * @see org.opencms.gwt.client.ui.tree.I_CmsLazyOpenHandler#load(org.opencms.gwt.client.ui.tree.CmsLazyTreeItem)
 */
        public void load(        final CmsSitemapTreeItem target){
          CmsRpcAction<List<CmsClientSitemapEntry>> getChildrenAction=new CmsRpcAction<List<CmsClientSitemapEntry>>(){
            /** 
 * @see org.opencms.gwt.client.rpc.CmsRpcAction#execute()
 */
            @Override public void execute(){
              start(1000);
              CmsSitemapProvider.getService().getChildren(target.getSitePath(),this);
            }
            /** 
 * @see org.opencms.gwt.client.rpc.CmsRpcAction#onResponse(java.lang.Object)
 */
            @Override public void onResponse(            List<CmsClientSitemapEntry> result){
              target.clearChildren();
              controller.addData(target.getSitePath(),result);
              for (              CmsClientSitemapEntry entry : result) {
                target.addChild(entry);
              }
              target.onFinishLoading();
              stop();
            }
          }
;
          getChildrenAction.execute();
        }
      }
);
      m_tree.addItem(new CmsSitemapTreeItem(root));
      page.add(m_tree);
      stop();
    }
  }
;
  getRootAction.execute();
}
