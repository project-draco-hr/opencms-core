{
  CmsResource resource=(CmsResource)indexResource.getData();
  String rawContent=null;
  try {
    CmsFile file=cms.readFile(cms.getRequestContext().removeSiteRoot(resource.getRootPath()),CmsResourceFilter.IGNORE_EXPIRATION);
    if (!(file.getLength() > 0)) {
      throw new CmsIndexException("Resource " + resource.getRootPath() + " has no content.");
    }
    CmsWordExtractor extractor=new CmsWordExtractor();
    rawContent=extractor.extractText(new ByteArrayInputStream(file.getContents()));
    rawContent=CmsStringUtil.substitutePerl(rawContent,internalWordToken("PAGEREF"),"$1","g");
    rawContent=CmsStringUtil.substitutePerl(rawContent,internalWordToken("REF"),"$1","g");
    rawContent=CmsStringUtil.substitutePerl(rawContent,internalWordToken("HYPERLINK"),"$1","g");
    rawContent=CmsStringUtil.substitutePerl(rawContent,internalWordToken("\\w*"),"$1","g");
    rawContent=CmsStringUtil.substitutePerl(rawContent,"[^[:print:]]"," ","g");
  }
 catch (  Exception exc) {
    throw new CmsIndexException("Reading resource " + resource.getRootPath() + "failed.",exc);
  }
  return rawContent;
}
