{
  List errors=new ArrayList();
  try {
    Map params=new HashMap();
    params.put(CmsDialog.PARAM_ACTION,A_CmsListDialog.LIST_SELECT_PAGE);
    params.put(A_CmsListDialog.PARAM_PAGE,"1");
    params.put(CmsToolDialog.PARAM_ROOT,"explorer");
    if (getSettings().getUserSettings().getWorkplaceSearchViewStyle() == CmsSearchResultStyle.STYLE_EXPLORER) {
      getSettings().setExplorerPage(1);
      params.put(A_CmsListExplorerDialog.PARAM_SHOW_EXPLORER,Boolean.TRUE);
    }
 else {
      CmsListMetadata metadata=A_CmsListDialog.getMetadata(CmsSearchResultsList.class.getName());
      boolean withExcerpts=(getSettings().getUserSettings().getWorkplaceSearchViewStyle() == CmsSearchResultStyle.STYLE_LIST_WITH_EXCERPTS);
      if (metadata == null) {
        if (!withExcerpts) {
          params.put(CmsDialog.PARAM_ACTION,A_CmsListDialog.LIST_INDEPENDENT_ACTION);
          params.put(A_CmsListDialog.PARAM_LIST_ACTION,CmsSearchResultsList.LIST_DETAIL_EXCERPT);
        }
      }
 else {
        metadata.getItemDetailDefinition(CmsSearchResultsList.LIST_DETAIL_EXCERPT).setVisible(withExcerpts);
      }
      params.put(A_CmsListExplorerDialog.PARAM_SHOW_EXPLORER,Boolean.FALSE);
    }
    getToolManager().jspForwardTool(this,"/search/results",params);
  }
 catch (  Exception e) {
    errors.add(e);
  }
  setCommitErrors(errors);
}
