{
  Locale defaultLocale=Locale.getDefault();
  if (defaultLocale != m_lastDefaultLocale) {
    m_bundleCache=new HashMap<BundleKey,Object>();
    m_lastDefaultLocale=defaultLocale;
  }
  m_lookupKey.set(baseName,locale);
  Object obj=m_bundleCache.get(m_lookupKey);
  if (obj instanceof ResourceBundle) {
    return (ResourceBundle)obj;
  }
 else   if (obj == NULL_ENTRY) {
  }
 else {
    boolean wantBase=locale.equals(defaultLocale);
    CmsResourceBundle bundle=tryBundle(baseName,locale,wantBase);
    if ((bundle == null) && !locale.equals(defaultLocale)) {
      bundle=tryBundle(baseName,defaultLocale,true);
    }
    addBundleToCache(baseName,locale,bundle);
    if (bundle != null) {
      return bundle;
    }
  }
  return ResourceBundle.getBundle(baseName,locale);
}
