{
  Hashtable histproperties=cms.getRegistry().getSystemValues(C_REGISTRY_HISTORY);
  String weeks=(String)histproperties.get(C_REGISTRY_HISTORY_WEEKS);
  if ((weeks != null) && !("".equals(weeks.trim()))) {
    int intWeeks=Integer.parseInt(weeks);
    long oneWeek=604800000;
    long maxDate=System.currentTimeMillis() - (intWeeks * oneWeek);
    cms.deleteBackups(maxDate,intWeeks * 2,new CmsHtmlReport(I_CmsWpConstants.C_DEFAULT_LOCALE));
  }
}
