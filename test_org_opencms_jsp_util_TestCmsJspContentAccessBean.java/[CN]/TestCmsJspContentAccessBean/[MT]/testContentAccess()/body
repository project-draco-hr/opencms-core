{
  CmsObject cms=getCmsObject();
  CmsFile file=cms.readFile("/xmlcontent/article_0002.html");
  cms.getRequestContext().setUri("/xmlcontent/article_0002.html");
  CmsXmlContent content=CmsXmlContentFactory.unmarshal(cms,file);
  CmsJspContentAccessBean bean=new CmsJspContentAccessBean(cms,Locale.ENGLISH,content);
  assertSame(file,bean.getFile());
  Map<String,Boolean> hasValue=bean.getHasValue();
  assertSame(Boolean.TRUE,hasValue.get("Title"));
  assertSame(Boolean.FALSE,hasValue.get("IdontExistHere"));
  Map<String,Boolean> hasLocale=bean.getHasLocale();
  assertSame(Boolean.TRUE,hasLocale.get("en"));
  assertSame(Boolean.TRUE,hasLocale.get("de"));
  assertSame(Boolean.FALSE,hasLocale.get("fr"));
  Map<String,CmsJspContentAccessValueWrapper> enValue=bean.getValue();
  assertEquals("This is the article 2 sample",String.valueOf(enValue.get("Title")));
  Map<String,Map<String,CmsJspContentAccessValueWrapper>> localeValue=bean.getLocaleValue();
  Map<String,CmsJspContentAccessValueWrapper> deValue=localeValue.get("de");
  assertEquals("Das ist Artikel 2",String.valueOf(deValue.get("Title")));
  enValue=localeValue.get("en");
  assertEquals("This is the article 2 sample",String.valueOf(enValue.get("Title")));
  Map<String,CmsJspContentAccessValueWrapper> frValue=localeValue.get("fr");
  assertFalse(frValue.get("Title").getExists());
  Map<String,List<CmsJspContentAccessValueWrapper>> enValues=bean.getValueList();
  assertEquals(2,enValues.get("Teaser").size());
  assertEquals("This is teaser 2 in sample article 2.",String.valueOf(enValues.get("Teaser").get(1)));
  Map<String,Map<String,List<CmsJspContentAccessValueWrapper>>> localeValues=bean.getLocaleValueList();
  Map<String,List<CmsJspContentAccessValueWrapper>> deValues=localeValues.get("de");
  assertEquals(3,deValues.get("Teaser").size());
  assertEquals("This is the article 2 sample",String.valueOf(deValues.get("Teaser").get(2).getResolveMacros()));
  enValues=localeValues.get("en");
  assertEquals(2,enValues.get("Teaser").size());
  assertEquals("This is teaser 2 in sample article 2.",String.valueOf(enValues.get("Teaser").get(1)));
  Map<String,List<CmsJspContentAccessValueWrapper>> frValues=localeValues.get("fr");
  assertEquals(0,frValues.get("Title").size());
  CmsJspContentAccessValueWrapper val=enValue.get("i/do/no/exists");
  assertFalse(val.getExists());
  assertTrue(val.getIsEmpty());
  assertTrue(val.getIsEmptyOrWhitespaceOnly());
  assertEquals("",val.toString());
  assertEquals("",val.getPath());
  assertEquals(0,val.getValueList().size());
  assertEquals(0,val.getHasValue().size());
  assertEquals(0,val.getValue().size());
  bean=new CmsJspContentAccessBean(cms,Locale.FRENCH,content);
  frValues=bean.getValueList();
  assertEquals(2,frValues.get("Teaser").size());
  assertEquals("This is teaser 2 in sample article 2.",String.valueOf(enValues.get("Teaser").get(1)));
}
