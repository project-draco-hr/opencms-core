{
  Element systemElement=parent.addElement(N_SYSTEM);
  Element i18nElement=systemElement.addElement(N_I18N);
  i18nElement.addElement(N_LOCALEHANDLER).addAttribute(A_CLASS,m_localeManager.getLocaleHandler().getClass().getName());
  Iterator i;
  Element localesElement;
  localesElement=i18nElement.addElement(N_LOCALESCONFIGURED);
  i=m_localeManager.getAvailableLocales().iterator();
  while (i.hasNext()) {
    Locale locale=(Locale)i.next();
    localesElement.addElement(N_LOCALE).addText(locale.toString());
  }
  localesElement=i18nElement.addElement(N_LOCALESDEFAULT);
  i=m_localeManager.getDefaultLocales().iterator();
  while (i.hasNext()) {
    Locale locale=(Locale)i.next();
    localesElement.addElement(N_LOCALE).setText(locale.toString());
  }
  Element mailElement=systemElement.addElement(N_MAIL);
  mailElement.addElement(N_MAILFROM).setText(m_mailSettings.getMailFromDefault());
  i=m_mailSettings.getMailHosts().iterator();
  while (i.hasNext()) {
    CmsMailSettings.CmsMailHost host=(CmsMailSettings.CmsMailHost)i.next();
    Element hostElement=mailElement.addElement(N_MAILHOST).addAttribute(A_NAME,host.getHostname()).addAttribute(A_ORDER,host.getOrder().toString()).addAttribute(A_PROTOCOL,host.getProtocol());
    if (host.isAuthenticating()) {
      hostElement.addAttribute(A_USER,host.getUsername()).addAttribute(A_PASSWORD,host.getPassword());
    }
  }
  systemElement.addElement(N_VERSIONHISTORY).addAttribute(A_ENABLED,new Boolean(m_versionHistoryEnabled).toString()).addAttribute(A_COUNT,new Integer(m_versionHistoryMaxCount).toString());
  systemElement.addElement(N_RESOURCEINIT);
  return systemElement;
}
