{
  CmsRequestContext context=cms.getRequestContext();
  if (publishList.isDirectPublish()) {
    CmsResource directPublishResource=publishList.getDirectPublishResource();
    checkPublishPermissions(context,directPublishResource);
  }
 else {
    checkPublishPermissions(context,null);
  }
  CmsDbContext dbc=m_dbContextFactory.getDbContext(context);
  try {
    m_driverManager.publishProject(cms,dbc,publishList,report);
  }
  finally {
    dbc.clear();
  }
  return publishList.getPublishHistoryId();
}
