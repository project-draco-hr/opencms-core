{
  CmsProject deleteProject=readProject(projectId);
  if ((isAdmin(context) || isManagerOfProject(context)) && (projectId != I_CmsConstants.C_PROJECT_ONLINE_ID)) {
    I_CmsRuntimeInfo runtimeInfo=m_runtimeInfoFactory.getRuntimeInfo(m_driverManager,I_CmsRuntimeInfo.C_RUNTIMEINFO_VFS_AND_USER + I_CmsRuntimeInfo.C_RUNTIMEINFO_PROJECT);
    try {
      m_driverManager.deleteProject(context,runtimeInfo,deleteProject);
      runtimeInfo.pop();
    }
 catch (    CmsException e) {
      runtimeInfo.report(null,"Error deleting project " + deleteProject.getName(),e);
      throw e;
    }
 finally {
      runtimeInfo.clear();
    }
  }
 else   if (projectId == I_CmsConstants.C_PROJECT_ONLINE_ID) {
    throw new CmsSecurityException("[" + this.getClass().getName() + "] deleteProject() "+ deleteProject.getName(),CmsSecurityException.C_SECURITY_NO_MODIFY_IN_ONLINE_PROJECT);
  }
 else {
    throw new CmsSecurityException("[" + this.getClass().getName() + "] deleteProject() "+ deleteProject.getName(),CmsSecurityException.C_SECURITY_PROJECTMANAGER_PRIVILEGES_REQUIRED);
  }
}
