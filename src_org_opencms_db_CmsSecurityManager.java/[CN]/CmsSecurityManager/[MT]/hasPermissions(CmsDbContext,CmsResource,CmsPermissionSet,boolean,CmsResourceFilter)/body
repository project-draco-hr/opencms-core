{
  if (!filter.isValid(dbc.getRequestContext(),resource)) {
    return I_CmsPermissionHandler.PERM_FILTERED;
  }
  String cacheKey=m_keyGenerator.getCacheKeyForUserPermissions(filter.requireVisible() && checkLock ? "11" : (!filter.requireVisible() && checkLock ? "01" : (filter.requireVisible() && !checkLock ? "10" : "00")),dbc,resource,requiredPermissions);
  I_CmsPermissionHandler.CmsPermissionCheckResult cacheResult=OpenCms.getMemoryMonitor().getCachedPermission(cacheKey);
  if (cacheResult != null) {
    return cacheResult;
  }
  I_CmsPermissionHandler.CmsPermissionCheckResult result=m_permissionHandler.hasPermissions(dbc,resource,requiredPermissions,checkLock,filter);
  OpenCms.getMemoryMonitor().cachePermission(cacheKey,result);
  return result;
}
