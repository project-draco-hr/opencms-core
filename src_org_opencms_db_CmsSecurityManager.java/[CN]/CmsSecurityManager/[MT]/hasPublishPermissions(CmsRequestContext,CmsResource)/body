{
  boolean hasPublishPermissions=false;
  hasPublishPermissions|=isAdmin(context);
  if (!hasPublishPermissions) {
    hasPublishPermissions|=isManagerOfProject(context);
  }
  if (directPublishResource != null) {
    try {
      hasPublishPermissions|=(PERM_ALLOWED == hasPermissions(context,directPublishResource,CmsPermissionSet.ACCESS_DIRECT_PUBLISH,true,CmsResourceFilter.ALL));
      String parentFolder=CmsResource.getParentFolder(directPublishResource.getRootPath());
      if (parentFolder != null) {
        CmsResource parent=readResource(context,parentFolder,CmsResourceFilter.ALL);
        if ((parent.getState() == I_CmsConstants.C_STATE_DELETED) || (parent.getState() == I_CmsConstants.C_STATE_NEW)) {
          return false;
        }
      }
    }
 catch (    CmsException e) {
      return false;
    }
  }
  hasPublishPermissions&=(context.currentProject().getId() != I_CmsConstants.C_PROJECT_ONLINE_ID);
  hasPublishPermissions&=(context.currentProject().getFlags() == I_CmsConstants.C_PROJECT_STATE_UNLOCKED);
  return hasPublishPermissions;
}
