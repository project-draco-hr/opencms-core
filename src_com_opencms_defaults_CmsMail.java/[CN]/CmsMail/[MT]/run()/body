{
  Message msg=null;
  try {
    msg=buildMessage(m_mailserver);
  }
 catch (  Exception e) {
    if (OpenCms.getLog(this).isErrorEnabled()) {
      OpenCms.getLog(this).error("Error while building Email object",e);
    }
    return;
  }
  try {
    Transport.send(msg);
  }
 catch (  Exception e) {
    for (; e instanceof MessagingException; e=((MessagingException)e).getNextException()) {
    }
    if (OpenCms.getLog(this).isErrorEnabled()) {
      OpenCms.getLog(this).error("Error while transmitting using default SMTP server",e);
    }
    if (m_alternativeMailserver != null && !"".equals(m_alternativeMailserver)) {
      try {
        msg=buildMessage(m_alternativeMailserver);
        Transport.send(msg);
        if (OpenCms.getLog(this).isInfoEnabled()) {
          OpenCms.getLog(this).info("Mail send using alternative SMTP server");
        }
      }
 catch (      Exception e2) {
        for (; e2 instanceof MessagingException; e2=((MessagingException)e2).getNextException()) {
        }
        if (OpenCms.getLog(this).isFatalEnabled()) {
          OpenCms.getLog(this).fatal("Could not send Email, even alternative SMPT server failed",e2);
        }
      }
    }
 else {
      if (OpenCms.getLog(this).isFatalEnabled()) {
        OpenCms.getLog(this).fatal("No alternative SMTP server given, could not send Email");
      }
    }
  }
}
