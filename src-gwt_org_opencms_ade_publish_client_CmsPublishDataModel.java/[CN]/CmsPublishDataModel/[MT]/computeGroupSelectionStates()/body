{
  Map<Integer,Set<CmsPublishItemStatus.State>> stateMap=Maps.newHashMap();
  Set<CmsPublishItemStatus.State> allStates=Sets.newHashSet();
  int i=0;
  for (  CmsPublishGroup group : m_groups) {
    Set<CmsPublishItemStatus.State> groupStates=Sets.newHashSet();
    for (    CmsPublishResource res : group.getResources()) {
      CmsPublishItemStatus item=m_status.get(res.getId());
      CmsPublishItemStatus.State stateToAdd;
      if (item.isDisabled()) {
        stateToAdd=CmsPublishItemStatus.State.remove;
      }
 else {
        stateToAdd=item.getState();
      }
      groupStates.add(stateToAdd);
      allStates.add(stateToAdd);
    }
    stateMap.put(new Integer(i),groupStates);
    i+=1;
  }
  stateMap.put(new Integer(-1),allStates);
  return stateMap;
}
