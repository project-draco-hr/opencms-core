{
  List keys=new ArrayList();
  System.out.println("\nValidating all keys in bundle " + bundle.getBundleName() + ":");
  Field[] fields=bundle.getClass().getDeclaredFields();
  for (int i=0; i < fields.length; i++) {
    Field field=fields[i];
    if (field.getType().equals(String.class)) {
      String key=field.getName();
      String value;
      try {
        value=(String)field.get(bundle);
      }
 catch (      IllegalAccessException e) {
        continue;
      }
      System.out.println("Validating key '" + key + "'");
      if (!key.equals(value)) {
        fail("Key '" + key + "' in bundle "+ bundle.getBundleName()+ " has bad value '"+ value+ "'");
      }
      String message=bundle.getBundle().key(key);
      if (CmsMessages.isUnknownKey(message)) {
        String bundleName=bundle.getBundleName();
        if (!bundleName.endsWith(".messages")) {
          fail("The Message bundle name \"" + bundleName + "\" does not end with: \".messages\". \n "+ "Change the constant literal (\"private static final String BUNDLE_NAME\")");
        }
 else {
          fail("No message for '" + key + "' in bundle "+ bundleName);
        }
      }
      if (key.length() < 7) {
        fail("Key '" + key + "' in bundle "+ bundle.getBundleName()+ " is to short (length must be at last 7)");
      }
      if (!key.equals(key.toUpperCase())) {
        fail("Key '" + key + "' in bundle "+ bundle.getBundleName()+ " must be all upper case");
      }
      if ((key.charAt(key.length() - 2) != '_') || (!key.startsWith("ERR_") && !key.startsWith("LOG_") && !key.startsWith("INIT_")&& !key.startsWith("GUI_")&& !key.startsWith("RPT_"))) {
        fail("Key '" + key + "' in bundle "+ bundle.getBundleName()+ " must have the form {ERR|LOG|INIT|GUI|RPT}_KEYNAME_{0-9}");
      }
      int argCount=Integer.valueOf(key.substring(key.length() - 1)).intValue();
      for (int j=0; j < argCount; j++) {
        String arg="{" + j;
        int pos=message.indexOf(arg);
        if (pos < 0) {
          fail("Message '" + message + "' for key '"+ key+ "' in bundle "+ bundle.getBundleName()+ " misses argument {"+ j+ "}");
        }
      }
      for (int j=argCount; j < 10; j++) {
        String arg="{" + j;
        int pos=message.indexOf(arg);
        if (pos >= 0) {
          fail("Message '" + message + "' for key '"+ key+ "' in bundle "+ bundle.getBundleName()+ " containes unused argument {"+ j+ "}");
        }
      }
      keys.add(key);
    }
  }
  CmsMessages messages=bundle.getBundle();
  Enumeration bundleKeys=messages.getResourceBundle().getKeys();
  while (bundleKeys.hasMoreElements()) {
    String bundleKey=(String)bundleKeys.nextElement();
    if (bundleKey.toUpperCase().equals(bundleKey)) {
      if (!keys.contains(bundleKey)) {
        fail("Bundle " + bundle.getBundleName() + " contains unreferenced message "+ bundleKey);
      }
    }
 else {
      System.out.println("Additional key in bundle '" + bundleKey + "'");
    }
  }
}
