{
  Iterator itLocks=OpenCms.getMemoryMonitor().getAllCachedLocks().iterator();
  while (itLocks.hasNext()) {
    CmsLock currentLock=(CmsLock)itLocks.next();
    if (!currentLock.getSystemLock().isUnlocked()) {
      if (!currentLock.getEditionLock().isUnlocked()) {
        if (forceUnlock || (currentLock.getEditionLock().getProjectId().equals(projectId))) {
          unlockResource(currentLock.getResourceName(),false);
        }
      }
    }
 else {
      if (currentLock.getProjectId().equals(projectId)) {
        unlockResource(currentLock.getResourceName(),false);
      }
    }
  }
}
