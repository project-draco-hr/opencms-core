{
  String ext=null;
  String mimetype=null;
  int lastDot=file.getName().lastIndexOf(".");
  if ((lastDot > 0) && (!file.getName().endsWith("."))) {
    ext=file.getName().substring(lastDot + 1,file.getName().length());
    mimetype=(String)m_mt.get(ext);
    if (mimetype != null) {
      cms.getRequestContext().getResponse().setContentType(mimetype);
    }
 else {
      cms.getRequestContext().getResponse().setContentType(C_DEFAULT_MIMETYPE);
    }
  }
 else {
    cms.getRequestContext().getResponse().setContentType(C_DEFAULT_MIMETYPE);
  }
}
