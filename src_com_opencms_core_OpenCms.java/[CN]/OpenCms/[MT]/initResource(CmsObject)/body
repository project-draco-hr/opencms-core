{
  CmsFile file=null;
  String resourceName=cms.getRequestContext().getUri();
  if (resourceName.endsWith("/")) {
    resourceName+=C_INDEX;
    cms.getRequestContext().getResponse().sendCmsRedirect(resourceName);
  }
  try {
    file=cms.readFile(cms.getRequestContext().getUri());
  }
 catch (  CmsException e) {
    if (e.getType() == CmsException.C_NOT_FOUND) {
      resourceName=cms.getRequestContext().getUri();
      if (!resourceName.endsWith(C_INDEX)) {
        if (!resourceName.endsWith("/")) {
          resourceName+="/";
        }
        resourceName+=C_INDEX;
        cms.getRequestContext().getResponse().sendCmsRedirect(resourceName);
      }
 else {
        throw e;
      }
    }
 else {
      throw e;
    }
  }
  if (file != null) {
    if ((file.getAccessFlags() & C_ACCESS_INTERNAL_READ) > 0) {
      throw new CmsException(CmsException.C_EXTXT[CmsException.C_INTERNAL_FILE] + cms.getRequestContext().getUri(),CmsException.C_INTERNAL_FILE);
    }
  }
  return file;
}
