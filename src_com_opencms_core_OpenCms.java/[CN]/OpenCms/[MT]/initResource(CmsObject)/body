{
  CmsFile file=null;
  String resourceName=cms.getRequestContext().getUri();
  CmsException tmpException=null;
  try {
    file=cms.readFile(resourceName);
  }
 catch (  CmsException e) {
    if (e.getType() == CmsException.C_NOT_FOUND) {
      try {
        cms.readFolder(resourceName);
        if (!resourceName.endsWith("/"))         resourceName+="/";
        String defaultFileName=cms.readProperty(resourceName,I_CmsConstants.C_PROPERTY_DEFAULT_FILE);
        if (defaultFileName != null) {
          String tmpResourceName=resourceName + defaultFileName;
          try {
            file=cms.readFile(tmpResourceName);
            cms.getRequestContext().getRequest().setRequestedResource(tmpResourceName);
          }
 catch (          CmsException exc) {
            if (exc.getType() == CmsException.C_NO_ACCESS) {
              throw exc;
            }
          }
        }
        if (file == null) {
          for (int i=0; i < m_defaultFilenames.length; i++) {
            String tmpResourceName=resourceName + m_defaultFilenames[i];
            try {
              file=cms.readFile(tmpResourceName);
              cms.getRequestContext().getRequest().setRequestedResource(tmpResourceName);
              break;
            }
 catch (            CmsException exc) {
              if (exc.getType() == CmsException.C_NO_ACCESS) {
                throw exc;
              }
            }
          }
        }
        if (file == null) {
          throw e;
        }
      }
 catch (      CmsException ex) {
        if (ex.getType() == CmsException.C_NOT_FOUND) {
          tmpException=e;
        }
 else {
          throw ex;
        }
      }
    }
 else {
      throw e;
    }
  }
  if (file != null) {
    if ((file.getAccessFlags() & C_ACCESS_INTERNAL_READ) > 0) {
      throw new CmsException(CmsException.C_EXTXT[CmsException.C_INTERNAL_FILE] + cms.getRequestContext().getUri(),CmsException.C_INTERNAL_FILE);
    }
  }
  Iterator i=m_checkFile.iterator();
  while (i.hasNext()) {
    try {
      file=((I_CmsCheckResource)i.next()).checkResource(file,cms);
    }
 catch (    CmsCheckResourceException e) {
      break;
    }
  }
  if (file == null && tmpException != null) {
    throw tmpException;
  }
  return file;
}
