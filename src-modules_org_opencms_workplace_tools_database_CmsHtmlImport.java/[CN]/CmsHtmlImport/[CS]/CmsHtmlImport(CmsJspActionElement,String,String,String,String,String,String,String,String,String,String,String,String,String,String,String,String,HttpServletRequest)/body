{
  if (inputDir == null) {
    inputDir="";
  }
  if (destinationDir == null) {
    destinationDir="";
  }
  if (imageGallery == null) {
    imageGallery="";
  }
  if (linkGallery == null) {
    linkGallery="";
  }
  if (downloadGallery == null) {
    downloadGallery="";
  }
  if (template == null) {
    template="";
  }
  if (element == null) {
    element="body";
  }
  if (encoding == null) {
    encoding="";
  }
  if (startPattern == null) {
    startPattern="";
  }
  if (endPattern == null) {
    endPattern="";
  }
  if (overwrite == null) {
    overwrite="";
  }
  String action=request.getParameter("action");
  if (action == null) {
    overwrite="checked";
  }
  if (leaveImages == null) {
    leaveImages="";
  }
  if (leaveDownloads == null) {
    leaveDownloads="";
  }
  if (keepBrokenLinks == null) {
    keepBrokenLinks="";
  }
  if (leaveExternalLinks == null) {
    leaveExternalLinks="";
  }
  m_cms=cms;
  m_cmsObject=m_cms.getCmsObject();
  m_locale=CmsLocaleManager.getLocale(locale);
  if (m_locale == null) {
    m_locale=m_cms.getRequestContext().getLocale();
  }
  m_inputDir=inputDir.trim();
  if (m_inputDir.endsWith("/") || m_inputDir.endsWith("\\")) {
    m_inputDir=m_inputDir.substring(0,m_inputDir.length() - 1);
  }
  m_destinationDir=destinationDir.trim();
  if ((!m_destinationDir.equals("")) && (!m_destinationDir.endsWith("/"))) {
    m_destinationDir+="/";
  }
  m_imageGallery=imageGallery.trim();
  if ((!m_imageGallery.equals("")) && (!m_imageGallery.endsWith("/"))) {
    m_imageGallery+="/";
  }
  m_linkGallery=linkGallery.trim();
  if ((!m_linkGallery.equals("")) && (!m_linkGallery.endsWith("/"))) {
    m_linkGallery+="/";
  }
  m_downloadGallery=downloadGallery.trim();
  if ((!m_downloadGallery.equals("")) && (!m_downloadGallery.endsWith("/"))) {
    m_downloadGallery+="/";
  }
  m_template=template;
  m_element=element;
  m_inputEncoding=encoding;
  if (CmsStringUtil.isEmpty(m_inputEncoding)) {
    m_inputEncoding=CmsEncoder.ENCODING_ISO_8859_1;
  }
  m_startPattern=startPattern;
  m_endPattern=endPattern;
  m_overwrite=overwrite.trim();
  if (m_overwrite.equals("checked")) {
    m_overwriteMode=true;
  }
 else {
    m_overwriteMode=false;
  }
  m_leaveImages=leaveImages.trim();
  if (m_leaveImages.equals("checked")) {
    m_leaveImagesMode=true;
  }
 else {
    m_leaveImagesMode=false;
  }
  m_leaveDownloads=leaveDownloads.trim();
  if (m_leaveDownloads.equals("checked")) {
    m_leaveDownloadsMode=true;
  }
 else {
    m_leaveDownloadsMode=false;
  }
  m_keepBrokenLinks=keepBrokenLinks.trim();
  if (m_keepBrokenLinks.equals("checked")) {
    m_keepBrokenLinksMode=true;
  }
 else {
    m_keepBrokenLinksMode=false;
  }
  m_leaveExternalLinks=leaveExternalLinks.trim();
  if (m_leaveExternalLinks.equals("checked")) {
    m_leaveExternalLinksMode=true;
  }
 else {
    m_leaveExternalLinksMode=false;
  }
  m_fileIndex=new HashMap();
  m_parents=new HashMap();
  m_externalLinks=new HashSet();
  m_imageInfo=new HashMap();
  m_extensions=OpenCms.getResourceManager().getExtensionMapping();
  m_htmlConverter=new CmsHtmlImportConverter(this,false);
  m_baseUrl=null;
  try {
    m_baseUrl=new URL("file://");
  }
 catch (  MalformedURLException e) {
  }
}
