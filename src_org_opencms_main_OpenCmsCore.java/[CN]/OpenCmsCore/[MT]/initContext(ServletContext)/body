{
  String servletMapping=context.getInitParameter("OpenCmsServlet");
  if (servletMapping == null) {
    throw new CmsInitException(Messages.get().container(Messages.ERR_CRITICAL_INIT_SERVLET_0));
  }
  String webInfPath=context.getInitParameter("OpenCmsHome");
  if (CmsStringUtil.isEmpty(webInfPath)) {
    webInfPath=searchWebInfFolder(context.getRealPath("/"));
    if (CmsStringUtil.isEmpty(webInfPath)) {
      throw new CmsInitException(Messages.get().container(Messages.ERR_CRITICAL_INIT_FOLDER_0));
    }
  }
  String defaultWebApplication=context.getInitParameter("DefaultWebApplication");
  if (defaultWebApplication == null) {
    defaultWebApplication="ROOT";
  }
  String webApplicationContext=context.getInitParameter("WebApplicationContext");
  getSystemInfo().init(webInfPath,servletMapping,webApplicationContext,defaultWebApplication);
  ExtendedProperties configuration=null;
  try {
    configuration=CmsPropertyUtils.loadProperties(getSystemInfo().getConfigurationFileRfsPath());
  }
 catch (  Exception e) {
    throw new CmsInitException(Messages.get().container(Messages.ERR_CRITICAL_INIT_PROPFILE_1,getSystemInfo().getConfigurationFileRfsPath()),e);
  }
  if (configuration.getBoolean("wizard.enabled",true)) {
    throw new CmsInitException(Messages.get().container(Messages.ERR_CRITICAL_INIT_WIZARD_0));
  }
  System.err.println("\n\nStarting OpenCms, version " + OpenCms.getSystemInfo().getVersionName() + " in web application '"+ getSystemInfo().getWebApplicationName()+ "'");
  for (int i=0; i < I_CmsConstants.C_COPYRIGHT.length; i++) {
    System.err.println(I_CmsConstants.C_COPYRIGHT[i]);
  }
  System.err.println();
  if (CmsLog.LOG.isInfoEnabled()) {
    CmsLog.LOG.info(".");
    CmsLog.LOG.info(".");
    CmsLog.LOG.info(".");
    CmsLog.LOG.info(".");
    CmsLog.LOG.info(". OpenCms version " + OpenCms.getSystemInfo().getVersionName());
    for (int i=0; i < I_CmsConstants.C_COPYRIGHT.length; i++) {
      CmsLog.LOG.info(". " + I_CmsConstants.C_COPYRIGHT[i]);
    }
    CmsLog.LOG.info(".                      ...............................................................");
    CmsLog.LOG.info(". Startup time         : " + (new Date(System.currentTimeMillis())));
    CmsLog.LOG.info(". Servlet container    : " + context.getServerInfo());
    CmsLog.LOG.info(". OpenCms version      : " + getSystemInfo().getVersionName());
    CmsLog.LOG.info(". OpenCms webapp name  : " + getSystemInfo().getWebApplicationName());
    CmsLog.LOG.info(". OpenCms servlet path : " + getSystemInfo().getServletPath());
    CmsLog.LOG.info(". OpenCms context      : " + getSystemInfo().getOpenCmsContext());
    CmsLog.LOG.info(". OpenCms WEB-INF path : " + getSystemInfo().getWebInfRfsPath());
    CmsLog.LOG.info(". OpenCms property file: " + getSystemInfo().getConfigurationFileRfsPath());
    CmsLog.LOG.info(". OpenCms log file     : " + getSystemInfo().getLogFileRfsPath());
  }
  initConfiguration(configuration);
  m_useBasicAuthentication=configuration.getBoolean("auth.basic",true);
  m_authenticationFormURI=configuration.getString("auth.form_uri",I_CmsWpConstants.C_VFS_PATH_WORKPLACE + "action/authenticate.html");
  if (m_sessionManager != null) {
    if (CmsLog.LOG.isInfoEnabled()) {
      CmsLog.LOG.info(". Session manager      : initialized");
    }
  }
 else {
    CmsLog.LOG.error(". Session manager      : NOT initialized");
  }
}
