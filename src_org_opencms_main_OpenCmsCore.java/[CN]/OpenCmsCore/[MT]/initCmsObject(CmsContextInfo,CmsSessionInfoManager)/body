{
  CmsUser user=contextInfo.getUser();
  if (user == null) {
    user=m_securityManager.readUser(contextInfo.getUserName());
  }
  CmsProject project=contextInfo.getProject();
  if (project == null) {
    project=m_securityManager.readProject(contextInfo.getProjectName());
  }
  CmsRequestContext context=new CmsRequestContext(user,project,contextInfo.getRequestedUri(),contextInfo.getSiteRoot(),contextInfo.getLocale(),contextInfo.getEncoding(),contextInfo.getRemoteAddr(),m_directoryTranslator,m_fileTranslator);
  CmsObject cms=new CmsObject(m_securityManager,context,sessionStorage);
  return cms;
}
