{
synchronized (LOCK) {
    if ((m_instance != null) && (getRunLevel() >= OpenCms.RUNLEVEL_2_INITIALIZING)) {
      return m_instance;
    }
    if (getRunLevel() != OpenCms.RUNLEVEL_1_CORE_OBJECT) {
      if (CmsLog.LOG.isErrorEnabled()) {
        CmsLog.LOG.error("Wrong init sequence, can not upgrade to runlevel 3 from runlevel " + getRunLevel());
      }
      return m_instance;
    }
    try {
      setRunLevel(OpenCms.RUNLEVEL_2_INITIALIZING);
      m_instance.initConfiguration(configuration);
      setRunLevel(OpenCms.RUNLEVEL_3_SHELL_ACCESS);
    }
 catch (    Throwable t) {
      CmsLog.LOG.fatal("Critical error during OpenCms initialization",t);
      m_instance=null;
      m_lastInitErrorTime=System.currentTimeMillis();
    }
    return m_instance;
  }
}
