{
  if (A_OpenCms.isLogging()) {
    A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_INIT,"[CmsInitMySqlFillDefaults] initialized rb-network and filling in some defaults...");
  }
  I_CmsRbUserGroup userRb=new CmsRbUserGroup(new CmsAccessUserGroup(new CmsAccessUserMySql(propertyDriver,propertyConnectString),new CmsAccessUserInfoMySql(propertyDriver,propertyConnectString),new CmsAccessGroupMySql(propertyDriver,propertyConnectString)));
  I_CmsRbTask taskRb=new CmsRbTask(new CmsAccessTask(propertyDriver,propertyConnectString));
  userRb.addGroup(C_GROUP_GUEST,"the guest-group",C_FLAG_ENABLED,null);
  A_CmsGroup adminGroup=userRb.addGroup(C_GROUP_ADMIN,"the admin-group",C_FLAG_ENABLED | C_FLAG_GROUP_PROJECTMANAGER,null);
  userRb.addGroup(C_GROUP_PROJECTLEADER,"the projectmanager-group",C_FLAG_ENABLED | C_FLAG_GROUP_PROJECTMANAGER | C_FLAG_GROUP_PROJECTCOWORKER| C_FLAG_GROUP_ROLE,null);
  userRb.addGroup(C_GROUP_USERS,"the users-group to access the workplace",C_FLAG_ENABLED | C_FLAG_GROUP_ROLE | C_FLAG_GROUP_PROJECTCOWORKER,C_GROUP_GUEST);
  userRb.addUser(C_USER_GUEST,"",C_GROUP_GUEST,"the guest-user",new Hashtable(),C_FLAG_ENABLED);
  A_CmsUser admin=userRb.addUser(C_USER_ADMIN,"admin",C_GROUP_ADMIN,"the admin-user",new Hashtable(),C_FLAG_ENABLED);
  I_CmsRbProject projectRb=new CmsRbProject(new CmsAccessProjectMySql(propertyDriver,propertyConnectString));
  A_CmsTask task=taskRb.createProject(admin,C_PROJECT_ONLINE,adminGroup,new java.sql.Timestamp(new Date().getTime()),C_TASK_PRIORITY_NORMAL);
  A_CmsProject project=projectRb.createProject(C_PROJECT_ONLINE_ID,C_PROJECT_ONLINE,"the online-project",task,userRb.readUser(C_USER_ADMIN),userRb.readGroup(C_GROUP_GUEST),userRb.readGroup(C_GROUP_PROJECTLEADER),C_FLAG_ENABLED);
  I_CmsRbSystemProperty propertyRb=new CmsRbSystemProperty(new CmsAccessSystemPropertyMySql(propertyDriver,propertyConnectString));
  Hashtable resourceTypes=new Hashtable(1);
  resourceTypes.put(C_TYPE_FOLDER_NAME,new CmsResourceType(C_TYPE_FOLDER,0,C_TYPE_FOLDER_NAME,""));
  resourceTypes.put(C_TYPE_LAST_INDEX,new Integer(C_TYPE_FOLDER));
  propertyRb.addProperty(C_SYSTEMPROPERTY_RESOURCE_TYPE,resourceTypes);
  propertyRb.addProperty(C_SYSTEMPROPERTY_MIMETYPES,initMimetypes());
  Hashtable mount=new Hashtable(1);
  mount.put("/",new CmsMountPoint("/",propertyDriver,propertyConnectString,"The root-mountpoint"));
  propertyRb.addProperty(C_SYSTEMPROPERTY_MOUNTPOINT,mount);
  A_CmsMountPoint mountPoint;
  Hashtable mountedAccessModules=new Hashtable();
  Enumeration keys=mount.keys();
  Object key;
  while (keys.hasMoreElements()) {
    key=keys.nextElement();
    mountPoint=(A_CmsMountPoint)mount.get(key);
    if (mountPoint.getMountpointType() == C_MOUNTPOINT_MYSQL) {
      mountedAccessModules.put(key,new CmsAccessFileMySql(mountPoint));
    }
 else {
      mountedAccessModules.put(key,new CmsAccessFileFilesystem(mountPoint));
    }
  }
  I_CmsAccessFile accessFile=new CmsAccessFile(mountedAccessModules);
  accessFile.createFolder(admin,project,C_ROOT,0);
  I_CmsRbFile fileRb=new CmsRbFile(accessFile);
  I_CmsRbMetadefinition metadefinitionRb=new CmsRbMetadefinition(new CmsAccessMetadefinitionMySql(propertyDriver,propertyConnectString));
  if (A_OpenCms.isLogging()) {
    A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_INIT,"[CmsInitMySqlFillDefaults] rb-network initialized");
  }
  return new CmsResourceBroker(userRb,fileRb,metadefinitionRb,propertyRb,projectRb,taskRb);
}
