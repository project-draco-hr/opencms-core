{
  I_CmsRbUserGroup userRb=new CmsRbUserGroup(new CmsAccessUserGroup(new CmsAccessUserMySql(propertyDriver,propertyConnectString),new CmsAccessUserInfoMySql(propertyDriver,propertyConnectString),new CmsAccessGroupMySql(propertyDriver,propertyConnectString)));
  I_CmsRbTask taskRb=new CmsRbTask(new CmsAccessTask(propertyDriver,propertyConnectString));
  userRb.addGroup(C_GROUP_GUEST,"the guest-group",C_FLAG_ENABLED,null);
  userRb.addGroup(C_GROUP_ADMIN,"the admin-group",C_FLAG_ENABLED,null);
  userRb.addGroup(C_GROUP_PROJECTLEADER,"the projectmanager-group",C_FLAG_ENABLED,null);
  userRb.addGroup(C_GROUP_USERS,"the users-group to access the workplace",C_FLAG_ENABLED,null);
  A_CmsUser user=userRb.addUser(C_USER_GUEST,"",C_GROUP_GUEST,"the guest-user",new Hashtable(),C_FLAG_ENABLED);
  A_CmsUser admin=userRb.addUser(C_USER_ADMIN,"admin",C_GROUP_ADMIN,"the admin-user",new Hashtable(),C_FLAG_ENABLED);
  I_CmsRbProject projectRb=new CmsRbProject(new CmsAccessProjectMySql(propertyDriver,propertyConnectString));
  A_CmsProject project=projectRb.createProject(C_PROJECT_ONLINE,"the online-project",new CmsTask(),userRb.readUser(C_USER_ADMIN),userRb.readGroup(C_GROUP_GUEST),userRb.readGroup(C_GROUP_PROJECTLEADER),C_FLAG_ENABLED);
  I_CmsRbProperty propertyRb=new CmsRbProperty(new CmsAccessPropertyMySql(propertyDriver,propertyConnectString));
  Hashtable resourceTypes=new Hashtable(1);
  resourceTypes.put(C_TYPE_FOLDER_NAME,new CmsResourceType(C_TYPE_FOLDER,0,C_TYPE_FOLDER_NAME,""));
  resourceTypes.put(C_TYPE_LAST_INDEX,new Integer(C_TYPE_FOLDER));
  propertyRb.addProperty(C_PROPERTY_RESOURCE_TYPE,resourceTypes);
  propertyRb.addProperty(C_PROPERTY_MIMETYPES,initMimetypes());
  Hashtable mount=new Hashtable(1);
  mount.put("/",new CmsMountPoint("/",propertyDriver,propertyConnectString,"The root-mountpoint"));
  propertyRb.addProperty(C_PROPERTY_MOUNTPOINT,mount);
  A_CmsMountPoint mountPoint;
  Hashtable mountedAccessModules=new Hashtable();
  Enumeration keys=mount.keys();
  Object key;
  while (keys.hasMoreElements()) {
    key=keys.nextElement();
    mountPoint=(A_CmsMountPoint)mount.get(key);
    if (mountPoint.getMountpointType() == C_MOUNTPOINT_MYSQL) {
      mountedAccessModules.put(key,new CmsAccessFileMySql(mountPoint));
    }
 else {
      mountedAccessModules.put(key,new CmsAccessFileFilesystem(mountPoint));
    }
  }
  I_CmsAccessFile accessFile=new CmsAccessFile(mountedAccessModules);
  accessFile.createFolder(admin,project,C_ROOT,0);
  I_CmsRbFile fileRb=new CmsRbFile(accessFile);
  I_CmsRbMetadefinition metadefinitionRb=new CmsRbMetadefinition(new CmsAccessMetadefinitionMySql(propertyDriver,propertyConnectString));
  return new CmsResourceBroker(userRb,fileRb,metadefinitionRb,propertyRb,projectRb,taskRb);
}
