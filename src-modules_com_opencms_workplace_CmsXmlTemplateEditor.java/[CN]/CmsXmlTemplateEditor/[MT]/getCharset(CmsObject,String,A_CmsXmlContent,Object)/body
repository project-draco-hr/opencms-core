{
  String prop=null;
  try {
    I_CmsSession session=CmsXmlTemplateLoader.getSession(cms.getRequestContext(),true);
    String file=(String)session.getValue("te_file");
    prop=cms.readProperty(file,CmsPropertyDefinition.PROPERTY_CONTENT_ENCODING);
    while ((prop == null) && (!"".equals(file))) {
      file=file.substring(0,file.lastIndexOf("/"));
      prop=cms.readProperty(file + "/",CmsPropertyDefinition.PROPERTY_CONTENT_ENCODING);
    }
  }
 catch (  Exception e) {
  }
  if (prop == null)   prop=OpenCms.getSystemInfo().getDefaultEncoding();
  return prop;
}
