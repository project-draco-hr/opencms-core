{
  CmsSearchIndex searchIndex=new CmsSearchIndex();
  searchIndex.setName(C_TEST_INDEX_NEW);
  searchIndex.setProjectName("Offline");
  searchIndex.setLocale(Locale.GERMAN.toString());
  searchIndex.setRebuildMode(CmsSearchIndex.C_AUTO_REBUILD);
  searchIndex.addSourceName("source1");
  searchIndex.initialize();
  OpenCms.getSearchManager().addSearchIndex(searchIndex);
  I_CmsReport report=new CmsShellReport();
  OpenCms.getSearchManager().updateIndex(report);
  CmsSearch searchBean=new CmsSearch();
  List searchResult;
  searchBean.init(getCmsObject());
  searchBean.setIndex(C_TEST_INDEX_NEW);
  searchBean.setQuery(">>SearchEgg1<<");
  searchResult=searchBean.getSearchResult();
  assertEquals(1,searchResult.size());
  assertEquals("/sites/default/xmlcontent/article_0001.html",((CmsSearchResult)searchResult.get(0)).getPath());
  searchBean.setSearchRoot("/folder1/");
  searchResult=searchBean.getSearchResult();
  assertEquals(0,searchResult.size());
}
