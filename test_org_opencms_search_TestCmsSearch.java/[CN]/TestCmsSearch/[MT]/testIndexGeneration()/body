{
  CmsSearchIndex searchIndex=new CmsSearchIndex(INDEX_TEST);
  searchIndex.setProjectName("Offline");
  searchIndex.setLocale(Locale.GERMAN);
  searchIndex.setRebuildMode(CmsSearchIndex.REBUILD_MODE_AUTO);
  searchIndex.addSourceName("source1");
  searchIndex.initialize();
  OpenCms.getSearchManager().addSearchIndex(searchIndex);
  I_CmsReport report=new CmsShellReport(Locale.ENGLISH);
  OpenCms.fireCmsEvent(I_CmsEventListener.EVENT_REBUILD_SEARCHINDEX,Collections.singletonMap(I_CmsEventListener.KEY_REPORT,report));
  CmsSearch searchBean=new CmsSearch();
  List searchResult;
  searchBean.init(getCmsObject());
  searchBean.setIndex(INDEX_TEST);
  searchBean.setQuery(">>SearchEgg1<<");
  searchResult=searchBean.getSearchResult();
  assertEquals(1,searchResult.size());
  assertEquals("/sites/default/xmlcontent/article_0001.html",((CmsSearchResult)searchResult.get(0)).getPath());
  searchBean.setSearchRoot("/folder1/");
  searchResult=searchBean.getSearchResult();
  assertEquals(0,searchResult.size());
}
