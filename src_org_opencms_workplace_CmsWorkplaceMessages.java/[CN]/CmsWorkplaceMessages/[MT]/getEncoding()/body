{
  String result=(String)m_allEncodings.get(m_locale);
  if (result != null) {
    return result;
  }
  if (DEBUG > 0) {
    System.err.println("CmsWorkplaceMessages.getEncoding(): looking up encoding for locale " + m_locale);
  }
  try {
    result=m_messages.getString(I_CmsConstants.C_PROPERTY_CONTENT_ENCODING);
  }
 catch (  MissingResourceException e) {
    result=m_workplaceDefaultEncoding;
    if (OpenCms.getLog(this).isDebugEnabled()) {
      OpenCms.getLog(this).debug(e);
    }
  }
  if (result.startsWith("{")) {
    if (result.indexOf(m_workplaceDefaultEncoding) >= 0) {
      result=m_workplaceDefaultEncoding;
    }
 else {
      int index=result.indexOf(";");
      if (index <= 1) {
        result=m_workplaceDefaultEncoding;
      }
 else {
        result=result.substring(1,index);
      }
    }
  }
  m_allEncodings.put(m_locale,result);
  return result;
}
