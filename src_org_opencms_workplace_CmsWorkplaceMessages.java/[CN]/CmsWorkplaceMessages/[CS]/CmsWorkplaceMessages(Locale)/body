{
  super(DEFAULT_WORKPLACE_MESSAGE_BUNDLE,locale);
  int todo=0;
  m_messageCache=new Hashtable();
  if (m_allEncodings == null) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("CmsWorkplaceMessages(): initializing the static encodings");
    }
synchronized (this) {
      m_allEncodings=new HashMap();
      m_workplaceDefaultEncoding=OpenCms.getWorkplaceManager().getDefaultEncoding();
    }
  }
  if (m_allModuleMessages == null) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("CmsWorkplaceMessages(): initializing module messages hash");
    }
synchronized (this) {
      m_allModuleMessages=new HashMap();
    }
  }
  Object obj=m_allModuleMessages.get(m_locale);
  if (obj == null) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("CmsWorkplaceMessages(): collecting static module messages");
    }
synchronized (this) {
      m_moduleMessages=collectModuleMessages(m_locale);
      m_allModuleMessages.put(m_locale,m_moduleMessages);
    }
  }
 else {
    m_moduleMessages=(Set)obj;
  }
}
