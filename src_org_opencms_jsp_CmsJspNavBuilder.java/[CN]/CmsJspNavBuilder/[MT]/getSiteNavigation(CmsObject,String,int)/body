{
  boolean noLimit=false;
  if (endLevel < 0) {
    noLimit=true;
  }
  ArrayList list=new ArrayList();
  List curnav=getNavigationForFolder(cms,folder);
  for (int i=0; i < curnav.size(); i++) {
    CmsJspNavElement ne=(CmsJspNavElement)curnav.get(i);
    list.add(ne);
    if (ne.isFolderLink() && (noLimit || (ne.getNavTreeLevel() < endLevel))) {
      List subnav=getSiteNavigation(cms,ne.getResourceName(),endLevel);
      list.addAll(subnav);
    }
  }
  return list;
}
