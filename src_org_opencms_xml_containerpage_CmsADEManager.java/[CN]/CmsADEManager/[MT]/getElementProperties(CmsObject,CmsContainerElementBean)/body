{
  Map<String,CmsProperty> properties=new HashMap<String,CmsProperty>();
  Iterator<Map.Entry<String,String>> itProperties=element.getProperties().entrySet().iterator();
  while (itProperties.hasNext()) {
    Map.Entry<String,String> entry=itProperties.next();
    String propertyName=entry.getKey();
    CmsProperty property=new CmsProperty(propertyName,entry.getValue(),null);
    properties.put(propertyName,property);
  }
  try {
    Map<String,CmsXmlContentProperty> propertyDefs=getElementPropertyConfiguration(cms,cms.readResource(element.getElementId()));
    Iterator<Map.Entry<String,CmsXmlContentProperty>> itPropertyDefs=propertyDefs.entrySet().iterator();
    while (itPropertyDefs.hasNext()) {
      Map.Entry<String,CmsXmlContentProperty> entry=itPropertyDefs.next();
      String propertyName=entry.getKey();
      CmsXmlContentProperty prop=entry.getValue();
      if (properties.containsKey(propertyName)) {
        properties.get(propertyName).setResourceValue(prop.getDefault());
      }
 else {
        properties.put(propertyName,new CmsProperty(propertyName,null,CmsXmlContentProperty.getPropValueIds(cms,prop.getPropertyType(),prop.getDefault())));
      }
    }
  }
 catch (  Exception e) {
    LOG.error(Messages.get().getBundle().key(Messages.ERR_READ_ELEMENT_PROPERTY_CONFIGURATION_1,element.getElementId()),e);
  }
  return properties;
}
