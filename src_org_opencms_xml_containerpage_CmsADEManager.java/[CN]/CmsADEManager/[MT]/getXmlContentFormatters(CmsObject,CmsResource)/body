{
  List<CmsRelation> relations=cms.getRelationsForResource(resource,CmsRelationFilter.TARGETS.filterType(CmsRelationType.XSD));
  CmsXmlContentDefinition contentDef=null;
  if ((relations != null) && !relations.isEmpty()) {
    String xsd=cms.getSitePath(relations.get(0).getTarget(cms,CmsResourceFilter.ALL));
    contentDef=new CmsXmlEntityResolver(cms).getCachedContentDefinition(xsd);
  }
  if (contentDef == null) {
    CmsXmlContent content=CmsXmlContentFactory.unmarshal(cms,cms.readFile(resource));
    contentDef=content.getContentDefinition();
  }
  Map<String,String> formatters=contentDef.getContentHandler().getFormattersByType();
  if (formatters.isEmpty()) {
    LOG.warn(Messages.get().getBundle().key(Messages.LOG_WARN_NO_FORMATTERS_DEFINED_1,contentDef.getSchemaLocation()));
  }
  return formatters;
}
