{
  StringBuffer result=new StringBuffer();
  Map galleryMap=OpenCms.getWorkplaceManager().getGalleries();
  List galleries=new ArrayList(galleryMap.size());
  Map typeMap=new HashMap(galleryMap.size());
  Iterator i=galleryMap.keySet().iterator();
  while (i.hasNext()) {
    String key=(String)i.next();
    A_CmsGallery currGallery=(A_CmsGallery)galleryMap.get(key);
    galleries.add(currGallery);
    typeMap.put(currGallery,key);
  }
  Collections.sort(galleries);
  for (int k=0; k < galleries.size(); k++) {
    A_CmsGallery currGallery=(A_CmsGallery)galleries.get(k);
    String galleryType=(String)typeMap.get(currGallery);
    if (options.showElement("gallery." + CmsStringUtil.substitute(galleryType,"gallery",""),displayOptions)) {
      if (result.length() == 0) {
        result.append(", \"separator\"");
      }
      result.append(", \"" + galleryType + "\"");
    }
  }
  return result.toString();
}
