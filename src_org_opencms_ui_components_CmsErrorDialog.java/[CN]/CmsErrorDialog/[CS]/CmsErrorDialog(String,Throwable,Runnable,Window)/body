{
  m_onClose=onClose;
  m_window=window;
  CmsVaadinUtils.readAndLocalizeDesign(this,OpenCms.getWorkplaceManager().getMessages(A_CmsUI.get().getLocale()),null);
  m_icon.setContentMode(ContentMode.HTML);
  m_icon.setValue(FontAwesome.WARNING.getHtml());
  m_errorLabel.setContentMode(ContentMode.PREFORMATTED);
  m_errorLabel.setValue(ExceptionUtils.getFullStackTrace(t));
  m_errorLabel.addStyleName(OpenCmsTheme.FULL_WIDTH_PADDING);
  final String labelId="label" + new CmsUUID().toString();
  m_errorLabel.setId(labelId);
  m_errorMessage.setContentMode(ContentMode.HTML);
  m_errorMessage.setValue(message);
  m_selectText.setCaption("Copy to clipboard");
  m_selectText.setAlternativeText(CmsVaadinUtils.getMessageText(org.opencms.ui.components.Messages.GUI_ERROR_DIALOG_SELECT_TEXT_0));
  m_selectText.setSelector("#" + labelId + " > pre");
  m_details.setVisible(false);
  m_okButton.addClickListener(new ClickListener(){
    private static final long serialVersionUID=1L;
    public void buttonClick(    ClickEvent event){
      onClose();
    }
  }
);
  m_detailsButton.addClickListener(new ClickListener(){
    private static final long serialVersionUID=1L;
    public void buttonClick(    ClickEvent event){
      toggleDetails();
    }
  }
);
  if (m_window != null) {
    m_window.addCloseListener(new CloseListener(){
      private static final long serialVersionUID=1L;
      public void windowClose(      CloseEvent e){
        onClose();
      }
    }
);
  }
}
