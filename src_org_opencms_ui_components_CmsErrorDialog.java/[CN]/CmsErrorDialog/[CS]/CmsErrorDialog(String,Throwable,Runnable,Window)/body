{
  m_onClose=onClose;
  m_window=window;
  CmsVaadinUtils.readAndLocalizeDesign(this,OpenCms.getWorkplaceManager().getMessages(A_CmsUI.get().getLocale()),null);
  m_icon.setContentMode(ContentMode.HTML);
  m_icon.setValue(FontAwesome.WARNING.getHtml());
  m_icon.addStyleName(ValoTheme.LABEL_COLORED);
  m_icon.addStyleName(ValoTheme.LABEL_HUGE);
  m_errorLabel.setContentMode(ContentMode.PREFORMATTED);
  m_errorLabel.setValue(ExceptionUtils.getFullStackTrace(t));
  m_errorMessage.setValue(message);
  m_okButton.addClickListener(new ClickListener(){
    private static final long serialVersionUID=1L;
    public void buttonClick(    ClickEvent event){
      onClose();
    }
  }
);
  if (m_window != null) {
    m_window.addCloseListener(new CloseListener(){
      private static final long serialVersionUID=1L;
      public void windowClose(      CloseEvent e){
        onClose();
      }
    }
);
  }
}
