{
  String result=(String)m_allEncodings.get(m_locale);
  if (result != null)   return result;
  if (DEBUG > 0)   System.err.println("CmsXmlLanguageFile.getEncoding(): looking up encoding for locale " + m_locale);
  try {
    result=m_messages.getString(I_CmsConstants.C_PROPERTY_CONTENT_ENCODING);
  }
 catch (  MissingResourceException e) {
    result=A_OpenCms.getDefaultEncoding();
  }
  if (result.startsWith("{")) {
    if (result.indexOf(A_OpenCms.getDefaultEncoding()) >= 0) {
      result=A_OpenCms.getDefaultEncoding();
    }
 else {
      int index=result.indexOf(";");
      if (index <= 1) {
        result=A_OpenCms.getDefaultEncoding();
      }
 else {
        result=result.substring(1,index);
      }
    }
  }
  m_allEncodings.put(m_locale,result);
  return result;
}
