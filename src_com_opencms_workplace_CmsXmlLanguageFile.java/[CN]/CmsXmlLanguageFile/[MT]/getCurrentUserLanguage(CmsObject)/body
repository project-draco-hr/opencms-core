{
  if (m_languagePath == null) {
    CmsXmlWpConfigFile configFile=new CmsXmlWpConfigFile(cms);
    m_languagePath=configFile.getLanguagePath();
  }
  String currentLanguage=null;
  Hashtable startSettings=null;
  startSettings=(Hashtable)cms.getRequestContext().currentUser().getAdditionalInfo(C_ADDITIONAL_INFO_STARTSETTINGS);
  if (startSettings != null) {
    currentLanguage=(String)startSettings.get(C_START_LANGUAGE);
  }
  if (currentLanguage == null) {
    Vector langs=cms.getRequestContext().getAcceptedLanguages();
    int numlangs=langs.size();
    for (int i=0; i < numlangs; i++) {
      String loop=(String)langs.elementAt(i);
      boolean supported;
      if ("en".equalsIgnoreCase(loop) || "uk".equalsIgnoreCase(loop)) {
        supported=languageSupported(cms,"en") || languageSupported(cms,"uk");
        currentLanguage="en";
      }
 else {
        supported=languageSupported(cms,(String)langs.elementAt(i));
      }
      if (supported) {
        currentLanguage=(String)langs.elementAt(i);
        break;
      }
    }
  }
  if (currentLanguage == null) {
    currentLanguage=C_DEFAULT_LANGUAGE;
  }
  return currentLanguage;
}
