{
  m_cms=cms;
  m_locale=locale;
  m_messages=new CmsMessages(C_BUNDLE_NAME,m_locale);
  if (m_allEncodings == null) {
synchronized (this) {
      m_allEncodings=new HashMap();
    }
  }
  if (m_allModuleMessages == null) {
synchronized (this) {
      m_allModuleMessages=new HashMap();
    }
  }
  Object obj=m_allModuleMessages.get(m_locale);
  if (obj == null) {
synchronized (this) {
      m_moduleMessages=collectModuleMessages(m_cms,m_locale);
      m_allModuleMessages.put(m_locale,m_moduleMessages);
    }
  }
 else {
    m_moduleMessages=(Set)obj;
  }
  Boolean flag=(Boolean)A_OpenCms.getRuntimeProperty("compatibility.support.oldlocales");
  m_supportOldLocale=(flag != null) ? flag.booleanValue() : false;
}
