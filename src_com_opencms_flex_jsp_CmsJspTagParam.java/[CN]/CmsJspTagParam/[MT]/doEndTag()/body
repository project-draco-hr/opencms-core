{
  Tag t=findAncestorWithClass(this,I_CmsJspTagParamParent.class);
  if (t == null)   throw new JspTagException("Parameter Tag <param> without parent found!");
  if (name == null || name.equals(""))   return EVAL_PAGE;
  I_CmsJspTagParamParent parent=(I_CmsJspTagParamParent)t;
  String value=this.value;
  if (value == null) {
    if (bodyContent == null || bodyContent.getString() == null)     value="";
 else     value=bodyContent.getString().trim();
  }
  if (encode) {
    parent.addParameter(Encoder.encode(name,A_OpenCms.getDefaultEncoding(),true),Encoder.encode(value,A_OpenCms.getDefaultEncoding(),true));
  }
 else   parent.addParameter(name,value);
  return EVAL_PAGE;
}
