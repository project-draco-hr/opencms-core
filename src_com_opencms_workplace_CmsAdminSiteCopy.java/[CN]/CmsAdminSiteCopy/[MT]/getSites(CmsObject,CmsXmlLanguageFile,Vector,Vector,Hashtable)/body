{
  CmsRequestContext reqCont=cms.getRequestContext();
  Vector allSites=cms.getAllSites();
  String sitechosen=(String)parameters.get("site");
  int currentSite=(sitechosen == null) ? cms.getSite(cms.onlineProject().getId()).getId() : Integer.parseInt(sitechosen);
  int currentSiteNum=0;
  for (int i=0; i < allSites.size(); i++) {
    CmsSite site=(CmsSite)allSites.elementAt(i);
    values.addElement("" + site.getId());
    names.addElement(site.getName());
    if (currentSite == site.getId())     currentSiteNum=i;
  }
  return new Integer(currentSiteNum);
}
