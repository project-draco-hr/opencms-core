{
  target=CmsLinkManager.getAbsoluteUri(target,CmsResource.getParentFolder(source));
  if (target.equals(source) || (isMultiOperation() && target.startsWith(source))) {
    throw new CmsVfsException(Messages.get().container(Messages.ERR_MOVE_ONTO_ITSELF_1,target));
  }
  try {
    CmsResource res=getCms().readResource(target,CmsResourceFilter.ALL);
    if (res.isFolder()) {
      if (!target.endsWith("/")) {
        target+="/";
      }
      target=target + CmsResource.getName(source);
      if (target.endsWith("/")) {
        target=target.substring(0,target.length() - 1);
      }
    }
  }
 catch (  CmsVfsResourceNotFoundException e) {
    if (LOG.isInfoEnabled()) {
      LOG.info(e.getLocalizedMessage());
    }
  }
  setParamTarget(target);
  setParamTarget(target);
  if (getCms().existsResource(target,CmsResourceFilter.ALL)) {
    if (overwrite) {
      checkLock(target);
      getCms().deleteResource(target,CmsResource.DELETE_PRESERVE_SIBLINGS);
    }
 else {
      throw new CmsVfsResourceAlreadyExistsException(Messages.get().container(Messages.ERR_MOVE_FAILED_TARGET_EXISTS_2,source,getJsp().getRequestContext().removeSiteRoot(target)));
    }
  }
  checkLock(sitePrefix + source);
  getCms().moveResource(sitePrefix + source,target);
}
