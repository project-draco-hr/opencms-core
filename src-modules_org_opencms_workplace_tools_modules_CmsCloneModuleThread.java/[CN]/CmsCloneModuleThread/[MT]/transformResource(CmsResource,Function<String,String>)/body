{
  CmsFile file=getCms().readFile(resource);
  String encoding=CmsLocaleManager.getResourceEncoding(getCms(),file);
  String content=new String(file.getContents(),encoding);
  content=transformation.apply(content);
  file.setContents(content.getBytes(encoding));
  lockResource(getCms(),file);
  getCms().writeFile(file);
}
