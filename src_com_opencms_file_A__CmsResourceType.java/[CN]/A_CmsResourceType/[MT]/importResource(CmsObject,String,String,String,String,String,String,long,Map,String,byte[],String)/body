{
  CmsResource importedResource=null;
  destination=importPath + destination;
  boolean changed=true;
  int resourceType=cms.getResourceType(type).getResourceType();
  int launcherType=cms.getResourceType(type).getLauncherType();
  if ((launcherStartClass == null) || ("".equals(launcherStartClass))) {
    launcherStartClass=cms.getResourceType(type).getLauncherClass();
  }
  try {
    importedResource=cms.doImportResource(destination,resourceType,properties,launcherType,launcherStartClass,cms.getRequestContext().currentUser().getName(),cms.getRequestContext().currentGroup().getName(),0,lastmodified,content);
    if (importedResource != null) {
      changed=false;
    }
  }
 catch (  CmsException e) {
  }
  if (changed) {
    lockResource(cms,destination,true);
    cms.doWriteResource(destination,properties,null,null,-1,resourceType,content);
    importedResource=cms.readFileHeader(destination);
  }
  return importedResource;
}
