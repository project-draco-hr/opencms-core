{
  CmsResource importedResource=null;
  destination=importPath + destination;
  boolean changed=true;
  int resourceType=cms.getResourceType(type).getResourceType();
  int launcherType=cms.getResourceType(type).getLauncherType();
  if ((launcherStartClass == null) || ("".equals(launcherStartClass))) {
    launcherStartClass=cms.getResourceType(type).getLauncherClass();
  }
  CmsUser resowner=null;
  CmsGroup resgroup=null;
  int resaccess=0;
  try {
    resowner=cms.readUser(user);
  }
 catch (  CmsException e) {
    resowner=cms.getRequestContext().currentUser();
    if (I_CmsLogChannels.C_LOGGING && A_OpenCms.isLogging(I_CmsLogChannels.C_OPENCMS_CRITICAL)) {
      A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_CRITICAL,"[" + this.getClass().getName() + ".importResource/1] user "+ user+ " not found, using "+ resowner.getName()+ " instead");
    }
  }
  try {
    resgroup=cms.readGroup(group);
  }
 catch (  CmsException e) {
    resgroup=cms.getRequestContext().currentGroup();
    if (I_CmsLogChannels.C_LOGGING && A_OpenCms.isLogging(I_CmsLogChannels.C_OPENCMS_CRITICAL)) {
      A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_CRITICAL,"[" + this.getClass().getName() + ".importResource/2] group "+ group+ " not found, using "+ resgroup.getName()+ " instead");
    }
  }
  try {
    resaccess=Integer.parseInt(access);
  }
 catch (  Exception e) {
  }
  try {
    importedResource=cms.doImportResource(destination,resourceType,properties,launcherType,launcherStartClass,resowner.getName(),resgroup.getName(),resaccess,lastmodified,content);
    if (importedResource != null) {
      changed=false;
    }
  }
 catch (  CmsException e) {
  }
  if (changed) {
    lockResource(cms,destination,true);
    cms.doWriteResource(destination,properties,resowner.getName(),resgroup.getName(),resaccess,resourceType,content);
    importedResource=cms.readFileHeader(destination);
  }
  return importedResource;
}
