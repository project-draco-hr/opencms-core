{
  CmsResource importedResource=null;
  String path=importPath + destination.substring(0,destination.lastIndexOf("/") + 1);
  String name=destination.substring((destination.lastIndexOf("/") + 1),destination.length());
  boolean changed=true;
  int resourceType=cms.getResourceType(type).getResourceType();
  int launcherType=cms.getResourceType(type).getLauncherType();
  if ((launcherStartClass == null) || ("".equals(launcherStartClass))) {
    launcherStartClass=cms.getResourceType(type).getLauncherClass();
  }
  CmsUser resowner=null;
  CmsGroup resgroup=null;
  try {
    resowner=cms.readUser(user);
  }
 catch (  CmsException e) {
    resowner=cms.getRequestContext().currentUser();
  }
  try {
    resgroup=cms.readGroup(group);
  }
 catch (  CmsException e) {
    resgroup=cms.getRequestContext().currentGroup();
  }
  try {
    importedResource=cms.doCreateResource(path,name,resourceType,properties,launcherType,launcherStartClass,resowner.getName(),resgroup.getName(),Integer.parseInt(access),content);
    if (importedResource != null) {
      changed=false;
    }
  }
 catch (  CmsException e) {
  }
  if (changed) {
    lockResource(cms,path + name,true);
    cms.doWriteResource(path + name,properties,resowner.getName(),resgroup.getName(),Integer.parseInt(access),resourceType,content);
    importedResource=cms.readFileHeader(path + name);
  }
  return importedResource;
}
