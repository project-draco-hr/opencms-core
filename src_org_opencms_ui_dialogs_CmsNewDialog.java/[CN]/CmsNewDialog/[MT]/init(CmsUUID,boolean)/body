{
  m_currentViewId=viewId;
  if (!viewId.equals(m_viewSelector.getValue())) {
    m_viewSelector.setValue(viewId);
  }
  m_typeContainer.removeAllComponents();
  CmsAddDialogTypeHelper typeHelper=getTypeHelper();
  final CmsObject cms=A_CmsUI.getCmsObject();
  List<CmsResourceTypeBean> typeBeans=typeHelper.getResourceTypes(cms,m_folderResource.getRootPath(),cms.getRequestContext().removeSiteRoot(m_folderResource.getRootPath()),viewId,null);
  for (  CmsResourceTypeBean type : typeBeans) {
    final String typeName=type.getType();
    String title=typeName;
    String subtitle=getSubtitle(type,useDefault);
    CmsExplorerTypeSettings explorerType=OpenCms.getWorkplaceManager().getExplorerTypeSetting(typeName);
    String iconUri=explorerType.getBigIconIfAvailable();
    title=CmsVaadinUtils.getMessageText(explorerType.getKey());
    CmsResourceInfo info=new CmsResourceInfo(title,subtitle,CmsWorkplace.getResourceUri("filetypes/" + iconUri));
    Label label=new Label();
    label.setContentMode(ContentMode.HTML);
    label.setValue(FontAwesome.PLUS.getHtml());
    m_typeContainer.addComponent(info);
    info.getButtonLabel().setContentMode(ContentMode.HTML);
    info.getButtonLabel().setValue(FontAwesome.PLUS.getHtml());
    info.getButtonLabel().addStyleName(OpenCmsTheme.RESINFO_HIDDEN_ICON);
    final CmsResourceTypeBean typeFinal=type;
    info.addClickListener(new MouseEvents.ClickListener(){
      private static final long serialVersionUID=1L;
      public void click(      com.vaadin.event.MouseEvents.ClickEvent event){
        handleSelection(typeFinal);
      }
    }
);
  }
}
