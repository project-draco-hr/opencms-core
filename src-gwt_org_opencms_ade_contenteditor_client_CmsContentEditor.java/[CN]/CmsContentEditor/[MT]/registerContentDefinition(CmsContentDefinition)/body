{
  getWidgetService().addConfigurations(definition.getConfigurations());
  I_Type baseType=definition.getTypes().get(definition.getEntityTypeName());
  m_vie.registerTypes(baseType,definition.getTypes());
  for (  I_Entity entity : definition.getEntities().values()) {
    if (m_registeredEntities.contains(entity.getId())) {
      Entity previousValue=(Entity)m_vie.getEntity(entity.getId());
      m_vie.changeEntityContentValues(previousValue,entity);
    }
 else {
      m_vie.registerEntity(entity);
      m_registeredEntities.add(entity.getId());
    }
  }
  for (  Map.Entry<String,CmsComplexWidgetData> entry : definition.getComplexWidgetData().entrySet()) {
    String attrName=entry.getKey();
    CmsComplexWidgetData widgetData=entry.getValue();
    getWidgetService().registerComplexWidgetAttribute(attrName,widgetData.getRendererName(),widgetData.getConfiguration());
  }
}
