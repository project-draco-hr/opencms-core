{
  List<CmsRelation> relations;
  if (!resource.getState().isDeleted()) {
    relations=m_driverManager.getRelationsForResource(dbc,resource,CmsRelationFilter.TARGETS);
  }
 else {
    CmsProject currentProject=dbc.currentProject();
    dbc.getRequestContext().setCurrentProject(project);
    try {
      relations=m_driverManager.getRelationsForResource(dbc,resource,CmsRelationFilter.SOURCES);
    }
  finally {
      dbc.getRequestContext().setCurrentProject(currentProject);
    }
  }
  return relations;
}
