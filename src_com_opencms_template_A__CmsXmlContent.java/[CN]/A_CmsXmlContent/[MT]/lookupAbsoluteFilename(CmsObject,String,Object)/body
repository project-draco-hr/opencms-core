{
  Class actualClass=requestingObject.getClass();
  CmsResource retValue=null;
  String completeFilename=null;
  Vector checkedFilenames=new Vector();
  if (filename.startsWith("/")) {
    completeFilename=filename;
  }
 else {
    while (retValue == null) {
      completeFilename=C_TEMPLATEPATH + actualClass.getName() + "."+ filename+ C_TEMPLATE_EXTENSION;
      checkedFilenames.addElement(completeFilename);
      retValue=null;
      try {
        retValue=cms.readFileHeader(completeFilename);
      }
 catch (      Exception e) {
        retValue=null;
      }
      actualClass=actualClass.getSuperclass();
      if (actualClass.getName().equals(C_MINIMUM_CLASSNAME)) {
        if (retValue == null) {
          completeFilename=C_TEMPLATEPATH + filename + C_TEMPLATE_EXTENSION;
          checkedFilenames.addElement(completeFilename);
          try {
            retValue=cms.readFileHeader(completeFilename);
          }
 catch (          Exception e) {
            retValue=null;
          }
          break;
        }
      }
    }
    if (retValue == null) {
      Enumeration checkedEnum=checkedFilenames.elements();
      if ((A_OpenCms.isLogging() && I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING)) {
        while (checkedEnum.hasMoreElements()) {
          A_OpenCms.log(C_OPENCMS_CRITICAL,"[A_CmsXmlContent] checked: " + (String)checkedEnum.nextElement());
        }
      }
      throw new CmsException("Cannot find template file for request \"" + filename + "\". ",CmsException.C_NOT_FOUND);
    }
  }
  return completeFilename;
}
