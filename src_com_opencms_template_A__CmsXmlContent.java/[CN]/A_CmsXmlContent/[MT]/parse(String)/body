{
  Document parsedDoc=null;
  StringReader reader=new StringReader(content);
  try {
    parsedDoc=parser.parse(reader);
  }
 catch (  Exception e) {
    String errorMessage="Cannot parse XML file \"" + getAbsoluteFilename() + "\". "+ e;
    throwException(errorMessage,CmsException.C_XML_PARSING_ERROR);
  }
  if (parsedDoc == null) {
    String errorMessage="Unknown error. Parsed DOM document is null.";
    throwException(errorMessage,CmsException.C_XML_PARSING_ERROR);
  }
  parsedDoc.getDocumentElement().normalize();
  Node loop=parsedDoc.getDocumentElement();
  while (loop != null) {
    Node next=treeWalker(loop);
    if (loop.getNodeType() == loop.TEXT_NODE) {
      Node leftSibling=loop.getPreviousSibling();
      Node rightSibling=loop.getNextSibling();
      if (leftSibling == null || rightSibling == null || (leftSibling.getNodeType() == loop.ELEMENT_NODE && rightSibling.getNodeType() == loop.ELEMENT_NODE)) {
        if ("".equals(loop.getNodeValue().trim())) {
          loop.getParentNode().removeChild(loop);
        }
      }
    }
    loop=next;
  }
  return parsedDoc;
}
