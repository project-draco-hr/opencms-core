{
  if (!filename.startsWith("/")) {
    this.throwException("Cannot create new file. Bad name.",CmsException.C_BAD_NAME);
  }
  int pos=filename.lastIndexOf("/") + 1;
  String folder=filename.substring(0,pos);
  int type=OpenCms.getResourceManager().getResourceType(documentType).getTypeId();
  cms.createResource(folder + filename,type);
  cms.lockResource(filename);
  m_cms=cms;
  m_filename=filename;
  try {
    m_content=m_parser.createEmptyDocument(getXmlDocumentTagName());
  }
 catch (  Exception e) {
    throwException("Cannot create empty XML document for file " + m_filename + ". ",CmsException.C_XML_PARSING_ERROR);
  }
  write();
}
