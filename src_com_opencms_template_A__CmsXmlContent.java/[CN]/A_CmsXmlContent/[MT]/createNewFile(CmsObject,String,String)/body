{
  if (!filename.startsWith("/")) {
    this.throwException("Cannot create new file. Bad name.",CmsException.C_BAD_NAME);
  }
  int slashIndex=filename.lastIndexOf("/") + 1;
  String folder=filename.substring(0,slashIndex);
  cms.createResource(folder,filename,cms.getResourceTypeId(documentType),null,"".getBytes());
  cms.lockResource(filename);
  m_cms=cms;
  m_filename=filename;
  try {
    m_content=m_parser.createEmptyDocument(getXmlDocumentTagName());
  }
 catch (  Exception e) {
    throwException("Cannot create empty XML document for file " + m_filename + ". ",CmsException.C_XML_PARSING_ERROR);
  }
  write();
}
