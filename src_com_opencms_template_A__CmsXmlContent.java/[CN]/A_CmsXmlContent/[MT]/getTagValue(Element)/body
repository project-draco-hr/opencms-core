{
  StringBuffer result=new StringBuffer();
  if (n != null) {
    NodeList childNodes=n.getChildNodes();
    Node child=null;
    if (childNodes != null) {
      int numchilds=childNodes.getLength();
      for (int i=0; i < numchilds; i++) {
        child=childNodes.item(i);
        String nodeValue=child.getNodeValue();
        if (nodeValue != null) {
          if (child.getNodeType() == Element.CDATA_SECTION_NODE) {
            result.append(nodeValue);
          }
 else {
            if (child.getNodeType() == Element.TEXT_NODE) {
              nodeValue=nodeValue.trim();
              if (!"".equals(nodeValue)) {
                result.append(nodeValue);
              }
            }
          }
        }
      }
    }
  }
  return result.toString();
}
