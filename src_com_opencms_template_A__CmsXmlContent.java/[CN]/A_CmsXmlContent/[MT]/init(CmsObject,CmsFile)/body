{
  String filename=cms.getSitePath(file);
  String currentProject=cms.getRequestContext().currentProject().getName();
  Document parsedContent=null;
  m_cms=cms;
  m_filename=filename;
  parsedContent=loadCachedDocument(cms.getRequestContext().addSiteRoot(filename));
  if (parsedContent == null) {
    byte[] fileContent=file.getContents();
    if (fileContent == null || fileContent.length <= 1) {
      file=cms.readFile(filename);
      fileContent=file.getContents();
    }
    if (fileContent == null || fileContent.length <= 1) {
      try {
        parsedContent=getXmlParser().createEmptyDocument(getXmlDocumentTagName());
      }
 catch (      Exception e) {
        throwException("Could not initialize now XML document " + filename + ". "+ e,CmsException.C_XML_PARSING_ERROR);
      }
    }
 else {
      parsedContent=parse(fileContent);
    }
    m_filecache.put(currentProject + ":" + cms.getRequestContext().addSiteRoot(filename),parsedContent.cloneNode(true));
    fileContent=null;
  }
  init(cms,parsedContent,filename);
}
