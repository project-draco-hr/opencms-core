{
  CmsXmlWpTemplateFile templateDocument=(CmsXmlWpTemplateFile)this.getOwnTemplateFile(cms,templateFile,elementName,parameters,templateSelector);
  I_CmsSession session=cms.getRequestContext().getSession(true);
  String action=(String)parameters.get("action");
  CmsAdminVfsLinkManagementThread vfsLinkManagementThread=null;
  CmsXmlLanguageFile lang=templateDocument.getLanguageFile();
  String text=lang.getLanguageValue("linkmanagement.label.text1") + cms.getRequestContext().currentProject().getName() + lang.getLanguageValue("linkmanagement.label.text3");
  if ("start".equals(action)) {
    vfsLinkManagementThread=new CmsAdminVfsLinkManagementThread(cms);
    vfsLinkManagementThread.start();
    session.putValue(C_LINKCHECK_VFS_THREAD,vfsLinkManagementThread);
    templateDocument.setData("text",text);
    templateDocument.setData("data","");
    templateDocument.setData("endMethod","");
  }
 else   if ("working".equals(action)) {
    vfsLinkManagementThread=(CmsAdminVfsLinkManagementThread)session.getValue(C_LINKCHECK_VFS_THREAD);
    if (vfsLinkManagementThread.isAlive()) {
      templateDocument.setData("endMethod","");
    }
 else {
      text+="<br>" + lang.getLanguageValue("linkmanagement.label.textende");
      templateDocument.setData("autoUpdate","");
      templateDocument.setData("text",text);
      session.removeValue(CmsAdminVfsLinkManagement.C_LINKCHECK_VFS_THREAD);
    }
    templateDocument.setData("data",vfsLinkManagementThread.getReportUpdate());
  }
  return startProcessing(cms,templateDocument,elementName,parameters,templateSelector);
}
