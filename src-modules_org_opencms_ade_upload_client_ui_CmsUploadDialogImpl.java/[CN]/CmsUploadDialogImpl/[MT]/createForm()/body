{
  FormPanel form=new FormPanel();
  form.setAction(getUploadUri());
  form.setEncoding(FormPanel.ENCODING_MULTIPART);
  form.setMethod(FormPanel.METHOD_POST);
  FlowPanel inputFieldsPanel=new FlowPanel();
  int count=0;
  for (  CmsFileInput input : getInputsToUpload()) {
    String filename=input.getFiles()[0].getFileName();
    input.setName("file_" + count++);
    if (getFilesToUpload().containsKey(filename)) {
      inputFieldsPanel.add(input);
    }
  }
  for (  String filename : getFilesToUnzip(false)) {
    final Hidden filesToUnzip=new Hidden();
    filesToUnzip.setName(I_CmsUploadConstants.UPLOAD_UNZIP_FILES_FIELD_NAME);
    filesToUnzip.setValue(filename);
    inputFieldsPanel.add(filesToUnzip);
  }
  final Hidden targetFolder=new Hidden();
  targetFolder.setName(I_CmsUploadConstants.UPLOAD_TARGET_FOLDER_FIELD_NAME);
  targetFolder.setValue(getTargetFolder());
  inputFieldsPanel.add(targetFolder);
  form.setWidget(inputFieldsPanel);
  return form;
}
