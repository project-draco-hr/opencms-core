{
  tc.storeResources(cms,source);
  List properties=cms.readPropertyObjects(source,false);
  cms.createSibling(source,target,properties);
  tc.assertFilter(cms,source,OpenCmsTestResourceFilter.FILTER_EXISTING_SIBLING);
  tc.assertProject(cms,source,cms.getRequestContext().currentProject());
  tc.assertSiblingCountIncremented(cms,source,1);
  tc.assertModifiedInCurrentProject(cms,source,false);
  tc.assertLock(cms,source,CmsLockType.SHARED_EXCLUSIVE);
  tc.assertFilter(cms,source,target,OpenCmsTestResourceFilter.FILTER_EXISTING_AND_NEW_SIBLING);
  tc.assertState(cms,target,CmsResource.STATE_NEW);
  tc.assertModifiedInCurrentProject(cms,target,true);
  tc.assertLock(cms,target,CmsLockType.EXCLUSIVE);
}
