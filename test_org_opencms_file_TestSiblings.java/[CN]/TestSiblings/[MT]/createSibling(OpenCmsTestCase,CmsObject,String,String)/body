{
  tc.storeResources(cms,source);
  List properties=cms.readPropertyObjects(source,false);
  cms.createSibling(target,source,properties);
  tc.assertFilter(cms,source,OpenCmsTestResourceFilter.FILTER_EXISTING_SIBLING);
  tc.assertProject(cms,source,cms.getRequestContext().currentProject());
  tc.assertSiblingCountIncremented(cms,source);
  tc.assertHasRedFlag(cms,source,false);
  tc.assertLock(cms,source,CmsLock.C_TYPE_SHARED_EXCLUSIVE);
  tc.assertFilter(cms,source,target,OpenCmsTestResourceFilter.FILTER_EXISTING_AND_NEW_SIBLING);
  tc.assertState(cms,target,I_CmsConstants.C_STATE_NEW);
  tc.assertHasRedFlag(cms,target,true);
  tc.assertLock(cms,target,CmsLock.C_TYPE_EXCLUSIVE);
}
