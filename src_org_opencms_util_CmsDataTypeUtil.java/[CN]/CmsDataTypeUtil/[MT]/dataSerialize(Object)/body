{
  if (isParseable(data.getClass())) {
    return format(data).getBytes();
  }
  ByteArrayOutputStream bout=new ByteArrayOutputStream();
  ObjectOutputStream oout=new ObjectOutputStream(bout);
  Object obj=data;
  if (data instanceof Map) {
    Hashtable ht=new Hashtable();
    Iterator it=((Map)data).entrySet().iterator();
    while (it.hasNext()) {
      Map.Entry entry=(Entry)it.next();
      if ((entry.getKey() != null) && (entry.getValue() != null)) {
        ht.put(entry.getKey(),entry.getValue());
      }
    }
    obj=ht;
  }
  oout.writeObject(obj);
  oout.close();
  return bout.toByteArray();
}
