{
  CmsSolrField field=(CmsSolrField)sfield;
  List<String> fieldsToAdd=new ArrayList<String>(Collections.singletonList(field.getName()));
  if ((field.getCopyFields() != null) && !field.getCopyFields().isEmpty()) {
    fieldsToAdd.addAll(field.getCopyFields());
  }
  for (  String fieldName : fieldsToAdd) {
    IndexSchema schema=OpenCms.getSearchManager().getSolrServerConfiguration().getSolrSchema();
    try {
      try {
        FieldType type=schema.getFieldType(fieldName);
        if (type instanceof DateField) {
          value=DateField.formatExternal(new Date(new Long(value).longValue()));
        }
      }
 catch (      SolrException e) {
        LOG.debug(e.getMessage(),e);
        throw new RuntimeException(e);
      }
      SolrInputField exfield=m_doc.getField(fieldName);
      if (exfield == null) {
        if (schema.hasExplicitField(fieldName)) {
          m_doc.addField(fieldName,value);
        }
 else {
          m_doc.addField(fieldName,value,field.getBoost());
        }
      }
 else {
        if (schema.hasExplicitField(fieldName)) {
          m_doc.setField(fieldName,value);
        }
 else {
          m_doc.setField(fieldName,value,field.getBoost());
        }
      }
    }
 catch (    SolrException e) {
      LOG.error(e.getMessage(),e);
    }
catch (    RuntimeException e) {
    }
  }
}
