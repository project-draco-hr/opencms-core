{
  StringBuffer buffer;
  String publicId;
  String systemId;
  if (!_started) {
    publicId=_format.getDoctypePublic();
    systemId=_format.getDoctypeSystem();
    if (publicId == null && systemId == null) {
      if (_xhtml) {
        publicId=OutputFormat.DOCTYPE_XHTML_PUBLIC;
        systemId=OutputFormat.DOCTYPE_XHTML_SYSTEM;
      }
 else {
        publicId=OutputFormat.DOCTYPE_HTML_PUBLIC;
        systemId=OutputFormat.DOCTYPE_HTML_SYSTEM;
      }
    }
    if (publicId != null && (!_xhtml || systemId != null)) {
      printText("<!DOCTYPE HTML PUBLIC ");
      printDoctypeURL(publicId);
      if (systemId != null) {
        breakLine();
        printText("                      ");
        printDoctypeURL(systemId);
      }
      printText(">");
      breakLine();
    }
 else     if (systemId != null) {
      printText("<!DOCTYPE HTML SYSTEM ");
      printDoctypeURL(systemId);
      printText(">");
      breakLine();
    }
  }
  _started=true;
  printPreRoot();
}
