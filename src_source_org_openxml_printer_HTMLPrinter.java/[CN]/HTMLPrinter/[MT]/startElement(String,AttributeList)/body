{
  int i;
  boolean preserveSpace;
  ElementState state;
  String name;
  String value;
  state=getElementState();
  if (state == null) {
    if (!_started)     startDocument(tagName);
    preserveSpace=_format.getPreserveSpace();
  }
 else {
    if (state.empty)     printText(">");
    preserveSpace=state.preserveSpace;
    if (_format.getIndenting() && !state.preserveSpace && (state.empty || state.afterElement))     breakLine();
  }
  if (_xhtml)   printText('<' + tagName.toLowerCase());
 else   printText('<' + tagName);
  indent();
  for (i=0; i < attrs.getLength(); ++i) {
    printSpace();
    name=attrs.getName(i).toLowerCase();
    ;
    value=attrs.getValue(i);
    if (_xhtml) {
      if (value == null)       printText(name + "=\"\"");
 else       printText(name + "=\"" + escape(value)+ '"');
    }
 else {
      if (value == null)       printText(name);
 else       printText(name + "=\"" + escape(value)+ '"');
    }
  }
  if (HTMLdtd.isPreserveSpace(tagName))   preserveSpace=true;
  enterElementState(tagName,preserveSpace);
}
