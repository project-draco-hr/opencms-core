{
  m_finished=true;
  if (m_configuration.isAutoPublish()) {
    CmsProject project=getProject();
    CmsObject projectCms=OpenCms.initCmsObject(m_adminCms);
    projectCms.getRequestContext().setCurrentProject(project);
    List<CmsResource> projectResources=projectCms.readProjectView(project.getUuid(),CmsResource.STATE_KEEP);
    for (    CmsResource projectResource : projectResources) {
      CmsLock lock=projectCms.getLock(projectResource);
      if (!lock.isUnlocked() && !lock.isLockableBy(projectCms.getRequestContext().getCurrentUser())) {
        projectCms.changeLock(projectResource);
      }
    }
    OpenCms.getPublishManager().publishProject(projectCms,new CmsLogReport(Locale.ENGLISH,CmsFormSession.class));
  }
}
