{
  CmsResource result=null;
  CmsFormSessionSecurityUtil.checkCreateUpload(m_cms,m_configuration,fileName,content.length);
  if (m_configuration.getUploadParentFolder().isPresent()) {
    String uploadRootPath=m_configuration.getUploadParentFolder().get().getRootPath();
    String realFileName=OpenCms.getResourceManager().getNameGenerator().getUniqueFileName(m_cms,uploadRootPath,fileName);
    String sitePath=CmsStringUtil.joinPaths(m_cms.getRequestContext().removeSiteRoot(uploadRootPath),realFileName);
    int resTypeId=OpenCms.getResourceManager().getDefaultTypeForName(sitePath).getTypeId();
    result=m_cms.createResource(sitePath,resTypeId,content,null);
  }
  return result;
}
