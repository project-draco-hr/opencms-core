{
  if (m_checkFacetMap == null) {
    m_checkFacetMap=CmsCollectionsGenericWrapper.createLazyMap(new Transformer(){
      @Override public Object transform(      final Object facet){
        Map<String,I_CmsSearchStateParameters> m_checkEntries=CmsCollectionsGenericWrapper.createLazyMap(new Transformer(){
          @Override public Object transform(          final Object facetItem){
            final Map<String,String[]> parameters=new HashMap<String,String[]>(m_params);
            String facetParamKey=null;
            try {
              facetParamKey=m_result.getController().getFieldFacets().getFieldFacetController().get(facet).getConfig().getParamKey();
            }
 catch (            Exception e) {
              LOG.warn(Messages.get().getBundle().key(Messages.LOG_FACET_NOT_CONFIGURED_1,facet),e);
            }
            if ((facetParamKey != null) && parameters.containsKey(facetParamKey)) {
              String[] values=parameters.get(facet);
              List<String> valueList=Arrays.asList(values);
              if (!valueList.contains(facetItem)) {
                String[] newValues=new String[valueList.size() + 1];
                for (int i=0; i < (valueList.size() - 1); i++) {
                  newValues[i]=values[i];
                }
                newValues[valueList.size()]=(String)facetItem;
                parameters.put(facetParamKey,newValues);
              }
            }
            return new CmsSearchStateParameters(m_result,parameters);
          }
        }
);
        return m_checkEntries;
      }
    }
);
  }
  return m_checkFacetMap;
}
