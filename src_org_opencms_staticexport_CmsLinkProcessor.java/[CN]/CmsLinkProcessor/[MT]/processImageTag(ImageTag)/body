{
switch (m_mode) {
case C_REPLACE_LINKS:
    if (imageTag.getAttribute("src") != null) {
      String targetUri=imageTag.getImageURL();
      String internalUri=CmsLinkManager.getSitePath(m_cms,m_relativePath,targetUri);
      if (internalUri != null) {
        imageTag.setImageURL(replaceLink(m_linkTable.addLink(imageTag.getTagName(),internalUri,true)));
      }
 else {
        imageTag.setImageURL(replaceLink(m_linkTable.addLink(imageTag.getTagName(),targetUri,false)));
      }
    }
  break;
case C_PROCESS_LINKS:
if (imageTag.getAttribute("src") != null) {
  String imageUrl=imageTag.getImageURL();
  CmsLink link=m_linkTable.getLink(getLinkName(imageUrl));
  if (link != null) {
    imageTag.setImageURL(processLink(link));
  }
 else {
    imageTag.setImageURL(imageUrl);
  }
}
break;
default :
break;
}
}
