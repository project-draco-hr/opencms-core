{
  if (tag.getAttribute("src") != null) {
    CmsLink link;
switch (m_mode) {
case PROCESS_LINKS:
      link=m_linkTable.getLink(getLinkName(tag.getImageURL()));
    if (link != null) {
      tag.setImageURL(processLink(link));
    }
  break;
case REPLACE_LINKS:
String targetUri=tag.getImageURL();
if (CmsStringUtil.isNotEmpty(targetUri)) {
String internalUri=CmsLinkManager.getSitePath(m_cms,m_relativePath,targetUri);
if (internalUri != null) {
  link=m_linkTable.addLink(tag.getTagName(),internalUri,true);
}
 else {
  link=m_linkTable.addLink(tag.getTagName(),targetUri,false);
}
tag.setImageURL(CmsMacroResolver.formatMacro(link.getName()));
boolean hasAltAttrib=(tag.getAttribute("alt") != null);
if (!hasAltAttrib) {
  String value=null;
  if ((internalUri != null) && (m_rootCms != null)) {
    try {
      value=m_rootCms.readPropertyObject(internalUri,CmsPropertyDefinition.PROPERTY_TITLE,false).getValue();
    }
 catch (    CmsException e) {
    }
  }
  Vector attrs=tag.getAttributesEx();
  attrs.add(1,new Attribute(" "));
  attrs.add(2,new Attribute("alt",value == null ? "" : value,'"'));
}
}
break;
default :
}
}
}
