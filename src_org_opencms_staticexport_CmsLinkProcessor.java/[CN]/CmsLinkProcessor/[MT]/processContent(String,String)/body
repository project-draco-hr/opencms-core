{
  StringBuffer newContent=new StringBuffer(content.length() + 32);
  newContent.append(C_HTML_START);
  newContent.append(content);
  newContent.append(C_HTML_END);
  CmsLinkVisitor visitor=new CmsLinkVisitor(this);
  Parser parser=new Parser();
  Lexer lexer=new Lexer();
  Page page;
  try {
    InputStream stream=new ByteArrayInputStream(newContent.toString().getBytes(encoding));
    page=new Page(stream,encoding);
  }
 catch (  UnsupportedEncodingException e) {
    throw new ParserException("Invalid encoding for HTML content parsing '" + encoding + "'");
  }
  lexer.setPage(page);
  parser.setLexer(lexer);
  parser.visitAllNodesWith(visitor);
  String result=visitor.getHtml();
  return result.substring(C_HTML_START.length(),result.length() - C_HTML_END.length());
}
