{
  List userSessions=new ArrayList();
  Iterator i=allSessions.entrySet().iterator();
  while (i.hasNext()) {
    Map.Entry entry=(Map.Entry)i.next();
    CmsSessionInfo sessionInfo=(CmsSessionInfo)entry.getValue();
    if ((sessionInfo != null) && ((userId == null) || userId.equals(sessionInfo.getUserId()))) {
      userSessions.add(sessionInfo);
    }
  }
  return userSessions;
}
