{
  Element entryElement=getElement(cms,change.getSitePath());
  if (entryElement == null) {
    throw createEntryNotFoundException(cms,change.getSitePath());
  }
  if (change.getTitle() != null) {
    Element titleElement=entryElement.element(XmlNode.Title.name());
    if (!titleElement.getText().equals(change.getTitle())) {
      titleElement.clearContent();
      titleElement.addCDATA(change.getTitle());
    }
  }
  if (change.getVfsPath() != null) {
    Element vfsElement=entryElement.element(XmlNode.VfsFile.name());
    fillResource(cms,vfsElement,cms.readResource(change.getVfsPath()));
  }
  if (change.getProperties() != null) {
    Map<String,CmsXmlContentProperty> propertiesConf=OpenCms.getSitemapManager().getElementPropertyConfiguration(cms,m_file,true);
    CmsXmlContentPropertyHelper.saveSimpleProperties(cms,entryElement,change.getProperties(),getFile(),propertiesConf);
  }
  return cms.getRequestContext().addSiteRoot(change.getSitePath());
}
