{
  List<CmsInternalSitemapEntry> entries=new ArrayList<CmsInternalSitemapEntry>();
  for (Iterator<Element> itCnts=CmsXmlGenericWrapper.elementIterator(rootElem,XmlNode.SiteEntry.name()); itCnts.hasNext(); ) {
    Element entry=itCnts.next();
    int entryIndex=CmsXmlUtils.getXpathIndexInt(entry.getUniquePath(rootElem));
    String entryPath=CmsXmlUtils.createXpathElement(entry.getName(),entryIndex);
    if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(rootPath)) {
      entryPath=CmsXmlUtils.concatXpath(rootPath,entryPath);
    }
    I_CmsXmlSchemaType entrySchemaType=rootDef.getSchemaType(entry.getName());
    I_CmsXmlContentValue entryValue=entrySchemaType.createValue(this,entry,locale);
    addBookmark(entryPath,locale,true,entryValue);
    CmsXmlContentDefinition entryDef=((CmsXmlNestedContentDefinition)entrySchemaType).getNestedContentDefinition();
    Element id=entry.element(XmlNode.Id.name());
    if (id == null) {
      id=entry.addElement(XmlNode.Id.name());
    }
    if (CmsStringUtil.isEmptyOrWhitespaceOnly(id.getTextTrim())) {
      id.addCDATA(new CmsUUID().toString());
    }
    if (!CmsUUID.isValidUUID(id.getTextTrim())) {
      id.clearContent();
      id.addCDATA(new CmsUUID().toString());
    }
    addBookmarkForElement(id,locale,entry,entryPath,entryDef);
    CmsUUID entryId=new CmsUUID(id.getTextTrim());
    Element name=entry.element(XmlNode.Name.name());
    addBookmarkForElement(name,locale,entry,entryPath,entryDef);
    String entryName=name.getTextTrim();
    Element title=entry.element(XmlNode.Title.name());
    addBookmarkForElement(title,locale,entry,entryPath,entryDef);
    String titleValue=title.getTextTrim();
    Element uri=entry.element(XmlNode.VfsFile.name());
    addBookmarkForElement(uri,locale,entry,entryPath,entryDef);
    Element linkUri=uri.element(CmsXmlPage.NODE_LINK);
    CmsUUID uriId=null;
    if (linkUri == null) {
    }
 else {
      uriId=new CmsLink(linkUri).getStructureId();
    }
    Map<String,CmsSimplePropertyValue> ownProps=CmsXmlContentPropertyHelper.readSimpleProperties(this,locale,entry,entryPath,entryDef);
    String path=parentUri + entryName;
    if (parentUri.equals("/")) {
      path=entryName;
    }
    if (!path.endsWith("/")) {
      path+="/";
    }
    List<CmsInternalSitemapEntry> subEntries=readSubEntries(entry,entryPath,entryDef,locale,path);
    entries.add(new CmsInternalSitemapEntry(entryId,path,uriId,entryName,titleValue,false,ownProps,subEntries,null));
  }
  return entries;
}
