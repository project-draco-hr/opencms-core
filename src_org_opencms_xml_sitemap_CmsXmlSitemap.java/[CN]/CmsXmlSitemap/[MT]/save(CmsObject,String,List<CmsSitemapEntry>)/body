{
  CmsFile file=getFile();
  cms.lockResourceTemporary(cms.getSitePath(file));
  Locale locale=cms.getRequestContext().getLocale();
  if (hasLocale(locale)) {
    removeLocale(locale);
  }
  addLocale(cms,locale);
  Map<String,CmsXmlContentProperty> propertiesConf=CmsXmlContentDefinition.getContentHandlerForResource(cms,getFile()).getProperties();
  Element parent=getLocaleNode(locale);
  parent.clearContent();
  Element entryPointEntry=parent.addElement(XmlNode.EntryPoint.name());
  CmsRelationType type=CmsRelationType.ENTRY_POINT;
  CmsSitemapEntry sitemapEntry=OpenCms.getSitemapManager().getEntryForUri(cms,entryPoint);
  CmsXmlVfsFileValue.fillSitemapEntry(entryPointEntry,sitemapEntry,type);
  for (  CmsSitemapEntry entry : entries) {
    saveEntry(cms,parent,entry,propertiesConf);
  }
  initDocument(m_document,m_encoding,m_contentDefinition);
  file.setContents(marshal());
  cms.writeFile(file);
}
