{
  CmsXmlContentErrorHandler errorHandler=content.validate(cms);
  Map<String,Map<String,String>> errorsByEntity=new HashMap<String,Map<String,String>>();
  if (errorHandler.hasErrors()) {
    for (    Entry<Locale,Map<String,String>> localeEntry : errorHandler.getErrors().entrySet()) {
      Map<String,String> errors=new HashMap<String,String>();
      for (      Entry<String,String> error : localeEntry.getValue().entrySet()) {
        I_CmsXmlContentValue value=content.getValue(error.getKey(),localeEntry.getKey());
        String typeUri=getTypeUri(value.getContentDefinition());
        String attributeName=getAttributeName(value.getName(),typeUri);
        errors.put(attributeName + "[" + value.getXmlIndex()+ "]",error.getValue());
      }
      errorsByEntity.put(CmsContentDefinition.uuidToEntityId(structureId,localeEntry.getKey().toString()),errors);
    }
  }
  Map<String,Map<String,String>> warningsByEntity=new HashMap<String,Map<String,String>>();
  if (errorHandler.hasWarnings()) {
    for (    Entry<Locale,Map<String,String>> localeEntry : errorHandler.getWarnings().entrySet()) {
      Map<String,String> warnings=new HashMap<String,String>();
      for (      Entry<String,String> warning : localeEntry.getValue().entrySet()) {
        I_CmsXmlContentValue value=content.getValue(warning.getKey(),localeEntry.getKey());
        String typeUri=getTypeUri(value.getContentDefinition());
        String attributeName=getAttributeName(value.getName(),typeUri);
        warnings.put(attributeName + "[" + value.getXmlIndex()+ "]",warning.getValue());
      }
      warningsByEntity.put(CmsContentDefinition.uuidToEntityId(structureId,localeEntry.getKey().toString()),warnings);
    }
  }
  return new ValidationResult(errorsByEntity,warningsByEntity);
}
