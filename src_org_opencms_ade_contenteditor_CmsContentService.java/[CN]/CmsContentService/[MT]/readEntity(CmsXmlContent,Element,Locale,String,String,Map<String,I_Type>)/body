{
  Entity result=new Entity(entityId,typeName);
  @SuppressWarnings("unchecked") List<Element> elements=element.elements();
  I_Type type=registeredTypes.get(typeName);
  int counter=0;
  CmsObject cms=getCmsObject();
  for (  Element child : elements) {
    String attributeName=getAttributeName(child.getName(),typeName);
    String subTypeName=type.getAttributeTypeName(attributeName);
    if (registeredTypes.get(subTypeName).isSimpleType()) {
      String path=removeFirstTwoPathLevel(child.getPath());
      I_CmsXmlContentValue value=content.getValue(path,locale);
      result.addAttributeValue(attributeName,value.getStringValue(cms));
    }
 else {
      Entity subEntity=readEntity(content,child,locale,entityId + "/" + attributeName+ "["+ counter+ "]",subTypeName,registeredTypes);
      result.addAttributeValue(attributeName,subEntity);
    }
  }
  return result;
}
