{
  Entity result=new Entity(entityId + parentPath,typeName);
  @SuppressWarnings("unchecked") List<Element> elements=element.elements();
  I_Type type=registeredTypes.get(typeName);
  int counter=1;
  CmsObject cms=getCmsObject();
  String previousName=null;
  for (  Element child : elements) {
    String attributeName=getAttributeName(child.getName(),typeName);
    if (!attributeName.equals(previousName)) {
      counter=1;
      previousName=attributeName;
    }
    String subTypeName=type.getAttributeTypeName(attributeName);
    String path=parentPath + "/" + child.getName()+ "["+ counter+ "]";
    if (registeredTypes.get(subTypeName).isSimpleType()) {
      I_CmsXmlContentValue value=content.getValue(path,locale);
      result.addAttributeValue(attributeName,value.getStringValue(cms));
    }
 else {
      Entity subEntity=readEntity(content,child,locale,entityId,path,subTypeName,registeredTypes);
      result.addAttributeValue(attributeName,subEntity);
    }
    counter++;
  }
  return result;
}
