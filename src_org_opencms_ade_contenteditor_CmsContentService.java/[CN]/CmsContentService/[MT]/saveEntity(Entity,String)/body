{
  String entityId=entity.getId();
  CmsUUID structureId=entityIdToUuid(entityId);
  CmsObject cms=getCmsObject();
  try {
    Locale contentLocale=CmsLocaleManager.getLocale(locale);
    CmsResource resource=cms.readResource(structureId);
    ensureLock(resource);
    CmsFile file=cms.readFile(resource);
    CmsXmlContent content=CmsXmlContentFactory.unmarshal(cms,file);
    if (content.hasLocale(contentLocale)) {
      content.removeLocale(contentLocale);
    }
    content.addLocale(cms,contentLocale);
    addEntityAttributes(cms,content,"",entity,contentLocale);
    writeContent(cms,file,content,getFileEncoding(cms,file));
    tryUnlock(resource);
  }
 catch (  Exception e) {
    error(e);
  }
}
