{
  String paramResource=getRequest().getParameter(CmsDialog.PARAM_RESOURCE);
  String paramNewLink=getRequest().getParameter(CmsXmlContentEditor.PARAM_NEWLINK);
  String paramLocale=getRequest().getParameter(CmsEditor.PARAM_ELEMENTLANGUAGE);
  Locale locale;
  if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(paramResource)) {
    try {
      CmsResource resource=getCmsObject().readResource(paramResource,CmsResourceFilter.IGNORE_EXPIRATION);
      if (CmsResourceTypeXmlContent.isXmlContent(resource)) {
        if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(paramLocale)) {
          locale=CmsLocaleManager.getLocale(paramLocale);
        }
 else {
          locale=OpenCms.getLocaleManager().getDefaultLocale(getCmsObject(),paramResource);
        }
        if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(paramNewLink)) {
          return readContentDefnitionForNew(paramNewLink,resource,null,locale);
        }
 else         if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(paramResource)) {
          return readContentDefinition(resource,null,locale,false);
        }
      }
    }
 catch (    Throwable e) {
      error(e);
    }
  }
  return null;
}
