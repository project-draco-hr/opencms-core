{
  Entity result=new Entity(entityId,typeName);
  List<I_CmsXmlContentValue> elements=content.getSubValues(path,locale);
  Type type=registeredTypes.get(typeName);
  int counter=0;
  for (  I_CmsXmlContentValue element : elements) {
    String attributeName=getAttributeName(element.getName(),typeName);
    if (element.isSimpleType()) {
      result.addAttributeValue(attributeName,element.getStringValue(getCmsObject()));
    }
 else {
      String subTypeName=type.getAttributeTypeName(attributeName);
      if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(subTypeName)) {
        Entity subEntity=readEntity(content,locale,path + element.getName() + "/",entityId + "/" + attributeName+ counter,subTypeName,registeredTypes);
        result.addAttributeValue(attributeName,subEntity);
      }
    }
  }
  return result;
}
