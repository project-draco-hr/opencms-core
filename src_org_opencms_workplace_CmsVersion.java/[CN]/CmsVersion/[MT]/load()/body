{
  if (m_resourceName == null || m_version == -1) {
    return;
  }
 else {
    CmsBackupResource res=null;
    try {
      res=m_cms.readBackupFile(m_resourceName,m_version);
    }
 catch (    CmsException e) {
      return;
    }
    byte[] result=res.getContents();
    result=CmsEncoder.changeEncoding(result,OpenCms.getSystemInfo().getDefaultEncoding(),m_cms.getRequestContext().getEncoding());
    m_response.setContentType(OpenCms.getResourceManager().getMimeType(res.getName(),m_cms.getRequestContext().getEncoding()) + ":cms");
    m_response.setContentLength(result.length);
    try {
      m_response.getOutputStream().write(result);
      m_response.getOutputStream().flush();
    }
 catch (    IOException e) {
      return;
    }
  }
}
