{
  CmsUser newUser=m_securityManager.loginUser(m_context,username,password,remoteAddress,type);
  CmsProject newProject;
  try {
    newProject=m_securityManager.readProject(I_CmsConstants.C_PROJECT_ONLINE_ID);
  }
 catch (  CmsException e) {
    throw new CmsSecurityException(Messages.get().container(Messages.ERR_SECURITY_LOGIN_FAILED_1,username),e);
  }
  m_context.switchUser(newUser,newProject);
  init(m_securityManager,m_context);
  this.fireEvent(I_CmsEventListener.EVENT_LOGIN_USER,newUser);
  return newUser.getName();
}
