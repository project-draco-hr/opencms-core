{
  List elementList=new ArrayList();
  String currentTemplate=cms.readPropertyObject(resource,I_CmsConstants.C_PROPERTY_TEMPLATE,true).getValue();
  if (currentTemplate == null || currentTemplate.length() == 0) {
    return elementList;
  }
  String elements=null;
  try {
    elements=cms.readPropertyObject(currentTemplate,I_CmsConstants.C_PROPERTY_TEMPLATE_ELEMENTS,false).getValue(null);
  }
 catch (  CmsException e) {
    if (OpenCms.getLog(CmsDialogElements.class.getName()).isWarnEnabled()) {
      OpenCms.getLog(CmsDialogElements.class.getName()).warn("Error reading property '" + I_CmsConstants.C_PROPERTY_TEMPLATE_ELEMENTS + "' on resource "+ currentTemplate,e);
    }
  }
  if (elements == null) {
    return Collections.EMPTY_LIST;
  }
  StringTokenizer T=new StringTokenizer(elements,",");
  while (T.hasMoreTokens()) {
    String currentElement=T.nextToken();
    String niceName="";
    String mandatory="0";
    int sepIndex=currentElement.indexOf("|");
    if (sepIndex != -1) {
      niceName=currentElement.substring(sepIndex + 1);
      currentElement=currentElement.substring(0,sepIndex);
    }
    if (currentElement.endsWith("*")) {
      mandatory="1";
      currentElement=currentElement.substring(0,currentElement.length() - 1);
    }
    if ("".equals(niceName)) {
      niceName=currentElement;
    }
    elementList.add(new String[]{currentElement,niceName,mandatory});
  }
  return elementList;
}
