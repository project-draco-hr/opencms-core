{
  String temporaryFilename=file.getPath() + C_TEMP_PREFIX + file.getName();
  A_CmsResource tempFile=null;
  String extendedTempFile=null;
  boolean ok=true;
  try {
    cms.copyFile(file.getAbsolutePath(),temporaryFilename);
  }
 catch (  CmsException e) {
    ok=false;
  }
  extendedTempFile=temporaryFilename;
  int loop=0;
  while (!ok) {
    ok=true;
    extendedTempFile=temporaryFilename + loop;
    try {
      cms.copyFile(file.getAbsolutePath(),extendedTempFile);
    }
 catch (    Exception e) {
      loop++;
      ok=false;
    }
  }
  temporaryFilename=extendedTempFile;
  return temporaryFilename;
}
