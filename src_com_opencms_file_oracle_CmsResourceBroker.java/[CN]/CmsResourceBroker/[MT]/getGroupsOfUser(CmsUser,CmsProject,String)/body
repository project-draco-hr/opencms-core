{
  Vector allGroups;
  allGroups=(Vector)m_usergroupsCache.get(C_USER + username);
  if ((allGroups == null) || (allGroups.size() == 0)) {
    CmsGroup subGroup;
    CmsGroup group;
    Vector groups=m_dbAccess.getGroupsOfUser(username);
    allGroups=groups;
    Enumeration enu=groups.elements();
    while (enu.hasMoreElements()) {
      group=(CmsGroup)enu.nextElement();
      subGroup=getParent(currentUser,currentProject,group.getName());
      while (subGroup != null) {
        if (!allGroups.contains(subGroup)) {
          allGroups.addElement(subGroup);
        }
        subGroup=getParent(currentUser,currentProject,subGroup.getName());
      }
    }
    m_usergroupsCache.put(C_USER + username,allGroups);
  }
  return allGroups;
}
