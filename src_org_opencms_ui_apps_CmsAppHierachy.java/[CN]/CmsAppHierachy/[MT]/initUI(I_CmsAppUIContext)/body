{
  CmsObject cms=A_CmsUI.getCmsObject();
  Locale locale=OpenCms.getWorkplaceManager().getWorkplaceLocale(cms);
  List<I_CmsWorkplaceAppConfiguration> visibleApps=Lists.newArrayList();
  for (  I_CmsWorkplaceAppConfiguration appConfig : OpenCms.getWorkplaceAppManager().getWorkplaceApps()) {
    CmsAppVisibilityStatus status=appConfig.getVisibility(cms);
    if (status.isVisible()) {
      visibleApps.add(appConfig);
    }
  }
  CmsAppHierarchyBuilder hierarchyBuilder=new CmsAppHierarchyBuilder();
  for (  I_CmsWorkplaceAppConfiguration app : visibleApps) {
    hierarchyBuilder.addAppConfiguration(app);
  }
  for (  CmsAppCategory category : OpenCms.getWorkplaceAppManager().getCategories()) {
    hierarchyBuilder.addCategory(category);
  }
  CmsAppHierarchyPanel hierarchyPanel=new CmsAppHierarchyPanel(new CmsDefaultAppButtonProvider());
  hierarchyPanel.fill(hierarchyBuilder.buildHierarchy(),locale);
  context.setAppContent(hierarchyPanel);
  context.showInfoArea(false);
  Button publishButton=CmsToolBar.createButton(FontOpenCms.PUBLISH);
  publishButton.addClickListener(new ClickListener(){
    /** 
 * Serial version id. 
 */
    private static final long serialVersionUID=1L;
    public void buttonClick(    ClickEvent event){
      onClickPublish();
    }
  }
);
  context.addToolbarButton(publishButton);
}
