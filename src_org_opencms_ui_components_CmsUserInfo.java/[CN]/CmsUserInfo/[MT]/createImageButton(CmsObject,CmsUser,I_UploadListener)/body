{
  CmsUploadButton button=new CmsUploadButton(new ExternalResource(OpenCms.getWorkplaceAppManager().getUserIconHelper().getBigIconPath(cms,user)),CmsUserIconHelper.USER_IMAGE_FOLDER + CmsUserIconHelper.TEMP_FOLDER);
  button.getState().setUploadType(UploadType.singlefile);
  button.getState().setTargetFileNamePrefix(user.getId().toString());
  button.getState().setDialogTitle(CmsVaadinUtils.getMessageText(Messages.GUI_USER_INFO_UPLOAD_IMAGE_DIALOG_TITLE_0));
  button.addStyleName("o-user-image");
  button.setDescription(CmsVaadinUtils.getMessageText(Messages.GUI_USER_INFO_UPLOAD_IMAGE_0));
  button.addUploadListener(uploadListener);
  return button;
}
