{
  if (C_DEBUG && A_OpenCms.isLogging()) {
    A_OpenCms.log(C_OPENCMS_DEBUG,this.getClassName() + "getting content of element " + ((elementName == null) ? "<root>" : elementName));
    A_OpenCms.log(C_OPENCMS_DEBUG,this.getClassName() + "template file is: " + templateFile);
    A_OpenCms.log(C_OPENCMS_DEBUG,this.getClassName() + "selected template section is: " + ((templateSelector == null) ? "<default>" : templateSelector));
  }
  CmsXmlTemplateFile xmlTemplateDocument=getOwnTemplateFile(cms,templateFile,elementName,parameters,templateSelector);
  if (C_ROLE == null) {
    initConstants((CmsXmlWpTemplateFile)xmlTemplateDocument);
  }
  if (parameters.get("ok") != null) {
    try {
      CmsTaskAction.create(cms,(String)parameters.get("USER"),(String)parameters.get("TEAM"),(String)parameters.get("TASKNAME"),(String)parameters.get("DESCRIPTION"),(String)parameters.get("DATE"),(String)parameters.get("PRIO"),(String)parameters.get("MSG_ACCEPTATION"),(String)parameters.get("MSG_ALL"),(String)parameters.get("MSG_COMPLETION"),(String)parameters.get("MSG_DELIVERY"));
      templateSelector="done";
    }
 catch (    Exception exc) {
      A_OpenCms.log(C_MODULE_INFO,"Could not create task. " + exc.getMessage());
      templateSelector="error";
    }
  }
  return startProcessing(cms,xmlTemplateDocument,elementName,parameters,templateSelector);
}
