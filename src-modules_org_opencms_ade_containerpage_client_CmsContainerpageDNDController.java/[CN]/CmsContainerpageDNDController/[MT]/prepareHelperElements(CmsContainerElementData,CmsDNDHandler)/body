{
  if (!handler.isDragging()) {
    return;
  }
  if (elementData == null) {
    CmsDebugLog.getInstance().printLine("elementData == null!");
    handler.cancel();
    return;
  }
  if (m_controller.isGroupcontainerEditing()) {
    CmsGroupContainerElement groupContainer=m_controller.getGroupcontainer();
    if ((groupContainer != m_initialDropTarget) && elementData.getContents().containsKey(groupContainer.getContainerId())) {
      Element helper=null;
      Element placeholder=null;
      try {
        String htmlContent=elementData.getContents().get(groupContainer.getContainerId());
        helper=CmsDomUtil.createElement(htmlContent);
        placeholder=CmsDomUtil.clone(helper);
        placeholder.addClassName(I_CmsLayoutBundle.INSTANCE.dragdropCss().dragPlaceholder());
      }
 catch (      Exception e) {
        CmsDebugLog.getInstance().printLine(e.getMessage());
      }
      if (helper != null) {
        prepareDragInfo(helper,placeholder,groupContainer,handler);
        groupContainer.highlightContainer();
      }
    }
    return;
  }
  for (  CmsContainerPageContainer container : m_controller.getContainerTargets().values()) {
    if ((container != m_initialDropTarget) && !container.isDetailView() && elementData.getContents().containsKey(container.getContainerId())) {
      Element helper=null;
      Element placeholder=null;
      if (elementData.isGroupContainer()) {
        helper=DOM.createDiv();
        String content="";
        for (        String groupId : elementData.getSubItems()) {
          CmsContainerElementData subData=m_controller.getCachedElement(groupId);
          if ((subData != null) && subData.getContents().containsKey(container.getContainerId())) {
            content+=subData.getContents().get(container.getContainerId());
          }
        }
        if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(content)) {
          helper.setInnerHTML(content);
        }
 else {
          helper.addClassName(I_CmsLayoutBundle.INSTANCE.dragdropCss().emptyGroupContainer());
        }
        placeholder=CmsDomUtil.clone(helper);
      }
 else {
        try {
          String htmlContent=elementData.getContents().get(container.getContainerId());
          helper=CmsDomUtil.createElement(htmlContent);
          placeholder=CmsDomUtil.clone(helper);
          placeholder.addClassName(I_CmsLayoutBundle.INSTANCE.dragdropCss().dragPlaceholder());
        }
 catch (        Exception e) {
          CmsDebugLog.getInstance().printLine(e.getMessage());
        }
      }
      if (helper != null) {
        prepareDragInfo(helper,placeholder,container,handler);
        container.highlightContainer();
      }
    }
 else {
      CmsDebugLog.getInstance().printLine("No content for container: " + container.getContainerId());
    }
  }
}
