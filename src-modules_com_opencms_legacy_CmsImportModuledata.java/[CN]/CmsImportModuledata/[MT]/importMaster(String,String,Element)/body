{
  CmsMasterDataSet newDataset=new CmsMasterDataSet();
  Vector channelRelations=new Vector();
  Vector masterMedia=new Vector();
  m_report.print(org.opencms.importexport.Messages.get().container(org.opencms.importexport.Messages.RPT_IMPORTING_0),I_CmsReport.C_FORMAT_NOTE);
  try {
    int subIdInt=Integer.parseInt(subId);
    newDataset=getMasterDataSet(subIdInt,masterElement);
  }
 catch (  Exception e) {
    m_report.println(e);
    throw new CmsLegacyException("Cannot get dataset ",e);
  }
  m_report.print(Messages.get().container(Messages.RPT_ARGUMENT_2,CmsEncoder.escapeHtml(newDataset.m_title),classname));
  m_report.print(org.opencms.report.Messages.get().container(org.opencms.report.Messages.RPT_DOTS_0));
  try {
    channelRelations=getMasterChannelRelation(masterElement);
  }
 catch (  Exception e) {
    m_report.println(e);
    throw new CmsLegacyException("Cannot get channelrelations ",e);
  }
  try {
    masterMedia=getMasterMedia(masterElement);
  }
 catch (  Exception e) {
    m_report.println(e);
    throw new CmsLegacyException("Cannot get media ",e);
  }
  newDataset.m_channelToAdd=channelRelations;
  newDataset.m_mediaToAdd=masterMedia;
  CmsMasterContent newMaster=getContentDefinition(classname,new Class[]{CmsObject.class,CmsMasterDataSet.class},new Object[]{m_cms,newDataset});
  try {
    CmsUUID userId=newMaster.getOwner();
    CmsUUID groupId=newMaster.getGroupId();
    newMaster.importMaster();
    newMaster.chown(m_cms,userId);
    newMaster.chgrp(m_cms,groupId);
  }
 catch (  Exception e) {
    m_report.println(e);
    throw new CmsLegacyException("Cannot write master ",e);
  }
  m_report.println(org.opencms.report.Messages.get().container(org.opencms.report.Messages.RPT_OK_0),I_CmsReport.C_FORMAT_OK);
}
