{
  CmsObject cms=((CmsFlexController)request.getAttribute(CmsFlexController.ATTRIBUTE_NAME)).getCmsObject();
  m_resource=getKeyName(cms.getRequestContext().addSiteRoot(target),online,workplace);
  m_variation="never";
  m_uri=cms.getRequestContext().addSiteRoot(cms.getRequestContext().getUri());
  m_user=cms.getRequestContext().currentUser().getName();
  m_params=request.getParameterMap();
  if (m_params.size() == 0) {
    m_params=null;
  }
  m_noparams=null;
  m_timeout=System.currentTimeMillis();
  m_publish=false;
  m_always=0;
  m_schemes=Collections.singleton(request.getScheme().toLowerCase());
  m_ports=Collections.singleton(new Integer(request.getServerPort()));
  m_ip=cms.getRequestContext().getRemoteAddress();
  m_locale=cms.getRequestContext().getLocale().toString();
  m_encoding=cms.getRequestContext().getEncoding();
  m_element=request.getParameter(I_CmsConstants.C_PARAMETER_ELEMENT);
  if (OpenCms.getLog(this).isDebugEnabled()) {
    OpenCms.getLog(this).debug("Creating CmsFlexCacheKey for Request: " + this.toString());
  }
}
