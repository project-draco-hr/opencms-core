{
  deleteTempFile();
  boolean directEditMode=Boolean.valueOf(getParamDirectedit()).booleanValue();
  boolean modified=Boolean.valueOf(getParamModified()).booleanValue();
  if (directEditMode && !modified) {
    try {
      if (getCms().readResource(getParamResource()).getState() == CmsResource.STATE_NEW) {
        getCms().deleteResource(getParamResource(),CmsResource.DELETE_PRESERVE_SIBLINGS);
      }
    }
 catch (    CmsException e) {
      if (LOG.isInfoEnabled()) {
        LOG.info(e.getLocalizedMessage(),e);
      }
    }
  }
 else   if (directEditMode || forceUnlock || !modified) {
    try {
      getCms().unlockResource(getParamResource());
    }
 catch (    CmsException e) {
      if (LOG.isInfoEnabled()) {
        LOG.info(e.getLocalizedMessage(),e);
      }
    }
  }
}
