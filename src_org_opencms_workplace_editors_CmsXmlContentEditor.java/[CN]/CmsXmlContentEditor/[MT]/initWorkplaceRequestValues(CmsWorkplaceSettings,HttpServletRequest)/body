{
  fillParamValues(request);
  setParamDialogtype(EDITOR_TYPE);
  if (getParamNewLink() != null) {
    setParamAction(EDITOR_ACTION_NEW);
  }
 else {
    try {
      checkLock(getParamResource());
      m_file=getCms().readFile(getParamResource(),CmsResourceFilter.ALL);
      m_content=CmsXmlContentFactory.unmarshal(getCms(),m_file);
      m_contentDefinition=m_content.getContentDefinition(new CmsXmlEntityResolver(getCms()));
    }
 catch (    CmsException e) {
      try {
        showErrorPage(this,e,"read");
      }
 catch (      JspException exc) {
        if (OpenCms.getLog(this).isInfoEnabled()) {
          OpenCms.getLog(this).info(exc);
        }
      }
    }
  }
  if (EDITOR_SAVE.equals(getParamAction())) {
    setAction(ACTION_SAVE);
  }
 else   if (EDITOR_SAVEEXIT.equals(getParamAction())) {
    setAction(ACTION_SAVEEXIT);
  }
 else   if (EDITOR_EXIT.equals(getParamAction())) {
    setAction(ACTION_EXIT);
  }
 else   if (EDITOR_SHOW.equals(getParamAction())) {
    setAction(ACTION_SHOW);
  }
 else   if (EDITOR_SHOW_ERRORMESSAGE.equals(getParamAction())) {
    setAction(ACTION_SHOW_ERRORMESSAGE);
  }
 else   if (EDITOR_CHANGE_ELEMENT.equals(getParamAction())) {
    setAction(ACTION_SHOW);
    actionChangeElementLanguage();
  }
 else   if (EDITOR_ACTION_NEW.equals(getParamAction())) {
    setAction(ACTION_NEW);
    return;
  }
 else {
    setAction(ACTION_DEFAULT);
    if (getParamElementlanguage() == null) {
      initElementLanguage();
    }
  }
}
