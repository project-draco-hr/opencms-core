{
  int pos=m_paramNewLink.indexOf('|');
  String collectorName=m_paramNewLink.substring(0,pos);
  String param=m_paramNewLink.substring(pos + 1);
  I_CmsResourceCollector collector=OpenCms.getResourceManager().getContentCollector(collectorName);
  try {
    CmsFile templateFile=getCms().readFile(getParamResource(),CmsResourceFilter.IGNORE_EXPIRATION);
    CmsXmlContent template=CmsXmlContentFactory.unmarshal(getCms(),templateFile);
    Locale locale=(Locale)OpenCms.getLocaleManager().getDefaultLocales(getCms(),getParamResource()).get(0);
    CmsXmlContent newContent=new CmsXmlContent(template.getContentDefinition(),locale,template.getEncoding());
    String newFileName=collector.getCreateLink(getCms(),collectorName,param);
    getCms().createResource(newFileName,templateFile.getTypeId());
    CmsFile newFile=getCms().readFile(newFileName,CmsResourceFilter.IGNORE_EXPIRATION);
    newFile.setContents(newContent.marshal());
    getCms().writeFile(newFile);
    setParamNewLink(null);
    setParamAction(null);
    setParamResource(newFileName);
    setAction(ACTION_DEFAULT);
    m_file=newFile;
    m_content=newContent;
  }
 catch (  CmsException e) {
    if (OpenCms.getLog(this).isErrorEnabled()) {
      OpenCms.getLog(this).error("Error creating new XML content item '" + m_paramNewLink + "'",e);
    }
    throw new JspException(e);
  }
}
