{
  StringBuffer result=new StringBuffer(32);
  if (m_optionalElementPresent) {
    resetWidgetCollector();
  }
  try {
    Iterator i=getWidgetCollector().getWidgets().keySet().iterator();
    while (i.hasNext()) {
      String key=(String)i.next();
      I_CmsXmlContentValue value=(I_CmsXmlContentValue)getWidgetCollector().getValues().get(key);
      I_CmsXmlWidget widget=(I_CmsXmlWidget)getWidgetCollector().getWidgets().get(key);
      result.append(widget.getDialogHtmlEnd(getCms(),this,value));
    }
    return result.toString();
  }
 catch (  CmsXmlException e) {
    showErrorPage(e,"xml");
    return "";
  }
}
