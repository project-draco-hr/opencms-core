{
  try {
    setEditorValues(getElementLocale());
  }
 catch (  CmsXmlException e) {
    showErrorPage(e);
    return;
  }
  if (!getErrorHandler().hasErrors()) {
    int index=0;
    try {
      index=Integer.parseInt(getParamElementIndex());
    }
 catch (    Exception e) {
    }
    if (getAction() == ACTION_ELEMENT_REMOVE) {
      m_content.removeValue(getParamElementName(),getElementLocale(),index);
    }
 else {
      if (m_content.hasValue(getParamElementName(),getElementLocale())) {
        index+=1;
      }
      m_content.addValue(getCms(),getParamElementName(),getElementLocale(),index);
    }
    if (getErrorHandler().hasWarnings(getElementLocale())) {
      resetErrorHandler();
    }
    try {
      writeContent();
    }
 catch (    CmsException e) {
      showErrorPage(e);
    }
  }
}
