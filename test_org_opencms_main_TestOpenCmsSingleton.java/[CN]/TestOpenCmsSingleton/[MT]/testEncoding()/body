{
  echo("Testing the encoding settings");
  String systemEncoding=OpenCms.getSystemInfo().getDefaultEncoding();
  String workplaceEncoding=OpenCms.getWorkplaceManager().getDefaultEncoding();
  CmsResourceTypeJsp jsp=(CmsResourceTypeJsp)OpenCms.getResourceManager().getResourceType(CmsResourceTypeJsp.getStaticTypeId());
  List defaultProperties=jsp.getConfiguredDefaultProperties();
  Iterator i=defaultProperties.iterator();
  String jspEncoding=null;
  while (i.hasNext()) {
    CmsProperty property=(CmsProperty)i.next();
    if (I_CmsConstants.C_PROPERTY_CONTENT_ENCODING.equals(property.getName())) {
      jspEncoding=property.getValue();
      CmsObject cms=OpenCms.initCmsObject(OpenCms.getDefaultUsers().getUserGuest());
      CmsStringMapper mapper=new CmsStringMapper(cms);
      jspEncoding=CmsStringUtil.substituteMacros(jspEncoding,mapper);
      break;
    }
  }
  assertEquals("ISO-8859-1",systemEncoding);
  assertEquals(systemEncoding,workplaceEncoding);
  assertEquals(systemEncoding,jspEncoding);
}
