{
  String context=CmsCoreProvider.get().getContext();
  if (m_entry.isLeafType() && sitePath.endsWith("/")) {
    sitePath=sitePath.substring(0,sitePath.length() - 1);
  }
  if (m_entry.getInheritedProperties() == null) {
    return CmsStringUtil.joinPaths(context,sitePath);
  }
  CmsComputedPropertyValue exportProp=m_entry.getInheritedProperties().get("export");
  if ((exportProp != null) && Boolean.parseBoolean(exportProp.getOwnValue())) {
    String exportName=CmsSitemapView.getInstance().getController().getData().getExportName();
    if (exportName == null) {
      exportName=CmsCoreProvider.get().getSiteRoot();
    }
    String rfsPrefix=CmsSitemapView.getInstance().getController().getData().getExportRfsPrefix();
    if (rfsPrefix != null) {
      return CmsStringUtil.joinPaths(rfsPrefix,exportName,sitePath);
    }
  }
  return CmsStringUtil.joinPaths(context,sitePath);
}
