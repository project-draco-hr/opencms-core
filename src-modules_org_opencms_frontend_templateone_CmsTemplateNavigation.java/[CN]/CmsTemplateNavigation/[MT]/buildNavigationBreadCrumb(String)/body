{
  StringBuffer result=new StringBuffer(512);
  int startLevel=1;
  if (showNavLeftSelected()) {
    startLevel=CmsResource.getPathLevel(getHeadNavFolder());
  }
 else {
    startLevel=CmsResource.getPathLevel(getStartFolder());
  }
  CmsJspNavElement currentPage=getNavigation().getNavigationForResource(getRequestContext().getUri());
  int currentLevel=currentPage.getNavTreeLevel();
  int deltaLevel=currentLevel - startLevel;
  boolean showNavigation=deltaLevel > 3 || (deltaLevel == 3 && currentPage.isInNavigation());
  if (showNavigation) {
    String separator="&gt;";
    result.append("<div class=\"");
    result.append(styleClass);
    result.append("\">");
    List navElements=getNavigation().getNavigationBreadCrumb(startLevel + 3,true);
    for (int i=0; i < navElements.size(); i++) {
      CmsJspNavElement nav=(CmsJspNavElement)navElements.get(i);
      result.append("<a href=\"");
      result.append(link(nav.getResourceName()));
      result.append("\" class=\"");
      result.append(styleClass);
      result.append("\" title=\"");
      result.append(nav.getNavText());
      result.append("\">");
      result.append(separator);
      result.append("&nbsp;");
      result.append(nav.getNavText());
      result.append("</a>\n");
    }
    if (currentPage.isInNavigation()) {
      result.append("<a href=\"");
      result.append(link(currentPage.getResourceName()));
      result.append("\" class=\"");
      result.append(styleClass);
      result.append("\" title=\"");
      result.append(currentPage.getNavText());
      result.append("\">");
      result.append(separator);
      result.append("&nbsp;");
      result.append(currentPage.getNavText());
      result.append("</a>\n");
    }
    result.append("</div>");
  }
  return result.toString();
}
