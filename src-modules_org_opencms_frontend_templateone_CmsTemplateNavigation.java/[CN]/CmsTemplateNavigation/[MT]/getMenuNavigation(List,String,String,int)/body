{
  StringBuffer result=new StringBuffer(64);
  String showItemProperty;
  int navSize=curNav.size();
  if (navSize > 0) {
    Map subNav=new HashMap();
    boolean entryPresent=false;
    for (int i=0; i < navSize; i++) {
      CmsJspNavElement ne=(CmsJspNavElement)curNav.get(i);
      String resName=ne.getResourceName();
      showItemProperty=property(C_PROPERTY_HEADNAV_USE,resName,getHeadNavItemDefaultStringValue());
      boolean showEntry=Boolean.valueOf(showItemProperty).booleanValue();
      if (showEntry) {
        entryPresent=true;
        List navEntries=new ArrayList();
        if (ne.isFolderLink() && currentDepth < getMenuDepth()) {
          navEntries=getNavigation().getNavigationForFolder(resName);
        }
        result.append(" <a class=\"");
        result.append("mI");
        result.append("\" href=\"");
        result.append(link(resName));
        result.append("\"");
        if (ne.isFolderLink() && hasSubMenuEntries(navEntries)) {
          result.append(" onmouseover=\"menuItemMouseover(event, '");
          result.append(prefix);
          result.append("_");
          result.append(resName.hashCode());
          result.append("');\">");
          result.append("<span class=\"mIText\">");
          result.append(ne.getNavText());
          result.append("</span><span class=\"mIArrow\">&#9654;</span></a>");
          subNav.put(resName,navEntries);
        }
 else {
          result.append(">");
          result.append(ne.getNavText());
          result.append("</a>");
        }
      }
    }
    result.append("</div>\n");
    StringBuffer openTag=new StringBuffer(8);
    if ("menu0".equals(prefix) && showAccessibleVersion()) {
      CmsMessages messages=new CmsMessages(CmsTemplateBean.C_MESSAGE_BUNDLE,getRequestContext().getLocale());
      openTag.append("<div style=\"visibility: hidden; display:none;\">");
      openTag.append("<h3>").append(messages.key("headline.accessible.nav.headline")).append("</h3>");
      openTag.append("<p>").append(messages.key("headline.accessible.nav.text")).append("</p>");
      openTag.append("</div>");
    }
    if (entryPresent) {
      openTag.append("<div class=\"");
      openTag.append(styleClass);
      openTag.append("\" id=\"");
      openTag.append(prefix);
      openTag.append("\" onmouseover=\"menuMouseover(event);\">");
    }
 else {
      openTag.append("<div style=\"visibility: hidden;\" id=\"");
      openTag.append(prefix);
      openTag.append("\">");
    }
    result.insert(0,openTag);
    Iterator i=subNav.keySet().iterator();
    while (i.hasNext()) {
      String resName=(String)i.next();
      List navEntries=(List)subNav.get(resName);
      result.append(getMenuNavigation(navEntries,styleClass,prefix + "_" + resName.hashCode(),currentDepth + 1));
    }
  }
  return result;
}
