{
  if (m_headNavConfiguration == null) {
    m_headNavConfiguration=CmsTemplateBean.getConfigurationFile(getConfigPath() + FILE_CONFIG_HEADNAV,getCmsObject());
  }
  Locale locale=getRequestContext().getLocale();
  List navEntries;
  if (menuLevel == 0) {
    navEntries=m_headNavConfiguration.getValues("link",locale);
  }
 else {
    StringBuffer xPath=new StringBuffer(8);
    xPath.append("link");
    for (int i=0; i < menuLevel; i++) {
      int menuIndex=Integer.parseInt(String.valueOf(menuIndexes.charAt(i)));
      xPath.append("[");
      xPath.append(menuIndex + 1);
      xPath.append("]/menu");
    }
    navEntries=m_headNavConfiguration.getValues(xPath.toString(),locale);
  }
  int navEntriesSize=navEntries.size();
  List result=new ArrayList(navEntriesSize);
  for (int i=0; i < navEntriesSize; i++) {
    I_CmsXmlContentValue headLink=(I_CmsXmlContentValue)navEntries.get(i);
    String linkPath=headLink.getPath();
    String url=m_headNavConfiguration.getStringValue(getCmsObject(),linkPath + "/link.url",locale);
    String text=m_headNavConfiguration.getStringValue(getCmsObject(),linkPath + "/link.text",locale);
    String target=m_headNavConfiguration.getStringValue(getCmsObject(),linkPath + "/link.target",locale);
    if (CmsStringUtil.isEmpty(target)) {
      target="_self";
    }
    Map properties=new HashMap(3);
    properties.put(CmsPropertyDefinition.PROPERTY_NAVTEXT,text);
    properties.put(CmsPropertyDefinition.PROPERTY_NAVINFO,target);
    if (showHeadNavImages() && menuLevel == 0) {
      String image=m_headNavConfiguration.getStringValue(getCmsObject(),linkPath + "/link.image",locale);
      if (CmsStringUtil.isEmpty(image)) {
        image="";
      }
      properties.put(CmsPropertyDefinition.PROPERTY_NAVIMAGE,image);
    }
    CmsJspNavElement nav=new CmsJspNavElement(url,properties,1);
    result.add(nav);
  }
  return result;
}
