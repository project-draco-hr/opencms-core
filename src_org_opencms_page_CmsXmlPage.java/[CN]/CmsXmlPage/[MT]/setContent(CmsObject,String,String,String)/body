{
  Element element=getBookmark(language + "_" + name);
  Element data=element.element("content");
  Element links=element.element("links");
  CmsLinkTable linkTable=new CmsLinkTable();
  try {
    CmsLinkProcessor linkReplacer=new CmsLinkProcessor(linkTable);
    data.setContent(null);
    if (!m_allowRelativeLinks && m_file != null) {
      String relativeRoot=CmsResource.getParentFolder(cms.readAbsolutePath(m_file));
      data.addCDATA(linkReplacer.replaceLinks(cms,content,relativeRoot));
    }
 else {
      data.addCDATA(linkReplacer.replaceLinks(cms,content,null));
    }
    Attribute enabled=element.attribute("enabled");
    if (enabled != null) {
      element.remove(enabled);
    }
  }
 catch (  Exception exc) {
    throw new CmsPageException("HTML data processing failed",exc);
  }
  links.setContent(null);
  for (Iterator i=linkTable.iterator(); i.hasNext(); ) {
    CmsLink link=linkTable.getLink((String)i.next());
    Element linkElement=links.addElement("link").addAttribute("name",link.getName()).addAttribute("type",link.getType()).addAttribute("internal",Boolean.toString(link.isInternal()));
    linkElement.addElement("target").addCDATA(link.getTarget());
    if (link.getAnchor() != null) {
      linkElement.addElement("anchor").addCDATA(link.getAnchor());
    }
    if (link.getQuery() != null) {
      linkElement.addElement("query").addCDATA(link.getQuery());
    }
  }
}
