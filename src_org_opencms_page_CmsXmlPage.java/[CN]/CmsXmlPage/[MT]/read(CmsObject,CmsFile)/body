{
  CmsXmlPage newPage=null;
  byte[] content=file.getContents();
  String allowRelative;
  try {
    allowRelative=cms.readProperty(cms.readAbsolutePath(file),C_PROPERTY_ALLOW_RELATIVE,false,"false");
  }
 catch (  CmsException e) {
    allowRelative="false";
  }
  String encoding;
  try {
    encoding=cms.readProperty(cms.readAbsolutePath(file),I_CmsConstants.C_PROPERTY_CONTENT_ENCODING,true,OpenCms.getSystemInfo().getDefaultEncoding());
  }
 catch (  CmsException e) {
    encoding=OpenCms.getSystemInfo().getDefaultEncoding();
  }
  if (content.length > 0) {
    String xmlData;
    try {
      xmlData=new String(content,encoding);
    }
 catch (    UnsupportedEncodingException e) {
      try {
        xmlData=new String(content,OpenCms.getSystemInfo().getDefaultEncoding());
      }
 catch (      UnsupportedEncodingException e2) {
        xmlData=new String();
      }
    }
    newPage=read(cms,xmlData);
  }
 else {
    newPage=new CmsXmlPage();
  }
  newPage.m_file=file;
  newPage.m_encoding=encoding;
  newPage.m_allowRelativeLinks=Boolean.valueOf(allowRelative).booleanValue();
  return newPage;
}
