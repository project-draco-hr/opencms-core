{
  CmsXmlPage newPage=null;
  byte[] content=file.getContents();
  String allowRelative;
  try {
    allowRelative=cms.readProperty(cms.readAbsolutePath(file),C_PROPERTY_ALLOW_RELATIVE,false,"false");
  }
 catch (  CmsException e) {
    allowRelative="false";
  }
  if (content.length > 0) {
    String encoding;
    try {
      encoding=cms.readProperty(cms.readAbsolutePath(file),I_CmsConstants.C_PROPERTY_CONTENT_ENCODING,false,OpenCms.getSystemInfo().getDefaultEncoding());
    }
 catch (    CmsException e) {
      encoding=OpenCms.getSystemInfo().getDefaultEncoding();
    }
    String xmlData;
    try {
      xmlData=new String(content,encoding);
    }
 catch (    UnsupportedEncodingException e) {
      xmlData=new String(content);
    }
    newPage=read(cms,xmlData);
    newPage.m_file=file;
    newPage.m_allowRelativeLinks="true".equals(allowRelative);
  }
 else {
    newPage=new CmsXmlPage();
    newPage.m_file=file;
    newPage.m_allowRelativeLinks="true".equals(allowRelative);
  }
  return newPage;
}
