{
  Element element=getBookmark(language + "_" + name);
  Element editdata=element.element("editdata");
  Element displaydata=element.element("displaydata");
  Element links=element.element("links");
  String cdata=CmsStringSubstitution.substituteContextPath(content,OpenCms.getOpenCmsContext() + "/");
  editdata.setContent(null);
  editdata.addCDATA(cdata);
  CmsLinkTable linkTable=new CmsLinkTable();
  try {
    CmsLinkProcessor linkReplacer=new CmsLinkProcessor(linkTable);
    displaydata.setContent(null);
    displaydata.addCDATA(linkReplacer.replaceLinks(content));
  }
 catch (  Exception exc) {
    throw new CmsPageException("HTML data processing failed",exc);
  }
  links.setContent(null);
  for (Iterator i=linkTable.iterator(); i.hasNext(); ) {
    CmsLinkTable.CmsLink link=linkTable.getLink((String)i.next());
    links.addElement("link").addAttribute("name",link.getName()).addAttribute("type",link.getType()).addAttribute("target",link.getTarget()).addAttribute("internal",Boolean.toString(link.isInternal()));
  }
}
