{
  if (!(e instanceof CmsException)) {
    if (OpenCms.getLog(this).isErrorEnabled()) {
      OpenCms.getLog(this).error(errorText,e);
    }
  }
  CmsRequestContext reqContext=cms.getRequestContext();
  if ((DEBUG == 0) && reqContext.currentUser().isGuestUser() && (!(e instanceof CmsLegacyException && ((CmsLegacyException)e).getType() == CmsLegacyException.C_NO_USER))) {
    throw new CmsLegacyException(errorText,CmsLegacyException.C_SERVICE_UNAVAILABLE,e);
  }
 else {
    if (e instanceof CmsException) {
      throw (CmsException)e;
    }
 else {
      throw new CmsLegacyException(errorText,CmsLegacyException.C_LOADER_GENERIC_ERROR,e);
    }
  }
}
