{
  CmsListInfoBean categoryBean=new CmsListInfoBean(category.getTitle(),CmsStringUtil.isNotEmptyOrWhitespaceOnly(category.getDescription()) ? category.getDescription() : category.getPath(),null);
  CmsListItemWidget listItemWidget=new CmsListItemWidget(categoryBean);
  listItemWidget.setIcon(CATEGORY_ICON_CLASSES);
  CmsCheckBox checkBox=new CmsCheckBox();
  if ((selectedCategories != null) && selectedCategories.contains(category.getPath())) {
    checkBox.setChecked(true);
  }
  SelectionHandler selectionHandler=new SelectionHandler(category.getPath(),checkBox);
  checkBox.addClickHandler(selectionHandler);
  listItemWidget.addDoubleClickHandler(selectionHandler);
  CmsCategoryTreeItem treeItem=new CmsCategoryTreeItem(true,checkBox,listItemWidget);
  treeItem.init(category.getPath(),categoryBean.getTitle(),categoryBean.getSubTitle());
  return treeItem;
}
