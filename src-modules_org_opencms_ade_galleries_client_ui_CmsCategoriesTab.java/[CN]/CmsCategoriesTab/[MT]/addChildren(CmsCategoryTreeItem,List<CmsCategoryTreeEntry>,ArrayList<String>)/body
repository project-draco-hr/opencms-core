{
  if (children != null) {
    for (    CmsCategoryTreeEntry child : children) {
      CmsCategoryInfoBean childBean=new CmsCategoryInfoBean(child.getTitle(),child.getPath(),null,child.getPath(),child.getIconResource());
      CmsListItemWidget childListItemWidget=new CmsListItemWidget(childBean);
      Image icon=new Image(childBean.getIconResource());
      icon.setStyleName(DIALOG_CSS.listIcon());
      childListItemWidget.setIcon(icon);
      CmsCheckBox checkBox=new CmsCheckBox();
      if (selectedCategories.contains(childBean.getId())) {
        checkBox.setChecked(true);
      }
      checkBox.addClickHandler(new CheckboxHandler(childBean.getId(),checkBox));
      CmsCategoryTreeItem treeItem=new CmsCategoryTreeItem(true,checkBox,childListItemWidget);
      treeItem.init(childBean.getId(),childBean.getTitle(),childBean.getSubTitle());
      if (selectedCategories.contains(childBean.getId())) {
        parent.setOpen(true);
        openParents(parent);
      }
      parent.addChild(treeItem);
      addChildren(treeItem,child.getChildren(),selectedCategories);
    }
  }
}
