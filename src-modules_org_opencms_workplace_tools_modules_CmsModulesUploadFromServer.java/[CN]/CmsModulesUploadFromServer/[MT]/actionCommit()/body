{
  List errors=new ArrayList();
  getSettings().setHtmlList(null);
  try {
    Map param=new HashMap();
    param.put(CmsModulesList.PARAM_MODULE,m_moduleupload);
    param.put(PARAM_STYLE,"new");
    param.put(PARAM_CLOSELINK,getToolManager().linkForPath(getJsp(),"/modules",null));
    String importpath=OpenCms.getSystemInfo().getPackagesRfsPath();
    importpath=OpenCms.getSystemInfo().getAbsoluteRfsPathRelativeToWebInf(importpath + "modules/" + m_moduleupload);
    CmsModule module=CmsModuleImportExportHandler.readModuleFromImport(importpath);
    if (OpenCms.getModuleManager().hasModule(module.getName())) {
      param.put(PARAM_MODULENAME,module.getName());
      getToolManager().jspRedirectPage(this,REPLACE_ACTION_REPORT,param);
    }
 else {
      getToolManager().jspRedirectPage(this,IMPORT_ACTION_REPORT,param);
    }
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
catch (  CmsConfigurationException e) {
    throw new RuntimeException(e);
  }
  setCommitErrors(errors);
}
