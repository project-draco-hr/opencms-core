{
  String path=normalizePath(cms.getRequestContext().addSiteRoot(uri));
  Map<String,String> properties=null;
  boolean online=cms.getRequestContext().currentProject().isOnlineProject();
  if (online) {
    properties=m_searchPropsOnline.get(path);
  }
 else {
    properties=m_searchPropsOffline.get(path);
  }
  if (properties != null) {
    return properties;
  }
  Boolean missing=null;
  if (online) {
    missing=m_missingUrisOnline.get(path);
  }
 else {
    missing=m_missingUrisOffline.get(path);
  }
  if (missing != null) {
    return null;
  }
  EntryData data=getEntry(cms,path,online,true);
  if (data == null) {
    if (online) {
      m_missingUrisOnline.put(path,Boolean.TRUE);
    }
 else {
      m_missingUrisOffline.put(path,Boolean.TRUE);
    }
    return null;
  }
  properties=new HashMap<String,String>();
  properties.putAll(getDefaultProperties(cms,data.getSitemap().getFile(),online));
  properties.putAll(data.getProperties());
  if (online) {
    m_searchPropsOnline.put(path,properties);
  }
 else {
    m_searchPropsOffline.put(path,properties);
  }
  return properties;
}
