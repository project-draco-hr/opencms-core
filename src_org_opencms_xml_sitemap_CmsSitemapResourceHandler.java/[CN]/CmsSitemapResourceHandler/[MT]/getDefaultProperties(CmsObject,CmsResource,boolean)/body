{
  if ((!online && (m_defPropsOffline == null)) || (online && (m_defPropsOnline == null))) {
    Map<String,String> defProps=new HashMap<String,String>();
    Map<String,CmsXmlContentProperty> propertiesConf=OpenCms.getADEManager().getElementPropertyConfiguration(cms,resource);
    Iterator<Map.Entry<String,CmsXmlContentProperty>> itProperties=propertiesConf.entrySet().iterator();
    while (itProperties.hasNext()) {
      Map.Entry<String,CmsXmlContentProperty> entry=itProperties.next();
      String propertyName=entry.getKey();
      CmsXmlContentProperty conf=entry.getValue();
      CmsMacroResolver.resolveMacros(conf.getWidgetConfiguration(),cms,Messages.get().getBundle());
      defProps.put(propertyName,conf.getDefault());
    }
    if (online) {
      m_defPropsOnline=defProps;
    }
 else {
      m_defPropsOffline=defProps;
    }
  }
  return online ? m_defPropsOnline : m_defPropsOffline;
}
