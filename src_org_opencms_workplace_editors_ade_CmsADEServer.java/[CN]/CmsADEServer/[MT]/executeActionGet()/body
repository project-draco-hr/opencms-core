{
  JSONObject result=new JSONObject();
  String objParam=getRequest().getParameter(PARAMETER_OBJ);
  if (objParam == null) {
    result.put(RES_ERROR,Messages.get().getBundle().key(Messages.ERR_JSON_MISSING_PARAMETER_1,PARAMETER_OBJ));
    return result;
  }
  String urlParam=getRequest().getParameter(PARAMETER_URL);
  if (urlParam == null) {
    result.put(RES_ERROR,Messages.get().getBundle().key(Messages.ERR_JSON_MISSING_PARAMETER_1,PARAMETER_URL));
    return result;
  }
  if (objParam.equals(OBJ_ALL)) {
    result=getContainerPage(urlParam);
  }
 else   if (objParam.equals(OBJ_ELEM)) {
    String elemParam=getRequest().getParameter(PARAMETER_ELEM);
    if (elemParam == null) {
      result.put(RES_ERROR,Messages.get().getBundle().key(Messages.ERR_JSON_MISSING_PARAMETER_1,PARAMETER_ELEM));
      return result;
    }
    CmsADEElementUtil elemUtil=new CmsADEElementUtil(getCmsObject(),getRequest(),getResponse());
    Collection<String> types=getContainerPageTypes(urlParam);
    JSONObject resElements=new JSONObject();
    if (elemParam.startsWith("[")) {
      JSONArray elems=new JSONArray(elemParam);
      for (int i=0; i < elems.length(); i++) {
        String elem=elems.getString(i);
        resElements.put(elem,elemUtil.getElementData(CmsADEElementUtil.parseId(elem),types));
      }
    }
 else {
      resElements.put(elemParam,elemUtil.getElementData(CmsADEElementUtil.parseId(elemParam),types));
    }
    result.put(P_ELEMENTS,resElements);
  }
 else   if (objParam.equals(OBJ_FAV)) {
    result.put(P_FAVORITES,getFavoriteList(null,getContainerPageTypes(urlParam)));
  }
 else   if (objParam.equals(OBJ_REC)) {
    result.put(P_RECENT,CmsADERecentListManager.getInstance().getRecentList(getCmsObject(),null,getContainerPageTypes(urlParam),getRequest(),getResponse()));
  }
 else   if (objParam.equals(OBJ_NEW)) {
    String dataParam=getRequest().getParameter(PARAMETER_DATA);
    if (dataParam == null) {
      result.put(RES_ERROR,Messages.get().getBundle().key(Messages.ERR_JSON_MISSING_PARAMETER_1,PARAMETER_DATA));
      return result;
    }
    String type=dataParam;
    CmsObject cms=getCmsObject();
    CmsADEElementCreator elemCreator=new CmsADEElementCreator(cms,cms.readResource(cms.getRequestContext().getUri()));
    CmsResource newResource=elemCreator.createElement(cms,type);
    result.put(P_ID,CmsADEElementUtil.ADE_ID_PREFIX + newResource.getStructureId().toString());
    result.put(P_URI,cms.getSitePath(newResource));
  }
 else {
    result.put(RES_ERROR,Messages.get().getBundle().key(Messages.ERR_JSON_WRONG_PARAMETER_VALUE_2,PARAMETER_OBJ,objParam));
  }
  return result;
}
