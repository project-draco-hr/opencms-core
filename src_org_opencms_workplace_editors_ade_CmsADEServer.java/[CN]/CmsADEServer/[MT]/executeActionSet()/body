{
  JSONObject result=new JSONObject();
  HttpServletRequest request=getRequest();
  if (!checkParameters(request,result,PARAMETER_ACTION,PARAMETER_LOCALE)) {
    return result;
  }
  String actionParam=request.getParameter(PARAMETER_ACTION);
  String localeParam=request.getParameter(PARAMETER_LOCALE);
  getCmsObject().getRequestContext().setLocale(CmsLocaleManager.getLocale(localeParam));
  if (actionParam.equals(ACTION_FAV)) {
    String dataParam=request.getParameter(PARAMETER_DATA);
    if (dataParam == null) {
      storeErrorMissingParam(result,PARAMETER_DATA);
      return result;
    }
    JSONArray list=new JSONArray(dataParam);
    m_manager.saveFavoriteList(arrayToElementList(list));
  }
 else   if (actionParam.equals(ACTION_REC)) {
    String dataParam=request.getParameter(PARAMETER_DATA);
    if (dataParam == null) {
      storeErrorMissingParam(result,PARAMETER_DATA);
      return result;
    }
    JSONArray list=new JSONArray(dataParam);
    m_manager.saveRecentList(arrayToElementList(list));
  }
 else   if (actionParam.equals(ACTION_CNT)) {
    if (!checkParameters(request,result,CmsADEManager.PARAMETER_CNTPAGE,PARAMETER_DATA)) {
      return result;
    }
    String cntPageParam=request.getParameter(CmsADEManager.PARAMETER_CNTPAGE);
    String dataParam=request.getParameter(PARAMETER_DATA);
    JSONObject cntPage=new JSONObject(dataParam);
    setContainerPage(cntPageParam,cntPage);
  }
 else   if (actionParam.equals(ACTION_DEL)) {
    if (!checkParameters(request,result,PARAMETER_DATA)) {
      return result;
    }
    String dataParam=request.getParameter(PARAMETER_DATA);
    JSONArray elems=new JSONArray(dataParam);
    deleteElements(elems);
  }
 else {
    result.put(RES_ERROR,Messages.get().getBundle().key(Messages.ERR_JSON_WRONG_PARAMETER_VALUE_2,PARAMETER_ACTION,actionParam));
  }
  return result;
}
