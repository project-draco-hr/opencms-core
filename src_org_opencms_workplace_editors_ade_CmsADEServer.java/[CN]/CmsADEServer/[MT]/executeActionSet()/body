{
  JSONObject result=new JSONObject();
  HttpServletRequest request=getRequest();
  if (!checkParameters(request,result,ReqParam.ACTION.getName(),ReqParam.LOCALE.getName())) {
    return result;
  }
  String actionParam=request.getParameter(ReqParam.ACTION.getName());
  Action action=Action.valueOf(actionParam.toUpperCase());
  String localeParam=request.getParameter(ReqParam.LOCALE.getName());
  CmsObject cms=getCmsObject();
  cms.getRequestContext().setLocale(CmsLocaleManager.getLocale(localeParam));
  if (action.equals(Action.FAV)) {
    if (!checkParameters(request,result,ReqParam.DATA.getName())) {
      return result;
    }
    String dataParam=request.getParameter(ReqParam.DATA.getName());
    JSONArray list=new JSONArray(dataParam);
    m_manager.saveFavoriteList(cms,arrayToElementList(list));
  }
 else   if (action.equals(Action.REC)) {
    if (!checkParameters(request,result,ReqParam.DATA.getName())) {
      return result;
    }
    String dataParam=request.getParameter(ReqParam.DATA.getName());
    JSONArray list=new JSONArray(dataParam);
    m_sessionCache.setCacheADERecentList(arrayToElementList(list));
  }
 else   if (action.equals(Action.CNT)) {
    if (!checkParameters(request,result,ReqParam.CNTPAGE.getName(),ReqParam.DATA.getName())) {
      return result;
    }
    String cntPageParam=request.getParameter(ReqParam.CNTPAGE.getName());
    String dataParam=request.getParameter(ReqParam.DATA.getName());
    JSONObject cntPage=new JSONObject(dataParam);
    setContainerPage(cntPageParam,cntPage);
  }
 else   if (action.equals(Action.DEL)) {
    if (!checkParameters(request,result,ReqParam.DATA.getName())) {
      return result;
    }
    String dataParam=request.getParameter(ReqParam.DATA.getName());
    JSONArray elems=new JSONArray(dataParam);
    deleteElements(elems);
  }
 else {
    result.put(RES_ERROR,Messages.get().getBundle().key(Messages.ERR_JSON_WRONG_PARAMETER_VALUE_2,ReqParam.ACTION.getName(),actionParam));
  }
  return result;
}
