{
  if (elementlist != null) {
    CmsFlexController controller=(CmsFlexController)req.getAttribute(CmsFlexController.ATTRIBUTE_NAME);
    String filename=controller.getCmsObject().getRequestContext().getUri();
    CmsXmlPage page=null;
    try {
      page=CmsXmlPageFactory.unmarshal(controller.getCmsObject(),filename,req);
    }
 catch (    CmsException e) {
      OpenCms.getLog(CmsJspTagTemplate.class).error("Error checking for XML page '" + filename + "'",e);
    }
    if (page != null) {
      String absolutePath=controller.getCmsObject().getSitePath(page.getFile());
      String elements[]=CmsStringUtil.split(elementlist,",");
      boolean found=false;
      for (int i=0; i < elements.length; i++) {
        String el=elements[i].trim();
        List locales=page.getLocales(el);
        Locale locale=null;
        if ((locales != null) && (locales.size() != 0)) {
          locale=OpenCms.getLocaleManager().getBestMatchingLocale(controller.getCmsObject().getRequestContext().getLocale(),OpenCms.getLocaleManager().getDefaultLocales(controller.getCmsObject(),absolutePath),locales);
        }
        if ((locale != null) && page.hasValue(el,locale) && page.isEnabled(el,locale)) {
          found=true;
          if (!checkall) {
            break;
          }
        }
 else {
          if (checkall) {
            return false;
          }
        }
      }
      if (!found && !checknone) {
        return false;
      }
 else       if (found && checknone) {
        return false;
      }
    }
  }
  String param=req.getParameter(I_CmsConstants.C_PARAMETER_ELEMENT);
  return ((element == null) || (param == null) || (param.equals(element)));
}
