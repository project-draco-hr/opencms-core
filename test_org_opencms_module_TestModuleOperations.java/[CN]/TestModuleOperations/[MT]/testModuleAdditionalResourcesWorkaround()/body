{
  String moduleName="org.opencms.test.additionalResourcesWorkaround";
  String res1="/system/modules/tests/test1/";
  String res2="/system/modules/tests/test2/";
  String res3="/system/modules/tests/test3/";
  String res4="/system/modules/tests/test4/";
  String res5="/system/modules/tests/test5/";
  List resources=new ArrayList();
  resources.add(res1);
  resources.add(res2);
  resources.add(res3);
  resources.add(res4);
  String sep=I_CmsConstants.C_MODULE_PROPERTY_ADDITIONAL_RESOURCES_SEPARATOR;
  String additionalResources=res1 + sep + res2+ sep+ res3+ sep+ res4;
  CmsModule module1;
  module1=new CmsModule(moduleName,"A test module for additionalresources",null,null,new CmsModuleVersion("1.0"),"Alexander Kandzior","alex@opencms.org",System.currentTimeMillis(),null,0L,null,null,resources,null);
  OpenCms.getModuleManager().addModule(getCmsObject(),module1);
  module1=OpenCms.getModuleManager().getModule(moduleName);
  assertTrue(module1.getParameters().size() == 1);
  assertEquals(additionalResources,module1.getParameter(I_CmsConstants.C_MODULE_PROPERTY_ADDITIONAL_RESOURCES));
  additionalResources+=sep + "-" + sep+ res5;
  Map parameters=new HashMap();
  parameters.put(I_CmsConstants.C_MODULE_PROPERTY_ADDITIONAL_RESOURCES,additionalResources);
  module1=new CmsModule(moduleName,"A test module for additioanlresources",null,null,new CmsModuleVersion("1.0"),"Alexander Kandzior","alex@opencms.org",System.currentTimeMillis(),null,0L,null,null,null,parameters);
  OpenCms.getModuleManager().updateModule(getCmsObject(),module1);
  module1=OpenCms.getModuleManager().getModule(moduleName);
  assertTrue(module1.getResources().size() == 5);
  resources=module1.getResources();
  assertTrue(resources.contains(res1));
  assertTrue(resources.contains(res2));
  assertTrue(resources.contains(res3));
  assertTrue(resources.contains(res4));
  assertTrue(resources.contains(res5));
  resources=new ArrayList();
  resources.add(res2);
  resources.add(res4);
  resources.add(res5);
  additionalResources=res1 + sep + "-"+ sep+ res2+ sep+ res3+ sep+ "-"+ sep+ res5;
  module1=new CmsModule(moduleName,"A test module for additioanlresources",null,null,new CmsModuleVersion("1.0"),"Alexander Kandzior","alex@opencms.org",System.currentTimeMillis(),null,0L,null,null,resources,parameters);
  OpenCms.getModuleManager().updateModule(getCmsObject(),module1);
  module1=OpenCms.getModuleManager().getModule(moduleName);
  assertTrue(module1.getResources().size() == 5);
  resources=module1.getResources();
  assertTrue(resources.contains(res1));
  assertTrue(resources.contains(res2));
  assertTrue(resources.contains(res3));
  assertTrue(resources.contains(res4));
  assertTrue(resources.contains(res5));
  additionalResources=res1 + sep + res2+ sep+ res3+ sep+ res4+ sep+ res5;
  assertTrue(module1.getParameters().size() == 1);
  assertEquals(additionalResources,module1.getParameter(I_CmsConstants.C_MODULE_PROPERTY_ADDITIONAL_RESOURCES));
}
