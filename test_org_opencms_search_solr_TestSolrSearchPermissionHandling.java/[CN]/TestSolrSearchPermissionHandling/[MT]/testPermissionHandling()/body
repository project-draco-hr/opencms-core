{
  echo("Testing search for permission check by comparing result counts");
  CmsSolrIndex index=OpenCms.getSearchManager().getIndexSolr(AllSolrTests.SOLR_ONLINE);
  CmsSolrQuery squery=new CmsSolrQuery(getCmsObject());
  squery.setSearchRoots("/sites/default/");
  squery.setRows(new Integer(100));
  CmsSolrResultList results=index.search(getCmsObject(),squery);
  AllSolrTests.printResults(getCmsObject(),results,true);
  assertEquals(53,results.getNumFound());
  CmsObject cms=OpenCms.initCmsObject(getCmsObject(),new CmsContextInfo("test1"));
  results=index.search(cms,squery);
  AllSolrTests.printResults(cms,results,false);
  assertEquals(47,results.getNumFound());
  cms=OpenCms.initCmsObject(getCmsObject(),new CmsContextInfo("test2"));
  results=index.search(cms,squery);
  AllSolrTests.printResults(cms,results,true);
  assertEquals(49,results.getNumFound());
}
