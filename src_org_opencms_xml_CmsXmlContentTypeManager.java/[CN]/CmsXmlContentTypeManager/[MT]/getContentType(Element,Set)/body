{
  if (!CmsXmlContentDefinition.XSD_NODE_ELEMENT.equals(typeElement.getQName())) {
    throw new CmsXmlException("Invalid OpenCms content definition XML schema structure");
  }
  if (typeElement.elements().size() > 0) {
    throw new CmsXmlException("Invalid OpenCms content definition XML schema structure");
  }
  String name=typeElement.attributeValue(CmsXmlContentDefinition.XSD_ATTRIBUTE_NAME);
  String type=typeElement.attributeValue(CmsXmlContentDefinition.XSD_ATTRIBUTE_TYPE);
  String defaultValue=typeElement.attributeValue(CmsXmlContentDefinition.XSD_ATTRIBUTE_DEFAULT);
  String maxOccrs=typeElement.attributeValue(CmsXmlContentDefinition.XSD_ATTRIBUTE_MAX_OCCURS);
  String minOccrs=typeElement.attributeValue(CmsXmlContentDefinition.XSD_ATTRIBUTE_MIN_OCCURS);
  if (CmsStringUtil.isEmpty(name) || CmsStringUtil.isEmpty(type)) {
    throw new CmsXmlException("Invalid OpenCms content definition XML schema structure");
  }
  boolean simpleType=true;
  I_CmsXmlSchemaType schemaType=(I_CmsXmlSchemaType)m_registeredTypes.get(type);
  if (schemaType == null) {
    Iterator i=cascadedDefinitions.iterator();
    while (i.hasNext()) {
      CmsXmlContentDefinition cd=(CmsXmlContentDefinition)i.next();
      if (type.equals(cd.getTypeName())) {
        simpleType=false;
        return new CmsXmlCascadedContentDefinition(cd,name,minOccrs,maxOccrs);
      }
    }
    if (simpleType) {
      throw new CmsXmlException("Invalid OpenCms content definition XML schema structure: Schema type '" + type + "' unknown");
    }
  }
  if (simpleType) {
    schemaType=schemaType.newInstance(name,minOccrs,maxOccrs);
    if (CmsStringUtil.isNotEmpty(defaultValue)) {
      schemaType.setDefault(defaultValue);
    }
  }
  return schemaType;
}
