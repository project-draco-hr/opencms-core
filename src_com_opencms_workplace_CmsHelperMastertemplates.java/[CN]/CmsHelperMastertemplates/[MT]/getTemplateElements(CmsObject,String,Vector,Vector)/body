{
  List files=(List)new ArrayList();
  if (!I_CmsWpConstants.C_VFS_NEW_STRUCTURE) {
    files=cms.getFilesInFolder(I_CmsWpConstants.C_VFS_PATH_DEFAULTMODULE + subFolder);
  }
  List modules=(List)new ArrayList();
  modules=cms.getSubFolders(I_CmsWpConstants.C_VFS_PATH_MODULES);
  for (int i=0; i < modules.size(); i++) {
    List moduleTemplateFiles=(List)new ArrayList();
    String folder=cms.readAbsolutePath((CmsFolder)modules.get(i));
    moduleTemplateFiles=cms.getFilesInFolder(folder + subFolder);
    for (int j=0; j < moduleTemplateFiles.size(); j++) {
      files.add(moduleTemplateFiles.get(j));
    }
  }
  Iterator enum=files.iterator();
  while (enum.hasNext()) {
    CmsFile file=(CmsFile)enum.next();
    if (file.getState() != I_CmsConstants.C_STATE_DELETED && checkVisible(cms,file)) {
      String nicename=cms.readProperty(cms.readAbsolutePath(file),I_CmsConstants.C_PROPERTY_TITLE);
      if (nicename == null) {
        nicename=file.getName();
      }
      names.addElement(nicename);
      values.addElement(cms.readAbsolutePath(file));
    }
  }
  Utils.bubblesort(names,values);
}
