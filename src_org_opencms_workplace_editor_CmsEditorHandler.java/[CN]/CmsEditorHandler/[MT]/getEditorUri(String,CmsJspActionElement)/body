{
  String editAsText=jsp.getRequest().getParameter("editastext");
  String noActiveX=jsp.getRequest().getParameter("noactivex");
  int resTypeId=-1;
  if ("true".equals(editAsText)) {
    resTypeId=CmsResourceTypePlain.C_RESOURCE_TYPE_ID;
  }
 else {
    try {
      CmsResource res=jsp.getCmsObject().readFileHeader(resource);
      resTypeId=res.getType();
    }
 catch (    CmsException e) {
    }
  }
switch (resTypeId) {
case CmsResourceTypeNewPage.C_RESOURCE_TYPE_ID:
case CmsResourceTypeXmlPage.C_RESOURCE_TYPE_ID:
    if (CmsEditor.BROWSER_NS.equals(CmsEditor.getBrowserType(jsp.getCmsObject()))) {
      return CmsEditor.C_PATH_EDITORS + "simplehtml/editor.html";
    }
 else {
      return CmsEditor.C_PATH_EDITORS + "msdhtml/editor.html";
    }
case CmsResourceTypeJsp.C_RESOURCE_TYPE_ID:
case CmsResourceTypePlain.C_RESOURCE_TYPE_ID:
case CmsResourceTypeXMLTemplate.C_RESOURCE_TYPE_ID:
default :
  if (CmsEditor.BROWSER_IE.equals(CmsEditor.getBrowserType(jsp.getCmsObject())) && !"true".equals(noActiveX)) {
    return CmsEditor.C_PATH_EDITORS + "ledit/editor.html";
  }
 else {
    return CmsEditor.C_PATH_EDITORS + "simple/editor.html";
  }
}
}
