{
  String template=FileUtils.readFileToString(new File(m_vhostsource));
  List<CmsSite> sites=OpenCms.getSiteManager().getAvailableSites(getCms(),true);
  for (  CmsSite site : sites) {
    if (site.getSiteMatcher() != null) {
      String serverName=site.getSiteMatcher().getServerName();
      String vhostconf=template.replaceAll("SERVER_NAME_PLACE_HOLDER",serverName);
      m_targetpath=m_targetpath.endsWith(File.separator) ? m_targetpath : m_targetpath + File.separator;
      File newFile=new File(m_targetpath + serverName);
      if (!newFile.exists()) {
        newFile.createNewFile();
      }
      FileUtils.writeStringToFile(newFile,vhostconf);
    }
  }
  if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(m_consolescript)) {
    Map<String,String[]> params=new HashMap<String,String[]>();
    params.put(PARAM_SCRIPT,new String[]{m_consolescript});
    getToolManager().jspForwardPage(this,CmsSitesList.PATH_REPORTS + "console.jsp",params);
  }
}
