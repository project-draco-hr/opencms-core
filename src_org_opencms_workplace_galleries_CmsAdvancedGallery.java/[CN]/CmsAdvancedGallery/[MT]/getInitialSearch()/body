{
  JSONObject result=new JSONObject();
  JSONObject data=getReqDataObj();
  if ((data != null) && data.has(JsonKeys.RESOURCEPATH.getName())) {
    String resourcePath=data.getString(JsonKeys.RESOURCEPATH.getName());
    result=getGallerySearchServer().findResourceInGallery(resourcePath);
  }
 else   if ((data != null) && data.has(JsonKeys.QUERYDATA.getName())) {
    JSONObject queryData=data.getJSONObject(JsonKeys.QUERYDATA.getName());
    result.put(JsonKeys.QUERYDATA.getName(),queryData);
    result.put(JsonKeys.SEARCHRESULT.getName(),getGallerySearchServer().search(queryData));
  }
  return result.toString();
}
