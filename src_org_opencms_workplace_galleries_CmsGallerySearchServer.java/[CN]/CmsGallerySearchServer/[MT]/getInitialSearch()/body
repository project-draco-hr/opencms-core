{
  JSONObject result=new JSONObject();
  try {
    JSONObject data=getReqDataObj();
    if ((data != null) && data.has(JsonKeys.RESOURCEPATH.getName())) {
      String resourcePath=data.getString(JsonKeys.RESOURCEPATH.getName());
      result=findResourceInGallery(resourcePath);
    }
 else     if ((data != null) && data.has(JsonKeys.QUERYDATA.getName())) {
      JSONObject queryData=data.getJSONObject(JsonKeys.QUERYDATA.getName());
      result.put(JsonKeys.QUERYDATA.getName(),queryData);
      result.put(JsonKeys.SEARCHRESULT.getName(),search(queryData));
    }
  }
 catch (  JSONException e) {
    LOG.error(e.getLocalizedMessage(),e);
  }
  return result.toString();
}
