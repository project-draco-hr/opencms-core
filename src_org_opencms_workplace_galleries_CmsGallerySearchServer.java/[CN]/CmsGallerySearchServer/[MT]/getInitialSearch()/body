{
  JSONObject result=new JSONObject();
  try {
    JSONObject data=getReqDataObj();
    if ((data != null) && data.has(ItemKey.resourcepath.toString())) {
      String resourcePath=data.getString(ItemKey.resourcepath.toString());
      result=findResourceInGallery(resourcePath);
    }
 else     if ((data != null) && data.has(QueryKey.querydata.toString())) {
      JSONObject queryData=data.getJSONObject(QueryKey.querydata.toString());
      result.put(QueryKey.querydata.toString(),queryData);
      result.put(ResponseKey.searchresult.toString(),search(queryData));
    }
  }
 catch (  JSONException e) {
    LOG.error(e.getLocalizedMessage(),e);
  }
  return result.toString();
}
