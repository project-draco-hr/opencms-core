{
  JSONObject result=new JSONObject();
  result.put(VfsTreeKey.name.name(),resource.getName());
  result.put(VfsTreeKey.path.name(),getCmsObject().getSitePath(resource));
  List<CmsResource> subFolders=getCmsObject().readResources(resource.getName(),CmsResourceFilter.ONLY_VISIBLE_NO_DELETED.addRequireFolder(),false);
  if (!subFolders.isEmpty()) {
    JSONArray subFoldersJSON=new JSONArray();
    Iterator<CmsResource> it=subFolders.iterator();
    while (it.hasNext()) {
      subFoldersJSON.put(buildJSONForVfsTreeEntry(it.next()));
    }
    result.put(VfsTreeKey.subFolders.name(),subFoldersJSON);
  }
  return result;
}
