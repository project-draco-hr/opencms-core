{
  JSONObject result=new JSONObject();
  List<I_CmsResourceType> resourceTypes=((typeIds == null) || (typeIds.length() == 0)) ? getResourceManager().getResourceTypes() : readContentTypes(typeIds);
  result.put(JsonKeys.TYPES.getName(),buildJSONForTypes(resourceTypes));
  Map<String,CmsGalleryTypeInfo> galleryTypes=readGalleryTypes(resourceTypes);
  result.put(JsonKeys.GALLERIES.getName(),buildJSONForGalleries(galleryTypes));
  List<CmsResource> galleryFolders=new ArrayList<CmsResource>();
  Iterator<Entry<String,CmsGalleryTypeInfo>> iGalleryTypes=galleryTypes.entrySet().iterator();
  while (iGalleryTypes.hasNext()) {
    galleryFolders.addAll(iGalleryTypes.next().getValue().getGalleries());
  }
  result.put(JsonKeys.CATEGORIES.getName(),buildJSONForCategories(readCategories(galleryFolders)));
  return result;
}
