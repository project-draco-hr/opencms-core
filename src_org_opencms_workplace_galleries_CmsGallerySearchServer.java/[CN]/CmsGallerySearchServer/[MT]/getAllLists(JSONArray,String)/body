{
  JSONObject result=new JSONObject();
  List<I_CmsResourceType> resourceTypes;
  if ((typeIds == null) || (typeIds.length() == 0)) {
    resourceTypes=getResourceManager().getResourceTypes();
    typeIds=new JSONArray();
    for (    I_CmsResourceType type : resourceTypes) {
      typeIds.put(type.getTypeId());
    }
  }
 else {
    resourceTypes=readContentTypes(typeIds);
  }
  result.put(JsonKeys.TYPES.getName(),buildJSONForTypes(resourceTypes));
  result.put(JsonKeys.TYPEIDS.getName(),typeIds);
  Map<String,CmsGalleryTypeInfo> galleryTypes=readGalleryTypes(resourceTypes);
  result.put(JsonKeys.GALLERIES.getName(),buildJSONForGalleries(galleryTypes));
  List<CmsResource> galleryFolders=new ArrayList<CmsResource>();
  Iterator<Entry<String,CmsGalleryTypeInfo>> iGalleryTypes=galleryTypes.entrySet().iterator();
  while (iGalleryTypes.hasNext()) {
    galleryFolders.addAll(iGalleryTypes.next().getValue().getGalleries());
  }
  result.put(JsonKeys.CATEGORIES.getName(),buildJSONForCategories(readCategories(galleryFolders)));
  return result;
}
