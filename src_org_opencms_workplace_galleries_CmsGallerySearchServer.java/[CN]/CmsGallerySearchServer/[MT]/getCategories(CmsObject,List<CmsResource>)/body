{
  CmsCategoryService catService=CmsCategoryService.getInstance();
  Iterator<CmsResource> iGalleries=galleries.iterator();
  List<String> repositories=new ArrayList<String>();
  while (iGalleries.hasNext()) {
    CmsResource res=iGalleries.next();
    repositories.addAll(catService.getCategoryRepositories(cms,cms.getSitePath(res)));
  }
  List<CmsCategory> categories=null;
  try {
    categories=catService.readCategoriesForRepositories(cms,"",true,repositories);
  }
 catch (  CmsException e) {
    LOG.error(e.getLocalizedMessage(),e);
  }
  return buildJSONForCategories(categories);
}
