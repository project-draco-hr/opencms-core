{
  JSONArray result=new JSONArray();
  if (types == null) {
    return result;
  }
  Iterator<I_CmsResourceType> it=types.iterator();
  while (it.hasNext()) {
    I_CmsResourceType type=it.next();
    CmsFormatterInfoBean formatterInfo=new CmsFormatterInfoBean(type,true);
    try {
      Locale wpLocale=getWorkplaceLocale();
      JSONObject jType=new JSONObject();
      jType.put(ItemKeys.title.toString(),CmsWorkplaceMessages.getResourceTypeName(wpLocale,type.getTypeName()));
      formatterInfo.setTitleInfo(ItemKeys.title.toString(),ItemKeys.title.toString(),CmsWorkplaceMessages.getResourceTypeName(wpLocale,type.getTypeName()));
      jType.put(ItemKeys.typeid.toString(),type.getTypeId());
      jType.put(ItemKeys.type.toString(),type.getTypeName());
      jType.put(ItemKeys.info.toString(),CmsWorkplaceMessages.getResourceTypeDescription(wpLocale,type.getTypeName()));
      formatterInfo.setSubTitleInfo(ItemKeys.info.toString(),ItemKeys.info.toString(),CmsWorkplaceMessages.getResourceTypeDescription(wpLocale,type.getTypeName()));
      String iconPath=CmsWorkplace.getResourceUri(CmsWorkplace.RES_PATH_FILETYPES + OpenCms.getWorkplaceManager().getExplorerTypeSetting(type.getTypeName()).getIcon());
      jType.put(ItemKeys.icon.toString(),iconPath);
      formatterInfo.setIcon(iconPath);
      JSONArray galleryIds=new JSONArray();
      Iterator<I_CmsResourceType> galleryTypes=type.getGalleryTypes().iterator();
      while (galleryTypes.hasNext()) {
        I_CmsResourceType galleryType=galleryTypes.next();
        galleryIds.put(galleryType.getTypeId());
      }
      jType.put(ItemKeys.gallerytypeid.toString(),galleryIds);
      jType.put(ItemKeys.itemhtml.toString(),getFormattedListContent(formatterInfo));
      result.put(jType);
    }
 catch (    Exception e) {
      if (LOG.isErrorEnabled()) {
        LOG.error(e.getLocalizedMessage(),e);
      }
    }
  }
  return result;
}
