{
  JSONArray result=new JSONArray();
  if (types == null) {
    return result;
  }
  Iterator<I_CmsResourceType> it=types.iterator();
  while (it.hasNext()) {
    I_CmsResourceType type=it.next();
    CmsFormatterInfoBean formatterInfo=new CmsFormatterInfoBean(type,true);
    try {
      JSONObject jType=new JSONObject();
      jType.put(JsonKeys.TITLE.getName(),CmsWorkplaceMessages.getResourceTypeName(m_locale,type.getTypeName()));
      formatterInfo.setTitleInfo(JsonKeys.TITLE.getName(),JsonKeys.TITLE.getName(),CmsWorkplaceMessages.getResourceTypeName(m_locale,type.getTypeName()));
      jType.put(JsonKeys.TYPEID.getName(),type.getTypeId());
      jType.put(JsonKeys.TYPE.getName(),type.getTypeName());
      jType.put(JsonKeys.INFO.getName(),CmsWorkplaceMessages.getResourceTypeDescription(m_locale,type.getTypeName()));
      formatterInfo.setSubTitleInfo(JsonKeys.INFO.getName(),JsonKeys.INFO.getName(),CmsWorkplaceMessages.getResourceTypeDescription(m_locale,type.getTypeName()));
      String iconPath=CmsWorkplace.getResourceUri(CmsWorkplace.RES_PATH_FILETYPES + OpenCms.getWorkplaceManager().getExplorerTypeSetting(type.getTypeName()).getIcon());
      jType.put(JsonKeys.ICON.getName(),iconPath);
      formatterInfo.setIcon(iconPath);
      JSONArray galleryIds=new JSONArray();
      Iterator<I_CmsResourceType> galleryTypes=type.getGalleryTypes().iterator();
      while (galleryTypes.hasNext()) {
        I_CmsResourceType galleryType=galleryTypes.next();
        galleryIds.put(galleryType.getTypeId());
      }
      jType.put(JsonKeys.GALLERYTYPEID.getName(),galleryIds);
      jType.put(JsonKeys.ITEMHTML.getName(),getFormattedListContent(formatterInfo));
      result.put(jType);
    }
 catch (    Exception e) {
      if (LOG.isErrorEnabled()) {
        LOG.error(e.getLocalizedMessage(),e);
      }
    }
  }
  return result;
}
