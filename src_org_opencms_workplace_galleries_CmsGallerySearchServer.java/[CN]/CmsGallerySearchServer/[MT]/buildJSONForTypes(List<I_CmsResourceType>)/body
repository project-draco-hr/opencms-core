{
  JSONArray result=new JSONArray();
  if (types == null) {
    return result;
  }
  Iterator<I_CmsResourceType> it=types.iterator();
  while (it.hasNext()) {
    I_CmsResourceType type=it.next();
    CmsFormatterInfoBean formatterInfo=new CmsFormatterInfoBean(type,true);
    try {
      Locale wpLocale=getWorkplaceLocale();
      JSONObject jType=new JSONObject();
      jType.put(ItemKey.title.toString(),CmsWorkplaceMessages.getResourceTypeName(wpLocale,type.getTypeName()));
      formatterInfo.setTitleInfo(ItemKey.title.toString(),ItemKey.title.toString(),CmsWorkplaceMessages.getResourceTypeName(wpLocale,type.getTypeName()));
      jType.put(ItemKey.typeid.toString(),type.getTypeId());
      jType.put(ItemKey.type.toString(),type.getTypeName());
      jType.put(ItemKey.info.toString(),CmsWorkplaceMessages.getResourceTypeDescription(wpLocale,type.getTypeName()));
      formatterInfo.setSubTitleInfo(ItemKey.info.toString(),ItemKey.info.toString(),CmsWorkplaceMessages.getResourceTypeDescription(wpLocale,type.getTypeName()));
      String iconPath=CmsWorkplace.getResourceUri(CmsWorkplace.RES_PATH_FILETYPES + OpenCms.getWorkplaceManager().getExplorerTypeSetting(type.getTypeName()).getIcon());
      jType.put(ItemKey.icon.toString(),iconPath);
      formatterInfo.setIcon(iconPath);
      JSONArray galleryIds=new JSONArray();
      Iterator<I_CmsResourceType> galleryTypes=type.getGalleryTypes().iterator();
      while (galleryTypes.hasNext()) {
        I_CmsResourceType galleryType=galleryTypes.next();
        galleryIds.put(galleryType.getTypeId());
      }
      jType.put(ItemKey.gallerytypeid.toString(),galleryIds);
      jType.put(ItemKey.itemhtml.toString(),getFormattedListContent(formatterInfo));
      result.put(jType);
    }
 catch (    Exception e) {
      if (LOG.isErrorEnabled()) {
        LOG.error(e.getLocalizedMessage(),e);
      }
    }
  }
  return result;
}
