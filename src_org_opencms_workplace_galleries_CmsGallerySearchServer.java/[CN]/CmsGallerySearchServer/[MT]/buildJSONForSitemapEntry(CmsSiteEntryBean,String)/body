{
  JSONObject result=new JSONObject();
  result.put(SitemapKey.title.name(),entry.getTitle());
  result.put(SitemapKey.sitemapUri.name(),entry.getUri());
  String iconPath=CmsWorkplace.RES_PATH_FILETYPES;
  iconPath+=OpenCms.getWorkplaceManager().getExplorerTypeSetting(m_resourceManager.getResourceType(getCmsObject().readResource(entry.getResourceId())).getTypeName()).getIcon();
  result.put(SitemapKey.icon.name(),iconPath);
  if (!entry.getSubEntries().isEmpty()) {
    result.put(SitemapKey.hasSubEntries.name(),true);
    if (targetUri.startsWith(entry.getUri(),0)) {
      JSONArray subEntries=new JSONArray();
      Iterator<CmsSiteEntryBean> it=entry.getSubEntries().iterator();
      while (it.hasNext()) {
        subEntries.put(buildJSONForSitemapEntry(it.next(),targetUri));
      }
      result.put(SitemapKey.subEntries.name(),subEntries);
    }
  }
  return result;
}
