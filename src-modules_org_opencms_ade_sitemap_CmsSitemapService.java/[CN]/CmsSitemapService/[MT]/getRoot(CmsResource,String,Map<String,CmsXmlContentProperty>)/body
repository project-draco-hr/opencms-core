{
  CmsObject cms=getCmsObject();
  CmsXmlSitemap xml=CmsXmlSitemapFactory.unmarshal(cms,sitemapRes);
  CmsSitemapBean sitemap=xml.getSitemap(cms,cms.getRequestContext().getLocale());
  if (parent == null) {
    CmsClientSitemapEntry root=toClientEntry(sitemap.getSiteEntries().get(0),propertyConfig);
    root.setSubEntries(getChildren(root.getSitePath(),2,propertyConfig));
    return root;
  }
 else {
    String entryPoint=xml.getEntryPoint(cms);
    CmsInternalSitemapEntry referencingEntry=(CmsInternalSitemapEntry)OpenCms.getSitemapManager().getEntryForUri(cms,entryPoint);
    CmsClientSitemapEntry root=createDummySubSitemapRoot(referencingEntry,propertyConfig);
    for (    CmsInternalSitemapEntry topLevelEntry : sitemap.getSiteEntries()) {
      root.addSubEntry(toClientEntry(topLevelEntry,propertyConfig));
    }
    return root;
  }
}
