{
  CmsObject cms=getCmsObject();
  List<I_CmsSitemapChange> changes=new ArrayList<I_CmsSitemapChange>();
  for (  CmsInternalSitemapEntry entry : getDescendants(rootEntry)) {
    CmsResource childRes=cms.readResource(entry.getResourceId());
    CmsSitemapChangeNew newChildChange=new CmsSitemapChangeNew(entry.getSitePath(cms),entry.getPosition(),entry.getTitle(),cms.getSitePath(childRes),entry.getProperties(),entry.getId());
    changes.add(newChildChange);
  }
  CmsResource resource=cms.readResource(rootEntry.getResourceId());
  Map<String,String> newProps=new HashMap<String,String>(rootEntry.getProperties());
  newProps.remove(CmsSitemapManager.Property.sitemap.name());
  CmsSitemapChangeEdit editParentChange=new CmsSitemapChangeEdit(rootEntry.getSitePath(getCmsObject()),rootEntry.getTitle(),cms.getSitePath(resource),newProps);
  changes.add(editParentChange);
  return changes;
}
