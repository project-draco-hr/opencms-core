{
  CmsSitemapData result=null;
  CmsObject cms=getCmsObject();
  try {
    CmsResource sitemap=cms.readResource(sitemapUri);
    Map<String,CmsXmlContentProperty> propertyConfig=OpenCms.getSitemapManager().getElementPropertyConfiguration(cms,sitemap,true);
    I_CmsXmlContentHandler contentHandler=CmsXmlContentDefinition.getContentHandlerForResource(cms,sitemap);
    CmsMacroResolver resolver=CmsXmlContentPropertyHelper.getMacroResolverForProperties(cms,contentHandler);
    Map<String,CmsXmlContentProperty> resolvedProps=CmsXmlContentPropertyHelper.resolveMacrosInProperties(propertyConfig,resolver);
    String parentSitemap=OpenCms.getSitemapManager().getParentSitemap(cms,sitemapUri);
    String openPath=getRequest().getParameter("path");
    CmsSitemapEntry entry=OpenCms.getSitemapManager().getParentEntryOfSitemap(cms,sitemapUri);
    Map<String,CmsComputedPropertyValue> parentProperties=new HashMap<String,CmsComputedPropertyValue>();
    if (entry != null) {
      parentProperties=entry.getComputedProperties();
    }
    result=new CmsSitemapData(getDefaultTemplate(sitemapUri),getTemplates(),resolvedProps,getClipboardData(),parentProperties,getNoEditReason(cms,getRequest()),isDisplayToolbar(getRequest()),OpenCms.getResourceManager().getResourceType(CmsResourceTypeXmlContainerPage.getStaticTypeName()).getTypeId(),parentSitemap,getRoot(sitemap,parentSitemap,openPath,propertyConfig),sitemap.getDateLastModified(),openPath);
  }
 catch (  Throwable e) {
    error(e);
  }
  return result;
}
