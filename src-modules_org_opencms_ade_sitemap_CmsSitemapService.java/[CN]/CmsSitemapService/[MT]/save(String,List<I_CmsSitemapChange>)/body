{
  long timestamp=0;
  CmsObject cms=getCmsObject();
  try {
    CmsResource sitemap=cms.readResource(sitemapUri);
    CmsXmlSitemap xml=CmsXmlSitemapFactory.unmarshal(cms,sitemap);
    xml.applyChanges(cms,changes);
    xml.getFile().setContents(xml.marshal());
    cms.writeFile(xml.getFile());
    cms.unlockResource(sitemapUri);
    timestamp=cms.readResource(sitemap.getStructureId()).getDateLastModified();
  }
 catch (  Throwable e) {
    error(e);
  }
  return timestamp;
}
