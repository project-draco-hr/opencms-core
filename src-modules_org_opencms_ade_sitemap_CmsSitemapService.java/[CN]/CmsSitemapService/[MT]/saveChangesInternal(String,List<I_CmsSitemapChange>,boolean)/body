{
  long timestamp=0;
  CmsObject cms=getCmsObject();
  CmsResource sitemap=cms.readResource(sitemapUri);
  CmsXmlSitemap xml=CmsXmlSitemapFactory.unmarshal(cms,sitemap);
  xml.applyChanges(cms,changes,getRequest());
  xml.getFile().setContents(xml.marshal());
  cms.writeFile(xml.getFile());
  if (unlockAfterSave) {
    cms.unlockResource(sitemapUri);
  }
  timestamp=cms.readResource(sitemap.getStructureId()).getDateLastModified();
  return timestamp;
}
