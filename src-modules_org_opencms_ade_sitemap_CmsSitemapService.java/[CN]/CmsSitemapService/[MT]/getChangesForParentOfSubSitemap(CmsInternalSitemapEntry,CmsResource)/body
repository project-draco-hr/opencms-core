{
  CmsObject cms=getCmsObject();
  List<I_CmsSitemapChange> result=new ArrayList<I_CmsSitemapChange>();
  for (  CmsInternalSitemapEntry childEntry : entry.getSubEntries()) {
    result.add(new CmsSitemapChangeDelete(childEntry.getSitePath(cms)));
  }
  Map<String,CmsSimplePropertyValue> newProps=new HashMap<String,CmsSimplePropertyValue>(entry.getNewProperties());
  String sitemapId=subSitemapRes.getStructureId().toString();
  CmsSimplePropertyValue sitemapProp=new CmsSimplePropertyValue(sitemapId,sitemapId);
  newProps.put(CmsSitemapManager.Property.sitemap.getName(),sitemapProp);
  CmsResource originalResource=cms.readResource(entry.getStructureId());
  String originalVfsPath=cms.getRequestContext().removeSiteRoot(originalResource.getRootPath());
  result.add(new CmsSitemapChangeEdit(entry.getSitePath(getCmsObject()),entry.getTitle(),originalVfsPath,newProps));
  return result;
}
