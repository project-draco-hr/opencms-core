{
  try {
    CmsObject cms=getCmsObject();
    List<CmsInternalSitemapEntry> entries=getEntriesForIds(cms,open);
    List<CmsInternalSitemapEntry> closedEntries=getEntriesForIds(cms,closed);
    CmsSitemapManager sitemapManager=OpenCms.getSitemapManager();
    List<CmsInternalSitemapEntry> descendants=sitemapManager.getDescendants(closedEntries,true);
    entries.addAll(descendants);
    @SuppressWarnings("rawtypes") MultiValueMap linkMap=MultiValueMap.decorate(new HashMap(),FactoryUtils.instantiateFactory(HashSet.class));
    for (    CmsInternalSitemapEntry entry : entries) {
      List<CmsResource> linkSources=getLinkSources(cms,entry.getId());
      for (      CmsResource source : linkSources) {
        linkMap.put(entry,source);
      }
    }
    return getBrokenLinkBeans(linkMap);
  }
 catch (  Throwable e) {
    error(e);
  }
  return null;
}
