{
  if (OpenCms.isLogging(CmsLog.CHANNEL_INIT,CmsLog.LEVEL_INFO)) {
    OpenCms.log(CmsLog.CHANNEL_INIT,CmsLog.LEVEL_INFO,". Site roots configured: " + (siteRoots.length + ((siteDefault != null) ? 1 : 0)));
  }
  m_sites=new HashMap(siteRoots.length);
  for (int i=0; i < siteRoots.length; i++) {
    int pos=siteRoots[i].indexOf('|');
    if (pos < 0) {
      if (OpenCms.isLogging(CmsLog.CHANNEL_MAIN,CmsLog.LEVEL_ERROR)) {
        OpenCms.log(CmsLog.CHANNEL_MAIN,CmsLog.LEVEL_ERROR,". Site root init error : malformed entry " + siteRoots[i]);
      }
      continue;
    }
    String matcherStr=siteRoots[i].substring(0,pos);
    String rootStr=siteRoots[i].substring(pos + 1);
    if ((matcherStr.length() == 0) || (rootStr.length() == 0)) {
      if (OpenCms.isLogging(CmsLog.CHANNEL_MAIN,CmsLog.LEVEL_ERROR)) {
        OpenCms.log(CmsLog.CHANNEL_MAIN,CmsLog.LEVEL_ERROR,". Site root init error : malformed entry " + siteRoots[i]);
      }
      continue;
    }
    CmsSiteMatcher matcher=new CmsSiteMatcher(matcherStr);
    CmsSite site=new CmsSite(rootStr,matcher);
    m_sites.put(matcher,site);
    if (OpenCms.isLogging(CmsLog.CHANNEL_INIT,CmsLog.LEVEL_INFO)) {
      OpenCms.log(CmsLog.CHANNEL_INIT,CmsLog.LEVEL_INFO,". Site root added      : " + site.toString());
    }
  }
  if ((siteDefault == null) || "".equals(siteDefault.trim())) {
    m_defaultSite=null;
  }
 else {
    m_defaultSite=new CmsSite(siteDefault,CmsSiteMatcher.C_DEFAULT_MATCHER);
  }
  if (OpenCms.isLogging(CmsLog.CHANNEL_INIT,CmsLog.LEVEL_INFO)) {
    OpenCms.log(CmsLog.CHANNEL_INIT,CmsLog.LEVEL_INFO,". Site root default    : " + m_defaultSite);
  }
}
