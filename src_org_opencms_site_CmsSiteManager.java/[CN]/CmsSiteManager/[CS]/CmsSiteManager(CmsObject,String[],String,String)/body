{
  if (OpenCms.getLog(CmsLog.CHANNEL_INIT).isInfoEnabled()) {
    OpenCms.getLog(CmsLog.CHANNEL_INIT).info(". Site roots configured: " + (siteRoots.length + ((siteDefault != null) ? 1 : 0)));
  }
  m_sites=new HashMap(siteRoots.length);
  for (int i=0; i < siteRoots.length; i++) {
    CmsSite site=parseSite(siteRoots[i]);
    if (site != null) {
      try {
        cms.readFileHeader(site.getSiteRoot());
      }
 catch (      Throwable t) {
        if (OpenCms.getLog(this).isErrorEnabled()) {
          OpenCms.getLog(this).error("Error initializing site " + site + " (ignoring this site entry)",t);
        }
      }
      m_sites.put(site.getSiteMatcher(),site);
      if (OpenCms.getLog(CmsLog.CHANNEL_INIT).isInfoEnabled()) {
        OpenCms.getLog(CmsLog.CHANNEL_INIT).info(". Site root added      : " + site.toString());
      }
    }
  }
  if ((siteDefault == null) || "".equals(siteDefault.trim())) {
    m_defaultSite=null;
  }
 else {
    m_defaultSite=new CmsSite(siteDefault,CmsSiteMatcher.C_DEFAULT_MATCHER);
    try {
      cms.readFileHeader(m_defaultSite.getSiteRoot());
    }
 catch (    Throwable t) {
      if (OpenCms.getLog(this).isErrorEnabled()) {
        OpenCms.getLog(this).error("Error initializing default site " + m_defaultSite + " (setting default site to '/')",t);
      }
    }
  }
  if (m_defaultSite == null) {
    m_defaultSite=new CmsSite("/",CmsSiteMatcher.C_DEFAULT_MATCHER);
  }
  if (OpenCms.getLog(CmsLog.CHANNEL_INIT).isInfoEnabled()) {
    OpenCms.getLog(CmsLog.CHANNEL_INIT).info(". Site root default    : " + (m_defaultSite != null ? "" + m_defaultSite : "(not configured)"));
  }
  m_workplaceSite=new CmsSiteMatcher(siteWorkplace);
  if (OpenCms.getLog(CmsLog.CHANNEL_INIT).isInfoEnabled()) {
    OpenCms.getLog(CmsLog.CHANNEL_INIT).info(". Site of workplace    : " + (m_workplaceSite != null ? "" + m_workplaceSite : "(not configured)"));
  }
}
