{
  if (CmsLog.LOG.isInfoEnabled()) {
    CmsLog.LOG.info(Messages.get().key(Messages.INIT_NUM_SITE_ROOTS_CONFIGURED_1,new Integer((m_sites.size() + ((m_defaultUri != null) ? 1 : 0)))));
  }
  Iterator i=m_sites.values().iterator();
  while (i.hasNext()) {
    CmsSite site=(CmsSite)i.next();
    if (site != null) {
      try {
        cms.readResource(site.getSiteRoot());
      }
 catch (      Throwable t) {
        if (CmsLog.LOG.isWarnEnabled()) {
          CmsLog.LOG.warn(Messages.get().key(Messages.INIT_NO_ROOT_FOLDER_1,site));
        }
      }
    }
  }
  if ((m_defaultUri == null) || "".equals(m_defaultUri.trim())) {
    m_defaultSite=null;
  }
 else {
    m_defaultSite=new CmsSite(m_defaultUri,CmsSiteMatcher.C_DEFAULT_MATCHER);
    try {
      cms.readResource(m_defaultSite.getSiteRoot());
    }
 catch (    Throwable t) {
      if (CmsLog.LOG.isWarnEnabled()) {
        CmsLog.LOG.warn(Messages.get().key(Messages.INIT_NO_ROOT_FOLDER_DEFAULT_SITE_1,m_defaultSite));
      }
    }
  }
  if (m_defaultSite == null) {
    m_defaultSite=new CmsSite("/",CmsSiteMatcher.C_DEFAULT_MATCHER);
  }
  if (CmsLog.LOG.isInfoEnabled()) {
    CmsLog.LOG.info(Messages.get().key(Messages.INIT_DEFAULT_SITE_ROOT_1,(m_defaultSite != null ? "" + m_defaultSite : "(not configured)")));
  }
  m_workplaceSiteMatcher=new CmsSiteMatcher(m_workplaceServer);
  if (CmsLog.LOG.isInfoEnabled()) {
    CmsLog.LOG.info(Messages.get().key(Messages.INIT_WORKPLACE_SITE_1,(m_workplaceSiteMatcher != null ? "" + m_workplaceSiteMatcher : "(not configured)")));
  }
  m_sites=Collections.unmodifiableMap(m_sites);
  m_siteRoots=Collections.unmodifiableSet(m_siteRoots);
  m_frozen=true;
}
