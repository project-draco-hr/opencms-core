{
  if (OpenCms.getLog(CmsLog.CHANNEL_INIT).isInfoEnabled()) {
    OpenCms.getLog(CmsLog.CHANNEL_INIT).info(". Site roots configured: " + (m_sites.size() + ((m_defaultUri != null) ? 1 : 0)));
  }
  Iterator i=m_sites.values().iterator();
  while (i.hasNext()) {
    CmsSite site=(CmsSite)i.next();
    if (site != null) {
      try {
        cms.readResource(site.getSiteRoot());
      }
 catch (      Throwable t) {
        if (OpenCms.getLog(CmsLog.CHANNEL_INIT).isWarnEnabled()) {
          OpenCms.getLog(CmsLog.CHANNEL_INIT).warn("Root folder for site " + site + " does not exist (ignoring this site entry)");
        }
      }
    }
  }
  if ((m_defaultUri == null) || "".equals(m_defaultUri.trim())) {
    m_defaultSite=null;
  }
 else {
    m_defaultSite=new CmsSite(m_defaultUri,CmsSiteMatcher.C_DEFAULT_MATCHER);
    try {
      cms.readResource(m_defaultSite.getSiteRoot());
    }
 catch (    Throwable t) {
      if (OpenCms.getLog(CmsLog.CHANNEL_INIT).isWarnEnabled()) {
        OpenCms.getLog(CmsLog.CHANNEL_INIT).warn("Root folder for default site " + m_defaultSite + " does not exist (setting default site root to '/')");
      }
    }
  }
  if (m_defaultSite == null) {
    m_defaultSite=new CmsSite("/",CmsSiteMatcher.C_DEFAULT_MATCHER);
  }
  if (OpenCms.getLog(CmsLog.CHANNEL_INIT).isInfoEnabled()) {
    OpenCms.getLog(CmsLog.CHANNEL_INIT).info(". Site root default    : " + (m_defaultSite != null ? "" + m_defaultSite : "(not configured)"));
  }
  m_workplaceSiteMatcher=new CmsSiteMatcher(m_workplaceServer);
  if (OpenCms.getLog(CmsLog.CHANNEL_INIT).isInfoEnabled()) {
    OpenCms.getLog(CmsLog.CHANNEL_INIT).info(". Site of workplace    : " + (m_workplaceSiteMatcher != null ? "" + m_workplaceSiteMatcher : "(not configured)"));
  }
  m_sites=Collections.unmodifiableMap(m_sites);
  m_siteRoots=Collections.unmodifiableSet(m_siteRoots);
  m_frozen=true;
}
