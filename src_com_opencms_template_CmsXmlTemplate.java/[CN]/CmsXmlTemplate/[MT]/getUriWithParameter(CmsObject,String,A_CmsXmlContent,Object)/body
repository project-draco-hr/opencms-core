{
  String query=new String();
  try {
    Enumeration parameters=null;
    if (cms.getMode() == CmsObject.C_MODUS_EXPORT) {
      parameters=cms.getRequestContext().getRequest().getParameterNames();
    }
 else {
      parameters=((HttpServletRequest)cms.getRequestContext().getRequest().getOriginalRequest()).getParameterNames();
    }
    StringBuffer paramQuery=new StringBuffer();
    while (parameters.hasMoreElements()) {
      String name=(String)parameters.nextElement();
      String value=(String)((Hashtable)userObject).get(name);
      if (value != null && !"".equals(value)) {
        paramQuery.append(name + "=" + value+ "&");
      }
    }
    if (paramQuery.length() > 0) {
      query=paramQuery.substring(0,paramQuery.length() - 1).toString();
    }
  }
 catch (  Exception exc) {
    exc.printStackTrace();
  }
  if ((tagcontent != null) && (!"".equals(tagcontent))) {
    if (tagcontent.startsWith("?")) {
      tagcontent=tagcontent.substring(1);
    }
    query=tagcontent + "&" + query;
  }
  return getUri(cms,query,doc,userObject);
}
