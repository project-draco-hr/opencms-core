{
  String result=null;
  try {
    result=xmlTemplateDocument.getProcessedTemplateContent(this,parameters,templateSelector);
  }
 catch (  Throwable e) {
    xmlTemplateDocument.removeFromFileCache();
    if (isCacheable(cms,xmlTemplateDocument.getAbsoluteFilename(),elementName,parameters,templateSelector)) {
      m_cache.clearCache(getKey(cms,xmlTemplateDocument.getAbsoluteFilename(),parameters,templateSelector));
    }
    if (e instanceof CmsException) {
      throw (CmsException)e;
    }
 else {
      String errorMessage="Exception while getting content for (sub)template " + elementName + ". "+ e;
      if (A_OpenCms.isLogging()) {
        A_OpenCms.log(C_OPENCMS_CRITICAL,getClassName() + errorMessage);
      }
      throw new CmsException(errorMessage);
    }
  }
  return result.getBytes();
}
