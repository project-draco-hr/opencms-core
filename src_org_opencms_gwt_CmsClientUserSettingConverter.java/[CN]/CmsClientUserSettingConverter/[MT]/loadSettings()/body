{
  CmsUserSettingsBean result=new CmsUserSettingsBean();
  CmsDefaultUserSettings currentSettings=new CmsDefaultUserSettings();
  currentSettings.init(m_preferences.getUserSettings().getUser());
  for (  I_CmsPreference pref : OpenCms.getWorkplaceManager().getDefaultUserSettings().getPreferences().values()) {
    String tab=pref.getTab();
    if ("hidden".equals(tab)) {
      continue;
    }
    CmsXmlContentProperty prop2=pref.getPropertyDefinition(m_cms);
    String value=pref.getValue(currentSettings);
    CmsXmlContentProperty resolvedProp=CmsXmlContentPropertyHelper.resolveMacrosInProperty(prop2.withDefaultWidget("string"),m_macroResolver);
    result.addSetting(value,resolvedProp,"basic".equals(tab));
  }
  addAccountInfo(result);
  return result;
}
