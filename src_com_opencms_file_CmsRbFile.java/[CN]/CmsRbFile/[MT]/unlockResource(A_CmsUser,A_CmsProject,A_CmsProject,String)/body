{
  CmsResource resource=null;
  if (resourcename.endsWith("/")) {
    resource=readFolder(project,resourcename);
  }
 else {
    resource=(CmsFile)readFileHeader(project,resourcename);
  }
  if (resource.isLocked()) {
    if (resource.isLockedBy() == user.getId()) {
      resource.setLocked(C_UNKNOWN_ID);
      if (resourcename.endsWith("/")) {
        writeFolder(project,(CmsFolder)resource);
      }
 else {
        writeFileHeader(project,onlineProject,(CmsFile)resource,false);
      }
    }
 else {
      throw new CmsException("[" + this.getClass().getName() + "] "+ resourcename+ CmsException.C_NO_ACCESS);
    }
  }
}
