{
  CmsResource resource=null;
  if (resourcename.endsWith("/")) {
    resource=readFolder(project,resourcename);
  }
 else {
    resource=(CmsFile)readFileHeader(project,resourcename);
  }
  if (resource.isLocked()) {
    if (force == false) {
      throw new CmsException(CmsException.C_LOCKED);
    }
  }
  resource.setLocked(user.getId());
  if (resourcename.endsWith("/")) {
    writeFolder(project,(CmsFolder)resource,false);
  }
 else {
    writeFileHeader(project,onlineProject,(CmsFile)resource,false);
  }
}
