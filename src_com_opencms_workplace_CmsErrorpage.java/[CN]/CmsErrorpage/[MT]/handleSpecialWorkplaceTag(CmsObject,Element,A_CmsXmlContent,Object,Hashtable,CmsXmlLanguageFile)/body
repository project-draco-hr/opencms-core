{
  String errorTitle=n.getAttribute(C_ERROR_TITLE);
  String errorMessage=n.getAttribute(C_ERROR_MESSAGE);
  String errorReason=n.getAttribute(C_ERROR_REASON);
  String errorSuggestion=n.getAttribute(C_ERROR_SUGGESTION);
  String errorLink=n.getAttribute(C_ERROR_LINK);
  String details="no details";
  if (n.hasChildNodes()) {
    details=n.getFirstChild().getNodeValue();
  }
  NodeList nlist=n.getChildNodes();
  if (nlist.getLength() > 1) {
    String theLasturl=nlist.item(1).getNodeValue();
    if (theLasturl != null && !"".equals(theLasturl.trim())) {
      errorLink=theLasturl;
    }
  }
  String reason;
  String button;
  CmsXmlWpTemplateFile errordef=getErrorDefinitions(cms);
  CmsXmlWpConfigFile confFile=new CmsXmlWpConfigFile(cms);
  errorTitle=lang.getLanguageValue(errorTitle);
  errorMessage=lang.getLanguageValue(errorMessage);
  errorReason=lang.getLanguageValue(errorReason);
  errorSuggestion=lang.getLanguageValue(errorSuggestion);
  reason=lang.getLanguageValue("message.reason");
  button=lang.getLanguageValue("button.ok");
  String servletPath=cms.getRequestContext().getRequest().getServletUrl();
  errordef.setData("stylesheetpath",cms.getRequestContext().getRequest().getServletUrl() + "/system/workplace/css/");
  errordef.setData("jspath",cms.getRequestContext().getRequest().getServletUrl() + "/system/workplace/templates/js/");
  errordef.setData(C_ERROR_MSG_BUTTON,button);
  errordef.setData(C_ERROR_TITLE,errorTitle);
  errordef.setData(C_ERROR_MESSAGE,errorMessage);
  errordef.setData(C_ERROR_REASON,errorReason);
  errordef.setData(C_ERROR_SUGGESTION,errorSuggestion);
  errordef.setData(C_ERROR_LINK,errorLink);
  errordef.setData(C_ERROR_MSG_REASON,reason);
  errordef.setData(C_ERROR_MSG_DETAILS,details);
  String result=errordef.getProcessedDataValue(C_TAG_ERRORPAGE,callingObject,null);
  return result;
}
