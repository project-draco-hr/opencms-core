{
  int size=m_foldersEqualnames.size();
  if (size > 0) {
    m_report.println(m_report.key("report.mergepages.mergepages"),I_CmsReport.C_FORMAT_HEADLINE);
    String defaultLocale=OpenCms.getLocaleManager().getDefaultLocale().toString();
    String locale2=m_cms.readPropertyObject(getParamFolder2(),"locale",true).getValue(defaultLocale);
    m_report.print(m_report.key("report.mergepages.lock") + getParamFolder1(),I_CmsReport.C_FORMAT_NOTE);
    m_report.print(m_report.key("report.dots"),I_CmsReport.C_FORMAT_NOTE);
    m_cms.lockResource(getParamFolder1());
    m_report.println(m_report.key("report.ok"),I_CmsReport.C_FORMAT_OK);
    m_report.print(m_report.key("report.mergepages.lock") + getParamFolder2(),I_CmsReport.C_FORMAT_NOTE);
    m_report.print(m_report.key("report.dots"),I_CmsReport.C_FORMAT_NOTE);
    m_cms.lockResource(getParamFolder2());
    m_report.println(m_report.key("report.ok"),I_CmsReport.C_FORMAT_OK);
    m_report.print(size + " " + m_report.key("report.mergepages.pages"),I_CmsReport.C_FORMAT_HEADLINE);
    m_report.println(m_report.key("report.dots"),I_CmsReport.C_FORMAT_HEADLINE);
    int count=1;
    Iterator i=m_foldersEqualnames.iterator();
    while (i.hasNext()) {
      String resFolder1Name=(String)i.next();
      try {
        String resFolder2Name=getResourceNameInOtherFolder(resFolder1Name,getParamFolder1(),getParamFolder2());
        m_report.print("( " + count++ + " / "+ size+ " ) "+ m_report.key("report.mergepages.scanning")+ " "+ resFolder1Name+ " <-> "+ resFolder2Name,I_CmsReport.C_FORMAT_NOTE);
        m_report.println(m_report.key("report.dots"),I_CmsReport.C_FORMAT_NOTE);
        String locale=m_cms.readPropertyObject(resFolder1Name,"locale",true).getValue(defaultLocale);
        m_report.print(m_report.key("report.mergepages.readcontent") + " " + resFolder1Name+ ": Locale = "+ locale,I_CmsReport.C_FORMAT_NOTE);
        m_report.print(m_report.key("report.dots"),I_CmsReport.C_FORMAT_NOTE);
        CmsResource resFolder1=m_cms.readResource(resFolder1Name,CmsResourceFilter.IGNORE_EXPIRATION);
        CmsFile fileFolder1=CmsFile.upgrade(resFolder1,m_cms);
        CmsXmlPage pageFolder1=CmsXmlPageFactory.unmarshal(m_cms,fileFolder1);
        m_report.println(m_report.key("report.ok"),I_CmsReport.C_FORMAT_OK);
        locale=m_cms.readPropertyObject(resFolder2Name,"locale",true).getValue(defaultLocale);
        m_report.print(m_report.key("report.mergepages.readcontent") + " " + resFolder2Name+ ": Locale = "+ locale,I_CmsReport.C_FORMAT_NOTE);
        m_report.print(m_report.key("report.dots"),I_CmsReport.C_FORMAT_NOTE);
        CmsResource resFolder2=m_cms.readResource(resFolder2Name,CmsResourceFilter.IGNORE_EXPIRATION);
        CmsFile fileFolder2=CmsFile.upgrade(resFolder2,m_cms);
        CmsXmlPage pageFolder2=CmsXmlPageFactory.unmarshal(m_cms,fileFolder2);
        m_report.println(m_report.key("report.ok"),I_CmsReport.C_FORMAT_OK);
        Locale loc=new Locale(locale2);
        List textElements2=pageFolder2.getNames(loc);
        Iterator j=textElements2.iterator();
        while (j.hasNext()) {
          String textElementName=(String)j.next();
          m_report.print(m_report.key("report.mergepages.gettextelement") + " " + textElementName,I_CmsReport.C_FORMAT_NOTE);
          m_report.print(m_report.key("report.dots"),I_CmsReport.C_FORMAT_NOTE);
          String textElement=pageFolder2.getValue(textElementName,loc).getStringValue(m_cms);
          if (!pageFolder1.hasValue(textElementName,loc)) {
            pageFolder1.addValue(textElementName,loc);
          }
          pageFolder1.setStringValue(m_cms,textElementName,loc,textElement);
          m_report.println(m_report.key("report.ok"),I_CmsReport.C_FORMAT_OK);
        }
        m_report.print(m_report.key("report.mergepages.writecontent") + " " + resFolder1Name,I_CmsReport.C_FORMAT_NOTE);
        m_report.print(m_report.key("report.dots"),I_CmsReport.C_FORMAT_NOTE);
        fileFolder1.setContents(pageFolder1.marshal());
        m_cms.writeFile(fileFolder1);
        m_report.println(m_report.key("report.ok"),I_CmsReport.C_FORMAT_OK);
        m_report.print(m_report.key("report.mergepages.saveproperties") + " " + resFolder2Name,I_CmsReport.C_FORMAT_NOTE);
        m_report.print(m_report.key("report.dots"),I_CmsReport.C_FORMAT_NOTE);
        List properties=m_cms.readPropertyObjects(resFolder2Name,false);
        m_report.print(m_report.key("report.mergepages.deletefile") + " " + resFolder2Name,I_CmsReport.C_FORMAT_NOTE);
        m_report.print(m_report.key("report.dots"),I_CmsReport.C_FORMAT_NOTE);
        m_cms.deleteResource(resFolder2Name,I_CmsConstants.C_DELETE_OPTION_PRESERVE_SIBLINGS);
        m_report.println(m_report.key("report.ok"),I_CmsReport.C_FORMAT_OK);
        m_report.print(m_report.key("report.mergepages.copyfile") + " " + resFolder1Name+ " -> "+ resFolder2Name,I_CmsReport.C_FORMAT_NOTE);
        m_report.print(m_report.key("report.dots"),I_CmsReport.C_FORMAT_NOTE);
        m_cms.copyResource(resFolder1Name,resFolder2Name,I_CmsConstants.C_COPY_AS_SIBLING);
        m_report.print(m_report.key("report.mergepages.restoreproperties") + " " + resFolder2Name,I_CmsReport.C_FORMAT_NOTE);
        m_report.print(m_report.key("report.dots"),I_CmsReport.C_FORMAT_NOTE);
        m_cms.writePropertyObjects(resFolder2Name,properties);
        m_report.println(m_report.key("report.ok"),I_CmsReport.C_FORMAT_OK);
        resFolder1=null;
        resFolder2=null;
        fileFolder1=null;
        fileFolder2=null;
        pageFolder1=null;
        pageFolder2=null;
      }
 catch (      CmsException e) {
        m_report.println(e.toString(),I_CmsReport.C_FORMAT_ERROR);
      }
    }
    m_report.print(m_report.key("report.mergepages.unlock") + getParamFolder1(),I_CmsReport.C_FORMAT_NOTE);
    m_report.print(m_report.key("report.dots"),I_CmsReport.C_FORMAT_NOTE);
    m_cms.unlockResource(getParamFolder1());
    m_report.println(m_report.key("report.ok"),I_CmsReport.C_FORMAT_OK);
    m_report.print(m_report.key("report.mergepages.unlock") + getParamFolder2(),I_CmsReport.C_FORMAT_NOTE);
    m_report.print(m_report.key("report.dots"),I_CmsReport.C_FORMAT_NOTE);
    m_cms.unlockResource(getParamFolder2());
    m_report.println(m_report.key("report.ok"),I_CmsReport.C_FORMAT_OK);
    m_report.print(m_report.key("report.dots"),I_CmsReport.C_FORMAT_HEADLINE);
    m_report.println(m_report.key("report.mergepages.done"),I_CmsReport.C_FORMAT_HEADLINE);
  }
}
