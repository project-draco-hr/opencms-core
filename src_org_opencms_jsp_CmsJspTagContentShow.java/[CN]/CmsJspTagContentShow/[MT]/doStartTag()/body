{
  CmsFlexController controller=(CmsFlexController)pageContext.getRequest().getAttribute(CmsFlexController.ATTRIBUTE_NAME);
  CmsObject cms=controller.getCmsObject();
  Tag ancestor=findAncestorWithClass(this,I_CmsJspTagContentContainer.class);
  if (ancestor == null) {
    CmsMessageContainer errMsgContainer=Messages.get().container(Messages.ERR_TAG_CONTENTSHOW_WRONG_PARENT_0);
    String msg=Messages.getLocalizedMessage(errMsgContainer,pageContext);
    throw new JspTagException(msg);
  }
  I_CmsJspTagContentContainer contentContainer=(I_CmsJspTagContentContainer)ancestor;
  A_CmsXmlDocument xmlContent=contentContainer.getXmlDocument();
  Locale locale=contentContainer.getXmlDocumentLocale();
  String element=getElement();
  if (CmsStringUtil.isEmpty(element)) {
    element=contentContainer.getXmlDocumentElement();
  }
 else {
    element=CmsXmlUtils.concatXpath(contentContainer.getXmlDocumentElement(),element);
  }
  String content;
  if (CmsMacroResolver.isMacro(element)) {
    String resourcename=CmsJspTagContentLoad.getResourceName(cms,contentContainer);
    CmsMacroResolver resolver=CmsMacroResolver.newInstance().setCmsObject(cms).setJspPageContext(pageContext).setResourceName(resourcename).setKeepEmptyMacros(true);
    content=resolver.resolveMacros(element);
  }
 else   if (xmlContent == null) {
    content=null;
  }
 else {
    content=contentShowTagAction(xmlContent,element,locale,pageContext.getRequest());
    if (content == null) {
      content=CmsMessages.formatUnknownKey(element);
    }
  }
  try {
    if (content != null) {
      pageContext.getOut().print(content);
    }
  }
 catch (  IOException e) {
    if (OpenCms.getLog(this).isErrorEnabled()) {
      LOG.error(Messages.get().key(Messages.LOG_ERR_JSP_BEAN_0),e);
    }
    throw new JspException(e);
  }
  return SKIP_BODY;
}
