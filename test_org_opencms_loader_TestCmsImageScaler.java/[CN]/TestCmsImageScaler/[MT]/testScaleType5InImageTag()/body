{
  CmsImageScaler baseImage;
  CmsImageScaler rescaler;
  CmsImageScaler resultScaler;
  baseImage=new CmsImageScaler("w:250,h:250");
  rescaler=new CmsImageScaler();
  rescaler.setWidth(100);
  rescaler.setHeight(100);
  rescaler.setMaxHeight(150);
  rescaler.setMaxWidth(150);
  rescaler.setType(5);
  resultScaler=CmsJspTagImage.getScaler(rescaler,baseImage,null);
  assertEquals(100,resultScaler.getWidth());
  assertEquals(100,resultScaler.getHeight());
  assertEquals(5,resultScaler.getType());
  resultScaler=CmsJspTagImage.getScaler(rescaler,baseImage,"cw:175,ch:175,cx:25,cy:25");
  assertEquals(100,resultScaler.getWidth());
  assertEquals(100,resultScaler.getHeight());
  assertTrue(resultScaler.isCropping());
  assertEquals(5,resultScaler.getType());
  resultScaler=CmsJspTagImage.getScaler(rescaler,baseImage,"cw:200,ch:50,cx:25,cy:25");
  assertEquals(150,resultScaler.getWidth());
  assertEquals(38,resultScaler.getHeight());
  assertTrue(resultScaler.isCropping());
  assertEquals(5,resultScaler.getType());
  resultScaler=CmsJspTagImage.getScaler(rescaler,baseImage,"h:250,w:250,cw:200,ch:50,cx:25,cy:25");
  assertEquals(150,resultScaler.getWidth());
  assertEquals(38,resultScaler.getHeight());
  assertTrue(resultScaler.isCropping());
  assertEquals(5,resultScaler.getType());
  resultScaler=CmsJspTagImage.getScaler(rescaler,baseImage,"h:999,w:999,cw:50,ch:200,cx:25,cy:25");
  assertEquals(38,resultScaler.getWidth());
  assertEquals(150,resultScaler.getHeight());
  assertTrue(resultScaler.isCropping());
  assertEquals(5,resultScaler.getType());
  resultScaler=CmsJspTagImage.getScaler(rescaler,baseImage,"cw:50,ch:75,cx:25,cy:25");
  assertEquals(50,resultScaler.getWidth());
  assertEquals(75,resultScaler.getHeight());
  assertTrue(resultScaler.isCropping());
  assertEquals(5,resultScaler.getType());
  resultScaler=CmsJspTagImage.getScaler(rescaler,baseImage,"cw:150,ch:100,cx:25,cy:25");
  assertEquals(150,resultScaler.getWidth());
  assertEquals(100,resultScaler.getHeight());
  assertTrue(resultScaler.isCropping());
  assertEquals(5,resultScaler.getType());
}
