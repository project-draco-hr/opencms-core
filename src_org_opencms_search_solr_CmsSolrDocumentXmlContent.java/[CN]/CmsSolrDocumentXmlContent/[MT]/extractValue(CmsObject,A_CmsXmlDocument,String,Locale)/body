{
  StringBuffer valueExtraction=new StringBuffer();
  List<I_CmsXmlContentValue> values=xmlContent.getValues(xpath,locale);
  Iterator<I_CmsXmlContentValue> it=values.iterator();
  while (it.hasNext()) {
    I_CmsXmlContentValue value=it.next();
    String extracted=value.getPlainText(cms);
    if (value.isSimpleType()) {
      if (value.getContentDefinition().getContentHandler().isSearchable(value) && CmsStringUtil.isNotEmptyOrWhitespaceOnly(extracted)) {
        valueExtraction.append(extracted);
        if (it.hasNext()) {
          valueExtraction.append('\n');
        }
      }
      if (CmsStringUtil.isEmptyOrWhitespaceOnly(extracted) && CmsStringUtil.isNotEmptyOrWhitespaceOnly(value.getStringValue(cms))) {
        try {
          extracted=value.getStringValue(cms);
          valueExtraction.append(extracted);
          if (it.hasNext()) {
            valueExtraction.append('\n');
          }
        }
 catch (        CmsRuntimeException re) {
        }
      }
    }
  }
  return valueExtraction.toString();
}
