{
  Node newnode=null;
  int type=source.getNodeType();
switch (type) {
case doc.ELEMENT_NODE:
{
      Element newelement;
      newelement=doc.createElement(source.getNodeName());
      NamedNodeMap srcattr=source.getAttributes();
      if (srcattr != null) {
        for (int i=0; i < srcattr.getLength(); i++) {
          Attr attr=(Attr)srcattr.item(i);
          if (attr.getSpecified()) {
            Attr nattr=(Attr)importNode(doc,attr,true);
            newelement.setAttributeNode(nattr);
          }
        }
      }
      newnode=newelement;
      break;
    }
case doc.ATTRIBUTE_NODE:
{
    newnode=doc.createAttribute(source.getNodeName());
    newnode.setNodeValue(source.getNodeValue());
    deep=true;
    break;
  }
case doc.TEXT_NODE:
{
  newnode=doc.createTextNode(source.getNodeValue());
  break;
}
case doc.CDATA_SECTION_NODE:
{
newnode=doc.createCDATASection(source.getNodeValue());
break;
}
case doc.ENTITY_REFERENCE_NODE:
{
break;
}
case doc.ENTITY_NODE:
{
break;
}
case doc.PROCESSING_INSTRUCTION_NODE:
{
newnode=doc.createProcessingInstruction(source.getNodeName(),source.getNodeValue());
break;
}
case doc.COMMENT_NODE:
{
newnode=doc.createComment(source.getNodeValue());
break;
}
case doc.DOCUMENT_TYPE_NODE:
{
break;
}
case doc.DOCUMENT_FRAGMENT_NODE:
{
newnode=doc.createDocumentFragment();
break;
}
case doc.NOTATION_NODE:
{
break;
}
case doc.DOCUMENT_NODE:
default :
{
}
}
if (deep) {
for (Node srckid=source.getFirstChild(); srckid != null; srckid=srckid.getNextSibling()) {
newnode.appendChild(importNode(doc,srckid,true));
}
}
if (newnode.getNodeType() == Node.ENTITY_REFERENCE_NODE || newnode.getNodeType() == Node.ENTITY_NODE) {
}
return newnode;
}
