{
  final StringBuffer query=new StringBuffer();
  if (!m_config.getIgnoreQueryParam()) {
    query.append("&q=").append(m_state.getQuery());
  }
  if (m_config.getSolrIndex() != null) {
    query.append("&index=").append(m_config.getSolrIndex());
  }
  if (m_config.getSolrCore() != null) {
    query.append("&core=").append(m_config.getSolrCore());
  }
  if (!m_config.getExtraSolrParams().isEmpty()) {
    query.append('&').append(m_config.getExtraSolrParams());
  }
  return query.toString();
}
