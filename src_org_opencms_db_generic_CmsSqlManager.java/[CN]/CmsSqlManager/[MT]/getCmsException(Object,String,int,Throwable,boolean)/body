{
  String className="";
  if (o != null) {
    className="[" + o.getClass().getName() + "] ";
  }
  if (rootCause != null) {
    StackTraceElement[] stackTraceElements=rootCause.getStackTrace();
    String stackTraceElement="";
    for (int i=0; i < stackTraceElements.length; i++) {
      String currentStackTraceElement=stackTraceElements[i].toString();
      if (currentStackTraceElement.indexOf(".opencms.") != -1) {
        stackTraceElement=currentStackTraceElement;
        break;
      }
    }
    if (message != null) {
      message="[" + message + "] ";
    }
 else {
      message="";
    }
    message+="where: " + stackTraceElement + ", ";
    message+="why: " + rootCause.toString();
  }
  message=className + message;
  if (!logSilent && OpenCms.getLog(this).isErrorEnabled()) {
    if (rootCause != null) {
      OpenCms.getLog(this).error(message,rootCause);
    }
 else {
      OpenCms.getLog(this).error(message);
    }
  }
  return new CmsException(message,exceptionType,rootCause);
}
