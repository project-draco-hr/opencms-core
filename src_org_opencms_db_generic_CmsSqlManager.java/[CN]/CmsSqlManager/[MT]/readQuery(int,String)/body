{
  String key;
  if (projectId != 0) {
    StringBuffer buffer=new StringBuffer(128);
    buffer.append(queryKey);
    if (projectId == CmsProject.ONLINE_PROJECT_ID || projectId < 0) {
      buffer.append("_ONLINE");
    }
 else {
      buffer.append("_OFFLINE");
    }
    key=buffer.toString();
  }
 else {
    key=queryKey;
  }
  String query=(String)m_cachedQueries.get(key);
  if (query == null) {
    query=readQuery(queryKey);
    query=CmsStringUtil.substitute(query,"\t"," ");
    query=CmsStringUtil.substitute(query,"\n"," ");
    if (projectId != 0) {
      query=CmsSqlManager.replaceProjectPattern(projectId,query);
    }
    m_cachedQueries.put(key,query);
  }
  return query;
}
