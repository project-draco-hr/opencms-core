{
  String currentKey=null;
  String currentValue=null;
  int startIndex=0;
  int endIndex=0;
  int lastIndex=0;
  Iterator allKeys=properties.keySet().iterator();
  while (allKeys.hasNext()) {
    currentKey=(String)allKeys.next();
    currentValue=(String)properties.get(currentKey);
    startIndex=endIndex=lastIndex=0;
    while ((startIndex=currentValue.indexOf("${",lastIndex)) != -1) {
      if ((endIndex=currentValue.indexOf('}',startIndex)) != -1) {
        String replaceKey=currentValue.substring(startIndex + 2,endIndex);
        String searchPattern=currentValue.substring(startIndex,endIndex + 1);
        String replacePattern=(String)properties.get(replaceKey);
        if (replacePattern != null) {
          currentValue=CmsStringSubstitution.substitute(currentValue,searchPattern,replacePattern);
        }
        lastIndex=endIndex + 2;
      }
    }
    properties.put(currentKey,currentValue);
  }
}
