{
  CmsResource cmsResource=null;
  CmsFolder cmsFolder=null;
  CmsFile cmsFile=null;
  com.opencms.file.oracleplsql.CmsDbAccess dbAccess=(com.opencms.file.oracleplsql.CmsDbAccess)m_dbAccess;
  Vector resources=dbAccess.lockResource(currentUser,currentProject,resourcename,force);
  for (int i=0; i < resources.size(); i++) {
    cmsResource=(CmsResource)resources.elementAt(i);
    String resourceName=cmsResource.getResourceName();
    if (resourceName.endsWith("/")) {
      cmsFolder=new CmsFolder(cmsResource.getResourceId(),cmsResource.getParentId(),cmsResource.getFileId(),resourceName,cmsResource.getType(),cmsResource.getFlags(),cmsResource.getOwnerId(),cmsResource.getGroupId(),cmsResource.getProjectId(),cmsResource.getAccessFlags(),cmsResource.getState(),cmsResource.isLockedBy(),cmsResource.getDateCreated(),cmsResource.getDateLastModified(),cmsResource.getResourceLastModifiedBy(),cmsResource.getProjectId());
      m_resourceCache.remove(resourceName);
    }
 else {
      cmsFile=new CmsFile(cmsResource.getResourceId(),cmsResource.getParentId(),cmsResource.getFileId(),resourceName,cmsResource.getType(),cmsResource.getFlags(),cmsResource.getOwnerId(),cmsResource.getGroupId(),cmsResource.getProjectId(),cmsResource.getAccessFlags(),cmsResource.getState(),cmsResource.isLockedBy(),cmsResource.getLauncherType(),cmsResource.getLauncherClassname(),cmsResource.getDateCreated(),cmsResource.getDateLastModified(),cmsResource.getResourceLastModifiedBy(),new byte[0],cmsResource.getLength(),cmsResource.getProjectId());
      m_resourceCache.remove(resourceName);
    }
  }
  m_subresCache.clear();
}
