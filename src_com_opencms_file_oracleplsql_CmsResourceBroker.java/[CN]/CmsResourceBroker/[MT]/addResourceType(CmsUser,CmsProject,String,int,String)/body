{
  com.opencms.file.oracleplsql.CmsDbAccess dbAccess=(com.opencms.file.oracleplsql.CmsDbAccess)m_dbAccess;
  if (isAdmin(currentUser,currentProject)) {
    m_resourceTypes=(Hashtable)dbAccess.readSystemProperty(C_SYSTEMPROPERTY_RESOURCE_TYPE);
synchronized (m_resourceTypes) {
      Integer lastIndex=new Integer(((Integer)m_resourceTypes.get(C_TYPE_LAST_INDEX)).intValue() + 1);
      m_resourceTypes.put(C_TYPE_LAST_INDEX,lastIndex);
      m_resourceTypes.put(resourceType,new CmsResourceType(lastIndex.intValue(),launcherType,resourceType,launcherClass));
      dbAccess.writeSystemProperty(C_SYSTEMPROPERTY_RESOURCE_TYPE,m_resourceTypes);
    }
    m_resourceTypes=null;
    return (getResourceType(currentUser,currentProject,resourceType));
  }
 else {
    throw new CmsException("[" + this.getClass().getName() + "] "+ resourceType,CmsException.C_NO_ACCESS);
  }
}
