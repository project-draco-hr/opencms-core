{
  Vector list=new Vector();
  java.sql.Timestamp day=null;
  GregorianCalendar dayEnd=new GregorianCalendar();
  Connection con=null;
  PreparedStatement statement=null;
  ResultSet res=null;
  int month=1;
  if (flag.equals(C_FLAG_MONTH)) {
    try {
      month=Integer.parseInt(str);
    }
 catch (    NumberFormatException e) {
      System.err.println("[NewsContentDefinition.getDynamicList()] Exception while trying to parse the month: " + e.getMessage());
    }
    if (month < 1 || month > 12)     month=1;
  }
 else {
    if ((str == null) || (str.equals("")) || (str.equals(" "))) {
      try {
        day=date2Timestamp(dayEnd);
        dayEnd.set(Calendar.HOUR,23);
        dayEnd.set(Calendar.MINUTE,59);
        dayEnd.set(Calendar.SECOND,59);
      }
 catch (      Exception e) {
        System.err.println("[NewsContentDefinition.getDynamicList()] Exception while trying to parse the date: " + e.getMessage());
      }
    }
 else {
      try {
        ;
        day=shortString2sqlTimestamp(str);
        dayEnd=shortString2date(str);
        dayEnd.set(Calendar.HOUR,23);
        dayEnd.set(Calendar.MINUTE,59);
        dayEnd.set(Calendar.SECOND,59);
      }
 catch (      ParseException e) {
        System.err.println("[NewsContentDefinition.getDynamicList()] Exception while trying to parse the date: " + e.getMessage());
      }
    }
  }
  try {
    con=DriverManager.getConnection(c_pool);
    if (flag.equals(C_FLAG_MONTH)) {
      statement=con.prepareStatement(C_SELECT_MONTH);
      statement.setInt(1,month);
      statement.setInt(2,channelId.intValue());
    }
 else {
      statement=con.prepareStatement(C_SELECT_DAY);
      statement.setTimestamp(1,day);
      statement.setTimestamp(2,date2Timestamp(dayEnd));
      statement.setInt(3,channelId.intValue());
    }
    res=statement.executeQuery();
    while (res.next()) {
      list.addElement(new NewsContentDefinition(res.getInt(1),res.getString(2),res.getString(3),res.getString(4),res.getString(5),res.getString(6),res.getString(7),res.getTimestamp(8),res.getInt(9),res.getInt(10),res.getString(11),res.getString(12),res.getString(13)));
    }
  }
 catch (  Exception e) {
    throw new CmsException(e.getMessage());
  }
 finally {
    try {
      res.close();
    }
 catch (    Exception e) {
    }
    try {
      statement.close();
    }
 catch (    Exception e) {
    }
    try {
      con.close();
    }
 catch (    Exception e) {
    }
  }
  return list;
}
