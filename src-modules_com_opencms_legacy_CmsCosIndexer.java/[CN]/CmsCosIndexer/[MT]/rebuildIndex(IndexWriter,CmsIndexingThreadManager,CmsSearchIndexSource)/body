{
  m_writer=writer;
  m_indexSource=source;
  m_threadManager=threadManager;
  String resourceType=(String)m_indexSource.getDocumentTypes().get(0);
  CmsSearchDocumentType documentType=OpenCms.getSearchManager().getDocumentTypeConfig(resourceType);
  String cdClassName=(String)documentType.getResourceTypes().get(0);
  try {
    m_contentDefinition=(CmsMasterContent)Class.forName(cdClassName).newInstance();
  }
 catch (  Exception e) {
    throw new CmsIndexException(Messages.get().container(Messages.ERR_COS_INDEXING_CONTENTS_OF_CLASS_1,cdClassName),e);
  }
  m_subId=m_contentDefinition.getSubId();
  List resourceNames=source.getResourcesNames();
  Iterator it=resourceNames.iterator();
  while (it.hasNext()) {
    String channel=(String)it.next();
    internalUpdateIndex(channel,channel);
  }
}
