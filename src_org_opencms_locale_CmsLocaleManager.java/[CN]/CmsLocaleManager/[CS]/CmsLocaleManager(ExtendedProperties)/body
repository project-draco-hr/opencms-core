{
  m_availableLocaleNames=configuration.getStringArray("locale.available");
  m_availableLocales=new HashMap();
  for (int i=0; i < m_availableLocaleNames.length; i++) {
    String localeName[]=Utils.split(m_availableLocaleNames[i],"_");
    Locale locale=new Locale(localeName[0],(localeName.length > 1) ? localeName[1] : "",(localeName.length > 2) ? localeName[2] : "");
    m_availableLocales.put(m_availableLocaleNames[i],locale);
    if (localeName.length > 2 && !m_availableLocales.containsKey(localeName[0] + "_" + localeName[1])) {
      m_availableLocales.put(localeName[0] + "_" + localeName[1],locale);
    }
    if (localeName.length > 1 && !m_availableLocales.containsKey(localeName[0])) {
      m_availableLocales.put(localeName[0],locale);
    }
  }
  m_defaultLocaleNames=configuration.getStringArray("locale.default");
  m_localeHandler=(I_CmsLocaleHandler)OpenCms.getRuntimeProperty(C_LOCALE_HANDLER);
  if (m_localeHandler == null) {
    m_localeHandler=new CmsDefaultLocaleHandler();
  }
}
