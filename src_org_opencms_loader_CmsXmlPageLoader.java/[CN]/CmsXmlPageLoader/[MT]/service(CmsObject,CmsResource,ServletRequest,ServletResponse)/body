{
  String absolutePath=cms.readAbsolutePath(file);
  try {
    CmsXmlPage page=CmsXmlPage.read(cms,cms.readFile(absolutePath));
    String elementName=req.getParameter(C_TEMPLATE_ELEMENT);
    String localeProp=OpenCms.getUserDefaultLanguage();
    byte[] result=page.getContent(cms,elementName,localeProp).getBytes();
    if (result != null) {
      res.getOutputStream().write(result);
    }
  }
 catch (  CmsException e) {
    if (OpenCms.getLog(this).isErrorEnabled()) {
      OpenCms.getLog(this).error("Error in CmsXmlPageLoader while processing " + absolutePath,e);
    }
    throw new ServletException("Error in CmsXmlPageLoader while processing " + absolutePath,e);
  }
}
