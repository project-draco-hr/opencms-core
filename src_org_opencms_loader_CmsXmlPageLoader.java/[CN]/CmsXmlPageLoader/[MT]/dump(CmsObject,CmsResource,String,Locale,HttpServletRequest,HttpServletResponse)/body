{
  CmsXmlPage page=CmsXmlPageFactory.unmarshal(cms,resource,req);
  List locales=page.getLocales(element);
  Locale locale=OpenCms.getLocaleManager().getBestMatchingLocale(selectedLocale,OpenCms.getLocaleManager().getDefaultLocales(cms,cms.getSitePath(resource)),locales);
  if (locale == null) {
    throw new CmsLoaderException(Messages.get().container(Messages.ERR_LOADER_UNKNOWN_LOCALE_4,new Object[]{resource.getRootPath(),selectedLocale,CmsLocaleManager.getLocaleNames(locales),CmsLocaleManager.getLocaleNames(OpenCms.getLocaleManager().getDefaultLocales(cms,cms.getSitePath(resource)))}));
  }
  String value=page.getStringValue(cms,element,locale);
  if (value != null) {
    return value.getBytes(page.getEncoding());
  }
  return new byte[0];
}
