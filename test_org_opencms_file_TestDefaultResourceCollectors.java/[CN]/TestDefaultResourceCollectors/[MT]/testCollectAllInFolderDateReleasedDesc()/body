{
  CmsObject cms=getCmsObject();
  int resTypeIdPlain=CmsResourceTypePlain.getStaticTypeId();
  echo("Testing allInFolderDateReleasedDesc resource collector");
  I_CmsResourceCollector collector=new CmsDefaultResourceCollector();
  List resources;
  CmsResource res;
  long day=1000L * 60L * 60L* 24L;
  long t1=System.currentTimeMillis() - (2 * day), t2=t1 + day;
  cms.setDateLastModified("/folder1/file1",t1,false);
  cms.setDateReleased("/folder1/file1",t1,false);
  cms.setDateExpired("/folder1/file1",t1 + (3 * day),false);
  cms.setDateLastModified("/folder1/file2",t2,false);
  cms.setDateReleased("/folder1/file2",t2,false);
  cms.setDateExpired("/folder1/file2",t2 + (3 * day),false);
  resources=collector.getResults(cms,"allInFolderDateReleasedDesc","/folder1/|" + resTypeIdPlain);
  res=(CmsResource)resources.get(0);
  assertEquals("/sites/default/folder1/file2",res.getRootPath());
  res=(CmsResource)resources.get(1);
  assertEquals("/sites/default/folder1/file1",res.getRootPath());
  cms.setDateLastModified("/folder1/file1",t2,false);
  cms.setDateReleased("/folder1/file1",t2,false);
  cms.setDateExpired("/folder1/file1",t2 + (3 * day),false);
  cms.setDateLastModified("/folder1/file2",t1,false);
  cms.setDateReleased("/folder1/file2",t1,false);
  cms.setDateExpired("/folder1/file2",t1 + (3 * day),false);
  resources=collector.getResults(cms,"allInFolderDateReleasedDesc","/folder1/|" + resTypeIdPlain);
  res=(CmsResource)resources.get(0);
  assertEquals("/sites/default/folder1/file1",res.getRootPath());
  res=(CmsResource)resources.get(1);
  assertEquals("/sites/default/folder1/file2",res.getRootPath());
}
