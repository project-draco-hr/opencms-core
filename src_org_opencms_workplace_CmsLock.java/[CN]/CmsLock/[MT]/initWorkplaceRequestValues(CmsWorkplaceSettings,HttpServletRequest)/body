{
  fillParamValues(request);
  if (DIALOG_CONFIRMED.equals(getParamAction())) {
    setAction(ACTION_CONFIRMED);
  }
 else {
    if (lockResource(getCms())) {
      setParamTitle(key("messagebox.title.lock"));
      setParamDialogtype(DIALOG_TYPE_LOCK);
    }
 else {
      setParamTitle(key("messagebox.title.unlock"));
      setParamDialogtype(DIALOG_TYPE_UNLOCK);
    }
    if (showConfirmation()) {
      setAction(ACTION_DEFAULT);
    }
 else {
      setAction(ACTION_CONFIRMED);
    }
  }
}
