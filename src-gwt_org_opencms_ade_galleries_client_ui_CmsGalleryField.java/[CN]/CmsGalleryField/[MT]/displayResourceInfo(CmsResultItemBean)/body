{
  if (m_hasImage) {
    CmsCroppingParamBean cropping=CmsCroppingParamBean.parseImagePath(getFormValueAsString());
    String imagePath=info.getViewLink();
    String dimension=info.getDimension();
    if (cropping.isCropped()) {
      dimension=cropping.getTargetWidth() + " x " + cropping.getTargetHeight();
      String[] dimensions=dimension.split("x");
      cropping.setOrgWidth(CmsClientStringUtil.parseInt(dimensions[0].trim()));
      cropping.setOrgHeight(CmsClientStringUtil.parseInt(dimensions[1].trim()));
      imagePath+="?" + cropping.getRestrictedSizeScaleParam(110,165) + ",c:white";
    }
 else {
      imagePath+="?__scale=w:165,h:110,t:1,c:white,r:2";
    }
    Element image=DOM.createImg();
    image.setAttribute("src",imagePath);
    m_imagePreview.setInnerHTML("");
    m_imagePreview.appendChild(image);
    m_resourceInfoPanel.add(new CmsImageInfo(info,dimension));
  }
 else {
    CmsListItemWidget widget=new CmsListItemWidget(info);
    widget.setIcon(CmsIconUtil.getResourceIconClasses(info.getType(),info.getPath(),false));
    m_resourceInfoPanel.add(widget);
    int width=m_resourceInfoPanel.getOffsetWidth();
    if (width > 0) {
      widget.truncate("STANDARD",width);
    }
  }
}
