{
  if (m_hasImage) {
    CmsCroppingParamBean cropping=CmsCroppingParamBean.parseImagePath(getFormValueAsString());
    String imagePath=info.getViewLink();
    String dimension=info.getDimension();
    int marginTop=0;
    if (cropping.isCropped()) {
      dimension=cropping.getTargetWidth() + " x " + cropping.getTargetHeight();
      String[] dimensions=dimension.split("x");
      cropping.setOrgWidth(CmsClientStringUtil.parseInt(dimensions[0].trim()));
      cropping.setOrgHeight(CmsClientStringUtil.parseInt(dimensions[1].trim()));
      CmsCroppingParamBean restricted=cropping.getRestrictedSizeParam(110,165);
      imagePath+="?" + restricted;
      marginTop=(110 - restricted.getTargetHeight()) / 2;
    }
 else {
      imagePath+="?__scale=w:165,h:110,t:1,c:white,r:2";
    }
    Element image=DOM.createImg();
    image.setAttribute("src",imagePath);
    image.getStyle().setMarginTop(marginTop,Unit.PX);
    m_imagePreview.setInnerHTML("");
    m_imagePreview.appendChild(image);
    m_resourceInfoPanel.add(new CmsImageInfo(info,dimension));
  }
 else {
    CmsListItemWidget widget=new CmsListItemWidget(info);
    OpenCloseHandler handler=new OpenCloseHandler();
    widget.addCloseHandler(handler);
    widget.addOpenHandler(handler);
    widget.setIcon(CmsIconUtil.getResourceIconClasses(info.getType(),info.getPath(),false));
    m_resourceInfoPanel.add(widget);
    int width=m_resourceInfoPanel.getOffsetWidth();
    if (width > 0) {
      widget.truncate("STANDARD",width);
    }
  }
  fireResize();
}
