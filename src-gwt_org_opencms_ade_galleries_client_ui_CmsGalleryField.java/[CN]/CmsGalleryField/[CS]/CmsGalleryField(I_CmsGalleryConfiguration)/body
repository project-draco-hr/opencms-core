{
  m_buttonHandler=new CmsDialogUploadButtonHandler(new Supplier<I_CmsUploadContext>(){
    public I_CmsUploadContext get(){
      return new I_CmsUploadContext(){
        public void onUploadFinished(        Collection<CmsFileInfo> uploadedFiles){
          if ((uploadedFiles != null) && !uploadedFiles.isEmpty()) {
            setValue(m_uploadTarget + uploadedFiles.iterator().next().getFileName(),true);
          }
        }
      }
;
    }
  }
);
  m_buttonHandler.setIsTargetRootPath(false);
  m_uploadButton=new CmsUploadButton(m_buttonHandler);
  m_uploadButton.setText(null);
  m_uploadButton.setButtonStyle(ButtonStyle.TRANSPARENT,null);
  m_uploadButton.setImageClass(I_CmsImageBundle.INSTANCE.style().uploadIcon());
  initWidget(uibinder.createAndBindUi(this));
  this.addUploadZone(m_uploadDropZone);
  m_configuration=configuration;
  I_CmsLayoutBundle.INSTANCE.galleryFieldCss().ensureInjected();
  m_opener.setButtonStyle(ButtonStyle.TRANSPARENT,null);
  m_opener.setImageClass(I_CmsImageBundle.INSTANCE.style().popupIcon());
}
