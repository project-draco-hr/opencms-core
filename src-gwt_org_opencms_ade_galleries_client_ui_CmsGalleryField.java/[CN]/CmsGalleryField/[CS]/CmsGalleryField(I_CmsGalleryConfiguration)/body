{
  CmsDialogUploadButtonHandler buttonHandler=new CmsDialogUploadButtonHandler(new Supplier<I_CmsUploadContext>(){
    @Override public I_CmsUploadContext get(){
      return new I_CmsUploadContext(){
        @Override public void onUploadFinished(        Collection<CmsFileInfo> uploadedFiles){
          if ((uploadedFiles != null) && !uploadedFiles.isEmpty()) {
            setValue(m_uploadTarget + uploadedFiles.iterator().next().getFileName(),true);
          }
        }
      }
;
    }
  }
);
  buttonHandler.setIsTargetRootPath(false);
  m_uploadButton=new CmsUploadButton(buttonHandler);
  m_uploadButton.setText(null);
  m_uploadButton.setButtonStyle(ButtonStyle.TRANSPARENT,null);
  m_uploadButton.setImageClass(I_CmsImageBundle.INSTANCE.style().uploadIcon());
  m_main=uibinder.createAndBindUi(this);
  initWidget(m_main);
  initUploadZone(m_uploadDropZone);
  m_uploadDropZone.setTitle(org.opencms.ade.upload.client.Messages.get().key(org.opencms.ade.upload.client.Messages.GUI_UPLOAD_DRAG_AND_DROP_ENABLED_0));
  m_configuration=configuration;
  I_CmsLayoutBundle.INSTANCE.galleryFieldCss().ensureInjected();
  m_opener.setButtonStyle(ButtonStyle.TRANSPARENT,null);
  m_opener.setImageClass(I_CmsImageBundle.INSTANCE.style().popupIcon());
}
