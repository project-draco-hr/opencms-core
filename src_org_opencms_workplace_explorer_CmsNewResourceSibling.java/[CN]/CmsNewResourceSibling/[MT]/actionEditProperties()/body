{
  boolean editProps=Boolean.valueOf(getParamNewResourceEditProps()).booleanValue();
  String newRes=getParamResource();
  try {
    CmsLock lock=getCms().getLock(newRes);
    if (!lock.isDirectlyOwnedInProjectBy(getCms())) {
      editProps=false;
    }
  }
 catch (  CmsException e) {
    throw new JspException(e);
  }
  if (editProps) {
    Map params=new HashMap();
    params.put(PARAM_RESOURCE,getParamResource());
    params.put(CmsPropertyAdvanced.PARAM_DIALOGMODE,CmsPropertyAdvanced.MODE_WIZARD);
    sendForward(CmsPropertyAdvanced.URI_PROPERTY_DIALOG_HANDLER,params);
  }
 else {
    actionCloseDialog();
  }
}
