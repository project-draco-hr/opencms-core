{
  boolean editProps=Boolean.valueOf(getParamNewResourceEditProps()).booleanValue();
  String newRes=getParamResource();
  try {
    CmsLock lock=getCms().getLock(newRes);
    if (lock.getType() != CmsLock.C_TYPE_EXCLUSIVE) {
      editProps=false;
    }
  }
 catch (  CmsException e) {
    throw new JspException(e);
  }
  if (editProps) {
    String params="?" + PARAM_RESOURCE + "="+ CmsEncoder.encode(getParamResource());
    params+="&" + CmsPropertyAdvanced.PARAM_DIALOGMODE + "="+ CmsPropertyAdvanced.MODE_WIZARD;
    sendCmsRedirect(CmsPropertyAdvanced.URI_PROPERTY_DIALOG_HANDLER + params);
  }
 else {
    actionCloseDialog();
  }
}
