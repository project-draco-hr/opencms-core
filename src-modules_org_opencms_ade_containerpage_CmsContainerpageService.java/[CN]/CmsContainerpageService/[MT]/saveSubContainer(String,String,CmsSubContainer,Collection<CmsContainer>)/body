{
  CmsObject cms=getCmsObject();
  try {
    String resourceName=subContainer.getSitePath();
    if (subContainer.isNew()) {
      CmsResource subContainerResource=OpenCms.getADEManager().createNewElement(getCmsObject(),containerpageUri,getRequest(),CmsResourceTypeXmlContainerPage.SUB_CONTAINER_TYPE_NAME);
      resourceName=cms.getSitePath(subContainerResource);
      subContainer.setSitePath(resourceName);
      subContainer.setClientId(subContainerResource.getStructureId().toString());
    }
    CmsSubContainerBean subContainerBean=getSubContainerBean(subContainer,containerpageUri);
    cms.lockResourceTemporary(resourceName);
    CmsXmlSubContainer xmlSubContainer=CmsXmlSubContainerFactory.unmarshal(cms,cms.readFile(resourceName));
    xmlSubContainer.save(cms,subContainerBean);
    cms.unlockResource(resourceName);
  }
 catch (  Throwable e) {
    error(e);
  }
  Collection<String> ids=new ArrayList<String>();
  ids.add(subContainer.getClientId());
  return getElementsData(containerpageUri,reqParams,ids,containers);
}
