{
  CmsObject cms=getCmsObject();
  try {
    String resourceName=subContainer.getSitePath();
    if (subContainer.isNew()) {
      CmsResource subContainerResource=OpenCms.getADEManager().createNewElement(getCmsObject(),containerpageUri,getRequest(),CmsResourceTypeXmlContainerPage.SUB_CONTAINER_TYPE_NAME);
      resourceName=cms.getSitePath(subContainerResource);
    }
    CmsSubContainerBean subContainerBean=getSubContainerBean(subContainer,containerpageUri);
    cms.lockResourceTemporary(resourceName);
    CmsXmlSubContainer xmlSubContainer=CmsXmlSubContainerFactory.unmarshal(cms,cms.readFile(resourceName));
    xmlSubContainer.save(cms,subContainerBean);
    cms.unlockResource(resourceName);
  }
 catch (  Throwable e) {
    error(e);
  }
}
