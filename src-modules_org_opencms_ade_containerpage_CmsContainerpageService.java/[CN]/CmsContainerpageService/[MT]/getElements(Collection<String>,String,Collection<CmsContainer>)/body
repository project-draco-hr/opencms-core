{
  CmsObject cms=getCmsObject();
  CmsElementUtil elemUtil=new CmsElementUtil(cms,uriParam,getRequest(),getResponse());
  Map<String,CmsContainerElementData> result=new HashMap<String,CmsContainerElementData>();
  Set<String> ids=new HashSet<String>();
  Iterator<String> it=clientIds.iterator();
  while (it.hasNext()) {
    String elemId=it.next();
    if (ids.contains(elemId)) {
      continue;
    }
    CmsContainerElementBean element=getCachedElement(elemId);
    CmsContainerElementData elementData=elemUtil.getElementData(element,containers);
    result.put(element.editorHash(),elementData);
    if (elementData.isGroupContainer()) {
      CmsResource elementRes=cms.readResource(element.getId());
      CmsXmlGroupContainer xmlGroupContainer=CmsXmlGroupContainerFactory.unmarshal(cms,elementRes,getRequest());
      CmsGroupContainerBean groupContainer=xmlGroupContainer.getGroupContainer(cms,cms.getRequestContext().getLocale());
      for (      CmsContainerElementBean subElement : groupContainer.getElements()) {
        if (!ids.contains(subElement.getId())) {
          String subId=subElement.editorHash();
          if (ids.contains(subId)) {
            continue;
          }
          CmsContainerElementData subItemData=elemUtil.getElementData(subElement,containers);
          ids.add(subId);
          result.put(subId,subItemData);
        }
      }
    }
    ids.add(elemId);
  }
  return result;
}
