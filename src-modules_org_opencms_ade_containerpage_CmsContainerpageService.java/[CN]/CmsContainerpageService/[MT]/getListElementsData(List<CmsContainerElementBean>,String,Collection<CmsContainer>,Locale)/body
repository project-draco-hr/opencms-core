{
  CmsObject cms=getCmsObject();
  CmsElementUtil elemUtil=new CmsElementUtil(cms,containerpageUri,getRequest(),getResponse(),locale);
  CmsADESessionCache cache=getSessionCache();
  List<CmsContainerElementData> result=new ArrayList<CmsContainerElementData>();
  for (  CmsContainerElementBean element : listElements) {
    if (cms.existsResource(element.getId(),CmsResourceFilter.ONLY_VISIBLE_NO_DELETED)) {
      cache.setCacheContainerElement(element.editorHash(),element);
      CmsContainerElementData elementData=elemUtil.getElementData(element,containers);
      result.add(elementData);
      if (elementData.isGroupContainer()) {
        CmsResource elementRes=cms.readResource(element.getId());
        CmsXmlGroupContainer xmlGroupContainer=CmsXmlGroupContainerFactory.unmarshal(cms,elementRes,getRequest());
        CmsGroupContainerBean groupContainer=xmlGroupContainer.getGroupContainer(cms,cms.getRequestContext().getLocale());
        for (        CmsContainerElementBean subElement : groupContainer.getElements()) {
          CmsContainerElementData subItemData=elemUtil.getElementData(subElement,containers);
          result.add(subItemData);
        }
      }
    }
  }
  return result;
}
