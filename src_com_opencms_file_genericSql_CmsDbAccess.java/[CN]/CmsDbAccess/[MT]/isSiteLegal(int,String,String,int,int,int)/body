{
  boolean isLegal=true;
  PreparedStatement statement=null;
  PreparedStatement statement1=null;
  try {
    statement=m_pool.getPreparedStatement(m_cq.C_SITES_CHECKSITE_KEY);
    statement.setInt(1,siteId);
    statement.setInt(2,categoryId);
    statement.setInt(3,languageId);
    statement.setInt(4,countryId);
    ResultSet res=statement.executeQuery();
    if (res.next())     isLegal=false;
    res.close();
    if (isLegal) {
      statement1=m_pool.getPreparedStatement(m_cq.C_SITESSITEURLS_CHECKSITE_KEY);
      statement1.setInt(1,siteId);
      statement1.setString(2,name.trim().toLowerCase());
      statement1.setString(3,url.trim().toLowerCase());
      res=statement1.executeQuery();
      if (res.next())       isLegal=false;
      res.close();
    }
  }
 catch (  SQLException e) {
    throw new CmsException("[" + this.getClass().getName() + "]"+ e.getMessage(),CmsException.C_SQL_ERROR,e);
  }
catch (  Exception e) {
    throw new CmsException("[" + this.getClass().getName() + "]",e);
  }
 finally {
    if (statement != null)     m_pool.putPreparedStatement(m_cq.C_SITES_CHECKSITE_KEY,statement);
    if (statement1 != null)     m_pool.putPreparedStatement(m_cq.C_SITESSITEURLS_CHECKSITE_KEY,statement1);
  }
  return isLegal;
}
