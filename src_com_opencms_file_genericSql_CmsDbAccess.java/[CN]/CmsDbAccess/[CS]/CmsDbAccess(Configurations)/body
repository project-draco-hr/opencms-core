{
  com.opencms.dbpool.CmsDriver.setConfigurations(config);
  m_cq=getQueries();
  String rbName=null;
  String digest=null;
  boolean fillDefaults=true;
  if (I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING && A_OpenCms.isLogging()) {
    A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_INIT,"[CmsDbAccess] init the dbaccess-module.");
  }
  rbName=(String)config.getString(C_CONFIGURATION_RESOURCEBROKER);
  getConnectionPools(config,rbName);
  digest=config.getString(C_CONFIGURATION_RESOURCEBROKER + "." + rbName+ "."+ C_CONFIGURATIONS_DIGEST,"MD5");
  if (I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING && A_OpenCms.isLogging()) {
    A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_INIT,"[CmsDbAccess] read digest from configurations: " + digest);
  }
  m_digestFileEncoding=config.getString(C_CONFIGURATION_RESOURCEBROKER + "." + rbName+ "."+ C_CONFIGURATIONS_DIGEST_FILE_ENCODING,"ISO8859_1");
  if (I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING && A_OpenCms.isLogging()) {
    A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_INIT,"[CmsDbAccess] read digestFileEncoding from configurations: " + m_digestFileEncoding);
  }
  try {
    m_digest=MessageDigest.getInstance(digest);
    if (I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING && A_OpenCms.isLogging()) {
      A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_INIT,"[CmsDbAccess] digest created, using: " + m_digest.toString());
    }
  }
 catch (  NoSuchAlgorithmException e) {
    if (I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING && A_OpenCms.isLogging()) {
      A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_INIT,"[CmsDbAccess] error creating digest - using clear paswords: " + e.getMessage());
    }
  }
  try {
    if (readProject(C_PROJECT_ONLINE_ID) != null) {
      fillDefaults=false;
    }
  }
 catch (  CmsException exc) {
  }
  if (fillDefaults) {
    if (I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING && A_OpenCms.isLogging()) {
      A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_INIT,"[CmsDbAccess] fill default resources");
    }
    fillDefaults();
  }
}
