{
  StringBuffer result=new StringBuffer();
  String resId=Integer.toString(id);
  int index=0;
  String myToken="resource_id";
  int foundAt=data.indexOf(myToken,index);
  while (foundAt != -1) {
    result.append(data.substring(index,foundAt) + resId);
    index=foundAt + myToken.length();
    foundAt=data.indexOf(myToken,index);
  }
  result.append(data.substring(index));
  data=result.toString();
  result=new StringBuffer();
  myToken="language_key";
  index=0;
  foundAt=data.indexOf(myToken,index);
  while (foundAt != -1) {
    int endIndex=data.indexOf(")",foundAt);
    String langKey=data.substring(data.indexOf("(",foundAt) + 1,endIndex);
    langKey=lang.getLanguageValue(langKey);
    result.append(data.substring(index,foundAt) + langKey);
    index=endIndex + 1;
    foundAt=data.indexOf(myToken,index);
  }
  result.append(data.substring(index));
  data=result.toString();
  result=new StringBuffer();
  myToken="rules_key";
  index=0;
  foundAt=data.indexOf(myToken,index);
  while (foundAt != -1) {
    int endIndex=data.indexOf(")",foundAt);
    String rulesKey=data.substring(data.indexOf("(",foundAt) + 1,endIndex).trim();
    int nextSpace=rulesKey.indexOf(" ");
    while (nextSpace > -1) {
      rulesKey=rulesKey.substring(0,nextSpace) + rulesKey.substring(nextSpace + 1);
      nextSpace=rulesKey.indexOf(" ");
    }
    result.append(data.substring(index,foundAt) + rulesKey);
    index=endIndex + 1;
    foundAt=data.indexOf(myToken,index);
  }
  result.append(data.substring(index));
  return result.toString();
}
