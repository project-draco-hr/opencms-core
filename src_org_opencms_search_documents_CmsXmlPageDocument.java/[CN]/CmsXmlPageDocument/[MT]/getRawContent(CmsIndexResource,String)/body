{
  CmsResource resource=(CmsResource)indexResource.getData();
  String rawContent=null;
  try {
    CmsFile file=m_cms.readFile(m_cms.getRequestContext().removeSiteRoot(resource.getRootPath()));
    CmsXmlPage page=CmsXmlPage.read(m_cms,file);
    List pageLocales=page.getLocales();
    if (pageLocales.size() == 0) {
      pageLocales=OpenCms.getLocaleManager().getDefaultLocales(m_cms,resource.getRootPath());
    }
    Locale locale=OpenCms.getLocaleManager().getBestMatchingLocale(CmsLocaleManager.getLocale(language),OpenCms.getLocaleManager().getDefaultLocales(m_cms,resource.getRootPath()),pageLocales);
    List elements=page.getNames(locale);
    StringBuffer content=new StringBuffer();
    for (Iterator i=elements.iterator(); i.hasNext(); ) {
      content.append(page.getRawContent((String)i.next(),locale));
    }
    CmsHtmlExtractor extractor=new CmsHtmlExtractor();
    rawContent=extractor.extractText(content.toString());
  }
 catch (  Exception exc) {
    throw new CmsIndexException("Reading resource " + resource.getRootPath() + " failed",exc);
  }
  return rawContent;
}
