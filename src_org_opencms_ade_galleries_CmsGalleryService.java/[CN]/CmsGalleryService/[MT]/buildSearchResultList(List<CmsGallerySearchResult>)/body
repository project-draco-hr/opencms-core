{
  ArrayList<CmsResultItemBean> list=new ArrayList<CmsResultItemBean>();
  if ((searchResult == null) || (searchResult.size() == 0)) {
    return list;
  }
  CmsObject cms=getCmsObject();
  Iterator<CmsGallerySearchResult> iSearchResult=searchResult.iterator();
  while (iSearchResult.hasNext()) {
    try {
      Locale wpLocale=getWorkplaceLocale();
      CmsGallerySearchResult sResult=iSearchResult.next();
      CmsResultItemBean bean=new CmsResultItemBean();
      String path=sResult.getPath();
      path=cms.getRequestContext().removeSiteRoot(path);
      bean.setPath(path);
      bean.setTitle(CmsStringUtil.isEmptyOrWhitespaceOnly(sResult.getTitle()) ? CmsResource.getName(sResult.getPath()) : sResult.getTitle());
      bean.setType(sResult.getResourceType());
      bean.setClientId(sResult.getStructureId());
      I_CmsResourceType type=OpenCms.getResourceManager().getResourceType(sResult.getResourceType());
      String resourceTypeDisplayName=CmsWorkplaceMessages.getResourceTypeName(wpLocale,type.getTypeName());
      String description=sResult.getDescription();
      if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(description)) {
        bean.setDescription(description);
        bean.addAdditionalInfo(Messages.get().getBundle(getWorkplaceLocale()).key(Messages.GUI_RESULT_LABEL_DESCRIPTION_0),description);
      }
 else {
        bean.setDescription(resourceTypeDisplayName);
      }
      bean.addAdditionalInfo(Messages.get().getBundle(getWorkplaceLocale()).key(Messages.GUI_RESULT_LABEL_RESOURCE_TYPE_0),resourceTypeDisplayName);
      if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(sResult.getExcerpt())) {
        bean.addAdditionalInfo(Messages.get().getBundle(getWorkplaceLocale()).key(Messages.GUI_RESULT_LABEL_EXCERPT_0),sResult.getExcerpt(),CmsListInfoBean.CSS_CLASS_MULTI_LINE);
      }
      bean.addAdditionalInfo(Messages.get().getBundle(getWorkplaceLocale()).key(Messages.GUI_RESULT_LABEL_SIZE_0),(sResult.getLength() / 1000) + " kb");
      if (type instanceof CmsResourceTypeImage) {
        CmsProperty imageDimensionProp=cms.readPropertyObject(path,CmsPropertyDefinition.PROPERTY_IMAGE_SIZE,false);
        if (!imageDimensionProp.isNullProperty()) {
          String temp=imageDimensionProp.getValue();
          bean.addAdditionalInfo(Messages.get().getBundle(getWorkplaceLocale()).key(Messages.GUI_RESULT_LABEL_DIMENSION_0),temp.substring(2).replace(",h:"," x "));
        }
      }
      bean.addAdditionalInfo(Messages.get().getBundle(getWorkplaceLocale()).key(Messages.GUI_RESULT_LABEL_DATE_0),CmsDateUtil.getDate(sResult.getDateLastModified(),DateFormat.SHORT,getWorkplaceLocale()));
      bean.setNoEditReson(new CmsResourceUtil(cms,cms.readResource(path)).getNoEditReason(OpenCms.getWorkplaceManager().getWorkplaceLocale(cms)));
      list.add(bean);
    }
 catch (    Exception e) {
      logError(e);
    }
  }
  return list;
}
