{
  List<I_CmsResourceType> resourceTypes=null;
  List<String> creatableTypes=null;
switch (m_galleryMode) {
case editor:
case view:
case widget:
    resourceTypes=readResourceTypesFromRequest();
  creatableTypes=Collections.<String>emptyList();
break;
case ade:
resourceTypes=new ArrayList<I_CmsResourceType>();
creatableTypes=new ArrayList<String>();
try {
CmsADEConfigData config=OpenCms.getADEManager().lookupConfiguration(getCmsObject(),getCmsObject().getRequestContext().addSiteRoot(getCmsObject().getRequestContext().getUri()));
for (CmsResourceTypeConfig typeConfig : config.getResourceTypes()) {
String typeName=typeConfig.getTypeName();
resourceTypes.add(getResourceManager().getResourceType(typeName));
}
for (CmsResourceTypeConfig typeConfig : config.getCreatableTypes(getCmsObject())) {
String typeName=typeConfig.getTypeName();
creatableTypes.add(typeName);
}
}
 catch (CmsException e) {
error(e);
}
break;
default :
resourceTypes=Collections.<I_CmsResourceType>emptyList();
creatableTypes=Collections.<String>emptyList();
}
return buildTypesList(resourceTypes,creatableTypes);
}
