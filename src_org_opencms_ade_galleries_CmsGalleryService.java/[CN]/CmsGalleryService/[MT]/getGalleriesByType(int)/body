{
  List<CmsResource> galleries=new ArrayList<CmsResource>();
  galleries=getCmsObject().readResources("/",CmsResourceFilter.ONLY_VISIBLE_NO_DELETED.addRequireType(galleryTypeId));
  String siteRoot=getCmsObject().getRequestContext().getSiteRoot();
  if (!siteRoot.equals("")) {
    List<CmsResource> systemGalleries=null;
    systemGalleries=getCmsObject().readResources(CmsWorkplace.VFS_PATH_SYSTEM,CmsResourceFilter.ONLY_VISIBLE_NO_DELETED.addRequireType(galleryTypeId));
    if (systemGalleries != null) {
      galleries.addAll(systemGalleries);
    }
  }
  if (!OpenCms.getSiteManager().isSharedFolder(siteRoot)) {
    String shared=OpenCms.getSiteManager().getSharedFolder();
    List<CmsResource> sharedGalleries=getCmsObject().readResources(shared,CmsResourceFilter.ONLY_VISIBLE_NO_DELETED.addRequireType(galleryTypeId));
    if (sharedGalleries != null) {
      galleries.addAll(sharedGalleries);
    }
  }
  return galleries;
}
