{
  if (metadata == null) {
    metadata=new CmsListMetadata();
    metadata.addIndependentAction(new CmsListIndependentAction(LIST_ID,LIST_ACTION_REFRESH,new CmsMessageContainer(Messages.get(),Messages.GUI_USERS_LIST_ACTION_REFRESH_NAME_0),"list/reload.gif",new CmsMessageContainer(Messages.get(),Messages.GUI_USERS_LIST_ACTION_REFRESH_HELP_0),true,new CmsMessageContainer(Messages.get(),Messages.GUI_USERS_LIST_ACTION_REFRESH_CONF_0)));
    CmsListColumnDefinition actionsCol=new CmsListColumnDefinition(LIST_COLUMN_ACTIONS,new CmsMessageContainer(Messages.get(),Messages.GUI_USERS_LIST_COLS_ACTIONS_0),"",CmsListColumnAlignEnum.CenterAlign);
    actionsCol.setSorteable(false);
    I_CmsListDirectAction activateUser=new ActivateUserAction(LIST_ID);
    actionsCol.addDirectAction(activateUser);
    metadata.addColumn(actionsCol);
    CmsListColumnDefinition loginCol=new CmsListColumnDefinition(LIST_COLUMN_LOGIN,new CmsMessageContainer(Messages.get(),Messages.GUI_USERS_LIST_COLS_LOGIN_0),"",CmsListColumnAlignEnum.LeftAlign);
    loginCol.setDefaultAction(new CmsListDefaultAction(LIST_ID,LIST_ACTION_EDIT,new CmsMessageContainer(Messages.get(),Messages.GUI_USERS_LIST_ACTION_EDITUSER_NAME_0),null,new CmsMessageContainer(Messages.get(),Messages.GUI_USERS_LIST_ACTION_EDITUSER_HELP_0),true,new CmsMessageContainer(Messages.get(),Messages.GUI_USERS_LIST_ACTION_EDITUSER_CONF_0)));
    metadata.addColumn(loginCol);
    CmsListColumnDefinition nameCol=new CmsListColumnDefinition(LIST_COLUMN_NAME,new CmsMessageContainer(Messages.get(),Messages.GUI_USERS_LIST_COLS_USERNAME_0),"",CmsListColumnAlignEnum.LeftAlign);
    metadata.addColumn(nameCol);
    CmsListColumnDefinition emailCol=new CmsListColumnDefinition(LIST_COLUMN_EMAIL,new CmsMessageContainer(Messages.get(),Messages.GUI_USERS_LIST_COLS_EMAIL_0),"",CmsListColumnAlignEnum.LeftAlign);
    metadata.addColumn(emailCol);
    CmsListColumnDefinition lastLoginCol=new CmsListColumnDefinition(LIST_COLUMN_LASTLOGIN,new CmsMessageContainer(Messages.get(),Messages.GUI_USERS_LIST_COLS_LASTLOGIN_0),"",CmsListColumnAlignEnum.LeftAlign);
    lastLoginCol.setFormatter(new CmsListMacroFormatter(new CmsMessageContainer(Messages.get(),Messages.GUI_USERS_LIST_LASTLOGIN_FORMAT_0)));
    metadata.addColumn(lastLoginCol);
    metadata.addMultiAction(new CmsListMultiAction(LIST_ID,LIST_ACTION_DELETE,new CmsMessageContainer(Messages.get(),Messages.GUI_USERS_LIST_ACTION_DELETE_NAME_0),"list/delete.gif",new CmsMessageContainer(Messages.get(),Messages.GUI_USERS_LIST_ACTION_DELETE_HELP_0),true,new CmsMessageContainer(Messages.get(),Messages.GUI_USERS_LIST_ACTION_DELETE_CONF_0)));
    metadata.addDirectMultiAction(activateUser);
    CmsSearchAction searchAction=new CmsSearchAction(LIST_ID,loginCol.getId(),loginCol.getName().getKey());
    searchAction.useDefaultShowAllAction();
    metadata.setSearchAction(searchAction);
  }
  return new CmsHtmlList(LIST_ID,new CmsMessageContainer(Messages.get(),Messages.GUI_USERS_LIST_NAME_0),metadata);
}
