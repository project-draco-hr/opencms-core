{
  List ret=new ArrayList();
  try {
    List users=getCms().getUsers();
    Iterator itUsers=users.iterator();
    while (itUsers.hasNext()) {
      CmsUser user=(CmsUser)itUsers.next();
      CmsListItem item=getList().newItem(user.getId().toString());
      item.set(LIST_COLUMN_LOGIN,user.getName());
      item.set(LIST_COLUMN_NAME,user.getFullName());
      item.set(LIST_COLUMN_EMAIL,user.getEmail());
      item.set(LIST_COLUMN_LASTLOGIN,new Date(user.getLastlogin()));
      StringBuffer html=new StringBuffer(512);
      html.append(user.getAddress());
      if (user.getAdditionalInfo(I_CmsConstants.C_ADDITIONAL_INFO_TOWN) != null) {
        html.append("<br>");
        if (user.getAdditionalInfo(I_CmsConstants.C_ADDITIONAL_INFO_ZIPCODE) != null) {
          html.append(user.getAdditionalInfo(I_CmsConstants.C_ADDITIONAL_INFO_ZIPCODE));
          html.append(" ");
        }
        html.append(user.getAdditionalInfo(I_CmsConstants.C_ADDITIONAL_INFO_TOWN));
      }
      item.set(LIST_DETAIL_ADDRESS,html.toString());
      Iterator itGroups=getCms().getGroupsOfUser(user.getName()).iterator();
      html=new StringBuffer(512);
      while (itGroups.hasNext()) {
        html.append(((CmsGroup)itGroups.next()).getName());
        if (itGroups.hasNext()) {
          html.append("<br>");
        }
        html.append("\n");
      }
      item.set(LIST_DETAIL_GROUPS,html.toString());
      ret.add(item);
    }
  }
 catch (  CmsException e) {
    throw new CmsRuntimeException(Messages.get().container(Messages.ERR_CREATE_LIST_1,this.getCms().getRequestContext().getUri()));
  }
  return ret;
}
