{
  if (configuration == null) {
    return;
  }
  configuration=CmsMacroResolver.resolveMacros(configuration,cms,widgetDialog.getMessages());
  JSONObject configJsonObj=new JSONObject();
  try {
    configJsonObj=new JSONObject(configuration);
  }
 catch (  JSONException e) {
    return;
  }
  JSONObject gConfigJsonObj=new JSONObject();
  JSONArray resTypes, tabs;
switch (getGalleryType(configJsonObj)) {
case imagegallery:
    gConfigJsonObj=configJsonObj.optJSONObject(CmsGalleryConfigKeys.imagegallery.toString());
  try {
    resTypes=new JSONArray(CmsGalleryConfigValues.RESOURCETYPE_IMAGEGALLERY.getName());
    tabs=new JSONArray(CmsGalleryConfigValues.TABS_IMAGEGALLERY.getName());
  }
 catch (  JSONException e) {
    resTypes=new JSONArray();
    tabs=new JSONArray();
  }
setResourceTypes(resTypes);
setTabs(tabs);
setImagegallery(true);
setButtonPrefix(CmsGalleryConfigValues.IMAGE.getName());
setImageGalleryConfigParams(cms,widgetDialog,param,gConfigJsonObj);
break;
case sitemap:
gConfigJsonObj=configJsonObj.optJSONObject(CmsGalleryConfigKeys.sitemap.toString());
try {
resTypes=new JSONArray(CmsGalleryConfigValues.RESOURCETYPE_CONTAINERPAGEGALLERY.getName());
tabs=new JSONArray(CmsGalleryConfigValues.TABS_CONTAINERPAGEGALLERY.getName());
}
 catch (JSONException e) {
resTypes=new JSONArray();
tabs=new JSONArray();
}
setResourceTypes(resTypes);
setTabs(tabs);
setImagegallery(false);
setButtonPrefix(CmsGalleryConfigValues.CONTAINER.getName());
setDefaultgalleryConfigPart(cms,widgetDialog,param,gConfigJsonObj);
break;
case container:
gConfigJsonObj=configJsonObj.optJSONObject(CmsGalleryConfigKeys.container.toString());
try {
resTypes=new JSONArray(CmsGalleryConfigValues.RESOURCETYPE_SITEMAPGALLERY.getName());
tabs=new JSONArray(CmsGalleryConfigValues.TABS_SITEMAPGALLERY.getName());
}
 catch (JSONException e) {
resTypes=new JSONArray();
tabs=new JSONArray();
}
setResourceTypes(resTypes);
setTabs(tabs);
setImagegallery(false);
setButtonPrefix(CmsGalleryConfigValues.SITEMAP.getName());
setDefaultgalleryConfigPart(cms,widgetDialog,param,gConfigJsonObj);
break;
case downloadgallery:
default :
gConfigJsonObj=configJsonObj.optJSONObject(CmsGalleryConfigKeys.downloadgallery.toString());
try {
resTypes=new JSONArray(CmsGalleryConfigValues.RESOURCETYPE_DOWNLOADGALLERY.getName());
tabs=new JSONArray(CmsGalleryConfigValues.TABS_DOWNLOADGALLERY.getName());
}
 catch (JSONException e) {
resTypes=new JSONArray();
tabs=new JSONArray();
}
setResourceTypes(resTypes);
setTabs(tabs);
setImagegallery(false);
setButtonPrefix(CmsGalleryConfigValues.DOWNLOAD.getName());
setDefaultgalleryConfigPart(cms,widgetDialog,param,gConfigJsonObj);
break;
}
}
