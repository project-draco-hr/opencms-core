{
  if (jsonObj == null) {
    return;
  }
  setClassName(jsonObj.optString(CmsGalleryConfigParam.CONFIG_KEY_CLASS.getName(),null));
  I_CmsImageWidgetDynamicConfiguration dynConf=null;
  if (getClassName() != null) {
    try {
      dynConf=(I_CmsImageWidgetDynamicConfiguration)Class.forName(getClassName()).newInstance();
    }
 catch (    Exception e) {
    }
  }
  setShowFormat(jsonObj.optBoolean(CmsGalleryConfigParam.CONFIG_KEY_USEFORMAT.getName()));
  if (isShowFormat()) {
    String optionsStr=(String)jsonObj.opt(CmsGalleryConfigParam.CONFIG_KEY_FORMATNAMES.getName());
    setSelectFormatString(optionsStr);
    setSelectFormat(CmsSelectWidgetOption.parseOptions(optionsStr));
    JSONArray formatValues=jsonObj.optJSONArray(CmsGalleryConfigParam.CONFIG_KEY_FORMATVALUES.getName());
    if (formatValues != null) {
      List formatValueList=new ArrayList(formatValues.length());
      for (int i=0; i < formatValues.length(); i++) {
        formatValueList.add(formatValues.optString(i));
      }
      setFormatValues(formatValueList);
    }
    if (dynConf != null) {
      setFormatValues(dynConf.getFormatValues(cms,widgetDialog,param,getSelectFormat(),getFormatValues()));
    }
  }
  setType(jsonObj.optString(CmsGalleryConfigParam.CONFIG_KEY_TYPE.getName()));
  if ((CmsGalleryConfigParam.CONFIG_VALUE_DYNAMIC.getName().equals(getType()) || CmsStringUtil.isEmpty(getType())) && (dynConf != null)) {
    setType(dynConf.getType(cms,widgetDialog,param));
  }
  setStartup(jsonObj.optString(CmsGalleryConfigParam.CONFIG_KEY_STARTUP.getName(),null));
  if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(getStartup())) {
    if (getStartup().startsWith("[") && getStartup().endsWith("]")) {
      setStartUpFolders(jsonObj.optJSONArray(CmsGalleryConfigParam.CONFIG_KEY_STARTUP.getName()));
      LOG.debug(jsonObj.optJSONArray(CmsGalleryConfigParam.CONFIG_KEY_STARTUP.getName()).toString());
    }
  }
  if ((CmsGalleryConfigParam.CONFIG_VALUE_DYNAMIC.getName().equals(getStartup()) || CmsStringUtil.isEmpty(getStartup())) && (dynConf != null)) {
    setStartup(dynConf.getStartup(cms,widgetDialog,param));
  }
  setScaleParams(jsonObj.optString(CmsGalleryConfigParam.CONFIG_KEY_SCALEPARAMS.getName()));
}
