{
  super();
  m_type=type;
  m_config=config;
  m_textBox=new TextBox();
  m_id="CmsVfsSelection_" + (idCounter++);
  m_textBox.getElement().setId(m_id);
  m_openSelection=new OpenButton(iconImage);
  m_textBoxContainer.add(m_openSelection);
  createFader();
  initWidget(m_panel);
  m_panel.add(m_textBoxContainer);
  m_fadePanel.setStyleName(I_CmsInputLayoutBundle.INSTANCE.inputCss().fader());
  m_textBoxContainer.setStyleName(I_CmsInputLayoutBundle.INSTANCE.inputCss().selectionInput());
  m_textBoxContainer.add(m_textBox);
  m_fadePanel.addDomHandler(new ClickHandler(){
    public void onClick(    ClickEvent event){
      m_textBox.setFocus(true);
    }
  }
,ClickEvent.getType());
  m_panel.add(m_error);
  m_textBoxContainer.addStyleName(I_CmsLayoutBundle.INSTANCE.generalCss().cornerAll());
  m_textBox.addMouseUpHandler(new MouseUpHandler(){
    public void onMouseUp(    MouseUpEvent event){
      m_textBoxContainer.remove(m_fadePanel);
      setTitle("");
      if (m_popup == null) {
        open();
      }
 else       if (m_popup.isShowing()) {
        close();
      }
 else {
        open();
      }
    }
  }
);
  m_textBox.addBlurHandler(new BlurHandler(){
    public void onBlur(    BlurEvent event){
      if ((m_textBox.getValue().length() * 6.88) > m_textBox.getOffsetWidth()) {
        m_textBoxContainer.add(m_fadePanel);
        setTitle(m_textBox.getValue());
      }
    }
  }
);
  m_openSelection.addClickHandler(new ClickHandler(){
    public void onClick(    ClickEvent event){
      if (m_popup == null) {
        open();
      }
 else       if (m_popup.isShowing()) {
        close();
      }
 else {
        open();
      }
    }
  }
);
}
