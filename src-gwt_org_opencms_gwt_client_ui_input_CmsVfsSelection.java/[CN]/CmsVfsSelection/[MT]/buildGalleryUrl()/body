{
  String basePath="";
  if (m_type.equals(LINK) || m_type.equals(DOWNLOAD) || m_type.equals(HTML)|| m_type.equals(TABLE)) {
    basePath="/system/workplace/galleries/" + m_type + "gallery/index.jsp";
  }
 else {
    basePath="/system/modules/org.opencms.ade.galleries/gallery.jsp";
  }
  basePath+="?dialogmode=widget&fieldid=" + m_id;
  String pathparameter=m_textBox.getText();
  if (pathparameter.indexOf("/") > -1) {
    basePath+="&currentelement=" + pathparameter;
  }
  if (m_type.equals(TABLE)) {
    basePath+=m_config;
  }
  if (m_type.equals(IMAGE_LINK)) {
    basePath+=m_config;
  }
  if (m_type.equals(DOWNLOAD_LINK)) {
    basePath+=m_config;
  }
  if (m_type.equals(LINK)) {
    basePath+="&params={\"startupfolder\":/,\"startuptype\":null}";
  }
  return CmsCoreProvider.get().link(basePath);
}
