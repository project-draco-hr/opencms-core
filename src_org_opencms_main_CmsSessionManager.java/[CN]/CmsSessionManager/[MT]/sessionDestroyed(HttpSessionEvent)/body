{
  m_sessionCountCurrent=(m_sessionCountCurrent <= 0) ? 0 : (m_sessionCountCurrent - 1);
  String sessionId=event.getSession().getId();
  CmsSessionInfo sessionInfo=(CmsSessionInfo)m_sessions.get(sessionId);
  CmsUUID userId=CmsUUID.getNullUUID();
  if (sessionInfo != null) {
    userId=sessionInfo.getUser().getId();
  }
synchronized (m_sessions) {
    m_sessions.remove(sessionId);
  }
  if (!userId.isNullUUID() && getSessionInfos(userId).size() == 0) {
    OpenCms.getLockManager().removeTempLocks(userId);
  }
  if (LOG.isInfoEnabled()) {
    LOG.info(Messages.get().key(Messages.LOG_SESSION_DESTROYED_2,new Integer(m_sessionCountTotal),new Integer(m_sessionCountCurrent)));
  }
  if (LOG.isDebugEnabled()) {
    LOG.debug(Messages.get().key(Messages.LOG_SESSION_DESTROYED_1,event.getSession().getId()));
  }
}
