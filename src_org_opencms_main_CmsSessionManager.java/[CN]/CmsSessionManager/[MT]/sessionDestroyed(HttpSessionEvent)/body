{
  m_sessionCountCurrent=(m_sessionCountCurrent <= 0) ? 0 : (m_sessionCountCurrent - 1);
  String sessionId=event.getSession().getId();
  CmsSessionInfo sessionInfo=(CmsSessionInfo)m_sessions.get(sessionId);
  CmsUUID userId=CmsUUID.getNullUUID();
  if (sessionInfo != null) {
    userId=sessionInfo.getUser().getId();
  }
synchronized (m_sessions) {
    m_sessions.remove(sessionId);
  }
  if (!userId.isNullUUID() && getSessionInfos(userId).size() == 0) {
    OpenCms.getLockManager().removeTempLocks(userId);
  }
  if (OpenCms.getLog(this).isInfoEnabled()) {
    OpenCms.getLog(this).info("Session destroyed - Total: " + m_sessionCountTotal + " Current: "+ m_sessionCountCurrent);
  }
  if (OpenCms.getLog(this).isDebugEnabled()) {
    OpenCms.getLog(this).debug("Session destroyed - Id was: " + event.getSession().getId());
  }
}
