{
  if (CmsStringUtil.isEmptyOrWhitespaceOnly(message)) {
    return;
  }
  CmsBroadcast broadcast=new CmsBroadcast(fromUser,message);
  List userSessions=getSessionInfos(toUser.getId());
  Iterator i=userSessions.iterator();
  while (i.hasNext()) {
    CmsSessionInfo sessionInfo=(CmsSessionInfo)i.next();
    if (m_sessionStorageProvider.get(sessionInfo.getSessionId()) != null) {
      sessionInfo.getBroadcastQueue().add(broadcast);
    }
  }
}
