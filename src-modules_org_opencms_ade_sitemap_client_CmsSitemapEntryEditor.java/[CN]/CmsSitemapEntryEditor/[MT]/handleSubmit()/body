{
  final Map<String,String> fieldValues=getForm().collectValues();
  final String titleValue=getAndRemoveValue(fieldValues,FIELD_TITLE);
  final String urlNameValue=getAndRemoveValue(fieldValues,FIELD_URLNAME);
  CmsPair<String,String> templateProps=getTemplateProperties(fieldValues);
  fieldValues.put(CmsSitemapManager.Property.template.toString(),templateProps.getFirst());
  fieldValues.put(CmsSitemapManager.Property.templateInherited.toString(),templateProps.getSecond());
  CmsCoreProvider.get().translateUrlName(urlNameValue,new AsyncCallback<String>(){
    /** 
 * @see com.google.gwt.user.client.rpc.AsyncCallback#onFailure(java.lang.Throwable)
 */
    public void onFailure(    Throwable caught){
    }
    /** 
 * @see com.google.gwt.user.client.rpc.AsyncCallback#onSuccess(Object)
 */
    public void onSuccess(    String newUrlName){
      setUrlNameField(newUrlName);
      if (m_mode == Mode.EDIT) {
        String newPath=CmsResource.getParentFolder(m_entry.getSitePath()) + newUrlName + "/";
        if (!newPath.equals(m_entry.getSitePath()) && (m_controller.getEntry(newPath) != null)) {
          showUrlNameError(message(Messages.GUI_URLNAME_ALREADY_EXISTS_0));
        }
 else {
          hide();
          m_controller.edit(m_entry,titleValue,null,fieldValues);
          m_controller.move(m_entry,newPath,m_entry.getPosition());
        }
      }
 else {
        String newPath=m_entry.getSitePath() + newUrlName + "/";
        if (m_controller.getEntry(newPath) != null) {
          showUrlNameError(message(Messages.GUI_URLNAME_ALREADY_EXISTS_0));
        }
 else {
          hide();
          CmsClientSitemapEntry entry=new CmsClientSitemapEntry();
          entry.setName(newUrlName);
          entry.setSitePath(newPath);
          entry.setTitle(titleValue);
          entry.setVfsPath("/");
          entry.getProperties().putAll(fieldValues);
          m_controller.create(entry);
        }
      }
    }
  }
);
}
