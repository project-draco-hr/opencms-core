{
  super(GalleryTabId.cms_tab_search.name());
  m_tab=uiBinder.createAndBindUi(this);
  initWidget(m_tab);
  m_tabHandler=tabHandler;
  m_autoHideParent=autoHideParent;
  m_availableLocales=availableLocales;
  m_localeLabel.setText(Messages.get().key(Messages.GUI_TAB_SEARCH_LANGUAGE_LABEL_TEXT_0));
  m_localeSelection.addOption(NOT_SET_OPTION_VALUE,Messages.get().key(Messages.GUI_TAB_SEARCH_LANGUAGE_NOT_SEL_0));
  for (  Map.Entry<String,String> entry : availableLocales.entrySet()) {
    m_localeSelection.addOption(entry.getKey(),entry.getValue());
    m_localeSelection.addValueChangeHandler(new LanguageChangeHandler());
  }
  if (availableLocales.size() <= 1) {
    m_localeRow.getElement().getStyle().setDisplay(Display.NONE);
  }
  m_searchLabel.setText(Messages.get().key(Messages.GUI_TAB_SEARCH_LABEL_TEXT_0));
  QueryChangedHandler queryHandler=new QueryChangedHandler();
  m_searchInput.addValueChangeHandler(queryHandler);
  m_searchInput.addKeyPressHandler(queryHandler);
  m_dateCreatedStartLabel.setText(Messages.get().key(Messages.GUI_TAB_SEARCH_LABEL_CREATED_SINCE_0));
  m_dateCreatedEndLabel.setText(Messages.get().key(Messages.GUI_TAB_SEARCH_LABEL_CREATED_UNTIL_0));
  m_dateModifiedStartLabel.setText(Messages.get().key(Messages.GUI_TAB_SEARCH_LABEL_MODIFIED_SINCE_0));
  m_dateModifiedEndLabel.setText(Messages.get().key(Messages.GUI_TAB_SEARCH_LABEL_MODIFIED_UNTIL_0));
  if (m_autoHideParent != null) {
    m_dateCreatedEndDateBox.setAutoHideParent(m_autoHideParent);
    m_dateCreatedStartDateBox.setAutoHideParent(m_autoHideParent);
    m_dateModifiedEndDateBox.setAutoHideParent(m_autoHideParent);
    m_dateModifiedStartDateBox.setAutoHideParent(m_autoHideParent);
  }
  DateBoxChangeHandler handler=new DateBoxChangeHandler();
  m_dateCreatedStartDateBox.addValueChangeHandler(handler);
  m_dateCreatedStartDateBox.addKeyPressHandler(handler);
  m_dateCreatedEndDateBox.addValueChangeHandler(handler);
  m_dateCreatedEndDateBox.addKeyPressHandler(handler);
  m_dateModifiedStartDateBox.addValueChangeHandler(handler);
  m_dateModifiedStartDateBox.addKeyPressHandler(handler);
  m_dateModifiedEndDateBox.addValueChangeHandler(handler);
  m_dateModifiedEndDateBox.addKeyPressHandler(handler);
  m_clearButton.setText(Messages.get().key(Messages.GUI_TAB_SEARCH_BUTTON_CLEAR_0));
  m_clearButton.setUseMinWidth(true);
  ClearButtonClickHandler clearHandler=new ClearButtonClickHandler();
  m_clearButton.addClickHandler(clearHandler);
}
