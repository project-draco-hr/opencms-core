{
  target.getElement().addClassName(I_CmsLayoutBundle.INSTANCE.dragdropCss().dragging());
  String positioning=CmsDomUtil.getCurrentStyle(target.getElement(),org.opencms.gwt.client.util.CmsDomUtil.Style.position);
  if (!Position.ABSOLUTE.getCssName().equals(positioning) && !Position.FIXED.getCssName().equals(positioning)) {
    target.getElement().getStyle().setPosition(Position.RELATIVE);
    if (target.getElement().getFirstChildElement() == null) {
      if (CmsDomUtil.getCurrentStyleInt(target.getElement(),CmsDomUtil.Style.marginTop) < MINIMUM_CONTAINER_MARGIN) {
        target.getElement().getStyle().setMarginTop(MINIMUM_CONTAINER_MARGIN,Unit.PX);
      }
      if (CmsDomUtil.getCurrentStyleInt(target.getElement(),CmsDomUtil.Style.marginBottom) < MINIMUM_CONTAINER_MARGIN) {
        target.getElement().getStyle().setMarginBottom(MINIMUM_CONTAINER_MARGIN,Unit.PX);
      }
    }
  }
  target.getElement().appendChild(dragHelper);
  int width=CmsDomUtil.getCurrentStyleInt(dragHelper,CmsDomUtil.Style.width);
  Style style=dragHelper.getStyle();
  style.setPosition(Position.ABSOLUTE);
  style.setMargin(0,Unit.PX);
  style.setWidth(width,Unit.PX);
  style.setZIndex(I_CmsLayoutBundle.INSTANCE.constants().css().zIndexDND());
  dragHelper.addClassName(I_CmsLayoutBundle.INSTANCE.dragdropCss().dragging());
  dragHelper.addClassName(org.opencms.gwt.client.ui.css.I_CmsLayoutBundle.INSTANCE.generalCss().shadow());
  if (!CmsDomUtil.hasBackgroundImage(dragHelper)) {
    dragHelper.getStyle().setBackgroundColor(CmsDomUtil.getEffectiveBackgroundColor(dragHelper));
  }
  if (!CmsDomUtil.hasBorder(dragHelper)) {
    dragHelper.addClassName(I_CmsLayoutBundle.INSTANCE.dragdropCss().dragElementBorder());
  }
  style.setDisplay(Display.NONE);
  m_dragInfos.put(target,new DragInfo(dragHelper,placeholder,width - 15,handler.getCursorOffsetY()));
  handler.addTarget(target);
  Element button=DOM.createDiv();
  button.appendChild((new Image(I_CmsImageBundle.INSTANCE.icons().moveIconActive())).getElement());
  button.addClassName(I_CmsLayoutBundle.INSTANCE.dragdropCss().dragHandle());
  dragHelper.appendChild(button);
}
