{
  CmsContainerPageElementPanel dragElement=new CmsContainerPageElementPanel(element,dragParent,elementData.getClientId(),elementData.getSitePath(),elementData.getNoEditReason(),elementData.getTitle(),elementData.getSubTitle(),elementData.getResourceType(),elementData.hasSettings(dragParent.getContainerId()),elementData.hasViewPermission(),elementData.hasWritePermission(),elementData.isReleasedAndNotExpired(),elementData.isNewEditorDisabled());
  boolean isSubElement=dragParent instanceof CmsGroupContainerElementPanel;
  boolean isContainerEditable=isSubElement || !m_controller.isDetailPage() || dragParent.isDetailView()|| dragParent.isDetailOnly();
  if (isContainerEditable) {
    addOptionBar(dragElement);
  }
  if (!m_controller.getData().isUseClassicEditor() && m_controller.hasActiveSelection() && isContainerEditable&& (!isSubElement || m_controller.isGroupcontainerEditing())) {
    dragElement.initInlineEditor(m_controller);
  }
  return dragElement;
}
