{
  if (OpenCms.isLogging(CmsLog.CHANNEL_MAIN,CmsLog.LEVEL_ERROR)) {
    OpenCms.log(CmsLog.CHANNEL_MAIN,CmsLog.LEVEL_ERROR,getClassName() + errorText);
    OpenCms.log(CmsLog.CHANNEL_MAIN,CmsLog.LEVEL_ERROR,getClassName() + "--> Exception: " + com.opencms.util.Utils.getStackTrace(e));
    OpenCms.log(CmsLog.CHANNEL_MAIN,CmsLog.LEVEL_ERROR,getClassName() + "--> Cannot create output for this file. Must send error. Sorry.");
  }
  CmsRequestContext reqContext=cms.getRequestContext();
  if ((DEBUG == 0) && reqContext.currentUser().isGuestUser() && (!(e instanceof CmsException && ((CmsException)e).getType() == CmsException.C_NO_USER))) {
    throw new CmsException(errorText,CmsException.C_SERVICE_UNAVAILABLE,e);
  }
 else {
    if (e instanceof CmsException) {
      throw (CmsException)e;
    }
 else {
      throw new CmsException(errorText,CmsException.C_LOADER_ERROR,e);
    }
  }
}
