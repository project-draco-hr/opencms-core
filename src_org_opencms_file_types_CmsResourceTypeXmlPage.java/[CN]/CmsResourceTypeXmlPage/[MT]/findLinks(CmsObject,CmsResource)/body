{
  List links=new ArrayList();
  CmsFile file=null;
  CmsXmlPage xmlPage=null;
  List locales=null;
  List elementNames=null;
  String elementName=null;
  CmsLinkTable linkTable=null;
  String linkName=null;
  CmsLink link=null;
  try {
    file=cms.readFile(cms.getRequestContext().removeSiteRoot(resource.getRootPath()),CmsResourceFilter.IGNORE_EXPIRATION);
  }
 catch (  CmsException e) {
    if (OpenCms.getLog(this).isErrorEnabled()) {
      OpenCms.getLog(this).error("Error reading file content of " + resource.getRootPath(),e);
    }
    return Collections.EMPTY_LIST;
  }
  try {
    xmlPage=CmsXmlPageFactory.unmarshal(cms,file);
    locales=xmlPage.getLocales();
    Iterator i=locales.iterator();
    while (i.hasNext()) {
      Locale locale=(Locale)i.next();
      elementNames=xmlPage.getNames(locale);
      Iterator j=elementNames.iterator();
      while (j.hasNext()) {
        elementName=(String)j.next();
        linkTable=xmlPage.getLinkTable(elementName,locale);
        Iterator k=linkTable.iterator();
        while (k.hasNext()) {
          linkName=(String)k.next();
          link=linkTable.getLink(linkName);
          if (link.isInternal()) {
            links.add(link.getTarget());
          }
        }
      }
    }
  }
 catch (  CmsXmlException e) {
    if (OpenCms.getLog(this).isErrorEnabled()) {
      OpenCms.getLog(this).error("Error processing HTML content of " + resource.getRootPath(),e);
    }
    return Collections.EMPTY_LIST;
  }
  return links;
}
