{
  if (resource.getLength() > 0) {
    CmsXmlPage xmlPage=CmsXmlPage.unmarshal(cms,resource,false);
    xmlPage.validateXmlStructure(new CmsXmlEntityResolver(cms));
    resource=xmlPage.correctHtmlStructure(cms);
  }
  return super.writeFile(cms,driverManger,resource);
}
