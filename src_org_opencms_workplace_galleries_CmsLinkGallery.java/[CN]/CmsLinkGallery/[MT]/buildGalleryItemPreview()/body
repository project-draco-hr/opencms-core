{
  StringBuffer html=new StringBuffer(32);
  try {
    if (CmsStringUtil.isNotEmpty(getParamResourcePath())) {
      CmsResource res=getCms().readResource(getParamResourcePath());
      if (res != null) {
        setCurrentResource(res);
        changePointer(res);
        String pointer=new String(CmsFile.upgrade(res,getCms()).getContents());
        if (CmsStringUtil.isEmptyOrWhitespaceOnly(pointer)) {
          pointer=getJsp().link(getCms().getSitePath(res));
        }
        String title=getPropertyValue(res,CmsPropertyDefinition.PROPERTY_TITLE);
        String description=getJsp().property(CmsPropertyDefinition.PROPERTY_DESCRIPTION,getParamResourcePath());
        String keywords=getJsp().property(CmsPropertyDefinition.PROPERTY_KEYWORDS,getParamResourcePath());
        String lastmodified=getMessages().getDateTime(res.getDateLastModified());
        html.append("<table cellpadding=\"2\" cellspacing=\"2\" border=\"0\" style=\"align: middle; width:100%; background-color: ThreeDFace; margin: 0;\">\n");
        String link=new StringBuffer(key(Messages.GUI_INPUT_LINKTO_0)).append(" (<a href=\"#\" onclick=\"javascript:window.open('").append(getJsp().link(getCms().getSitePath(res))).append("','_preview','')\">").append(key(Messages.GUI_BUTTON_PREVIEW_0)).append("</a>)").toString();
        html.append(previewRow(link,pointer,VALUE_EDITPROPERTY_LINK));
        html.append(previewRow(key(Messages.GUI_INPUT_TITLE_0),title,VALUE_EDITPROPERTY_TITLE));
        html.append(previewRow(key(Messages.GUI_LABEL_NAME_0),res.getName(),false));
        html.append(previewRow(key(Messages.GUI_INPUT_DATELASTMODIFIED_0),lastmodified,false));
        if (CmsStringUtil.isNotEmpty(description)) {
          html.append(previewRow(key(Messages.GUI_INPUT_DESCRIPTION_0),description));
        }
        if (CmsStringUtil.isNotEmpty(keywords)) {
          html.append(previewRow(key(Messages.GUI_INPUT_KEYWORDS_0),keywords));
        }
        html.append("<form name=\"pointerchange\" action=\"").append(getJsp().link("gallery_preview.jsp")).append("\" target=\"gallery_preview\" method=\"post\" class=\"nomargin\">\n");
        html.append("\t<input type=\"hidden\" id=\"").append(PARAM_EDITPROPERTY).append("\" name=\"").append(PARAM_EDITPROPERTY).append("\"/>\n");
        html.append("\t<input type=\"hidden\" id=\"").append(PARAM_EDITPROPERTY_VALUE).append("\" name=\"").append(PARAM_EDITPROPERTY_VALUE).append("\"/>\n");
        html.append("\t<input type=\"hidden\" id=\"").append(PARAM_ACTION).append("\" name=\"").append(PARAM_ACTION).append("\" value=\"").append(DIALOG_EDITPROPERTY).append("\"/>\n");
        html.append("\t<input type=\"hidden\" id=\"").append(PARAM_RESOURCEPATH).append("\" name=\"").append(PARAM_RESOURCEPATH).append("\"pointerPropertyValue\" value=\"").append(this.getParamResourcePath()).append("\"/>\n");
        html.append("</form>\n");
      }
    }
  }
 catch (  CmsException e) {
    LOG.error(e.getLocalizedMessage(),e);
  }
  return html.toString();
}
