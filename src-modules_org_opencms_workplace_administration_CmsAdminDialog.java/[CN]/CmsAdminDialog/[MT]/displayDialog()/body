{
  Map params=initAdminTool();
  if (getCurrentToolPath().indexOf("/galleryoverview/") > -1 || getCurrentToolPath().indexOf("/projects/files") > -1) {
    if (getAction() == CmsDialog.ACTION_CANCEL) {
      actionCloseDialog();
      return;
    }
    getJsp().include("tool-fs.html",null,params);
    return;
  }
  if (!getAdminTool().getHandler().getLink().equals(getCms().getRequestContext().getUri())) {
    getJsp().include(getAdminTool().getHandler().getLink(),null,params);
    return;
  }
  if (getAction() == CmsDialog.ACTION_CANCEL) {
    actionCloseDialog();
    return;
  }
  JspWriter out=getJsp().getJspContext().getOut();
  out.print(htmlStart());
  out.print(bodyStart(null));
  out.print(dialogStart());
  out.print(dialogContentStart(getParamTitle()));
  out.print(dialogContentEnd());
  out.print(dialogEnd());
  out.print(bodyEnd());
  out.print(htmlEnd());
}
