{
  if (source == null) {
    return null;
  }
  StringBuffer ret=new StringBuffer();
  String enc;
  try {
    enc=URLEncoder.encode(source,encoding);
  }
 catch (  UnsupportedEncodingException e) {
    enc=URLEncoder.encode(source);
  }
  for (int z=0; z < enc.length(); z++) {
    if (enc.charAt(z) == '+') {
      ret.append("%20");
    }
 else {
      ret.append(enc.charAt(z));
    }
  }
  return ret.toString();
}
