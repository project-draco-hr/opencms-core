{
  ArrayList navList=new ArrayList();
  ArrayList options=new ArrayList();
  ArrayList values=new ArrayList();
  String filename=getParamResource();
  CmsJspNavElement curNav=CmsJspNavBuilder.getNavigationForResource(getCms(),filename);
  filename=CmsResource.getParentFolder(filename);
  navList=CmsJspNavBuilder.getNavigationForFolder(getCms(),filename);
  float maxValue=0;
  float nextPos=0;
  float firstValue=1;
  try {
    CmsJspNavElement ne=(CmsJspNavElement)navList.get(0);
    maxValue=ne.getNavPosition();
  }
 catch (  Exception e) {
  }
  if (maxValue != 0) {
    firstValue=maxValue / 2;
  }
  options.add(key("input.firstelement"));
  values.add(firstValue + "");
  for (int i=0; i < navList.size(); i++) {
    CmsJspNavElement ne=(CmsJspNavElement)navList.get(i);
    String navText=ne.getNavText();
    float navPos=ne.getNavPosition();
    nextPos=navPos + 2;
    if ((i + 1) < navList.size()) {
      nextPos=((CmsJspNavElement)navList.get(i + 1)).getNavPosition();
    }
    float newPos=(navPos + nextPos) / 2;
    if (navPos > maxValue) {
      maxValue=navPos;
    }
    if (curNav.getNavText().equals(navText) && curNav.getNavPosition() == navPos) {
      options.add(Encoder.escapeHtml(key("input.currentposition") + " [" + ne.getFileName()+ "]"));
      values.add("-1");
    }
 else {
      options.add(Encoder.escapeHtml(navText + " [" + ne.getFileName()+ "]"));
      values.add(newPos + "");
    }
  }
  options.add(key("input.lastelement"));
  values.add((maxValue + 1) + "");
  options.add(key("input.nochange"));
  values.add("-1");
  return buildSelect("name=\"" + PARAM_NAVPOS + "\"",options,values,values.size() - 1);
}
