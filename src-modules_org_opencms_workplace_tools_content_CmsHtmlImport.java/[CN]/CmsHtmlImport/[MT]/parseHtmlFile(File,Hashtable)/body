{
  String parsedHtml="";
  try {
    byte[] content=getFileBytes(file);
    String contentString=new String(content,m_inputEncoding);
    contentString=CmsEncoder.escapeNonAscii(contentString);
    contentString=substitute(contentString,"&#","{subst}");
    parsedHtml=m_htmlConverter.convertHTML(file.getAbsolutePath(),contentString,m_startPattern,m_endPattern,properties);
    parsedHtml=substitute(parsedHtml,"{subst}","&#");
  }
 catch (  Exception e) {
    if (OpenCms.getLog(CmsLog.CHANNEL_INIT).isWarnEnabled()) {
      OpenCms.getLog(CmsLog.CHANNEL_INIT).warn(e.getMessage());
    }
    e.printStackTrace();
    throw new CmsException("Error parsing HTML Content",e);
  }
  return parsedHtml;
}
