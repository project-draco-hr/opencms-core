{
  String contextMenu=null;
  if (res.getState() != CmsResource.STATE_DELETED) {
    if ((cms.getRequestContext().currentProject().isOnlineProject()) || (!cms.isInsideCurrentProject(cms.getSitePath(res)))) {
      if (res.isFile()) {
        contextMenu=C_DEFAULT_CONTEXTMENU;
      }
 else {
        contextMenu=C_DEFAULT_CONTEXTMENUFOLDER;
      }
    }
 else {
      I_CmsResourceType type=OpenCms.getResourceManager().getResourceType(res.getTypeId());
      contextMenu=type.getTypeName();
      CmsLock lock=cms.getLock(res);
      if (!lock.isNullLock()) {
        contextMenu+=C_CONTEXT_LOCK;
        if (cms.getRequestContext().currentUser().getId().equals(lock.getUserId())) {
          contextMenu+=C_CONTEXT_LOCKUSER;
        }
      }
    }
  }
 else {
    contextMenu="";
  }
  return contextMenu;
}
