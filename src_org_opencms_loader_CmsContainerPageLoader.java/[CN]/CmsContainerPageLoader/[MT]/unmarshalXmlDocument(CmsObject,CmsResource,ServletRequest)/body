{
  CmsXmlContent content;
  if (req != null) {
    content=CmsXmlContentFactory.unmarshal(cms,resource,req);
  }
 else {
    content=CmsXmlContentFactory.unmarshal(cms,cms.readFile(resource));
  }
  if (m_cache.get(cms,resource) == null) {
    try {
      setCache(cms,resource,jsonify(cms,content));
    }
 catch (    JSONException e) {
      throw new CmsException(Messages.get().container(Messages.ERR_JSON_EXCEPTION_1,e.getLocalizedMessage()));
    }
  }
  return content;
}
