{
  List<CmsNewResourceInfo> result=new ArrayList<CmsNewResourceInfo>();
  for (  CmsResourceTypeConfig typeConfig : configData.getResourceTypes()) {
    if (typeConfig.getDetailPagesDisabled()) {
      continue;
    }
    String typeName=typeConfig.getTypeName();
    try {
      I_CmsResourceType resourceType=OpenCms.getResourceManager().getResourceType(typeName);
      result.add(createResourceTypeInfo(resourceType,configData.getDefaultModelPage().getResource()));
    }
 catch (    CmsLoaderException e) {
      LOG.error(e.getLocalizedMessage(),e);
    }
  }
  List<CmsFunctionReference> functionRefs=configData.getFunctionReferences();
  for (  CmsFunctionReference functionRef : functionRefs) {
    try {
      CmsResource functionRes=cms.readResource(functionRef.getStructureId());
      CmsNewResourceInfo info=new CmsNewResourceInfo(configData.getDefaultModelPage().getResource().getTypeId(),CmsDetailPageInfo.FUNCTION_PREFIX + functionRef.getName(),functionRef.getName(),cms.readPropertyObject(functionRes,CmsPropertyDefinition.PROPERTY_DESCRIPTION,false).getValue(),configData.getDefaultModelPage().getResource().getStructureId(),cms.readPropertyObject(functionRes,CmsPropertyDefinition.PROPERTY_DESCRIPTION,false).getValue());
      info.setAdditionalData(functionRef.getStructureId().toString());
      result.add(info);
    }
 catch (    CmsVfsResourceNotFoundException e) {
      LOG.warn(e.getLocalizedMessage(),e);
    }
catch (    CmsException e) {
      LOG.error(e.getLocalizedMessage(),e);
    }
  }
  return result;
}
