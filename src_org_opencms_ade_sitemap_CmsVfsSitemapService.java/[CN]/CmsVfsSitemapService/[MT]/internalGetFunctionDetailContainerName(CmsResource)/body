{
  try {
    CmsObject cms=getCmsObject();
    CmsObject rootCms=OpenCms.initCmsObject(cms);
    rootCms.getRequestContext().setSiteRoot("");
    CmsProperty templateProp=cms.readPropertyObject(parent,CmsPropertyDefinition.PROPERTY_TEMPLATE,true);
    String templateVal=templateProp.getValue();
    if (templateVal == null) {
      return null;
    }
    CmsResource templateRes;
    try {
      templateRes=cms.readResource(templateVal);
    }
 catch (    CmsVfsResourceNotFoundException e) {
      templateRes=rootCms.readResource(templateVal);
    }
    CmsProperty functionDetailProp=cms.readPropertyObject(templateRes,CmsPropertyDefinition.PROPERTY_TEMPLATE_FUNCTIONDETAIL,true);
    return functionDetailProp.getValue();
  }
 catch (  CmsException e) {
    LOG.warn(e.getLocalizedMessage(),e);
    return null;
  }
}
