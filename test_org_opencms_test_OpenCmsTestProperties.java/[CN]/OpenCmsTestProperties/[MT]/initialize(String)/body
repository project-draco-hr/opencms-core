{
  if (m_testSingleton != null) {
    return;
  }
  ExtendedProperties props=null;
  String testPropPath;
  m_testSingleton=new OpenCmsTestProperties();
  m_testSingleton.m_basePath=basePath;
  if (!m_testSingleton.m_basePath.endsWith("/")) {
    m_testSingleton.m_basePath+="/";
  }
  try {
    testPropPath=CmsFileUtil.getResourcePathFromClassloader("test.properties");
    if (testPropPath == null) {
      throw new RuntimeException("Test property file ('test.properties') could not be found by context Classloader.");
    }
    File f=new File(testPropPath);
    if (!f.exists()) {
      throw new RuntimeException("Test property file ('test.properties') could not be found. Context Classloader suggested location: " + testPropPath);
    }
    props=CmsPropertyUtils.loadProperties(testPropPath);
  }
 catch (  IOException e) {
    e.printStackTrace(System.out);
    throw new RuntimeException(e);
  }
  m_testSingleton.m_testDataPath=props.getString("test.data.path");
  m_testSingleton.m_testWebappPath=props.getString("test.webapp.path");
  m_testSingleton.m_dbProduct=props.getString("db.product");
}
