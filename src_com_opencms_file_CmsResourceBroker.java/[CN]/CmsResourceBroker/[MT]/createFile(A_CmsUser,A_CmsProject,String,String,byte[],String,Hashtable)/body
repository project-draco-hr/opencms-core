{
  validFilename(filename);
  A_CmsResource onlineResource=null;
  try {
    onlineResource=m_fileRb.readFileHeader(onlineProject(currentUser,currentProject),folder + filename);
  }
 catch (  CmsException exc) {
  }
  if (onlineResource != null) {
    throw new CmsException(folder + filename,CmsException.C_FILE_EXISTS);
  }
  CmsFolder cmsFolder=m_fileRb.readFolder(currentProject,folder);
  if (accessCreate(currentUser,currentProject,(A_CmsResource)cmsFolder)) {
    return (m_fileRb.createFile(currentUser,currentProject,onlineProject(currentUser,currentProject),folder + filename,0,contents,getResourceType(currentUser,currentProject,type)));
  }
 else {
    throw new CmsException(folder + filename,CmsException.C_NO_ACCESS);
  }
}
