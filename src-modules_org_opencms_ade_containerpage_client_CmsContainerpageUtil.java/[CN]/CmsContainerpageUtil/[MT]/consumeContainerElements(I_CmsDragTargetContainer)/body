{
  List<CmsDragContainerElement> elements=new ArrayList<CmsDragContainerElement>();
  Element child=(Element)container.getElement().getFirstChildElement();
  while (child != null) {
    if (CmsDomUtil.hasClass(CLASS_CONTAINER_ELEMENTS,child)) {
      String clientId=child.getAttribute("title");
      String sitePath=child.getAttribute("alt");
      String noEditReason=child.getAttribute("rel");
      Element elementRoot=(Element)child.getFirstChildElement();
      DOM.removeChild(child,elementRoot);
      elements.add(createElement(elementRoot,container,clientId,sitePath,noEditReason));
      DOM.removeChild(container.getElement(),child);
    }
 else     if (CmsDomUtil.hasClass(CLASS_SUB_CONTAINER_ELEMENTS,child)) {
      String clientId=child.getAttribute("title");
      String sitePath=child.getAttribute("alt");
      String noEditReason=child.getAttribute("rel");
      CmsDragSubcontainer subContainer=createSubcontainer(child,container,clientId,sitePath,noEditReason);
      elements.add(subContainer);
      DOM.removeChild(container.getElement(),child);
      consumeContainerElements(subContainer);
      addOptionBar(subContainer);
    }
 else {
      DOM.removeChild(container.getElement(),child);
    }
    child=(Element)container.getElement().getFirstChildElement();
  }
  Iterator<CmsDragContainerElement> it=elements.iterator();
  while (it.hasNext()) {
    container.add(it.next());
  }
}
