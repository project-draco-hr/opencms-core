{
  List<CmsContainerPageElement> elements=new ArrayList<CmsContainerPageElement>();
  Element child=(Element)container.getElement().getFirstChildElement();
  while (child != null) {
    boolean isContainerElement=CmsDomUtil.hasClass(CLASS_CONTAINER_ELEMENTS,child);
    boolean isGroupcontainerElement=CmsDomUtil.hasClass(CLASS_GROUP_CONTAINER_ELEMENTS,child);
    if (isContainerElement || isGroupcontainerElement) {
      String clientId=child.getAttribute("title");
      String sitePath=child.getAttribute("alt");
      String noEditReason=child.getAttribute("rel");
      String newType=child.getAttribute("newType");
      boolean hasProps=Boolean.parseBoolean(child.getAttribute("hasprops"));
      if (isContainerElement) {
        Element elementRoot=(Element)child.getFirstChildElement();
        CmsDomUtil.removeScriptTags(elementRoot);
        DOM.removeChild(child,elementRoot);
        CmsContainerPageElement containerElement=createElement(elementRoot,container,clientId,sitePath,noEditReason,hasProps);
        if ((newType != null) && (newType.length() > 0)) {
          containerElement.setNewType(newType);
        }
        elements.add(containerElement);
        DOM.removeChild((Element)container.getElement(),child);
      }
 else       if (isGroupcontainerElement && (container instanceof CmsContainerPageContainer)) {
        CmsDomUtil.removeScriptTags(child);
        CmsGroupContainerElement groupContainer=createGroupcontainer(child,container,clientId,sitePath,noEditReason,hasProps);
        groupContainer.setContainerId(container.getContainerId());
        elements.add(groupContainer);
        DOM.removeChild((Element)container.getElement(),child);
        consumeContainerElements(groupContainer);
        addOptionBar(groupContainer);
      }
    }
 else {
      DOM.removeChild((Element)container.getElement(),child);
    }
    child=(Element)container.getElement().getFirstChildElement();
  }
  Iterator<CmsContainerPageElement> it=elements.iterator();
  while (it.hasNext()) {
    container.add(it.next());
  }
}
