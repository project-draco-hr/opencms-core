{
  if ((!context.currentProject().isOnlineProject()) && (isManagerOfProject(context)) && (context.currentProject().getFlags() == I_CmsConstants.C_PROJECT_STATE_UNLOCKED)) {
    if (!isInsideCurrentProject(context,resource.getRootPath())) {
      if (resource.isFolder()) {
        List projectResources=m_projectDriver.readProjectResources(context.currentProject());
        for (int i=0; i < projectResources.size(); i++) {
          String resname=(String)projectResources.get(i);
          if (resname.startsWith(resource.getRootPath())) {
            m_projectDriver.deleteProjectResource(context.currentProject().getId(),resname);
          }
        }
      }
      try {
        m_projectDriver.createProjectResource(context.currentProject().getId(),resource.getRootPath(),null);
      }
 catch (      CmsException exc) {
      }
 finally {
        OpenCms.fireCmsEvent(new CmsEvent(new CmsObject(),I_CmsEventListener.EVENT_PROJECT_MODIFIED,Collections.singletonMap("project",context.currentProject())));
      }
    }
  }
 else {
    throw new CmsSecurityException("[" + this.getClass().getName() + "] "+ context.currentProject().getName(),CmsSecurityException.C_SECURITY_NO_PERMISSIONS);
  }
}
