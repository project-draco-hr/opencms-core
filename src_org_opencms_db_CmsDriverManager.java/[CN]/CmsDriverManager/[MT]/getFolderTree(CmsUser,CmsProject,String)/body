{
  String cacheKey=getCacheKey(currentUser.getName() + "_tree",currentUser,currentProject,rootName);
  Vector retValue=(Vector)m_resourceListCache.get(cacheKey);
  if (retValue == null || retValue.size() == 0) {
    Vector resources=m_vfsDriver.getFolderTree(currentProject.getId(),rootName);
    retValue=new Vector(resources.size());
    String lastcheck="#";
    CmsAccessGuard accessGuard=getVfsAccessGuard(currentUser,currentProject);
    for (Enumeration e=resources.elements(); e.hasMoreElements(); ) {
      CmsResource res=(CmsResource)e.nextElement();
      if (!res.getAbsolutePath().startsWith(lastcheck)) {
        if (accessGuard.check(res,C_VIEW_ACCESS,false)) {
          retValue.addElement(res);
        }
 else {
          lastcheck=res.getAbsolutePath();
        }
      }
    }
    m_resourceListCache.put(cacheKey,retValue);
  }
  return (retValue == null) ? null : (Vector)retValue.clone();
}
