{
  CmsResource resource=null;
  resource=readFileHeader(currentUser,currentProject,resName,true);
  getVfsAccessGuard(currentUser,currentProject).check(resource,I_CmsConstants.C_WRITE_ACCESS);
  m_vfsDriver.replaceResource(currentUser,currentProject,resource,newResContent,getResourceType(currentUser,currentProject,newResType));
  m_vfsDriver.writeProperties(newResProps,currentProject.getId(),resource,resource.getType());
  m_propertyCache.clear();
  clearResourceCache();
  return resource;
}
