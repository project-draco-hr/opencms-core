{
  int folderCount=0;
  boolean lastResourceIsFile=false;
  List pathList=null;
  String currentResourceName=null;
  CmsResource currentResource=null;
  int i=0, count=0;
  String cacheKey=null;
  List tokens=CmsStringUtil.splitAsList(path,'/');
  count=tokens.size() + 1;
  pathList=new ArrayList(count);
  folderCount=count;
  if (!path.endsWith("/")) {
    folderCount--;
    lastResourceIsFile=true;
  }
  currentResourceName="/";
  StringBuffer currentPath=new StringBuffer(64);
  currentPath.append('/');
  String cp=currentPath.toString();
  cacheKey=getCacheKey(null,false,projectId,cp);
  if ((currentResource=(CmsResource)m_resourceCache.get(cacheKey)) == null) {
    currentResource=m_vfsDriver.readFolder(dbc,projectId,cp);
    m_resourceCache.put(cacheKey,currentResource);
  }
  pathList.add(0,currentResource);
  if (count == 1) {
    return pathList;
  }
  Iterator it=tokens.iterator();
  currentResourceName=(String)it.next();
  for (i=1; i < folderCount; i++) {
    currentPath.append(currentResourceName);
    currentPath.append('/');
    cp=currentPath.toString();
    cacheKey=getCacheKey(null,false,projectId,cp);
    if ((currentResource=(CmsResource)m_resourceCache.get(cacheKey)) == null) {
      currentResource=m_vfsDriver.readFolder(dbc,projectId,cp);
      m_resourceCache.put(cacheKey,currentResource);
    }
    pathList.add(i,currentResource);
    if (i < folderCount - 1) {
      currentResourceName=(String)it.next();
    }
  }
  if (lastResourceIsFile) {
    if (it.hasNext()) {
      currentResourceName=(String)it.next();
    }
    currentPath.append(currentResourceName);
    cp=currentPath.toString();
    cacheKey=getCacheKey(null,false,projectId,cp);
    if ((currentResource=(CmsResource)m_resourceCache.get(cacheKey)) == null) {
      currentResource=m_vfsDriver.readResource(dbc,projectId,cp,filter.includeDeleted());
      m_resourceCache.put(cacheKey,currentResource);
    }
    pathList.add(i,currentResource);
  }
  return pathList;
}
