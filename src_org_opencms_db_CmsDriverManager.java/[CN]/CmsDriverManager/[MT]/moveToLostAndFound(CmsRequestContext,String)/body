{
  String siteRoot=context.getSiteRoot();
  Stack storage=new Stack();
  context.setSiteRoot("/");
  String destination=I_CmsConstants.C_VFS_LOST_AND_FOUND + resourcename;
  String des=destination;
  try {
    while (des.indexOf("/") == 0) {
      des=des.substring(0,des.lastIndexOf("/"));
      storage.push(des + "/");
    }
    while (storage.size() != 0) {
      des=(String)storage.pop();
      try {
        readFolder(context,des);
      }
 catch (      Exception e1) {
        createFolder(context,des,new HashMap());
      }
    }
    moveResource(context,resourcename,destination);
  }
 catch (  CmsException e2) {
    throw e2;
  }
 finally {
    context.setSiteRoot(siteRoot);
  }
}
