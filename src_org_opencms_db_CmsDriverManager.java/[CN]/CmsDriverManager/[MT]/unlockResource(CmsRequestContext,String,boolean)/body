{
  CmsResource resource=null;
  CmsLock currentLock=null;
  resource=readFileHeader(context,resourcename);
  currentLock=m_lockDispatcher.getLock(this,context,resourcename);
  if (currentLock.getType() == CmsLock.C_TYPE_SHARED_INHERITED || currentLock.getType() == CmsLock.C_TYPE_INHERITED) {
    throw new CmsLockException("Unlocking resources in locked folders is not allowed!",CmsLockException.C_RESOURCE_LOCKED_INHERITED);
  }
  if (!forceUnlock) {
    checkPermissions(context,resource,I_CmsConstants.C_WRITE_ACCESS);
  }
  m_lockDispatcher.removeResource(this,context,resource.getFullResourceName(),forceUnlock);
  clearResourceCache();
}
