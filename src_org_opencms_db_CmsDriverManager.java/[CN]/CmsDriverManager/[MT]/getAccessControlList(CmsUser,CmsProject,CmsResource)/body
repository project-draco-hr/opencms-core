{
  CmsResource res=resource;
  CmsAccessControlList acList=(CmsAccessControlList)m_accessControlListCache.get(resource.getAbsolutePath());
  ListIterator acEntries=null;
  CmsUUID resourceId=null;
  if (acList != null)   return acList;
  acList=new CmsAccessControlList();
  while (!(resourceId=res.getParentId()).isNullUUID()) {
    res=m_vfsDriver.readFolder(currentProject.getId(),resourceId);
    resourceId=res.getResourceAceId();
    acEntries=m_userDriver.getAccessControlEntries(currentProject,resourceId,true).listIterator();
    while (acEntries.hasNext()) {
      CmsAccessControlEntry acEntry=(CmsAccessControlEntry)acEntries.next();
      if ((acEntry.getFlags() & I_CmsConstants.C_ACCESSFLAGS_OVERWRITE) > 0)       acList.setAllowedPermissions(acEntry);
 else       acList.add(acEntry);
    }
  }
  acEntries=m_userDriver.getAccessControlEntries(currentProject,resource.getResourceAceId(),false).listIterator();
  while (acEntries.hasNext()) {
    CmsAccessControlEntry acEntry=(CmsAccessControlEntry)acEntries.next();
    if ((acEntry.getFlags() & I_CmsConstants.C_ACCESSFLAGS_OVERWRITE) > 0)     acList.setAllowedPermissions(acEntry);
 else     acList.add(acEntry);
  }
  m_accessControlListCache.put(resource.getAbsolutePath(),acList);
  return acList;
}
