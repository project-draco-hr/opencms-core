{
  CmsResource resource=null;
  List resources=new ArrayList();
  try {
    resource=readResource(context,resourceName,CmsResourceFilter.IGNORE_EXPIRATION);
    checkPermissions(context,resource,I_CmsConstants.C_WRITE_ACCESS,true,CmsResourceFilter.ALL);
    m_vfsDriver.deleteProperties(context.currentProject().getId(),resource,deleteOption);
    if (deleteOption == CmsProperty.C_DELETE_OPTION_DELETE_STRUCTURE_AND_RESOURCE_VALUES || deleteOption == CmsProperty.C_DELETE_OPTION_DELETE_RESOURCE_VALUES) {
      resources.addAll(readSiblings(context,resourceName,CmsResourceFilter.ALL));
    }
 else {
      resources.add(resource);
    }
  }
  finally {
    m_propertyCache.clear();
    OpenCms.fireCmsEvent(new CmsEvent(new CmsObject(),I_CmsEventListener.EVENT_RESOURCES_AND_PROPERTIES_MODIFIED,Collections.singletonMap("resources",resources)));
  }
}
