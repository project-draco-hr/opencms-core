{
  if (OpenCms.getLog(CmsLog.CHANNEL_INIT).isInfoEnabled()) {
    OpenCms.getLog(CmsLog.CHANNEL_INIT).info(". Driver manager init  : phase 4 - connecting to the database");
  }
  m_vfsDriver=vfsDriver;
  m_userDriver=userDriver;
  m_projectDriver=projectDriver;
  m_workflowDriver=workflowDriver;
  m_backupDriver=backupDriver;
  m_configuration=configuration;
  ExtendedProperties config;
  if (configuration instanceof ExtendedProperties) {
    config=(ExtendedProperties)configuration;
  }
 else {
    config=new ExtendedProperties();
    config.putAll(configuration);
  }
  m_keyGenerator=(I_CmsCacheKey)Class.forName(config.getString(I_CmsConstants.C_CONFIGURATION_CACHE + ".keygenerator")).newInstance();
  LRUMap hashMap=new LRUMap(config.getInteger(I_CmsConstants.C_CONFIGURATION_CACHE + ".user",50));
  m_userCache=Collections.synchronizedMap(hashMap);
  if (OpenCms.getMemoryMonitor().enabled()) {
    OpenCms.getMemoryMonitor().register(this.getClass().getName() + "." + "m_userCache",hashMap);
  }
  hashMap=new LRUMap(config.getInteger(I_CmsConstants.C_CONFIGURATION_CACHE + ".group",50));
  m_groupCache=Collections.synchronizedMap(hashMap);
  if (OpenCms.getMemoryMonitor().enabled()) {
    OpenCms.getMemoryMonitor().register(this.getClass().getName() + "." + "m_groupCache",hashMap);
  }
  hashMap=new LRUMap(config.getInteger(I_CmsConstants.C_CONFIGURATION_CACHE + ".usergroups",50));
  m_userGroupsCache=Collections.synchronizedMap(hashMap);
  if (OpenCms.getMemoryMonitor().enabled()) {
    OpenCms.getMemoryMonitor().register(this.getClass().getName() + "." + "m_userGroupsCache",hashMap);
  }
  hashMap=new LRUMap(config.getInteger(I_CmsConstants.C_CONFIGURATION_CACHE + ".project",50));
  m_projectCache=Collections.synchronizedMap(hashMap);
  if (OpenCms.getMemoryMonitor().enabled()) {
    OpenCms.getMemoryMonitor().register(this.getClass().getName() + "." + "m_projectCache",hashMap);
  }
  hashMap=new LRUMap(config.getInteger(I_CmsConstants.C_CONFIGURATION_CACHE + ".resource",2500));
  m_resourceCache=Collections.synchronizedMap(hashMap);
  if (OpenCms.getMemoryMonitor().enabled()) {
    OpenCms.getMemoryMonitor().register(this.getClass().getName() + "." + "m_resourceCache",hashMap);
  }
  hashMap=new LRUMap(config.getInteger(I_CmsConstants.C_CONFIGURATION_CACHE + ".resourcelist",100));
  m_resourceListCache=Collections.synchronizedMap(hashMap);
  if (OpenCms.getMemoryMonitor().enabled()) {
    OpenCms.getMemoryMonitor().register(this.getClass().getName() + "." + "m_resourceListCache",hashMap);
  }
  hashMap=new LRUMap(config.getInteger(I_CmsConstants.C_CONFIGURATION_CACHE + ".property",5000));
  m_propertyCache=Collections.synchronizedMap(hashMap);
  if (OpenCms.getMemoryMonitor().enabled()) {
    OpenCms.getMemoryMonitor().register(this.getClass().getName() + "." + "m_propertyCache",hashMap);
  }
  hashMap=new LRUMap(config.getInteger(I_CmsConstants.C_CONFIGURATION_CACHE + ".accesscontrollists",1000));
  m_accessControlListCache=Collections.synchronizedMap(hashMap);
  if (OpenCms.getMemoryMonitor().enabled()) {
    OpenCms.getMemoryMonitor().register(this.getClass().getName() + "." + "m_accessControlListCache",hashMap);
  }
  getProjectDriver().fillDefaults(new CmsDbContext());
  m_htmlLinkValidator=new CmsHtmlLinkValidator(this);
}
