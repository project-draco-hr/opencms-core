{
  String targetName=CmsResource.getName(resourcename);
  if (content == null) {
    content=new byte[0];
  }
  int size;
  if (type == CmsResourceTypeFolder.C_RESOURCE_TYPE_ID) {
    if (targetName.charAt(targetName.length() - 1) == '/') {
      targetName=targetName.substring(0,targetName.length() - 1);
    }
    size=-1;
  }
 else {
    size=content.length;
  }
  CmsResource newResource=new CmsResource(CmsUUID.getNullUUID(),CmsUUID.getNullUUID(),CmsUUID.getNullUUID(),targetName,type,0,context.currentProject().getId(),I_CmsConstants.C_STATE_NEW,OpenCms.getResourceManager().getResourceType(type).getLoaderId(),0,context.currentUser().getId(),0,context.currentUser().getId(),CmsResource.DATE_RELEASED_DEFAULT,CmsResource.DATE_EXPIRED_DEFAULT,1,size);
  return createResource(context,resourcename,newResource,content,properties,false);
}
