{
  CmsResource res=readFileHeader(currentUser,currentProject,resource);
  checkPermissions(currentUser,currentProject,res,I_CmsConstants.C_WRITE_ACCESS);
  m_vfsDriver.writeProperties(propertyinfos,currentProject.getId(),res,res.getType());
  m_propertyCache.clear();
  if (res.getState() == I_CmsConstants.C_STATE_UNCHANGED) {
    res.setState(I_CmsConstants.C_STATE_CHANGED);
  }
  if (res.isFile()) {
    m_vfsDriver.writeFileHeader(currentProject,(CmsFile)res,false,currentUser.getId());
  }
 else {
    m_vfsDriver.writeFolder(currentProject,readFolder(currentUser,currentProject,resource),false,currentUser.getId());
  }
  this.clearResourceCache(resource,currentProject,currentUser);
}
