{
  List retValue=new Vector();
  List resources=m_projectDriver.readProjectView(dbc,projectId,criteria);
  boolean onlyLocked=false;
  if ("locked".equalsIgnoreCase(criteria)) {
    onlyLocked=true;
  }
  Iterator i=resources.iterator();
  while (i.hasNext()) {
    CmsResource currentResource=(CmsResource)i.next();
    if (CmsSecurityManager.PERM_ALLOWED == m_securityManager.hasPermissions(dbc,currentResource,CmsPermissionSet.ACCESS_READ,true,CmsResourceFilter.ALL)) {
      if (onlyLocked) {
        CmsLock lock=getLock(dbc,currentResource);
        if (!lock.isNullLock()) {
          retValue.add(currentResource);
        }
      }
 else {
        retValue.add(currentResource);
      }
    }
  }
  return retValue;
}
