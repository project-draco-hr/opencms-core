{
  List result=(List)new ArrayList();
  Iterator i=resources.iterator();
  while (i.hasNext()) {
    CmsResource res=(CmsResource)i.next();
    if (storage.contains(res.getParentStructureId())) {
      if (res.getState() != I_CmsConstants.C_STATE_DELETED) {
        if (hasPermissions(context,res,I_CmsConstants.C_READ_ACCESS,false)) {
          res.setFullResourceName(readPath(context,res,false));
          result.add(res);
          updateContextDates(context,res);
        }
      }
    }
  }
  return result;
}
