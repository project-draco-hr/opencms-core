{
  List result=new ArrayList();
  Iterator i=resources.iterator();
  while (i.hasNext()) {
    CmsResource res=(CmsResource)i.next();
    CmsResource parent=m_vfsDriver.readFileHeader(context.currentProject().getId(),CmsResource.getParentFolder(res.getRootPath()),true);
    if (storage.contains(parent.getStructureId())) {
      if (PERM_ALLOWED == hasPermissions(context,res,CmsPermissionSet.ACCESS_READ,false,CmsResourceFilter.IGNORE_EXPIRATION)) {
        result.add(res);
        updateContextDates(context,res);
      }
    }
  }
  return result;
}
