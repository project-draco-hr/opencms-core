{
  List result=new ArrayList();
  Iterator i=resources.iterator();
  while (i.hasNext()) {
    CmsResource res=(CmsResource)i.next();
    if (storage.contains(res.getParentStructureId())) {
      if (PERM_ALLOWED == hasPermissions(context,res,CmsPermissionSet.ACCESS_READ,false,CmsResourceFilter.IGNORE_EXPIRATION)) {
        result.add(res);
        updateContextDates(context,res);
      }
    }
  }
  return result;
}
