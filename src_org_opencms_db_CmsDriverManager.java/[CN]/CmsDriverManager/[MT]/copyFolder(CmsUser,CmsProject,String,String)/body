{
  String destinationFoldername=null;
  String destinationResourceName=null;
  validFilename(destination.replace('/','a'));
  destinationFoldername=destination.substring(0,destination.substring(0,destination.length() - 1).lastIndexOf("/") + 1);
  destinationResourceName=destination.substring(destinationFoldername.length(),destination.lastIndexOf(I_CmsConstants.C_FOLDER_SEPARATOR));
  CmsFolder destinationFolder=readFolder(currentUser,currentProject,destinationFoldername);
  CmsFolder sourceFolder=readFolder(currentUser,currentProject,source);
  checkPermissions(currentUser,currentProject,destinationFolder,I_CmsConstants.C_WRITE_ACCESS);
  m_vfsDriver.createFolder(currentUser,currentProject,destinationFolder.getId(),CmsUUID.getNullUUID(),destinationResourceName,sourceFolder.getFlags());
  clearResourceCache();
  CmsResource newResource=lockResource(currentUser,currentProject,destination,true);
  writeProperties(currentUser,currentProject,destination,readProperties(currentUser,currentProject,source,null,false));
  ListIterator aceList=getAccessControlEntries(currentUser,currentProject,sourceFolder,false).listIterator();
  while (aceList.hasNext()) {
    CmsAccessControlEntry ace=(CmsAccessControlEntry)aceList.next();
    m_userDriver.createAccessControlEntry(currentProject,newResource.getResourceAceId(),ace.getPrincipal(),ace.getPermissions().getAllowedPermissions(),ace.getPermissions().getDeniedPermissions(),ace.getFlags());
  }
  clearAccessControlListCache();
  m_resourceListCache.clear();
  m_accessCache.clear();
  fileSystemChanged(true);
}
