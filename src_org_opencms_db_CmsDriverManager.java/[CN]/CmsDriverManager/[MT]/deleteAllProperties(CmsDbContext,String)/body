{
  CmsResource resource=null;
  List resources=new ArrayList();
  try {
    resource=readResource(dbc,resourcename,CmsResourceFilter.IGNORE_EXPIRATION);
    m_securityManager.checkPermissions(dbc,resource,CmsPermissionSet.ACCESS_WRITE,false,CmsResourceFilter.ALL);
    if (resource.getSiblingCount() > 1) {
      m_vfsDriver.deletePropertyObjects(dbc,dbc.currentProject().getUuid(),resource,CmsProperty.DELETE_OPTION_DELETE_STRUCTURE_VALUES);
      resources.addAll(readSiblings(dbc,resource,CmsResourceFilter.ALL));
    }
 else {
      m_vfsDriver.deletePropertyObjects(dbc,dbc.currentProject().getUuid(),resource,CmsProperty.DELETE_OPTION_DELETE_STRUCTURE_AND_RESOURCE_VALUES);
      resources.add(resource);
    }
  }
  finally {
    OpenCms.getMemoryMonitor().flushProperties();
    OpenCms.getMemoryMonitor().flushPropertyLists();
    OpenCms.fireCmsEvent(new CmsEvent(I_CmsEventListener.EVENT_RESOURCES_AND_PROPERTIES_MODIFIED,Collections.singletonMap("resources",resources)));
  }
}
