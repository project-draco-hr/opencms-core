{
  List path=readPath(context,filename,filter);
  CmsResource resource=(CmsResource)path.get(path.size() - 1);
  Integer perms=hasPermissions(context,resource,I_CmsConstants.C_READ_ACCESS,filter);
  if (perms != PERM_DENIED) {
    updateContextDates(context,resource);
  }
  checkPermissions(context,resource,I_CmsConstants.C_READ_ACCESS,filter,perms.intValue());
  if (resource.isFolder()) {
    if (!filter.isValid(context,resource)) {
      throw new CmsException("[" + this.getClass().getName() + "]"+ context.removeSiteRoot(readPath(context,resource,filter)));
    }
    resource=new CmsFolder(resource);
  }
  resource.setFullResourceName(filename);
  return resource;
}
