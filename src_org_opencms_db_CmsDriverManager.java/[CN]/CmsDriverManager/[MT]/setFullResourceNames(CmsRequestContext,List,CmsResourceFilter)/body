{
  if (CmsResourceFilter.ALL == filter) {
    if (resourceList instanceof ArrayList) {
      return (List)((ArrayList)(setFullResourceNames(context,resourceList))).clone();
    }
 else {
      return new ArrayList(setFullResourceNames(context,resourceList));
    }
  }
  ArrayList result=new ArrayList(resourceList.size());
  for (int i=0; i < resourceList.size(); i++) {
    CmsResource resource=(CmsResource)resourceList.get(i);
    if (filter.isValid(context,resource)) {
      result.add(resource);
      if (!resource.hasFullResourceName()) {
        resource.setFullResourceName(readPath(context,resource,CmsResourceFilter.ALL));
      }
    }
    updateContextDates(context,resource);
  }
  return result;
}
