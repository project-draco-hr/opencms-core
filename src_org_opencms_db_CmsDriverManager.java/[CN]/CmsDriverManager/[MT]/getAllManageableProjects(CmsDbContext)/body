{
  Set projects=new HashSet();
  if (m_securityManager.hasRole(dbc,CmsRole.PROJECT_MANAGER)) {
    int todo=0;
    projects.addAll(m_projectDriver.readProjects(dbc,I_CmsConstants.C_PROJECT_STATE_UNLOCKED));
  }
 else {
    projects.addAll(m_projectDriver.readProjectsForUser(dbc,dbc.currentUser()));
    List groups=getGroupsOfUser(dbc,dbc.currentUser().getName());
    for (int i=0, n=groups.size(); i < n; i++) {
      projects.addAll(m_projectDriver.readProjectsForManagerGroup(dbc,(CmsGroup)groups.get(i)));
    }
  }
  projects.remove(readProject(dbc,I_CmsConstants.C_PROJECT_ONLINE_ID));
  return new ArrayList(projects);
}
