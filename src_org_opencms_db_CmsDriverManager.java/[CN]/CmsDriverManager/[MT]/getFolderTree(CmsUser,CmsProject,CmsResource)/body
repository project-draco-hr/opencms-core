{
  String cacheKey=getCacheKey(currentUser.getName() + "_tree",currentUser,currentProject,parentResource.getFullResourceName());
  List retValue=(List)m_resourceListCache.get(cacheKey);
  if (retValue == null || retValue.size() == 0) {
    List resources=m_vfsDriver.getFolderTree(currentProject,parentResource);
    retValue=(List)new ArrayList();
    String lastcheck="#";
    for (Iterator e=resources.iterator(); e.hasNext(); ) {
      CmsResource res=(CmsResource)e.next();
      if (!CmsResource.getAbsolutePath(readPath(currentUser,currentProject,res,true)).startsWith(lastcheck)) {
        if (hasPermissions(currentUser,currentProject,res,I_CmsConstants.C_VIEW_ACCESS,false)) {
          retValue.add(res);
        }
 else {
          lastcheck=CmsResource.getAbsolutePath(readPath(currentUser,currentProject,res,false));
        }
      }
    }
    m_resourceListCache.put(cacheKey,retValue);
  }
  return retValue;
}
