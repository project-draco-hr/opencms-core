{
  CmsUser agent=readUser(dbc,agentName,CmsUser.USER_TYPE_SYSTEMUSER);
  CmsGroup role=m_userDriver.readGroup(dbc,roleName);
  java.sql.Timestamp timestamp=new java.sql.Timestamp(timeout);
  java.sql.Timestamp now=new java.sql.Timestamp(System.currentTimeMillis());
  validTaskname(taskName);
  CmsTask task=m_workflowDriver.createTask(dbc,projectid,projectid,taskType,currentUser.getId(),agent.getId(),role.getId(),taskName,now,timestamp,priority);
  if (CmsStringUtil.isNotEmpty(taskComment)) {
    m_workflowDriver.writeTaskLog(dbc,task.getId(),currentUser.getId(),new java.sql.Timestamp(System.currentTimeMillis()),taskComment,CmsTaskService.TASKLOG_USER);
  }
  return task;
}
