{
  if (type.isDefinedInContent()) {
    throw new CmsIllegalArgumentException(Messages.get().container(Messages.ERR_ADD_RELATION_IN_CONTENT_3,dbc.removeSiteRoot(resource.getRootPath()),dbc.removeSiteRoot(target.getRootPath()),type.getLocalizedName(dbc.getRequestContext().getLocale())));
  }
  CmsRelation relation=new CmsRelation(resource,target,type);
  m_vfsDriver.createRelation(dbc,dbc.currentProject().getUuid(),relation);
  if (!importCase) {
    setDateLastModified(dbc,resource,System.currentTimeMillis());
  }
  addResourceToUsersPubList(dbc,resource);
}
