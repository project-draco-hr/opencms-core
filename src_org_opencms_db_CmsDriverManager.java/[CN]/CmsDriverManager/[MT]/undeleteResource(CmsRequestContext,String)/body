{
  CmsResource resource=readFileHeader(context,resourcename,CmsResourceFilter.ALL);
  if (resource.getState() == I_CmsConstants.C_STATE_DELETED) {
    undoChanges(context,resourcename);
  }
 else {
    throw new CmsException("Resource '" + resourcename + "' already exists and cannot be undeleted.",CmsException.C_FILE_EXISTS);
  }
}
