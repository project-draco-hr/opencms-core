{
  OpenCms.getMemoryMonitor().clearResourceCache();
  CmsProject project=dbc.currentProject();
  m_lockManager.addResource(dbc,resource,dbc.currentUser(),project,type);
  if (!resource.getState().isUnchanged() && !resource.getState().isKeep()) {
    m_vfsDriver.writeLastModifiedProjectId(dbc,project,project.getUuid(),resource);
  }
  OpenCms.getMemoryMonitor().flushPermissions();
  HashMap data=new HashMap(2);
  data.put("resource",resource);
  data.put("change",new Integer(NOTHING_CHANGED));
  OpenCms.fireCmsEvent(new CmsEvent(I_CmsEventListener.EVENT_RESOURCE_MODIFIED,data));
}
