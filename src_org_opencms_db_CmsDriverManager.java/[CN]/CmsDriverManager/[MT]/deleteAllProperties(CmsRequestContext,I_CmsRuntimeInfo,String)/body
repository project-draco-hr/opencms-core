{
  CmsResource resource=null;
  List resources=new ArrayList();
  try {
    resource=readResource(context,runtimeInfo,resourcename,CmsResourceFilter.IGNORE_EXPIRATION);
    checkPermissions(context,resource,CmsPermissionSet.ACCESS_WRITE,true,CmsResourceFilter.ALL);
    if (resource.getSiblingCount() > 1) {
      m_vfsDriver.deletePropertyObjects(runtimeInfo,context.currentProject().getId(),resource,CmsProperty.C_DELETE_OPTION_DELETE_STRUCTURE_VALUES);
      resources.addAll(readSiblings(context,runtimeInfo,resourcename,CmsResourceFilter.ALL));
    }
 else {
      m_vfsDriver.deletePropertyObjects(runtimeInfo,context.currentProject().getId(),resource,CmsProperty.C_DELETE_OPTION_DELETE_STRUCTURE_AND_RESOURCE_VALUES);
      resources.add(resource);
    }
  }
  finally {
    m_propertyCache.clear();
    OpenCms.fireCmsEvent(new CmsEvent(I_CmsEventListener.EVENT_RESOURCES_AND_PROPERTIES_MODIFIED,Collections.singletonMap("resources",resources)));
  }
}
