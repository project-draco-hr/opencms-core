{
  List resources;
  if ((state == CmsResource.STATE_NEW) || (state == CmsResource.STATE_CHANGED) || (state == CmsResource.STATE_DELETED)) {
    resources=m_vfsDriver.readResources(dbc,projectId,state,CmsDriverManager.READMODE_MATCHSTATE);
  }
 else {
    resources=m_vfsDriver.readResources(dbc,projectId,CmsResource.STATE_UNCHANGED,CmsDriverManager.READMODE_UNMATCHSTATE);
  }
  List result=filterPermissions(dbc,resources,CmsResourceFilter.ALL);
  Collections.sort(result);
  return updateContextDates(dbc,result);
}
