{
  CmsResource resource=null;
  List resources=new ArrayList();
  try {
    resource=readResource(context,resourcename,CmsResourceFilter.IGNORE_EXPIRATION);
    checkPermissions(context,resource,I_CmsConstants.C_WRITE_ACCESS,true,CmsResourceFilter.ALL);
    if (resource.getSiblingCount() > 1) {
      m_vfsDriver.deleteProperties(context.currentProject().getId(),resource,CmsProperty.C_DELETE_OPTION_DELETE_STRUCTURE_VALUES);
      resources.addAll(readSiblings(context,resourcename,CmsResourceFilter.ALL));
    }
 else {
      m_vfsDriver.deleteProperties(context.currentProject().getId(),resource,CmsProperty.C_DELETE_OPTION_DELETE_STRUCTURE_AND_RESOURCE_VALUES);
      resources.add(resource);
    }
  }
  finally {
    m_propertyCache.clear();
    OpenCms.fireCmsEvent(new CmsEvent(new CmsObject(),I_CmsEventListener.EVENT_RESOURCES_AND_PROPERTIES_MODIFIED,Collections.singletonMap("resources",resources)));
  }
}
