{
  List result=new ArrayList();
  Vector unvisited=new Vector();
  CmsFolder currentFolder=null;
  Enumeration unvisitedFolders=null;
  boolean isFirst=true;
  currentFolder=readFolder(context,resourcename,CmsResourceFilter.ALL);
  unvisited.add(currentFolder);
  while (unvisited.size() > 0) {
    unvisitedFolders=unvisited.elements();
    while (unvisitedFolders.hasMoreElements()) {
      currentFolder=(CmsFolder)unvisitedFolders.nextElement();
      unvisited.remove(currentFolder);
      if (!isFirst && resourceType <= CmsResourceTypeFolder.C_RESOURCE_TYPE_ID) {
        result.add(currentFolder);
      }
      if (resourceType != CmsResourceTypeFolder.C_RESOURCE_TYPE_ID) {
        result.addAll(readChildResources(context,currentFolder,CmsResourceFilter.ALL,false,true));
      }
      unvisited.addAll(readChildResources(context,currentFolder,CmsResourceFilter.ALL,true,false));
      if (isFirst) {
        isFirst=false;
      }
    }
  }
  return result;
}
