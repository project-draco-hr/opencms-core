{
  if (folder == null) {
    return null;
  }
  if (!folder.endsWith(C_FOLDER_SEPARATOR)) {
    folder+=C_FOLDER_SEPARATOR;
  }
  List path=readPath(currentUser,currentProject,folder,includeDeleted);
  CmsFolder cmsFolder=(CmsFolder)path.get(path.size() - 1);
  getVfsAccessGuard(currentUser,currentProject).check(cmsFolder,C_READ_ACCESS);
  if ((cmsFolder.getState() == C_STATE_DELETED) && (!includeDeleted)) {
    throw new CmsException("[" + this.getClass().getName() + "]"+ CmsResource.getAbsolutePath(readPath(currentUser,currentProject,cmsFolder,includeDeleted)),CmsException.C_RESOURCE_DELETED);
  }
  return cmsFolder;
}
