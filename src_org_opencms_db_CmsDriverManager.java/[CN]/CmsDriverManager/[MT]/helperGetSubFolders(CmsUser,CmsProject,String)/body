{
  CmsFolder cmsFolder=readFolder(currentUser,currentProject,foldername);
  getVfsAccessGuard(currentUser,currentProject).check(cmsFolder,I_CmsConstants.C_READ_ACCESS);
  Vector folders=m_vfsDriver.getSubFolders(currentProject.getId(),cmsFolder);
  CmsFolder folder;
  CmsAccessGuard accessGuard=getVfsAccessGuard(currentUser,currentProject);
  for (int z=0; z < folders.size(); z++) {
    folder=(CmsFolder)folders.elementAt(z);
    if (!accessGuard.check(folder,I_CmsConstants.C_READ_ACCESS,true,false)) {
      folders.removeElementAt(z);
      z--;
    }
  }
  return folders;
}
