{
  if (CmsResourceFilter.ALL == filter) {
    if (resourceList instanceof ArrayList) {
      return (List)((ArrayList)(updateContextDates(dbc,resourceList))).clone();
    }
 else {
      return new ArrayList(updateContextDates(dbc,resourceList));
    }
  }
  CmsFlexRequestContextInfo info=dbc.getFlexRequestContextInfo();
  ArrayList result=new ArrayList(resourceList.size());
  for (int i=0; i < resourceList.size(); i++) {
    CmsResource resource=(CmsResource)resourceList.get(i);
    if (filter.isValid(dbc.getRequestContext(),resource)) {
      result.add(resource);
    }
    if (info != null) {
      info.updateFromResource(resource);
    }
  }
  return result;
}
