{
  List<CmsResource> topMovedFolders=pubList.getTopMovedFolders(cms);
  Iterator<CmsResource> folderIt=topMovedFolders.iterator();
  while (folderIt.hasNext()) {
    CmsResource folder=folderIt.next();
    addSubResources(dbc,pubList,folder);
  }
  CmsResource checkRes=pubList.checkContainsSubResources(cms,topMovedFolders);
  if (checkRes != null) {
    throw new CmsVfsException(Messages.get().container(Messages.RPT_CHILDREN_OF_MOVED_FOLDER_NOT_PUBLISHED_1,checkRes.getRootPath()));
  }
}
