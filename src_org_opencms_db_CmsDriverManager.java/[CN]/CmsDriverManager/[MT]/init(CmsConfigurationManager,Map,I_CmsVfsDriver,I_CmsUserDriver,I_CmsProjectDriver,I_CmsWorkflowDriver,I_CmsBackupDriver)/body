{
  if (CmsLog.INIT.isInfoEnabled()) {
    CmsLog.INIT.info(Messages.get().getBundle().key(Messages.INIT_DRIVER_MANAGER_START_PHASE4_0));
  }
  m_vfsDriver=vfsDriver;
  m_userDriver=userDriver;
  m_projectDriver=projectDriver;
  m_workflowDriver=workflowDriver;
  m_backupDriver=backupDriver;
  m_configuration=configuration;
  ExtendedProperties config;
  if (configuration instanceof ExtendedProperties) {
    config=(ExtendedProperties)configuration;
  }
 else {
    config=new ExtendedProperties();
    config.putAll(configuration);
  }
  CmsSystemConfiguration systemConfiguation=(CmsSystemConfiguration)configurationManager.getConfiguration(CmsSystemConfiguration.class);
  CmsCacheSettings settings=systemConfiguation.getCacheSettings();
  m_keyGenerator=(I_CmsCacheKey)Class.forName(settings.getCacheKeyGenerator()).newInstance();
  LRUMap lruMap=new LRUMap(settings.getUserCacheSize());
  m_userCache=Collections.synchronizedMap(lruMap);
  if (OpenCms.getMemoryMonitor().enabled()) {
    OpenCms.getMemoryMonitor().register(this.getClass().getName() + ".m_userCache",lruMap);
  }
  lruMap=new LRUMap(settings.getGroupCacheSize());
  m_groupCache=Collections.synchronizedMap(lruMap);
  if (OpenCms.getMemoryMonitor().enabled()) {
    OpenCms.getMemoryMonitor().register(this.getClass().getName() + ".m_groupCache",lruMap);
  }
  lruMap=new LRUMap(settings.getUserGroupsCacheSize());
  m_userGroupsCache=Collections.synchronizedMap(lruMap);
  if (OpenCms.getMemoryMonitor().enabled()) {
    OpenCms.getMemoryMonitor().register(this.getClass().getName() + ".m_userGroupsCache",lruMap);
  }
  lruMap=new LRUMap(settings.getProjectCacheSize());
  m_projectCache=Collections.synchronizedMap(lruMap);
  if (OpenCms.getMemoryMonitor().enabled()) {
    OpenCms.getMemoryMonitor().register(this.getClass().getName() + ".m_projectCache",lruMap);
  }
  lruMap=new LRUMap(settings.getResourceCacheSize());
  m_resourceCache=Collections.synchronizedMap(lruMap);
  if (OpenCms.getMemoryMonitor().enabled()) {
    OpenCms.getMemoryMonitor().register(this.getClass().getName() + ".m_resourceCache",lruMap);
  }
  lruMap=new LRUMap(settings.getResourcelistCacheSize());
  m_resourceListCache=Collections.synchronizedMap(lruMap);
  if (OpenCms.getMemoryMonitor().enabled()) {
    OpenCms.getMemoryMonitor().register(this.getClass().getName() + ".m_resourceListCache",lruMap);
  }
  lruMap=new LRUMap(settings.getPropertyCacheSize());
  m_propertyCache=Collections.synchronizedMap(lruMap);
  if (OpenCms.getMemoryMonitor().enabled()) {
    OpenCms.getMemoryMonitor().register(this.getClass().getName() + ".m_propertyCache",lruMap);
  }
  lruMap=new LRUMap(settings.getAclCacheSize());
  m_accessControlListCache=Collections.synchronizedMap(lruMap);
  if (OpenCms.getMemoryMonitor().enabled()) {
    OpenCms.getMemoryMonitor().register(this.getClass().getName() + ".m_accessControlListCache",lruMap);
  }
  getProjectDriver().fillDefaults(new CmsDbContext());
  m_htmlLinkValidator=new CmsXmlDocumentLinkValidator(this);
  m_concurrentCreateResourceLocks=new Vector();
}
