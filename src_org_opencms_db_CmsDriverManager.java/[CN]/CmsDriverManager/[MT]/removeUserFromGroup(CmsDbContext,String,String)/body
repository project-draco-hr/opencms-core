{
  if (!userInGroup(dbc,username,groupname)) {
    throw new CmsIllegalArgumentException(Messages.get().container(Messages.ERR_USER_NOT_IN_GROUP_2,username,groupname));
  }
  if (username.equals(OpenCms.getDefaultUsers().getUserAdmin()) && groupname.equals(OpenCms.getDefaultUsers().getGroupAdministrators())) {
    throw new CmsIllegalStateException(Messages.get().container(Messages.ERR_ADMIN_REMOVED_FROM_ADMINISTRATORS_0));
  }
  CmsUser user;
  CmsGroup group;
  user=readUser(dbc,username);
  if (user != null) {
    group=readGroup(dbc,groupname);
    if (group != null) {
      m_userDriver.deleteUserInGroup(dbc,user.getId(),group.getId());
      m_userGroupsCache.clear();
    }
 else {
      throw new CmsDbEntryNotFoundException(Messages.get().container(Messages.ERR_UNKNOWN_GROUP_1,groupname));
    }
  }
 else {
    throw new CmsIllegalArgumentException(Messages.get().container(Messages.ERR_USER_NOT_IN_GROUP_2,username,groupname));
  }
}
