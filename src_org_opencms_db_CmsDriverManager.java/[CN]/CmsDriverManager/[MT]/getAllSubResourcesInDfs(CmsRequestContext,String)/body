{
  List result=(List)new ArrayList();
  Vector unvisited=new Vector();
  CmsResource currentFolder=null;
  Enumeration unvisitedFolders=null;
  CmsResource resource=readFileHeader(context,resourcename);
  if (resource.isFile()) {
    result.add(resource);
    return result;
  }
  unvisited.add(resource);
  while (unvisited.size() > 0) {
    unvisitedFolders=unvisited.elements();
    while (unvisitedFolders.hasMoreElements()) {
      currentFolder=(CmsResource)unvisitedFolders.nextElement();
      unvisited.remove(currentFolder);
      result.add(currentFolder);
      result.addAll(getSubFiles(context,currentFolder.getFullResourceName(),true));
      unvisited.addAll(getSubFolders(context,currentFolder.getFullResourceName(),true));
    }
  }
  return result;
}
