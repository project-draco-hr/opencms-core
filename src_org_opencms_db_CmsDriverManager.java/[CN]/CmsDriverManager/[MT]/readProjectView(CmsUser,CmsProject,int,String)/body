{
  Vector retValue=new Vector();
  String whereClause=new String();
  if ("new".equalsIgnoreCase(filter)) {
    whereClause=" AND CMS_OFFLINE_STRUCTURE.STATE=" + C_STATE_NEW;
  }
 else   if ("changed".equalsIgnoreCase(filter)) {
    whereClause=" AND CMS_OFFLINE_STRUCTURE.STATE=" + C_STATE_CHANGED;
  }
 else   if ("deleted".equalsIgnoreCase(filter)) {
    whereClause=" AND CMS_OFFLINE_STRUCTURE.STATE=" + C_STATE_DELETED;
  }
 else   if ("locked".equalsIgnoreCase(filter)) {
    whereClause=" AND CMS_OFFLINE_RESOURCES.LOCKED_BY!='" + CmsUUID.getNullUUID() + "'";
  }
 else {
    whereClause=" AND CMS_OFFLINE_STRUCTURE.STATE!=" + C_STATE_UNCHANGED;
  }
  Vector resources=m_projectDriver.readProjectView(currentProject.getId(),projectId,whereClause);
  CmsAccessGuard accessGuard=getVfsAccessGuard(currentUser,currentProject);
  Iterator i=resources.iterator();
  while (i.hasNext()) {
    CmsResource currentResource=(CmsResource)i.next();
    if (accessGuard.check(currentResource,C_READ_ACCESS,true,false)) {
      retValue.addElement(currentResource);
    }
  }
  return retValue;
}
