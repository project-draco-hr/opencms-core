{
  CmsResource resource=readFileHeader(context,resourcename);
  resource.setLocked(context.currentUser().getId());
  resource.setLockedInProject(context.currentProject().getId());
  m_vfsDriver.updateLockstate(resource,context.currentProject().getId());
  m_lockDispatcher.addResource(resource.getFullResourceName(),context.currentUser().getId(),context.currentProject().getId(),CmsLock.C_HIERARCHY_DIRECT_LOCKED);
  clearResourceCache();
  return resource;
}
