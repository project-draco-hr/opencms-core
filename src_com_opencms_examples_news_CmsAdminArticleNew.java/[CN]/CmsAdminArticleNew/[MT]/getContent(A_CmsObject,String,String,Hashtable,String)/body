{
  String newHeadline=(String)parameters.get(C_ARTICLENEW_HEADLINE);
  String newShorttext=(String)parameters.get(C_ARTICLENEW_SHORTTEXT);
  String newText=(String)parameters.get(C_ARTICLENEW_TEXT);
  String newExternalLink=(String)parameters.get(C_ARTICLENEW_EXTLINK);
  GregorianCalendar cal=new GregorianCalendar();
  A_CmsUser author=cms.getRequestContext().currentUser();
  String dateFileText=getDateFileText(cal);
  String newsNumber=this.getNewArticleNumber(cms,dateFileText);
  String initials=getInitials(author);
  String newsFileName=dateFileText + "-" + newsNumber+ "-"+ initials.toLowerCase();
  String authorText=null;
  String firstName=author.getFirstname();
  String lastName=author.getLastname();
  if ((firstName == null || "".equals(firstName)) && (lastName == null || "".equals(lastName))) {
    authorText=initials;
  }
 else {
    authorText=firstName + " " + lastName;
    authorText=authorText.trim();
    authorText=authorText + " (" + initials+ ")";
  }
  String dateText=Utils.getNiceShortDate(cal.getTime().getTime());
  if ((newHeadline != null) && (newShorttext != null) && (newText != null)&& (newExternalLink != null)) {
    createNewsFile(cms,newsFileName,authorText,dateText,newHeadline,newShorttext,newText,newExternalLink);
    createPageFile(cms,newsFileName);
    CmsXmlLanguageFile lang=new CmsXmlLanguageFile(cms);
    HttpServletRequest req=(HttpServletRequest)(cms.getRequestContext().getRequest().getOriginalRequest());
    String taskUrl=req.getScheme() + "://" + req.getHeader("HOST")+ req.getServletPath()+ C_NEWS_FOLDER_PAGE+ newsFileName+ "/index.html";
    String taskcomment="<A HREF=\"javascript:openwinfull('" + taskUrl + "', 'preview', 0, 0);\"> "+ taskUrl+ "</A>";
    CmsTaskAction.create(cms,C_NEWS_USER,C_NEWS_ROLE,lang.getLanguageValue("task.label.news"),taskcomment,Utils.getNiceShortDate(new Date().getTime() + 345600000),"1","","","","");
    templateSelector=C_ARTICLENEW_DONE;
  }
  CmsXmlWpTemplateFile xmlTemplateDocument=(CmsXmlWpTemplateFile)getOwnTemplateFile(cms,templateFile,elementName,parameters,templateSelector);
  xmlTemplateDocument.setXmlData("author",authorText);
  xmlTemplateDocument.setXmlData("date",dateText);
  return startProcessing(cms,xmlTemplateDocument,elementName,parameters,templateSelector);
}
