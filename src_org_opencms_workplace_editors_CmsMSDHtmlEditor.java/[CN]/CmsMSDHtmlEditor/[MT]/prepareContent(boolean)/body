{
  String content=getParamContent();
  content=CmsStringUtil.extractHtmlBody(content);
  content=filterAnchors(content);
  content=CmsEncoder.adjustHtmlEncoding(content,getFileEncoding());
  if (!("edit".equals(getParamEditormode()) || save)) {
    String stylesheet=getUriStyleSheet();
    String server=getJsp().getRequest().getScheme() + "://" + getJsp().getRequest().getServerName()+ ":"+ getJsp().getRequest().getServerPort();
    StringBuffer result=new StringBuffer(content.length() + 1024);
    result.append("<html><head>");
    if (!"".equals(stylesheet)) {
      stylesheet=getJsp().link(stylesheet);
      result.append("<link href=\"");
      result.append(server);
      result.append(stylesheet);
      result.append("\" rel=\"stylesheet\" type=\"text/css\">");
    }
    result.append("<base href=\"");
    result.append(server);
    result.append(OpenCms.getSystemInfo().getOpenCmsContext());
    result.append("\"></base></head><body>");
    result.append(content);
    result.append("</body></html>");
    content=result.toString();
  }
  if (!save) {
    setParamContent(content);
  }
 else {
    CmsProperty contentConversionProperty;
    String contentConversion;
    try {
      contentConversionProperty=getJsp().getCmsObject().readPropertyObject(getJsp().getCmsObject().getSitePath(m_file),"content-conversion",true);
      contentConversion=contentConversionProperty.getValue();
    }
 catch (    CmsException e) {
      contentConversion=CmsHtmlConverter.C_PARAM_DISABLED;
    }
    CmsHtmlConverter converter=new CmsHtmlConverter(getFileEncoding(),contentConversion);
    content=converter.convertToStringSilent(content);
  }
  return content.trim();
}
