{
  CmsTemplateLoaderFacade loaderFacade=new CmsTemplateLoaderFacade(OpenCms.getResourceManager().getLoader(formatter),resource,formatter);
  CmsResource loaderRes=loaderFacade.getLoaderStartResource();
  CmsObject cms=CmsFlexController.getController(m_req).getCmsObject();
  String oldUri=cms.getRequestContext().getUri();
  try {
    cms.getRequestContext().setUri(m_uri);
    OpenCms.getLocaleManager();
    return new String(loaderFacade.getLoader().dump(m_cms,loaderRes,m_cms.getSitePath(resource),m_cms.getRequestContext().getLocale(),m_req,m_res),CmsLocaleManager.getResourceEncoding(cms,resource));
  }
  finally {
    cms.getRequestContext().setUri(oldUri);
  }
}
