{
  TranslateTableFieldFactory fieldFactory=(TranslateTableFieldFactory)m_table.getTableFieldFactory();
  if (target instanceof TextField) {
    String data=(String)(((TextField)target).getData());
    String[] dataItems=data.split(":");
    int colId=Integer.parseInt(dataItems[0]);
    int rowId=Integer.parseInt(dataItems[1]);
    List<Integer> visibleItemIds=(List<Integer>)m_table.getVisibleItemIds();
    if ((action == m_curDown) || (action == m_enter)) {
      int currentRow=visibleItemIds.indexOf(Integer.valueOf(rowId));
      if (currentRow < (visibleItemIds.size() - 1)) {
        rowId=visibleItemIds.get(currentRow + 1).intValue();
      }
    }
 else     if (action == m_curUp) {
      int currentRow=visibleItemIds.indexOf(Integer.valueOf(rowId));
      if (currentRow > 0) {
        rowId=visibleItemIds.get(currentRow - 1).intValue();
      }
    }
 else     if (action == m_tabNext) {
      if (colId == fieldFactory.getEditableColumns()) {
        colId=1;
        int currentRow=visibleItemIds.indexOf(Integer.valueOf(rowId));
        rowId=visibleItemIds.get((currentRow + 1) % visibleItemIds.size()).intValue();
      }
 else {
        colId++;
      }
    }
 else     if (action == m_tabPrev) {
      if (colId == 1) {
        int currentRow=visibleItemIds.indexOf(Integer.valueOf(rowId));
        colId=fieldFactory.getEditableColumns();
        rowId=visibleItemIds.get((currentRow - 1) % visibleItemIds.size()).intValue();
      }
 else {
        colId--;
      }
    }
    TextField newTF=fieldFactory.getValueFields().get(Integer.valueOf(colId)).get(Integer.valueOf(rowId));
    if (newTF != null) {
      newTF.focus();
    }
  }
}
