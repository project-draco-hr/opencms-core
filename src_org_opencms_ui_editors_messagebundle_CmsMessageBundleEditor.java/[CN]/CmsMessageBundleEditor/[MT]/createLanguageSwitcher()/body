{
  HorizontalLayout languages=new HorizontalLayout();
  languages.setHeight("100%");
  languages.setDefaultComponentAlignment(Alignment.MIDDLE_LEFT);
  languages.setSpacing(true);
  Label languageLabel=new Label(m_messages.key(Messages.GUI_LANGUAGE_SWITCHER_LABEL_0));
  ComboBox languageSelect=new ComboBox();
  languageSelect.setNullSelectionAllowed(false);
  for (  Locale locale : m_model.getLocales()) {
    languageSelect.addItem(locale);
    String caption=locale.getDisplayName(UI.getCurrent().getLocale());
    if (CmsLocaleManager.getDefaultLocale().equals(locale)) {
      caption+=" (" + Messages.get().getBundle(UI.getCurrent().getLocale()).key(Messages.GUI_DEFAULT_LOCALE_0) + ")";
    }
    languageSelect.setItemCaption(locale,caption);
  }
  languageSelect.setValue(m_model.getLocale());
  languageSelect.setNewItemsAllowed(false);
  languageSelect.setTextInputAllowed(false);
  if (m_model.getLocales().size() > 1) {
    languageSelect.addValueChangeListener(new ValueChangeListener(){
      public void valueChange(      ValueChangeEvent event){
        try {
          m_table.clearFilters();
          m_model.setLocale((Locale)event.getProperty().getValue());
        }
 catch (        IOException|CmsException e) {
          e.printStackTrace();
        }
      }
    }
);
  }
 else {
    languageSelect.setEnabled(false);
  }
  languages.addComponent(languageLabel);
  languages.addComponent(languageSelect);
  return languages;
}
