{
  EditMode oldMode=m_model.getEditMode();
  if (!newMode.equals(oldMode)) {
    m_table.clearFilters();
    m_model.setEditMode(newMode);
    m_table.setTableFieldFactory(m_fieldFactories.get(newMode));
    adjustOptionsColumn(oldMode,newMode);
    if (newMode.equals(EditMode.MASTER)) {
      addAddKeyButton();
      if (m_table.getItemIds().isEmpty()) {
        m_table.addItem();
      }
    }
 else {
      removeAddKeyButton();
    }
    adjustFocus();
  }
}
