{
  m_cms=((CmsUIServlet)VaadinServlet.getCurrent()).getCmsObject();
  m_messages=Messages.get().getBundle(UI.getCurrent().getLocale());
  m_resource=resource;
  m_backLink=backLink;
  try {
    m_model=new CmsMessageBundleEditorModel(m_cms,m_resource);
    m_optionsColumn=generateOptionsColumn();
    m_fieldFactories.put(EditMode.DESCRIBE,new TranslateTableFieldFactory(EditMode.DESCRIBE));
    m_fieldFactories.put(EditMode.TRANSLATE,new TranslateTableFieldFactory(EditMode.TRANSLATE));
    m_kbdHandlers.put(EditMode.DESCRIBE,new KbdHandler(m_fieldFactories.get(EditMode.DESCRIBE)));
    m_kbdHandlers.put(EditMode.TRANSLATE,new KbdHandler(m_fieldFactories.get(EditMode.TRANSLATE)));
    fillToolBar(context);
    fillAppInfo(context);
    Component main=createMainComponent();
    context.setAppContent(main);
    if (m_model.getBundleType().equals(BundleType.DESCRIPTOR)) {
      setEditMode(EditMode.DESCRIBE);
    }
 else {
      setEditMode(EditMode.TRANSLATE);
    }
  }
 catch (  IOException|CmsException e) {
    LOG.error(m_messages.key(Messages.ERR_LOADING_RESOURCES_0),e);
    Notification.show(m_messages.key(Messages.ERR_LOADING_RESOURCES_0),Type.ERROR_MESSAGE);
    closeAction();
  }
}
