{
  CmsClientSitemapEntry entry=null;
  try {
    CmsObject cms=getCmsObject();
    Map<String,CmsXmlContentProperty> propertyConfig=OpenCms.getSitemapManager().getElementPropertyConfiguration(cms,entryPointUri);
    CmsJspNavElement navElement=getNavBuilder().getNavigationForResource(root);
    entry=toClientEntry(navElement,propertyConfig,false);
    if (!isSubSitemap(navElement) || root.equals(entryPointUri)) {
      entry.setSubEntries(getChildren(root,levels,propertyConfig));
    }
  }
 catch (  Throwable e) {
    error(e);
  }
  return entry;
}
