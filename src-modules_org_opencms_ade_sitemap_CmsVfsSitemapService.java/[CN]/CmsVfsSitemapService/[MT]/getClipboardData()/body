{
  CmsSitemapClipboardData cache=(CmsSitemapClipboardData)getRequest().getSession().getAttribute(SESSION_ATTR_ADE_SITEMAP_CLIPBOARD_CACHE);
  if (cache == null) {
    cache=new CmsSitemapClipboardData();
    getRequest().getSession().setAttribute(SESSION_ATTR_ADE_SITEMAP_CLIPBOARD_CACHE,cache);
  }
 else {
    Iterator<CmsClientSitemapEntry> modIt=cache.getModifications().iterator();
    while (modIt.hasNext()) {
      CmsClientSitemapEntry modEntry=modIt.next();
      CmsSitemapEntry sitemapEntry=null;
      try {
        sitemapEntry=OpenCms.getSitemapManager().getEntryForId(getCmsObject(),modEntry.getId());
      }
 catch (      CmsException e) {
      }
      if (sitemapEntry != null) {
        modEntry.setSitePath(sitemapEntry.getSitePath(getCmsObject()));
        modEntry.setTitle(sitemapEntry.getTitle());
        modEntry.setName(sitemapEntry.getName());
      }
 else {
        modIt.remove();
      }
    }
    Iterator<CmsClientSitemapEntry> delIt=cache.getDeletions().iterator();
    while (delIt.hasNext()) {
      CmsClientSitemapEntry delEntry=delIt.next();
      CmsSitemapEntry sitemapEntry=null;
      try {
        sitemapEntry=OpenCms.getSitemapManager().getEntryForId(getCmsObject(),delEntry.getId());
      }
 catch (      CmsException e) {
      }
      if (sitemapEntry != null) {
        delIt.remove();
      }
    }
  }
  return cache;
}
