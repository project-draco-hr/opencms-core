{
  CmsObject cms=getCmsObject();
  try {
    String subSitemapPath=CmsResource.getFolderPath(path);
    CmsResource subSitemapFolder=cms.readResource(subSitemapPath);
    ensureLock(subSitemapFolder);
    String folderName=CmsStringUtil.joinPaths(subSitemapPath,"_config");
    String sitemapConfigName=CmsStringUtil.joinPaths(folderName,"sitemap.config");
    String containerpageConfigName=CmsStringUtil.joinPaths(folderName,"containerpage.config");
    if (!cms.existsResource(folderName)) {
      cms.createResource(folderName,CmsResourceTypeFolder.getStaticTypeId());
    }
    int index=1;
    while (cms.existsResource(sitemapConfigName)) {
      sitemapConfigName=CmsStringUtil.joinPaths(folderName,"sitemap_" + index + ".config");
      index++;
    }
    cms.createResource(sitemapConfigName,OpenCms.getResourceManager().getResourceType("sitemap_config").getTypeId());
    index=1;
    while (cms.existsResource(containerpageConfigName)) {
      containerpageConfigName=CmsStringUtil.joinPaths(folderName,"containerpage_" + index + ".config");
      index++;
    }
    cms.createResource(containerpageConfigName,OpenCms.getResourceManager().getResourceType("containerpage_config").getTypeId());
    List<CmsProperty> propertyObjects=new ArrayList<CmsProperty>();
    propertyObjects.add(new CmsProperty(CmsPropertyDefinition.PROPERTY_ADE_SITEMAP_ENTRYPOINT,"true","true"));
    propertyObjects.add(new CmsProperty(CmsPropertyDefinition.PROPERTY_ADE_SITEMAP_CONFIG,sitemapConfigName,sitemapConfigName));
    propertyObjects.add(new CmsProperty(CmsPropertyDefinition.PROPERTY_ADE_CNTPAGE_CONFIG,containerpageConfigName,containerpageConfigName));
    cms.writePropertyObjects(subSitemapPath,propertyObjects);
    cms.unlockResource(subSitemapFolder);
    CmsSitemapClipboardData clipboard=getClipboardData();
    CmsClientSitemapEntry entry=toClientEntry(getNavBuilder().getNavigationForResource(cms.getSitePath(subSitemapFolder)),OpenCms.getSitemapManager().getElementPropertyConfiguration(cms,entryPoint),false);
    clipboard.getModifications().remove(entry);
    clipboard.getModifications().add(entry);
    setClipboardData(clipboard);
    return new CmsSubSitemapInfo(subSitemapPath,System.currentTimeMillis());
  }
 catch (  Exception e) {
    error(e);
  }
  return null;
}
