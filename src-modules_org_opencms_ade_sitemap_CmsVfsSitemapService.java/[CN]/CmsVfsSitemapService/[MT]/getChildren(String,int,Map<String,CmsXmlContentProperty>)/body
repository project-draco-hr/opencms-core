{
  List<CmsClientSitemapEntry> children=new ArrayList<CmsClientSitemapEntry>();
  int i=0;
  for (  CmsJspNavElement navElement : getNavBuilder().getNavigationForFolder(root,true)) {
    CmsClientSitemapEntry child=toClientEntry(navElement,propertyConfig,false);
    if (child != null) {
      child.setPosition(i);
      children.add(child);
      if (child.isFolderType() && ((levels > 1) || (levels == -1)) && !isSubSitemap(navElement)) {
        child.setSubEntries(getChildren(child.getSitePath(),levels - 1,propertyConfig));
        child.setChildrenLoadedInitially();
      }
      i++;
    }
  }
  return children;
}
