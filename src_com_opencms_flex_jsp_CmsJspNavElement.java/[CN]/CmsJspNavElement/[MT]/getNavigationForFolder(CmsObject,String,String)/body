{
  ArrayList list=new ArrayList();
  Vector v=null, dir=null;
  try {
    v=cms.getFilesInFolder(folder);
    dir=cms.getSubFolders(folder);
  }
 catch (  Exception e) {
    return new ArrayList(0);
  }
  v.addAll(dir);
  Iterator i=v.iterator();
  while (i.hasNext()) {
    CmsResource r=(CmsResource)i.next();
    if (r.getState() != CmsResource.C_STATE_DELETED) {
      CmsJspNavElement element=getNavigationForResource(cms,r.getAbsolutePath());
      if ((element != null) && element.isInNavigation()) {
        if ((prefix == null) || (element.getNavText().startsWith(prefix))) {
          list.add(element);
        }
      }
    }
  }
  Collections.sort(list);
  return list;
}
