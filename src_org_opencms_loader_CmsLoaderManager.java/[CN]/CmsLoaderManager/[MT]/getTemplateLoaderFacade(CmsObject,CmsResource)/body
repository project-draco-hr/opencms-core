{
  String absolutePath=cms.readAbsolutePath(resource);
  String templateProp=cms.readProperty(absolutePath,I_CmsConstants.C_PROPERTY_TEMPLATE);
  if (templateProp == null) {
    throw new CmsLoaderException("Property '" + I_CmsConstants.C_PROPERTY_TEMPLATE + "' undefined for file "+ absolutePath);
  }
  CmsResource template=cms.readFile(templateProp);
  return new CmsTemplateLoaderFacade(getLoader(template.getLoaderId()),resource,template);
}
