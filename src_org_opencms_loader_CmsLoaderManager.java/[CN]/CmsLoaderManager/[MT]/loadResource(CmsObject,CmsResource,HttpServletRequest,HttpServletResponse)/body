{
  res.setContentType(getMimeType(resource.getName(),cms.getRequestContext().getEncoding()));
  I_CmsResourceLoader loader=getLoader(resource.getLoaderId());
  long lastModifiedHeader=req.getDateHeader("If-Modified-Since");
  if (lastModifiedHeader > -1) {
    long lastModified=loader.getDateLastModified(cms,resource,req,res);
    if (lastModified == lastModifiedHeader) {
      res.setStatus(HttpServletResponse.SC_NOT_MODIFIED);
      return;
    }
  }
  loader.load(cms,resource,req,res);
}
