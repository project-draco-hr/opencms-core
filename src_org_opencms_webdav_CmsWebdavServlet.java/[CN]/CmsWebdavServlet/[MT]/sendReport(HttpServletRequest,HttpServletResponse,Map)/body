{
  resp.setStatus(CmsWebdavStatus.SC_MULTI_STATUS);
  String absoluteUri=req.getRequestURI();
  String relativePath=getRelativePath(req);
  Document doc=DocumentHelper.createDocument();
  Element multiStatusElem=doc.addElement(new QName(TAG_MULTISTATUS,Namespace.get(DEFAULT_NAMESPACE)));
  Iterator it=errors.entrySet().iterator();
  while (it.hasNext()) {
    Map.Entry e=(Map.Entry)it.next();
    String errorPath=(String)e.getKey();
    int errorCode=((Integer)e.getValue()).intValue();
    Element responseElem=addElement(multiStatusElem,TAG_RESPONSE);
    String toAppend=errorPath.substring(relativePath.length());
    if (!toAppend.startsWith("/")) {
      toAppend="/" + toAppend;
    }
    addElement(responseElem,TAG_HREF).addText(absoluteUri + toAppend);
    addElement(responseElem,TAG_STATUS).addText("HTTP/1.1 " + errorCode + " "+ CmsWebdavStatus.getStatusText(errorCode));
  }
  Writer writer=resp.getWriter();
  doc.write(writer);
  writer.close();
}
