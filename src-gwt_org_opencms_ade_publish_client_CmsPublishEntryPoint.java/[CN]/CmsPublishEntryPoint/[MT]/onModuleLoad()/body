{
  super.onModuleLoad();
  checkBuildId("org.opencms.ade.publish");
  CmsPublishData initData=null;
  try {
    initData=(CmsPublishData)CmsRpcPrefetcher.getSerializedObjectFromDictionary(CmsPublishDialog.getService(),CmsPublishData.DICT_NAME);
    CloseHandler<PopupPanel> closeHandler=new CloseHandler<PopupPanel>(){
      public void onClose(      CloseEvent<PopupPanel> event){
        final String workplaceUri=CmsCoreProvider.get().getDefaultWorkplaceLink();
        CmsPublishDialog dialog=(CmsPublishDialog)(event.getTarget());
        if (dialog.hasSucceeded() || dialog.hasFailed()) {
          CmsPublishConfirmationDialog confirmation=new CmsPublishConfirmationDialog(dialog);
          confirmation.center();
        }
 else {
          CmsJsUtil.closeWindow();
          Window.Location.assign(workplaceUri);
        }
      }
    }
;
    CmsPublishDialog.showPublishDialog(initData,closeHandler);
  }
 catch (  Exception e) {
    CmsErrorDialog.handleException(e);
  }
}
