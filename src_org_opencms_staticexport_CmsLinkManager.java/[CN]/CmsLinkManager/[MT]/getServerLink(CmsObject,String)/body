{
  String result=substituteLinkForUnknownTarget(cms,resourceName);
  if (isAbsoluteUri(result) && !hasScheme(resourceName)) {
    CmsSite currentSite=OpenCms.getSiteManager().getSite(resourceName,cms.getRequestContext().getSiteRoot());
    String serverPrefix=currentSite.getServerPrefix(cms,resourceName);
    result=serverPrefix + result;
  }
  return result;
}
