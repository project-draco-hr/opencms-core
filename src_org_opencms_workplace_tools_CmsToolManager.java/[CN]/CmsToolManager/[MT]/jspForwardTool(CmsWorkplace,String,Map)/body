{
  Map newParams;
  if (params == null) {
    newParams=new HashMap();
  }
 else {
    newParams=new HashMap(params);
  }
  newParams.put(CmsToolDialog.PARAM_PATH,toolPath);
  if (!newParams.containsKey(CmsDialog.PARAM_CLOSELINK)) {
    Map argMap=resolveAdminTool(getCurrentToolPath(wp)).getHandler().getParameters(wp);
    newParams.put(CmsDialog.PARAM_CLOSELINK,linkForToolPath(wp.getJsp(),getCurrentToolPath(wp),argMap));
  }
  wp.setForwarded(true);
  CmsRequestUtil.forwardRequest(wp.getJsp().link(VIEW_JSPPAGE_LOCATION),CmsRequestUtil.createParameterMap(newParams),wp.getJsp().getRequest(),wp.getJsp().getResponse());
}
