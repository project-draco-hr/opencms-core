{
  if (!wp.getCms().existsResource(handler.getLink())) {
    return;
  }
  String id="tool" + getUserData(wp.getCms()).getTools().elementList().size();
  CmsTool adminTool=new CmsTool(id,handler.getName(),handler.getIconPath(),handler.getLink(),handler.getHelpText(),handler.isEnabled(wp.getCms()),handler.isVisible(wp.getCms()));
  if (!validatePath(wp.getCms(),handler.getPath())) {
    if (OpenCms.getLog(CmsLog.CHANNEL_INIT).isWarnEnabled()) {
      OpenCms.getLog(CmsLog.CHANNEL_INIT).warn(". Administration init  : tool " + adminTool.getName() + " could not be installed at "+ handler);
    }
    return;
  }
  if (handler.getPath().equals(C_TOOLPATH_SEPARATOR)) {
    getUserData(wp.getCms()).getTools().addNamedObject(new CmsNamedObject(handler.getPath(),adminTool));
    return;
  }
  CmsToolGroup group=null;
  String groupName=wp.resolveMacros(handler.getGroup());
  CmsTool parentTool=resolveAdminTool(wp.getCms(),getParent(wp.getCms(),handler.getPath()));
  group=parentTool.getToolGroup(groupName);
  if (group == null) {
    String gid="group" + parentTool.getToolGroups().size();
    group=new CmsToolGroup(gid,groupName);
    parentTool.addToolGroup(group,handler.getPosition());
  }
  group.addAdminTool(adminTool,handler.getPosition());
  getUserData(wp.getCms()).getTools().addNamedObject(new CmsNamedObject(handler.getPath(),adminTool));
}
