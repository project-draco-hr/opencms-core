{
  while (!validatePath(path,true)) {
    LOG.warn(Messages.get().key(wp.getLocale(),Messages.LOG_MISSING_ADMIN_TOOL_1,new Object[]{path}));
    path=getParent(wp,path);
  }
  while (resolveAdminTool(path) == null) {
    LOG.warn(Messages.get().key(wp.getLocale(),Messages.LOG_MISSING_ADMIN_TOOL_1,new Object[]{path}));
    path=getParent(wp,path);
  }
  CmsTool aTool=resolveAdminTool(path);
  while (!aTool.getHandler().isEnabled(wp.getCms())) {
    if (aTool.getHandler().getLink().equals(C_VIEW_JSPPAGE_LOCATION)) {
      break;
    }
    path=getParent(wp,path);
    aTool=resolveAdminTool(path);
  }
  return path;
}
