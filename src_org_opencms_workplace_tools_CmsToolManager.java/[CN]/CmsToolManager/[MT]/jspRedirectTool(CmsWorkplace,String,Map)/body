{
  Map myParams=params;
  if (myParams == null) {
    myParams=new HashMap();
  }
  if (myParams.containsKey(CmsToolDialog.PARAM_PATH)) {
    myParams.remove(CmsToolDialog.PARAM_PATH);
  }
  if (!myParams.containsKey(CmsDialog.PARAM_CLOSELINK)) {
    myParams.put(CmsDialog.PARAM_CLOSELINK,linkForPath(wp.getJsp(),getCurrentToolPath(wp),null));
  }
  wp.getJsp().getResponse().sendRedirect(linkForPath(wp.getJsp(),toolPath,myParams));
}
