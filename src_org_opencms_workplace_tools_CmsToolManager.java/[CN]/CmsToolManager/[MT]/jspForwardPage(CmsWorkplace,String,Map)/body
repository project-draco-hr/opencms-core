{
  Map newParams=new HashMap();
  if (pagePath.indexOf("?") > 0) {
    String query=pagePath.substring(pagePath.indexOf("?"));
    pagePath=pagePath.substring(0,pagePath.indexOf("?"));
    Map reqParameters=CmsRequestUtil.createParameterMap(query);
    newParams.putAll(reqParameters);
  }
  if (params != null) {
    newParams.putAll(params);
  }
  if (!newParams.containsKey(CmsDialog.PARAM_CLOSELINK)) {
    Map argMap=resolveAdminTool(getCurrentRoot(wp).getKey(),getCurrentToolPath(wp)).getHandler().getParameters(wp);
    newParams.put(CmsDialog.PARAM_CLOSELINK,linkForToolPath(wp.getJsp(),getCurrentToolPath(wp),argMap));
  }
  wp.setForwarded(true);
  CmsRequestUtil.forwardRequest(wp.getJsp().link(pagePath),CmsRequestUtil.createParameterMap(newParams),wp.getJsp().getRequest(),wp.getJsp().getResponse());
}
