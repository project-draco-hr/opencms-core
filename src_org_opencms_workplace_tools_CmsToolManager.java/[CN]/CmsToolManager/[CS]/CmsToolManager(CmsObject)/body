{
  if (!cms.existsResource(C_VIEW_JSPPAGE_LOCATION)) {
    if (CmsLog.INIT.isInfoEnabled()) {
      CmsLog.INIT.info(Messages.get().key(Messages.INIT_TOOLMANAGER_NOT_CREATED_0));
    }
    return;
  }
  if (CmsLog.INIT.isInfoEnabled()) {
    CmsLog.INIT.info(Messages.get().key(Messages.INIT_TOOLMANAGER_CREATED_0));
  }
  try {
    List handlers=new ArrayList();
    I_CmsToolHandler rootHandler=new CmsRootToolHandler();
    rootHandler.setup(cms,C_VIEW_JSPPAGE_LOCATION);
    handlers.add(rootHandler);
    List resources=cms.readResourcesWithProperty(C_ADMINTOOLS_ROOT_LOCATION,C_HANDLERCLASS_PROPERTY);
    Iterator itRes=resources.iterator();
    while (itRes.hasNext()) {
      CmsResource res=(CmsResource)itRes.next();
      CmsProperty prop=cms.readPropertyObject(res.getRootPath(),C_HANDLERCLASS_PROPERTY,false);
      if (!prop.isNullProperty()) {
        try {
          Class handlerClass=Class.forName(prop.getValue());
          I_CmsToolHandler handler=(I_CmsToolHandler)handlerClass.newInstance();
          handler.setup(cms,res.getRootPath());
          handlers.add(handler);
          if (CmsLog.INIT.isDebugEnabled()) {
            if (!handler.getLink().equals(C_VIEW_JSPPAGE_LOCATION)) {
              CmsLog.INIT.debug(Messages.get().key(Messages.INIT_TOOLMANAGER_NEWTOOL_FOUND_1,handler.getLink()));
            }
 else {
              CmsLog.INIT.debug(Messages.get().key(Messages.INIT_TOOLMANAGER_NEWTOOL_FOUND_1,res.getRootPath()));
            }
          }
        }
 catch (        Exception e) {
          if (CmsLog.INIT.isWarnEnabled()) {
            CmsLog.INIT.warn(Messages.get().key(Messages.INIT_TOOLMANAGER_TOOL_SETUP_ERROR_1,res.getRootPath()),e);
          }
        }
      }
    }
    registerHandlerList(cms,1,handlers);
  }
 catch (  CmsException e) {
    if (CmsLog.INIT.isErrorEnabled()) {
      CmsLog.INIT.error(Messages.get().key(Messages.INIT_TOOLMANAGER_SETUP_ERROR_0),e);
    }
  }
}
