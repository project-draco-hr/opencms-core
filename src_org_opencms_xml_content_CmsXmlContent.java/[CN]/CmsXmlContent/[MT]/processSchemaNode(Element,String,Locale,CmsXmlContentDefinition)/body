{
  int count=0;
  String previousName=null;
  for (Iterator j=root.elementIterator(); j.hasNext(); ) {
    Element element=(Element)j.next();
    String name=element.getName();
    if ((previousName == null) || !previousName.equals(name)) {
      previousName=name;
      count=0;
    }
    String path;
    if (rootPath != null) {
      StringBuffer b=new StringBuffer(rootPath.length() + name.length() + 6);
      b.append(rootPath);
      b.append('/');
      b.append(createXpathElement(name,count));
      path=b.toString();
    }
 else {
      path=createXpathElement(name,count);
    }
    I_CmsXmlSchemaType schemaType=definition.getSchemaType(name);
    if (schemaType.isSimpleType()) {
      I_CmsXmlContentValue value=schemaType.createValue(element,name,count);
      addBookmark(path,locale,true,value);
    }
 else {
      CmsXmlCascadedContentDefinition cascadedSchema=(CmsXmlCascadedContentDefinition)schemaType;
      processSchemaNode(element,path,locale,cascadedSchema.getContentDefinition());
    }
    count++;
  }
}
