{
  m_report.print(m_report.key("report.importing"),I_CmsReport.C_FORMAT_NOTE);
  m_report.print(C_ROOT + destination + " ");
  boolean success=true;
  byte[] content=null;
  String fullname=null;
  try {
    if (source != null) {
      content=getFileBytes(source);
    }
    if (m_importVersion < 2) {
      if ("page".equals(type) || ("plain".equals(type)) || ("XMLTemplate".equals(type))) {
        if (C_DEBUG > 0) {
          System.err.println("#########################");
          System.err.println("[" + this.getClass().getName() + ".importResource()]: starting conversion of \""+ type+ "\" resource "+ source+ ".");
        }
        content=convertFile(source,content,type);
      }
      if (m_importVersion == 0) {
        if (!(new CmsCompatibleCheck()).isTemplateCompatible(m_importPath + destination,content,type)) {
          type=C_TYPE_COMPATIBLEPLAIN_NAME;
          m_report.print(m_report.key("report.must_set_to") + C_TYPE_COMPATIBLEPLAIN_NAME + " ",I_CmsReport.C_FORMAT_WARNING);
        }
      }
    }
    CmsResource res=m_cms.importResource(source,destination,type,user,group,access,properties,launcherStartClass,content,m_importPath);
    if (res != null) {
      fullname=res.getAbsolutePath();
      if (C_TYPE_PAGE_NAME.equals(type)) {
        m_importedPages.add(fullname);
      }
    }
    m_report.println(m_report.key("report.ok"),I_CmsReport.C_FORMAT_OK);
  }
 catch (  Exception exc) {
    success=false;
    m_report.println(exc);
    try {
      Thread.sleep(1000);
    }
 catch (    Exception e) {
    }
    ;
  }
  byte[] digestContent={0};
  if (content != null) {
    digestContent=m_digest.digest(content);
  }
  if (success && (fullname != null)) {
    if (writtenFilenames != null) {
      writtenFilenames.addElement(fullname);
    }
    if (fileCodes != null) {
      fileCodes.addElement(new String(digestContent));
    }
  }
}
