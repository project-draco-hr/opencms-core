{
  byte[] returnValue=byteContent;
  if (!filename.startsWith("/")) {
    filename="/" + filename;
  }
  String fileContent=new String(byteContent);
  if (filename.indexOf("frametemplates") != -1) {
    fileContent=scanFrameTemplate(fileContent);
  }
  fileContent=setEncoding(fileContent,OpenCms.getDefaultEncoding());
  fileContent=setDirectories(fileContent,type);
  if (filename.indexOf(C_VFS_PATH_OLD_BODIES) != -1 || filename.indexOf(I_CmsWpConstants.C_VFS_PATH_BODIES) != -1) {
    fileContent=convertPageBody(fileContent,filename);
  }
  returnValue=fileContent.getBytes();
  return returnValue;
}
