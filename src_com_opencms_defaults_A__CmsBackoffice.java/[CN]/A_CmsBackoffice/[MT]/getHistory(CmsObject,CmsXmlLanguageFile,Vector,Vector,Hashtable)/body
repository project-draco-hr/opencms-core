{
  I_CmsSession session=cms.getRequestContext().getSession(true);
  String id=(String)parameters.get("id");
  if (id != null && !"".equals(id)) {
    Vector cdHistory=new Vector();
    Class cdClass=getContentDefinitionClass();
    Object o=null;
    o=getContentDefinition(cms,cdClass,new Integer(id));
    try {
      cdHistory=((I_CmsExtendedContentDefinition)o).getHistory(cms);
    }
 catch (    Exception e) {
      if (I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING && A_OpenCms.isLogging()) {
        A_OpenCms.log(C_OPENCMS_INFO,getClassName() + ": Backoffice: history method throwed an exception!");
      }
    }
    for (int i=0; i < cdHistory.size(); i++) {
      try {
        I_CmsExtendedContentDefinition curCd=((I_CmsExtendedContentDefinition)cdHistory.elementAt(i));
        long updated=curCd.getDateCreated();
        String userName="";
        try {
          userName=cms.readUser(curCd.getLastModifiedBy()).getName();
        }
 catch (        CmsException exc) {
          userName="";
        }
        long lastModified=curCd.getDateLastModified();
        String output=Utils.getNiceDate(lastModified) + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" + Utils.getNiceDate(updated)+ "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+ userName;
        names.addElement(output);
        values.addElement(curCd.getVersionId() + "");
      }
 catch (      Exception e) {
        if (I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING && A_OpenCms.isLogging()) {
          A_OpenCms.log(C_OPENCMS_INFO,getClassName() + ": Backoffice: history method throwed an exception!");
        }
      }
    }
  }
  return new Integer(-1);
}
