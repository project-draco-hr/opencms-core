{
  String la="false";
  Object laObject=new Object();
  CmsUUID lockedByUserId=CmsUUID.getNullUUID();
  String lockString=null;
  CmsUUID actUserId=cms.getRequestContext().currentUser().getId();
  String isLockedBy=null;
  int lockedInProject=-1;
  int curProjectId=cms.getRequestContext().currentProject().getId();
  boolean hasWriteAccess=false;
  try {
    Method laMethod=cdClass.getMethod("isLockable",new Class[]{});
    laObject=laMethod.invoke(null,null);
  }
 catch (  InvocationTargetException ite) {
    if (OpenCms.getLog(this).isWarnEnabled()) {
      OpenCms.getLog(this).warn("Method isLockable caused an Invocation target exception",ite);
    }
  }
catch (  NoSuchMethodException nsm) {
    if (OpenCms.getLog(this).isWarnEnabled()) {
      OpenCms.getLog(this).warn("Requested method isLockable was not found",nsm);
    }
  }
catch (  Exception e) {
    if (OpenCms.getLog(this).isWarnEnabled()) {
      OpenCms.getLog(this).warn("Method isLockable caused an exception",e);
    }
  }
  la=laObject.toString();
  if (la.equals("false")) {
    try {
      template.setData("backofficecontextmenue","backofficeedit");
      template.setData("lockedby",template.getDataValue("nolock"));
    }
 catch (    Exception e) {
      if (OpenCms.getLog(this).isWarnEnabled()) {
        OpenCms.getLog(this).warn("Backoffice setLockstates:'not lockable' section caused an exception",e);
      }
    }
  }
 else {
    try {
      lockedByUserId=((A_CmsContentDefinition)entryObject).getLockstate();
      hasWriteAccess=((A_CmsContentDefinition)entryObject).hasWriteAccess(cms);
    }
 catch (    Exception e) {
      if (OpenCms.getLog(this).isWarnEnabled()) {
        OpenCms.getLog(this).warn("Method getLockstate caused an exception",e);
      }
    }
    try {
      if (lockedByUserId.equals(actUserId)) {
        isLockedBy=cms.getRequestContext().currentUser().getName();
        template.setData("isLockedBy",isLockedBy);
        try {
          lockedInProject=((I_CmsExtendedContentDefinition)entryObject).getLockedInProject();
        }
 catch (        Exception e) {
          if (OpenCms.getLog(this).isWarnEnabled()) {
            OpenCms.getLog(this).warn("Method getLockedInProject caused an exception",e);
          }
        }
        if (lockedInProject == curProjectId) {
          lockString=template.getProcessedDataValue("lockuser",this,parameters);
        }
 else {
          lockString=template.getProcessedDataValue("lock",this,parameters);
        }
        template.setData("lockedby",lockString);
      }
 else {
        if (!lockedByUserId.isNullUUID()) {
          if (!hasWriteAccess) {
            lockString=template.getProcessedDataValue("noaccess",this,parameters);
            template.setData("lockedby",lockString);
          }
 else {
            isLockedBy=readSaveUserName(cms,lockedByUserId);
            template.setData("isLockedBy",isLockedBy);
            lockString=template.getProcessedDataValue("lock",this,parameters);
            template.setData("lockedby",lockString);
          }
        }
 else {
          lockString=template.getProcessedDataValue("nolock",this,parameters);
          template.setData("lockedby",lockString);
        }
      }
    }
 catch (    Exception e) {
      if (OpenCms.getLog(this).isWarnEnabled()) {
        OpenCms.getLog(this).warn("Backoffice setLockstates caused an exception",e);
      }
    }
  }
}
