{
  byte[] processResult=null;
  I_CmsSession session=(CmsSession)cms.getRequestContext().getSession(true);
  Class cdClass=getContentDefinitionClass();
  String id=(String)parameters.get("id");
  if (id == null) {
    id="";
  }
  templateSelector="done";
  session.removeValue("idsave");
  Integer idInteger=null;
  try {
    idInteger=Integer.valueOf(id);
  }
 catch (  Exception e) {
    Object o=null;
    o=getContentDefinition(cms,cdClass,id);
    try {
      ((A_CmsContentDefinition)o).undelete(cms);
    }
 catch (    Exception e1) {
      if (I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING && A_OpenCms.isLogging()) {
        A_OpenCms.log(C_OPENCMS_INFO,getClassName() + ": Backoffice: undelete method throwed an exception!");
      }
      templateSelector="undeleteerror";
      template.setData("undeleteerror",e1.getMessage());
    }
    processResult=startProcessing(cms,template,elementName,parameters,templateSelector);
    return processResult;
  }
  Object o=null;
  o=getContentDefinition(cms,cdClass,idInteger);
  try {
    ((A_CmsContentDefinition)o).undelete(cms);
  }
 catch (  Exception e) {
    templateSelector="undeleteerror";
    template.setData("undeleteerror",e.getMessage());
  }
  processResult=startProcessing(cms,template,elementName,parameters,templateSelector);
  return processResult;
}
