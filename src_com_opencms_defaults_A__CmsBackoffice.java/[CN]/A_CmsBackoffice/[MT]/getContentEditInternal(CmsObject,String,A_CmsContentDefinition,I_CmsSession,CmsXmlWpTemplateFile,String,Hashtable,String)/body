{
  byte[] returnProcess=null;
  String error="";
  String action=(String)parameters.get("action");
  templateSelector=getTemplateSelector(cms,template,parameters,templateSelector);
  returnProcess=getContentEdit(cms,template,elementName,parameters,templateSelector);
  if (returnProcess == null) {
    cd=(A_CmsContentDefinition)session.getValue(this.getContentDefinitionClass().getName());
    if (cd == null) {
      Integer idvalue=new Integer(id);
      cd=(A_CmsContentDefinition)this.getContentDefinition(cms,this.getContentDefinitionClass(),idvalue);
    }
    Enumeration keys=parameters.keys();
    error=getContentEdit(cms,template,cd,elementName,keys,parameters,templateSelector);
    Vector getMethods=this.getGetMethods(cd);
    Hashtable setMethods=this.getSetMethods(cd);
    this.fillContentDefinition(cms,cd,parameters,setMethods);
    this.setDatablocks(template,cd,getMethods);
    session.putValue(this.getContentDefinitionClass().getName(),cd);
    String previewButton=null;
    try {
      previewButton=(String)getPreviewUrl(cms,null,null,null);
    }
 catch (    Exception e) {
    }
    if (!((previewButton == null) || (previewButton.equals("")))) {
      session.putValue("weShallDisplayThePreviewButton",previewButton + "?id=" + cd.getUniqueId(cms));
    }
    if (!error.equals("")) {
      template.setData("error",template.getProcessedDataValue("errormsg") + error);
    }
 else {
      template.setData("error","");
    }
    returnProcess=getContentButtonsInternal(cms,cd,session,template,parameters,templateSelector,action,error);
  }
  return returnProcess;
}
