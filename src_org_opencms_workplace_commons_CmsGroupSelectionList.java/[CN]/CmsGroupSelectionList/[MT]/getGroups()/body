{
  List ret=new ArrayList();
  if (getParamUser() != null) {
    ret.addAll(getCms().getGroupsOfUser(getParamUser(),false));
  }
 else {
    ret.addAll(OpenCms.getRoleManager().getManageableGroups(getCms(),"",true));
  }
  if (getParamFlags() != null) {
    int flags=Integer.parseInt(getParamFlags());
    ret=CmsPrincipal.filterFlag(ret,flags);
  }
  if ((getParamOufqn() != null) && !getParamOufqn().equals("null")) {
    Iterator itTempRet=ret.iterator();
    while (itTempRet.hasNext()) {
      CmsGroup group=(CmsGroup)itTempRet.next();
      if (!group.getOuFqn().startsWith(getParamOufqn())) {
        itTempRet.remove();
      }
    }
  }
  return ret;
}
