{
  List<CmsGroup> groups=new ArrayList<CmsGroup>();
  if (getParamUser() != null) {
    groups.addAll(getCms().getGroupsOfUser(getParamUser(),false));
  }
 else {
    groups.addAll(OpenCms.getRoleManager().getManageableGroups(getCms(),"",true));
  }
  List<CmsGroup> result=new ArrayList<CmsGroup>();
  if (getParamFlags() != null) {
    int flags=Integer.parseInt(getParamFlags());
    for (    CmsPrincipal p : CmsPrincipal.filterFlag(groups,flags)) {
      if (p instanceof CmsGroup) {
        result.add((CmsGroup)p);
      }
    }
  }
  if ((getParamOufqn() != null) && !getParamOufqn().equals("null")) {
    Iterator<CmsGroup> itTempRet=result.iterator();
    while (itTempRet.hasNext()) {
      CmsGroup group=itTempRet.next();
      if (!group.getOuFqn().startsWith(getParamOufqn())) {
        itTempRet.remove();
      }
    }
  }
  return result;
}
