{
  CmsObject cms=getCmsObject();
  echo("Testing sibling version numbers");
  String sib1="/sibVer1.txt";
  String sib2="/sibVer2.txt";
  cms.createResource(sib1,CmsResourceTypePlain.getStaticTypeId());
  cms.createSibling(sib1,sib2,null);
  assertVersion(cms,sib1,1);
  assertTrue(cms.readAllAvailableVersions(sib1).isEmpty());
  assertVersion(cms,sib2,1);
  assertTrue(cms.readAllAvailableVersions(sib2).isEmpty());
  OpenCms.getPublishManager().publishResource(cms,sib1,true,new CmsShellReport(Locale.ENGLISH));
  OpenCms.getPublishManager().waitWhileRunning();
  assertVersion(cms,sib1,1);
  assertEquals(1,cms.readAllAvailableVersions(sib1).size());
  assertVersion(cms,sib2,1);
  assertEquals(1,cms.readAllAvailableVersions(sib2).size());
  String sib3="/sibVer3.txt";
  String sib4="/sibVer4.txt";
  cms.createResource(sib3,CmsResourceTypePlain.getStaticTypeId());
  cms.createSibling(sib3,sib4,null);
  assertVersion(cms,sib3,1);
  assertTrue(cms.readAllAvailableVersions(sib3).isEmpty());
  assertVersion(cms,sib4,1);
  assertTrue(cms.readAllAvailableVersions(sib4).isEmpty());
  OpenCms.getPublishManager().publishResource(cms,sib4);
  OpenCms.getPublishManager().waitWhileRunning();
  assertVersion(cms,sib4,1);
  assertEquals(1,cms.readAllAvailableVersions(sib4).size());
  assertVersion(cms,sib3,1);
  assertTrue(cms.readAllAvailableVersions(sib3).isEmpty());
  OpenCms.getPublishManager().publishResource(cms,sib3);
  OpenCms.getPublishManager().waitWhileRunning();
  assertVersion(cms,sib3,1);
  assertEquals(1,cms.readAllAvailableVersions(sib3).size());
  assertVersion(cms,sib4,1);
  assertEquals(1,cms.readAllAvailableVersions(sib4).size());
}
