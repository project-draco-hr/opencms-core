{
  CmsObject cms=getCmsObject();
  echo("Testing sibling version numbers");
  String sib1="/sibVer1.txt";
  String sib2="/sibVer2.txt";
  cms.createResource(sib1,CmsResourceTypePlain.getStaticTypeId());
  cms.createSibling(sib1,sib2,null);
  assertHistory(cms,sib1,1);
  assertHistory(cms,sib2,1);
  OpenCms.getPublishManager().publishResource(cms,sib1,true,new CmsShellReport(Locale.ENGLISH));
  OpenCms.getPublishManager().waitWhileRunning();
  assertHistory(cms,sib1,1);
  assertHistory(cms,sib2,1);
  cms.getRequestContext().setCurrentProject(cms.readProject(CmsProject.ONLINE_PROJECT_ID));
  assertHistory(cms,sib2,1);
  cms=getCmsObject();
  String sib3="/sibVer3.txt";
  String sib4="/sibVer4.txt";
  cms.createResource(sib3,CmsResourceTypePlain.getStaticTypeId());
  cms.createSibling(sib3,sib4,null);
  assertHistory(cms,sib3,1);
  assertHistory(cms,sib4,1);
  OpenCms.getPublishManager().publishResource(cms,sib3);
  OpenCms.getPublishManager().waitWhileRunning();
  assertHistory(cms,sib3,1);
  assertHistory(cms,sib4,2);
  OpenCms.getPublishManager().publishResource(cms,sib4);
  OpenCms.getPublishManager().waitWhileRunning();
  assertHistory(cms,sib3,1);
  assertHistory(cms,sib4,2);
}
