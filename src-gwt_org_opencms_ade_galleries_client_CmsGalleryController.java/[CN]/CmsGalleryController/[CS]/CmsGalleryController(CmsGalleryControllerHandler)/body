{
  m_handler=handler;
  m_searchObject=(CmsGallerySearchBean)CmsRpcPrefetcher.getSerializedObject(getGalleryService(),CmsGallerySearchBean.DICT_NAME);
  m_dialogBean=(CmsGalleryDataBean)CmsRpcPrefetcher.getSerializedObject(getGalleryService(),CmsGalleryDataBean.DICT_NAME);
  m_dialogMode=m_dialogBean.getMode();
  if (m_searchObject == null) {
    m_searchObject=new CmsGallerySearchBean();
    m_searchObject.setLocale(m_dialogBean.getLocale());
    m_searchObject.setScope(m_dialogBean.getScope());
  }
  m_handler.onInitialSearch(m_searchObject,m_dialogBean,this);
  m_eventBus=new SimpleEventBus();
  addValueChangeHandler(handler);
}
