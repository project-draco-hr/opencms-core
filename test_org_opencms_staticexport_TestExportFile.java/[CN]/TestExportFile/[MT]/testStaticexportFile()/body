{
  CmsObject cms=getCmsObject();
  echo("Testing file export");
  OpenCms.getStaticExportManager().setHandler("org.opencms.staticexport.CmsAfterPublishStaticExportHandler");
  String resourcename="/file1.txt";
  String content="this is a test content";
  cms.createResource(resourcename,CmsResourceTypePlain.C_RESOURCE_TYPE_ID,content.getBytes(),null);
  cms.unlockResource(resourcename);
  this.assertContent(cms,resourcename,content.getBytes());
  cms.publishProject();
  File f=new File(getTestDataPath("export/sites/default" + resourcename));
  assertTrue(f.exists());
  byte exportContent[]=new byte[(int)f.length()];
  FileInputStream fileStream=new FileInputStream(f);
  fileStream.read(exportContent);
  this.assertContent(cms,resourcename,exportContent);
}
