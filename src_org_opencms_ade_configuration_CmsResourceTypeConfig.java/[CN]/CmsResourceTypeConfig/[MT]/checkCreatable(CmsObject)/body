{
  if (cms.getRequestContext().getCurrentProject().isOnlineProject() || "".equals(cms.getRequestContext().getSiteRoot())) {
    return false;
  }
  if (CmsXmlDynamicFunctionHandler.TYPE_FUNCTION.equals(m_typeName)) {
    return OpenCms.getRoleManager().hasRole(cms,CmsRole.DEVELOPER);
  }
  checkInitialized();
  String folderPath=getFolderPath(cms);
  CmsObject createCms=OpenCms.initCmsObject(m_cms);
  createCms.getRequestContext().setCurrentProject(cms.getRequestContext().getCurrentProject());
  createFolder(createCms,folderPath);
  String oldSiteRoot=cms.getRequestContext().getSiteRoot();
  cms.getRequestContext().setSiteRoot("");
  try {
    CmsResource permissionCheckFolder=cms.readResource(folderPath);
    CmsExplorerTypeSettings settings=OpenCms.getWorkplaceManager().getExplorerTypeSetting(m_typeName);
    boolean editable=settings.isEditable(cms,permissionCheckFolder);
    boolean controlPermission=settings.getAccess().getPermissions(cms,permissionCheckFolder).requiresControlPermission();
    boolean hasWritePermission=cms.hasPermissions(permissionCheckFolder,CmsPermissionSet.ACCESS_WRITE,false,CmsResourceFilter.ONLY_VISIBLE_NO_DELETED);
    return editable && controlPermission && hasWritePermission;
  }
 catch (  CmsVfsResourceNotFoundException e) {
    return false;
  }
catch (  CmsException e) {
    LOG.error(e.getLocalizedMessage(),e);
    return false;
  }
 finally {
    cms.getRequestContext().setSiteRoot(oldSiteRoot);
  }
}
