{
  int cycle=0;
  int marker=(int)(java.lang.Math.random() * 10000);
  PreparedStatement pstmt=null;
synchronized (m_prepStatements) {
    while (m_prepStatements.size() == 0) {
      try {
        if (A_OpenCms.isLogging()) {
          A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_INFO,"[CmsDbPool] no connections available - have to wait. marker:" + marker + " key:"+ key+ " cycle:"+ cycle);
        }
        int waittime=(int)(java.lang.Math.random() * 1000) + 100;
        m_prepStatements.wait(waittime);
      }
 catch (      InterruptedException exc) {
      }
    }
    Hashtable pool=(Hashtable)m_prepStatements.pop();
    pstmt=(PreparedStatement)pool.get(key);
    m_usedStatementsCache.put(pstmt,pool);
    m_prepStatements.notify();
  }
  return pstmt;
}
