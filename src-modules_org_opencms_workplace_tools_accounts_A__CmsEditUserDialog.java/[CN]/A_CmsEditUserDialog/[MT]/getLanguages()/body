{
  List locales=new ArrayList();
  Locale defLocale=null;
  if ((m_user != null) && CmsStringUtil.isNotEmptyOrWhitespaceOnly(m_user.getName())) {
    defLocale=new CmsUserSettings(m_user).getLocale();
  }
  if (defLocale == null) {
    defLocale=getCms().getRequestContext().getLocale();
  }
  Iterator itLocales=OpenCms.getLocaleManager().getAvailableLocales().iterator();
  while (itLocales.hasNext()) {
    Locale locale=(Locale)itLocales.next();
    boolean selected=locale.equals(defLocale);
    locales.add(new CmsSelectWidgetOption(locale.toString(),selected,locale.getDisplayName(getLocale()),null));
  }
  return locales;
}
