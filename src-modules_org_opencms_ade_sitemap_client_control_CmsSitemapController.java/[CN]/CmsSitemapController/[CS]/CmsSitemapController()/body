{
  m_redirectUpdater=new CmsRedirectUpdater();
  m_changes=new ArrayList<I_CmsClientSitemapChange>();
  m_undone=new ArrayList<I_CmsClientSitemapChange>();
  m_data=(CmsSitemapData)CmsRpcPrefetcher.getSerializedObject(getService(),CmsSitemapData.DICT_NAME);
  m_hiddenProperties=new HashSet<String>();
  m_hiddenProperties.add(CmsSitemapManager.Property.sitemap.toString());
  m_hiddenProperties.add(CmsSitemapManager.Property.internalRedirect.toString());
  m_hiddenProperties.add(CmsSitemapManager.Property.externalRedirect.toString());
  m_hiddenProperties.add(CmsSitemapManager.Property.isRedirect.toString());
  m_detailPageTable=m_data.getDetailPageTable();
  RootPanel.get().add(new Label("detail pages: " + m_detailPageTable.size()));
  m_configLock=new CmsSingleResourceLock(m_data.getConfigPath());
  m_sitemapLock=new CmsSingleResourceLock(CmsCoreProvider.get().getUri());
  m_eventBus=new SimpleEventBus();
  initDetailPageInfos();
}
