{
  if (!isDirty()) {
    return;
  }
  if (m_undone.isEmpty()) {
    m_handlerManager.fireEvent(new CmsSitemapFirstUndoEvent());
  }
  I_CmsClientSitemapChange change=m_changes.remove(m_changes.size() - 1);
  m_undone.add(change);
  I_CmsClientSitemapChange revertChange=change.revert();
  revertChange.applyToModel(this);
  m_handlerManager.fireEvent(new CmsSitemapChangeEvent(revertChange));
  if (!isDirty()) {
    m_handlerManager.fireEvent(new CmsSitemapLastUndoEvent());
    CmsCoreProvider.get().unlock();
  }
}
