{
  if (!hasChanges()) {
    return;
  }
  if (m_undone.isEmpty()) {
    m_eventBus.fireEventFromSource(new CmsSitemapFirstUndoEvent(),this);
  }
  I_CmsClientSitemapChange change=m_changes.remove(m_changes.size() - 1);
  m_undone.add(change.getChangeForUndo());
  I_CmsClientSitemapChange revertChange=change.revert();
  if (revertChange.isChangingDetailPages()) {
    m_detailPageChangeCounter-=1;
  }
  revertChange.applyToModel(this);
  fireChange(revertChange);
  if (m_detailPageChangeCounter == 0) {
    m_configLock.unlock();
  }
  if (!hasChanges()) {
    m_eventBus.fireEventFromSource(new CmsSitemapLastUndoEvent(),this);
    m_sitemapLock.unlock();
  }
}
