{
  boolean changedTitle=((title != null) && !title.trim().equals(entry.getTitle()));
  boolean changedVfsRef=((vfsReference != null) && !vfsReference.trim().equals(entry.getVfsPath()));
  Map<String,String> oldProps=new HashMap<String,String>(entry.getProperties());
  Map<String,String> newProps=new HashMap<String,String>(entry.getProperties());
  CmsCollectionUtil.updateMapAndRemoveNulls(properties,newProps);
  boolean changedProperties=!oldProps.equals(newProps);
  if (!changedTitle && !changedVfsRef && !changedProperties) {
    return;
  }
  CmsClientSitemapEntry newEntry=new CmsClientSitemapEntry(entry);
  if (changedTitle) {
    newEntry.setTitle(title);
  }
  if (changedVfsRef) {
    newEntry.setVfsPath(vfsReference);
  }
  if (changedProperties) {
    newEntry.setProperties(newProps);
  }
  addChange(new CmsClientSitemapChangeEdit(entry,newEntry),false);
}
