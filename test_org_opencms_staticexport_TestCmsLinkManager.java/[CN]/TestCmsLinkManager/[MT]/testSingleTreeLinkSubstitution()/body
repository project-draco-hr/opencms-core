{
  String test;
  CmsObject cms=getCmsObject();
  echo("Testing link substitution");
  String localeInsert="/" + cms.getRequestContext().getLocale().toString();
  cms.getRequestContext().setCurrentProject(cms.readProject("Online"));
  CmsLinkManager linkManager=OpenCms.getLinkManager();
  test=linkManager.substituteLink(cms,"/folder1/index.html?additionalParam","/sites/default");
  System.out.println(test);
  assertEquals(getVfsPrefix() + localeInsert + "/folder1/index.html?additionalParam",test);
  test=linkManager.substituteLink(cms,CmsLinkManager.getAbsoluteUri("/","/folder1/index.html"),"/sites/default");
  System.out.println(test);
  assertEquals(getVfsPrefix() + localeInsert + "/",test);
  test=linkManager.substituteLink(cms,CmsLinkManager.getAbsoluteUri("./","/folder1/index.html"),"/sites/default");
  System.out.println(test);
  assertEquals(getVfsPrefix() + localeInsert + "/folder1/",test);
  test=CmsLinkManager.getRelativeUri("/index.html","/index.html");
  System.out.println(test);
  assertEquals("index.html",test);
  test=CmsLinkManager.getRelativeUri("/folder1/index.html","/folder1/");
  System.out.println(test);
  assertEquals("./",test);
  test=CmsLinkManager.getRelativeUri("/index.html","/");
  System.out.println(test);
  assertEquals("./",test);
  test=CmsLinkManager.getRelativeUri("/index.html","./");
  System.out.println(test);
  assertEquals("./",test);
  test=CmsLinkManager.getRelativeUri("/","/");
  System.out.println(test);
  assertEquals("./",test);
}
