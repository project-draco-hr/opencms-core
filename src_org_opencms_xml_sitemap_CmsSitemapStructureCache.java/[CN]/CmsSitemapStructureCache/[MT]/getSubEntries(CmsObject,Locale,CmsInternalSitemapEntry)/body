{
  Map<String,CmsSimplePropertyValue> props=entry.getNewProperties();
  CmsSimplePropertyValue sitemapProp=props.get(CmsSitemapManager.Property.sitemap.name());
  String subSitemapId=sitemapProp == null ? null : sitemapProp.getOwnValue();
  if (CmsStringUtil.isEmptyOrWhitespaceOnly(subSitemapId)) {
    for (    CmsSitemapEntry child : entry.getSubEntries()) {
      child.setPropertyDefinitions(entry.getPropertyDefinitions());
    }
    return entry.getSubEntries();
  }
  try {
    CmsResource subSitemap=internalReadResource(cms,subSitemapId);
    Map<String,CmsXmlContentProperty> propConfig=getPropertyConfig(cms,subSitemap);
    CmsXmlSitemap sitemapXml=internalUnmarshalSitemapResource(cms,subSitemap);
    CmsSitemapBean sitemap=internalGetSitemap(cms,sitemapXml,locale);
    if (sitemap == null) {
      entry.setSubEntries(new ArrayList<CmsInternalSitemapEntry>());
      return entry.getSubEntries();
    }
    entry.setSubEntries(sitemap.getSiteEntries());
    for (    CmsSitemapEntry child : entry.getSubEntries()) {
      child.setPropertyDefinitions(propConfig);
    }
  }
 catch (  CmsException e) {
    LOG.error("Can't read sub-sitemap:");
    LOG.error(e.getLocalizedMessage(),e);
  }
  return entry.getSubEntries();
}
