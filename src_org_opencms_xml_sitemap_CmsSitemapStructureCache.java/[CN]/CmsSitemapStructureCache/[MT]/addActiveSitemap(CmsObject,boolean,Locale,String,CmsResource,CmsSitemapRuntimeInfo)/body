{
  CmsConfigurationParser conf=(new CmsADEDefaultConfiguration(CmsPropertyDefinition.PROPERTY_ADE_SITEMAP_CONFIG)).getConfigurationParser(cms,cms.getSitePath(sitemapRes));
  List<CmsDetailPageInfo> detailPages=conf.getDetailPages();
  CmsDetailPageTable detailPageTable=new CmsDetailPageTable(detailPages);
  String key=locale.toString() + entryPointPath;
  String sitemapPath=sitemapRes.getRootPath();
  m_active.put(key,sitemapPath);
  m_activeInfo.put(key,info);
  m_entryPoints.put(sitemapPath,entryPointPath);
  CmsADEDefaultConfiguration config=new CmsADEDefaultConfiguration(CmsPropertyDefinition.PROPERTY_ADE_CNTPAGE_CONFIG);
  List<CmsDetailPageInfo> detailInfos=detailPageTable.getBestDetailPages();
  for (  CmsDetailPageInfo detail : detailInfos) {
    m_allBestDetailPages.addValue(detail.getType(),detail);
  }
  info.setDetailPageTable(detailPageTable);
  info.setConfiguration(conf);
  CmsObject siteCms=OpenCms.initCmsObject(cms);
  cms.getRequestContext().setSiteRoot(OpenCms.getSiteManager().getSiteRoot(sitemapRes.getRootPath()));
  Collection<CmsResource> creatables=config.getCreatableElements(siteCms,siteCms.getSitePath(sitemapRes),null);
  for (  CmsResource res : creatables) {
    I_CmsResourceType type=OpenCms.getResourceManager().getResourceType(res);
    info.addResourceType(type);
  }
}
