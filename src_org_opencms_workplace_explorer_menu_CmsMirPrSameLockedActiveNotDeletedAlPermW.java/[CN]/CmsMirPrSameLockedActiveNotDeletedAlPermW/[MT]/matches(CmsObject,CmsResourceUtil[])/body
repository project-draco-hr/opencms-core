{
  if (resourceUtil[0].isInsideProject()) {
    CmsLock lock=resourceUtil[0].getLock();
    boolean lockedForPublish=resourceUtil[0].getProjectState().isLockedForPublishing();
    return (!lockedForPublish && !lock.isShared() && lock.isOwnedInProjectBy(cms.getRequestContext().currentUser(),cms.getRequestContext().currentProject())) || (!lockedForPublish && lock.isNullLock() && OpenCms.getWorkplaceManager().autoLockResources());
  }
  return false;
}
