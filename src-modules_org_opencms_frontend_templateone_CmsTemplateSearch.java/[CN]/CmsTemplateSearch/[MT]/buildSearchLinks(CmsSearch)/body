{
  StringBuffer result=new StringBuffer(32);
  boolean showPageLinks=false;
  StringBuffer additionalParams=new StringBuffer(16);
  if (search.getPreviousUrl() != null || search.getNextUrl() != null) {
    showPageLinks=true;
    result.append("<div class=\"searchlinks\">\n");
    additionalParams.append("&uri=");
    additionalParams.append(CmsEncoder.encode(getRequestContext().getUri()));
    additionalParams.append("&");
    additionalParams.append(CmsLocaleManager.PARAMETER_LOCALE);
    additionalParams.append("=");
    additionalParams.append(getRequestContext().getLocale());
    additionalParams.append("&");
    additionalParams.append(PARAM_SEARCHALL);
    additionalParams.append("=");
    additionalParams.append(isSearchAll());
  }
  if (search.getPreviousUrl() != null) {
    result.append("\t<input type=\"button\" class=\"formbutton\" value=\"&lt;&lt; ");
    result.append(key("search.previous"));
    result.append("\" onclick=\"location.href=\'");
    result.append(link(search.getPreviousUrl()));
    result.append(additionalParams);
    result.append("\';\">");
  }
  Map pageLinks;
  try {
    getRequestContext().setUri(CmsWorkplace.VFS_PATH_MODULES + MODULE_NAME + "/pages/search.html");
    pageLinks=search.getPageLinks();
  }
  finally {
    getRequestContext().setUri(getPageUri());
  }
  Iterator i=pageLinks.keySet().iterator();
  while (i.hasNext()) {
    int pageNumber=((Integer)i.next()).intValue();
    String pageLink=link((String)pageLinks.get(new Integer(pageNumber)));
    result.append("&nbsp;&nbsp;");
    if (pageNumber != search.getPage()) {
      result.append("<a href=\"");
      result.append(pageLink);
      result.append(additionalParams);
      result.append("\">");
      result.append(pageNumber);
      result.append("</a>");
    }
 else {
      result.append(pageNumber);
    }
  }
  if (search.getNextUrl() != null) {
    result.append("&nbsp;&nbsp;<input type=\"button\" class=\"formbutton\" value=\"");
    result.append(key("search.next"));
    result.append(" &gt;&gt;\" onclick=\"location.href=\'");
    result.append(link(search.getNextUrl()));
    result.append(additionalParams);
    result.append("\';\">");
  }
  if (showPageLinks) {
    result.append("\n</div>\n");
  }
  return result.toString();
}
