{
  List result;
  if (isSearchAll()) {
    search.setSearchRoot("/");
  }
 else {
    search.setSearchRoot(getStartFolder());
  }
  String queryString=search.getQuery();
  try {
    if (queryString == null || "".equals(queryString.trim())) {
      queryString="";
      search.setQuery("");
      result=new ArrayList();
    }
 else {
      getRequestContext().setUri(I_CmsWpConstants.C_VFS_PATH_MODULES + C_MODULE_NAME + "/pages/search.html");
      result=search.getSearchResultForPage();
    }
  }
  finally {
    getRequestContext().setUri(getPageUri());
  }
  return result;
}
