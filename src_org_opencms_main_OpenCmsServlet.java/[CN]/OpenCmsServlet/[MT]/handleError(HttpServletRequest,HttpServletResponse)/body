{
  String path=req.getPathInfo();
  int error=HttpServletResponse.SC_INTERNAL_SERVER_ERROR;
  try {
    error=Integer.parseInt(path.substring("/handle".length()));
  }
 catch (  NumberFormatException e) {
  }
switch (error) {
case 404:
    CmsObject cms=null;
  CmsStaticExportData exportData=null;
try {
  cms=OpenCmsCore.getInstance().initCmsObject(req,res,OpenCms.getDefaultUsers().getUserExport(),null);
  exportData=OpenCms.getStaticExportManager().getExportData(req,cms);
}
 catch (CmsException e) {
  if (OpenCms.getLog(this).isWarnEnabled()) {
    OpenCms.getLog(this).warn("Error initializing CmsObject in error handler for '" + path + "' code "+ error,e);
  }
}
if (exportData != null) {
synchronized (this) {
  try {
    OpenCms.getStaticExportManager().export(req,res,cms,exportData);
  }
 catch (  Throwable t) {
    if (OpenCms.getLog(this).isWarnEnabled()) {
      OpenCms.getLog(this).warn("Error exporting " + exportData,t);
    }
    res.sendError(HttpServletResponse.SC_NOT_FOUND);
  }
}
}
 else {
res.sendError(HttpServletResponse.SC_NOT_FOUND);
}
break;
default :
res.sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);
}
}
