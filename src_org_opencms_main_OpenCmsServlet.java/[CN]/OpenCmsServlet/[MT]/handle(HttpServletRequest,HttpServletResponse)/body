{
  String path=req.getPathInfo();
  CmsObject cms=null;
  CmsStaticExportData exportData=null;
  try {
    cms=OpenCmsCore.getInstance().initCmsObject(req,res,OpenCms.getDefaultUsers().getUserExport(),null);
    exportData=OpenCms.getStaticExportManager().getExportData(req,cms);
  }
 catch (  CmsException e) {
    if (OpenCms.getLog(this).isWarnEnabled()) {
      OpenCms.getLog(this).warn("Error initializing CmsObject in 404 handler for '" + path + "'",e);
    }
  }
  if (exportData != null) {
synchronized (this) {
      try {
        OpenCms.getStaticExportManager().export(req,res,cms,exportData);
      }
 catch (      Throwable t) {
        if (OpenCms.getLog(this).isWarnEnabled()) {
          OpenCms.getLog(this).warn("Error exporting " + exportData,t);
        }
        res.sendError(HttpServletResponse.SC_NOT_FOUND);
      }
    }
  }
 else {
    res.sendError(HttpServletResponse.SC_NOT_FOUND);
  }
}
