{
  String handlerUri="/system/handler/handle" + errorCode + ".html";
  CmsObject cms=null;
  try {
    cms=OpenCms.initCmsObject(OpenCms.getDefaultUsers().getUserGuest());
    cms.getRequestContext().setUri(handlerUri);
  }
 catch (  CmsException e) {
    CmsMessageContainer container=Messages.get().container(Messages.LOG_INIT_CMSOBJECT_IN_ERROR_HANDLER_2,new Integer(errorCode),handlerUri);
    if (LOG.isWarnEnabled()) {
      LOG.warn(org.opencms.jsp.Messages.getLocalizedMessage(container,req),e);
    }
  }
  CmsFile file;
  try {
    file=cms.readFile(handlerUri,CmsResourceFilter.IGNORE_EXPIRATION);
  }
 catch (  CmsException e) {
    if (!res.isCommitted()) {
      res.sendError(errorCode);
    }
    return;
  }
  try {
    OpenCms.getResourceManager().loadResource(cms,file,req,res);
  }
 catch (  CmsException e) {
    CmsMessageContainer container=Messages.get().container(Messages.ERR_SHOW_ERR_HANDLER_RESOURCE_2,new Integer(errorCode),handlerUri);
    throw new ServletException(org.opencms.jsp.Messages.getLocalizedMessage(container,req),e);
  }
}
