{
  stop();
  int ticket=(int)(Math.random() * 10000000);
  boolean stopper=(t instanceof IncompatibleRemoteServiceException);
  stopper|=(t instanceof SerializationException);
  String title="Error";
  if (stopper) {
    String text="A fatal error occurred, you should contact Technical Support." + "\n" + "Provided ticket '" + ticket + "'";
    CmsPopupDialog dialog=getDialog(title,text);
    dialog.setStyleName("stopper");
    dialog.setAutoHideEnabled(false);
  }
 else {
    String message=t.getLocalizedMessage();
    if (message == null) {
      message=t.getMessage();
    }
    if (message == null) {
      message=t.getClass().getName();
    }
    String text="An error occured:\n" + message + "\n"+ "Provided ticket '"+ ticket+ "'"+ "\n"+ "You may retry this operation by clicking 'OK'.\n"+ "However if the error persists, contact Technical Support.";
    CmsPopupDialog dialog=getDialog(title,text);
    dialog.setStyleName("error");
    dialog.setAutoHideEnabled(false);
    dialog.addCloseHandler(new CloseHandler<PopupPanel>(){
      public void onClose(      CloseEvent<PopupPanel> event){
        execute();
      }
    }
);
  }
}
