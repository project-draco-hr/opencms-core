{
  if (contents == null) {
    contents=(CmsResourceTypeNewPage.getDefaultBodyStart() + new String(contents) + CmsResourceTypeNewPage.getDefaultBodyEnd()).getBytes();
  }
  CmsFile file=cms.doCreateFile(resourcename,contents,C_RESOURCE_TYPE_NAME,properties);
  cms.doLockResource(resourcename,false,CmsLock.C_MODE_COMMON);
  if (contents.length > 1) {
    CmsPageLinks linkObject=cms.getPageLinks(resourcename);
    cms.createLinkEntrys(linkObject.getResourceId(),linkObject.getLinkTargets());
  }
  contents=null;
  return file;
}
