{
  StringBuffer sbuf=new StringBuffer();
  int result;
  String line;
  do {
    result=this.readLine(buf,0,buf.length);
    if (result != -1) {
      sbuf.append(new String(buf,0,result,"ISO-8859-1"));
    }
  }
 while (result == buf.length);
  if (sbuf.length() == 0) {
    return null;
  }
  if (m_newLine == 0) {
    m_newLine=(result > 1 && (buf[result - 2] == '\r' || buf[result - 2] == '\n')) ? 2 : 1;
  }
  sbuf.setLength(sbuf.length() - m_newLine);
  return sbuf.toString();
}
