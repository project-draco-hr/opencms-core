{
  CmsObject cms=getCmsObject();
  echo("Testing to rename a folder to the same name with a different case");
  String source="/xmlcontent";
  String destination="/XMLcontent";
  storeResources(cms,source);
  cms.lockResource(source);
  cms.moveResource(source,destination);
  CmsResource res=null;
  try {
    res=cms.readResource(source);
  }
 catch (  CmsVfsResourceNotFoundException e) {
  }
  if (res != null) {
    fail("New resource still available after move operation!");
  }
  cms.readResource(source,CmsResourceFilter.ALL);
  cms.readResource(destination);
  assertProject(cms,source,cms.getRequestContext().currentProject());
  assertState(cms,source,I_CmsConstants.C_STATE_DELETED);
  assertLock(cms,source,CmsLock.C_TYPE_EXCLUSIVE);
  assertSiblingCount(cms,source,1);
  assertProject(cms,destination,cms.getRequestContext().currentProject());
  assertState(cms,destination,I_CmsConstants.C_STATE_NEW);
  assertLock(cms,destination,CmsLock.C_TYPE_EXCLUSIVE);
  assertSiblingCount(cms,source,1);
}
