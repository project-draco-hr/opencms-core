{
  m_localeHandler=localeHandler;
  m_availableLocaleNames=Arrays.asList(availableLocaleNames);
  m_defaultLocaleNames=checkLocaleNames(Arrays.asList(defaultLocaleNames));
  m_availableLocales=new HashMap();
  Iterator i=m_availableLocaleNames.iterator();
  while (i.hasNext()) {
    String localeName=(String)i.next();
    String localeNames[]=CmsStringSubstitution.split(localeName,"_");
    Locale locale=new Locale(localeNames[0],(localeNames.length > 1) ? localeNames[1] : "",(localeNames.length > 2) ? localeNames[2] : "");
    m_availableLocales.put(localeName,locale);
    if (localeNames.length > 2 && !m_availableLocales.containsKey(localeNames[0] + "_" + localeNames[1])) {
      m_availableLocales.put(localeNames[0] + "_" + localeNames[1],locale);
    }
    if (localeNames.length > 1 && !m_availableLocales.containsKey(localeNames[0])) {
      m_availableLocales.put(localeNames[0],locale);
    }
  }
}
