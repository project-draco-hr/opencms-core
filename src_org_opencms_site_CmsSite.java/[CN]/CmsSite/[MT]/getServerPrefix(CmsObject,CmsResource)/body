{
  if (equals(OpenCms.getSiteManager().getDefaultSite())) {
    return OpenCms.getSiteManager().getWorkplaceServer();
  }
  boolean secure=false;
  if (hasSecureServer()) {
    try {
      secure=Boolean.valueOf(cms.readPropertyObject(resource,CmsPropertyDefinition.PROPERTY_SECURE,true).getValue()).booleanValue();
    }
 catch (    CmsException e) {
      if (LOG.isErrorEnabled()) {
        LOG.error(e.getLocalizedMessage(),e);
      }
    }
  }
  return (secure ? getSecureUrl() : getUrl());
}
