{
  boolean selectorForType=C_TYPE_VFSLINK.equals(getTreeType()) || C_TYPE_COPY.equals(getTreeType()) || C_TYPE_PAGELINK.equals(getTreeType())|| C_TYPE_PREFERENCES.equals(getTreeType());
  boolean showFromRequest=Boolean.valueOf(request.getParameter(PARAM_SHOWSITESELECTOR)).booleanValue();
  if (selectorForType || showFromRequest) {
    int siteCount=CmsSiteManager.getAvailableSites(getCms(),true).size();
    setShowSiteSelector(siteCount > 1);
    return;
  }
  setShowSiteSelector(false);
}
