{
  unmarshalXmlDocument(cms,resource,req);
  CmsTemplateLoaderFacade loaderFacade=OpenCms.getResourceManager().getTemplateLoaderFacade(cms,req,resource,getTemplatePropertyDefinition());
  CmsTemplateContext context=loaderFacade.getTemplateContext();
  req.setAttribute(CmsTemplateContextManager.ATTR_TEMPLATE_CONTEXT,context);
  TemplateBean templateBean=new TemplateBean(context != null ? context.getKey() : loaderFacade.getTemplateName(),loaderFacade.getTemplate());
  req.setAttribute(CmsTemplateContextManager.ATTR_TEMPLATE_BEAN,templateBean);
  loaderFacade.getLoader().load(cms,loaderFacade.getLoaderStartResource(),req,res);
}
