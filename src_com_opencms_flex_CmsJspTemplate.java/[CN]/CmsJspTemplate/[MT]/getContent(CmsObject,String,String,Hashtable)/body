{
  if (I_CmsLogChannels.C_LOGGING && A_OpenCms.isLogging(C_FLEX_LOADER)) {
    A_OpenCms.log(C_FLEX_LOADER,"[CmsJspTemplate] Now loading contents of file " + jspFile);
  }
  byte[] s=null;
  try {
    CmsFile file=cms.readFile(jspFile);
    int type=file.getLauncherType();
    com.opencms.flex.CmsJspLoader loader=(com.opencms.flex.CmsJspLoader)cms.getLauncherManager().getLauncher(type);
    s=loader.loadTemplate(cms,file);
  }
 catch (  java.lang.ClassCastException e) {
    throw new CmsException("JspTemplate: " + jspFile + " is not a JSP");
  }
catch (  com.opencms.core.CmsException e) {
    throw new CmsException("JspTemplate: Error while reading JSP " + jspFile + "\n"+ e,e);
  }
catch (  Exception e) {
    String errorMessage="Error while loading jsp file " + jspFile + ": "+ e;
    if (I_CmsLogChannels.C_LOGGING && A_OpenCms.isLogging(C_OPENCMS_CRITICAL)) {
      A_OpenCms.log(C_OPENCMS_CRITICAL,"[CmsJspTemplate] " + errorMessage);
    }
    if (e instanceof CmsException) {
      throw (CmsException)e;
    }
 else {
      throw new CmsException(errorMessage,CmsException.C_UNKNOWN_EXCEPTION);
    }
  }
  return s;
}
