{
  CmsObject cms=CmsFlexController.getCmsObject(request);
  JSONObject keys=new JSONObject();
  try {
    CmsResource containerpage=getContainerpage(cms);
    keys.put(KEY_CURRENT_CONTAINERPAGE_URI,getContainerpageUri(cms,containerpage));
    keys.put(KEY_NO_EDIT_REASON,getNoEditReason(cms,containerpage));
    keys.put(KEY_REQUEST_PARAMS,getRequestParams(request));
    keys.put(KEY_SITEMAP_URI,getSitemapUri(cms,request));
    keys.put(KEY_EDITOR_URI,EDITOR_URI);
    keys.put(KEY_BACKLINK_URI,BACKLINK_URI);
    keys.put(KEY_TOOLBAR_VISIBLE,isToolbarVisible(cms,request));
  }
 catch (  Throwable e) {
    LOG.error(e.getLocalizedMessage(),e);
    try {
      keys.put("error",e.getLocalizedMessage());
    }
 catch (    JSONException e1) {
      LOG.error(e1.getLocalizedMessage(),e1);
    }
  }
  return keys;
}
