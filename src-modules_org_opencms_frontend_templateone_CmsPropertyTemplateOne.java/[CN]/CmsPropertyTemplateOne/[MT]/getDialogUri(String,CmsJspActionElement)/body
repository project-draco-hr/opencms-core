{
  try {
    CmsResource res=jsp.getCmsObject().readResource(resource,CmsResourceFilter.ALL);
    String template=jsp.getCmsObject().readPropertyObject(res,CmsPropertyDefinition.PROPERTY_TEMPLATE,true).getValue("");
    if (!res.isFolder() && res.getTypeId() != CmsResourceTypeBinary.getStaticTypeId() && res.getTypeId() != CmsResourceTypePlain.getStaticTypeId() && res.getTypeId() != CmsResourceTypeImage.getStaticTypeId()) {
      if (C_TEMPLATE_ONE.equals(template)) {
        return C_MODULE_PATH + "dialogs/property.jsp";
      }
 else       if (res.getTypeId() == CmsResourceTypeXmlPage.getStaticTypeId()) {
        return C_PATH_WORKPLACE + "editors/dialogs/property.jsp";
      }
    }
    if (res.isFolder() && C_TEMPLATE_ONE.equals(template) && !res.getRootPath().startsWith(I_CmsConstants.VFS_FOLDER_SYSTEM)) {
      return C_MODULE_PATH + "dialogs/property.jsp";
    }
    String resTypeName=OpenCms.getResourceManager().getResourceType(res.getTypeId()).getTypeName();
    CmsExplorerTypeSettings settings=OpenCms.getWorkplaceManager().getExplorerTypeSetting(resTypeName);
    if (settings.isPropertiesEnabled()) {
      return URI_PROPERTY_CUSTOM_DIALOG;
    }
  }
 catch (  CmsException e) {
    if (LOG.isErrorEnabled()) {
      LOG.error(e);
    }
  }
  return URI_PROPERTY_DIALOG;
}
