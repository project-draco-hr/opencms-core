{
  StringBuffer result=new StringBuffer(128);
  result.append(buildTableRowStart(key(propertyTitle)));
  String disabled="";
  if (!editable) {
    disabled=" disabled=\"disabled\"";
  }
  String propValue="";
  CmsProperty currentProperty=(CmsProperty)getActiveProperties().get(propertyName);
  String inheritedValue="";
  if (currentProperty != null) {
    propValue=currentProperty.getValue();
    inheritedValue=getDefault(propertyName);
  }
 else {
    propValue=getDefault(propertyName);
    if (CmsStringUtil.isEmptyOrWhitespaceOnly(propValue)) {
      propValue="";
    }
    inheritedValue=propValue;
  }
  List resources=getConfigurationFiles(listType);
  List options=new ArrayList(resources.size() + 1);
  List values=new ArrayList(resources.size() + 1);
  int selectedIndex=0;
  options.add(key(C_KEY_PREFIX + "nolayout"));
  if ("".equals(propValue) || ("".equals(inheritedValue)) || (CmsTemplateBean.C_PROPERTY_VALUE_NONE.equals(inheritedValue))) {
    values.add("");
  }
 else {
    values.add(CmsTemplateBean.C_PROPERTY_VALUE_NONE);
  }
  for (int i=0; i < resources.size(); i++) {
    CmsResource res=(CmsResource)resources.get(i);
    String path=getCms().getSitePath(res);
    String description="";
    try {
      description=getCms().readPropertyObject(path,CmsPropertyDefinition.PROPERTY_DESCRIPTION,false).getValue(path);
    }
 catch (    CmsException e) {
      if (LOG.isErrorEnabled()) {
        LOG.error(e);
      }
    }
    String localized=key(description);
    if (localized.startsWith(CmsMessages.C_UNKNOWN_KEY_EXTENSION)) {
      localized=description;
    }
    options.add(localized);
    if (path.equals(propValue)) {
      selectedIndex=i + 1;
    }
    if (path.equals(inheritedValue)) {
      path="";
    }
    values.add(path);
  }
  StringBuffer attrs=new StringBuffer(4);
  attrs.append("name=\"").append(PREFIX_VALUE).append(propertyName).append("\"");
  attrs.append(" class=\"maxwidth\"");
  attrs.append(disabled);
  result.append(buildSelect(attrs.toString(),options,values,selectedIndex));
  result.append("<input type=\"hidden\" name=\"");
  result.append(PREFIX_HIDDEN);
  result.append(propertyName);
  result.append("\" id=\"");
  result.append(PREFIX_HIDDEN);
  result.append(propertyName);
  result.append("\" value=\"");
  result.append(propValue);
  result.append("\">");
  result.append("</td>\n");
  result.append("</tr>");
  return result;
}
