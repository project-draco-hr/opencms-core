{
  String jarFolder=getWebAppRfsPath() + UPDATE_FOLDER + File.separatorChar+ JARS_FOLDER;
  String libFolder=getWebAppRfsPath() + "WEB-INF/lib/";
  I_CmsReport report=new CmsShellReport(m_cms.getRequestContext().getLocale());
  report.println(Messages.get().container(Messages.RPT_BEGIN_DELETE_JARS_0),I_CmsReport.FORMAT_HEADLINE);
  ExtendedProperties props=loadProperties(jarFolder + "/removejars.properties");
  String[] jars=props.getStringArray(PROP_JARS_TO_REMOVE);
  if (jars != null) {
    for (int i=0, n=jars.length; i < n; i++) {
      File jar=new File(libFolder + jars[i]);
      if (jar.exists() && jar.canWrite()) {
        if (jar.delete()) {
          report.println(Messages.get().container(Messages.RPT_DELETE_JAR_FILE_3,new Integer(i + 1),new Integer(n),jar.getAbsolutePath()));
        }
 else {
          report.println(Messages.get().container(Messages.RPT_DELETE_JAR_FILE_FAILED_3,new Integer(i + 1),new Integer(n),jar.getAbsolutePath()));
        }
      }
 else {
        report.println(Messages.get().container(Messages.RPT_DELETE_JAR_SKIPPED_FILE_3,new Integer(i + 1),new Integer(n),jar.getAbsolutePath()));
      }
    }
  }
 else {
    report.println(Messages.get().container(Messages.RPT_DELETE_JARS_FAILED_1,jarFolder + "/removejars.properties"),I_CmsReport.FORMAT_ERROR);
  }
  report.println(Messages.get().container(Messages.RPT_END_DELETE_JARS_0),I_CmsReport.FORMAT_HEADLINE);
  File folder=new File(jarFolder);
  report.println(Messages.get().container(Messages.RPT_BEGIN_UPDATE_JARS_0),I_CmsReport.FORMAT_HEADLINE);
  if (folder.exists()) {
    File[] folderFiles=folder.listFiles();
    if (folderFiles != null) {
      for (int i=0; i < folderFiles.length; i++) {
        File jarFile=folderFiles[i];
        if (jarFile.isFile() && !(jarFile.getAbsolutePath().toLowerCase().endsWith(".jar"))) {
          report.println(Messages.get().container(Messages.RPT_UPDATE_JAR_SKIPPED_FILE_3,new Integer(i + 1),new Integer(folderFiles.length),jarFile.getAbsolutePath()));
        }
 else {
          try {
            CmsFileUtil.copy(jarFile.getAbsolutePath(),libFolder + jarFile.getName());
            report.println(Messages.get().container(Messages.RPT_UPDATE_JAR_FILE_3,new Integer(i + 1),new Integer(folderFiles.length),jarFile.getAbsolutePath()));
          }
 catch (          Exception e) {
            report.println(Messages.get().container(Messages.RPT_UPDATE_JAR_FILE_FAILED_3,new Integer(i + 1),new Integer(folderFiles.length),jarFile.getAbsolutePath()),I_CmsReport.FORMAT_ERROR);
          }
        }
      }
    }
 else {
      report.println(Messages.get().container(Messages.RPT_UPDATE_JARS_FAILED_1,folder.getAbsolutePath()),I_CmsReport.FORMAT_ERROR);
    }
  }
 else {
    report.println(Messages.get().container(Messages.RPT_UPDATE_JARS_FAILED_1,folder.getAbsolutePath()),I_CmsReport.FORMAT_ERROR);
  }
  report.println(Messages.get().container(Messages.RPT_END_UPDATE_JARS_0),I_CmsReport.FORMAT_HEADLINE);
}
