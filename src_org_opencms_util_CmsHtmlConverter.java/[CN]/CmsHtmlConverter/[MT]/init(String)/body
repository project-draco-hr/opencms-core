{
  Properties additionalTags=new Properties();
  additionalTags.put("new-empty-tags","o:smarttagtype");
  additionalTags.put("new-inline-tags","o:smarttagtype");
  m_tidy.getConfiguration().addProps(additionalTags);
  m_tidy.setTidyMark(false);
  m_tidy.setMakeClean(false);
  m_tidy.setNumEntities(true);
  m_tidy.setPrintBodyOnly(true);
  m_tidy.setForceOutput(true);
  m_tidy.setQuiet(true);
  m_tidy.setShowWarnings(false);
  m_mode=extractModes(mode);
  if (m_mode.contains(C_PARAM_ENABLED)) {
    m_tidy.setXHTML(false);
    m_tidy.setWord2000(false);
  }
  if (m_mode.contains(C_PARAM_XHTML)) {
    m_tidy.setXHTML(true);
  }
  if (m_mode.contains(C_PARAM_WORD)) {
    m_tidy.setWord2000(true);
  }
  m_clearStyle=new Pattern[m_patterns.length];
  for (int i=0; i < m_patterns.length; i++) {
    m_clearStyle[i]=Pattern.compile(m_patterns[i]);
  }
}
