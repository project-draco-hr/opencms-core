{
  if (m_mode.size() > 0 && !m_mode.contains(C_PARAM_DISABLED)) {
    int loop=10;
    int count=0;
    int oldSize=htmlInput.length;
    byte[] parsedRun=regExp(new String(htmlInput,m_encoding)).getBytes(m_encoding);
    while (loop > 0) {
      loop--;
      String parsedContent=adjustHtml(new String(parsedRun,m_encoding));
      parsedRun=parse(parsedContent.getBytes(m_encoding),m_encoding);
      if (parsedRun.length == oldSize) {
        break;
      }
 else {
        oldSize=parsedRun.length;
        count++;
      }
    }
    if (OpenCms.getLog(this).isInfoEnabled()) {
      OpenCms.getLog(this).info("[" + this.getClass().getName() + "] "+ " needed "+ count+ " parsing runs");
    }
    return regExp(new String(parsedRun,m_encoding)).getBytes(m_encoding);
  }
 else {
    return htmlInput;
  }
}
