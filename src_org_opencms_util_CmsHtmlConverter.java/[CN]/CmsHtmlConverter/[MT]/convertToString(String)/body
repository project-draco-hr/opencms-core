{
  Map converters=new HashMap();
  for (Iterator i=getModes().iterator(); i.hasNext(); ) {
    String mode=(String)i.next();
    String converterClass=OpenCms.getResourceManager().getHtmlConverter(mode);
    List modes=new ArrayList();
    if (converters.containsKey(converterClass)) {
      modes=(List)converters.get(converterClass);
    }
    modes.add(mode);
    converters.put(converterClass,modes);
  }
  for (Iterator i=converters.entrySet().iterator(); i.hasNext(); ) {
    Map.Entry entry=(Map.Entry)i.next();
    String className=(String)entry.getKey();
    List modes=(List)entry.getValue();
    try {
      I_CmsHtmlConverter converter=(I_CmsHtmlConverter)Class.forName(className).newInstance();
      converter.init(getEncoding(),modes);
      htmlInput=converter.convertToString(htmlInput);
    }
 catch (    ClassNotFoundException e) {
      LOG.error(org.opencms.loader.Messages.get().getBundle().key(org.opencms.loader.Messages.LOG_HTML_CONVERTER_CLASS_NOT_FOUND_1,className),e);
    }
catch (    IllegalAccessException e) {
      LOG.error(org.opencms.loader.Messages.get().getBundle().key(org.opencms.loader.Messages.LOG_HTML_CONVERTER_CLASS_NOT_FOUND_1,className),e);
    }
catch (    InstantiationException e) {
      LOG.error(org.opencms.loader.Messages.get().getBundle().key(org.opencms.loader.Messages.LOG_HTML_CONVERTER_CLASS_NOT_FOUND_1,className),e);
    }
  }
  return htmlInput;
}
