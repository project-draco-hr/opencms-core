{
  if (!isVisible()) {
    return "";
  }
  StringBuffer html=new StringBuffer(512);
  html.append("<th");
  if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(getWidth())) {
    html.append(" width='");
    html.append(getWidth());
    html.append("'");
  }
  html.append(">\n");
  boolean isSorted=getId().equals(list.getSortedColumn());
  CmsListOrderEnum nextOrder=CmsListOrderEnum.AscendingOrder;
  if (isSorted && list.getCurrentSortOrder() == CmsListOrderEnum.AscendingOrder) {
    nextOrder=CmsListOrderEnum.DescendingOrder;
  }
  String id=list.getId() + getId() + "Sort";
  String onClic=list.getId() + "ListSort('" + getId()+ "');";
  String helpText="";
  if (nextOrder.equals(CmsListOrderEnum.AscendingOrder)) {
    helpText="${key." + Messages.GUI_LIST_COLUMN_ASC_SORT_1 + "|"+ getName()+ "}";
  }
 else {
    helpText="${key." + Messages.GUI_LIST_COLUMN_DESC_SORT_1 + "|"+ getName()+ "}";
  }
  html.append(A_CmsHtmlIconButton.defaultButtonHtml(id,getName(),helpText,isSorteable(),null,onClic));
  if (isSorted) {
    if (nextOrder == CmsListOrderEnum.AscendingOrder) {
      html.append("\t<img src='");
      html.append(CmsWorkplace.getSkinUri());
      html.append("list/arrow_up.gif");
      html.append("'>\n");
    }
 else {
      html.append("\t<img src='");
      html.append(CmsWorkplace.getSkinUri());
      html.append("list/arrow_down.gif");
      html.append("'>\n");
    }
  }
  html.append("</th>\n");
  return html.toString();
}
