{
  if (!isVisible()) {
    return "";
  }
  String listId=list.getId();
  String sortedCol=list.getSortedColumn();
  CmsListOrderEnum order=list.getCurrentSortOrder();
  StringBuffer html=new StringBuffer(512);
  html.append("<th");
  if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(getWidth())) {
    html.append(" width='");
    html.append(getWidth());
    html.append("'");
  }
  if (!isTextWrapping()) {
    html.append(" style='white-space: nowrap;'");
  }
  html.append(">\n");
  boolean isSorted=getId().equals(sortedCol);
  CmsListOrderEnum nextOrder=CmsListOrderEnum.ORDER_ASCENDING;
  if (isSorted && order == CmsListOrderEnum.ORDER_ASCENDING) {
    nextOrder=CmsListOrderEnum.ORDER_DESCENDING;
  }
  String id=listId + getId() + "Sort";
  String onClic="listSort('" + listId + "', '"+ getId()+ "');";
  String helpText=null;
  if (m_helpText != null) {
    helpText=new MessageFormat(m_helpText.key(locale),locale).format(new Object[]{getName().key(locale)});
  }
 else {
    if (isSorteable()) {
      if (nextOrder.equals(CmsListOrderEnum.ORDER_ASCENDING)) {
        helpText=Messages.get().key(locale,Messages.GUI_LIST_COLUMN_ASC_SORT_1,new Object[]{getName().key(locale)});
      }
 else {
        helpText=Messages.get().key(locale,Messages.GUI_LIST_COLUMN_DESC_SORT_1,new Object[]{getName().key(locale)});
      }
    }
 else {
      helpText=Messages.get().key(locale,Messages.GUI_LIST_COLUMN_NO_SORT_1,new Object[]{getName().key(locale)});
    }
  }
  html.append(A_CmsHtmlIconButton.defaultButtonHtml(CmsHtmlIconButtonStyleEnum.SMALL_ICON_TEXT,id,getName().key(locale),helpText,isSorteable(),null,onClic));
  if (isSorted) {
    if (nextOrder == CmsListOrderEnum.ORDER_ASCENDING) {
      html.append("\t<img src='");
      html.append(CmsWorkplace.getSkinUri());
      html.append(ICON_UP);
      html.append("'>\n");
    }
 else {
      html.append("\t<img src='");
      html.append(CmsWorkplace.getSkinUri());
      html.append(ICON_DOWN);
      html.append("'>\n");
    }
  }
  html.append("</th>\n");
  return html.toString();
}
