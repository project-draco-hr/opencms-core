{
  List<CmsListItem> ret=new ArrayList<CmsListItem>();
  List<CmsRole> roles=getRoles();
  List<CmsRole> pRoles=new ArrayList<CmsRole>(roles);
  Iterator<CmsRole> itRoles=roles.iterator();
  while (itRoles.hasNext()) {
    CmsRole role=itRoles.next();
    CmsListItem item=getList().newItem(role.getGroupName());
    Locale locale=getCms().getRequestContext().getLocale();
    item.set(LIST_COLUMN_NAME,role.getName(locale));
    String dependency="";
    CmsRole parent=role;
    while ((parent.getParentRole() != null) && (parent.getParentRole().getParentRole() != null)) {
      String roleName=parent.getParentRole().getName(locale);
      if (dependency.length() > 0) {
        roleName+=", ";
      }
      dependency=roleName + dependency;
      parent=parent.getParentRole();
    }
    String hiddenName=dependency;
    if (role.forOrgUnit(null).equals(CmsRole.WORKPLACE_USER)) {
      dependency="";
      Iterator<CmsRole> itWuParents=pRoles.iterator();
      while (itWuParents.hasNext()) {
        CmsRole wuParent=itWuParents.next();
        if (wuParent.forOrgUnit(null).equals(CmsRole.WORKPLACE_USER) || (wuParent.forOrgUnit(null).equals(CmsRole.ROOT_ADMIN))) {
          continue;
        }
        String roleName=wuParent.getName(locale);
        if (dependency.length() > 0) {
          roleName+=", ";
        }
        dependency=roleName + dependency;
      }
    }
    item.set(LIST_COLUMN_DEPENDENCY,dependency);
    if (hiddenName.length() > 0) {
      hiddenName=CmsRole.ROOT_ADMIN.getName(locale) + ", " + hiddenName;
    }
 else {
      hiddenName=CmsRole.ROOT_ADMIN.getName(locale);
    }
    if (role.getParentRole() != null) {
      hiddenName+=", " + role.getName(locale);
    }
    item.set(LIST_COLUMN_HIDDEN_NAME,hiddenName);
    item.set(LIST_COLUMN_GROUP_NAME,role.getGroupName());
    ret.add(item);
  }
  return ret;
}
