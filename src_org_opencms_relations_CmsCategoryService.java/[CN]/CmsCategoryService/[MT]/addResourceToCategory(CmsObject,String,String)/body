{
  CmsCategory category=readCategory(cms,categoryPath);
  if (!readResourceCategories(cms,resourceName).contains(category)) {
    cms.addRelationToResource(resourceName,getCategoryFolderPath(categoryPath),CmsRelationType.CATEGORY.getName());
    if (categoryPath.endsWith("/")) {
      categoryPath=categoryPath.substring(0,categoryPath.lastIndexOf("/"));
    }
    if (categoryPath.lastIndexOf('/') > 0) {
      addResourceToCategory(cms,resourceName,categoryPath.substring(0,categoryPath.lastIndexOf('/') + 1));
    }
  }
}
