{
  List properties=new ArrayList();
  if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(title)) {
    properties.add(new CmsProperty(CmsPropertyDefinition.PROPERTY_TITLE,title,null));
  }
  if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(description)) {
    properties.add(new CmsProperty(CmsPropertyDefinition.PROPERTY_DESCRIPTION,description,null));
  }
  String folderPath="";
  if (parent != null) {
    folderPath+=parent.getPath() + "/";
  }
  if (name.startsWith("/")) {
    folderPath+=name.substring(1);
  }
 else {
    folderPath+=name;
  }
  folderPath=getCategoryFolderPath(folderPath);
  CmsResource resource;
  try {
    resource=cms.createResource(folderPath,CmsResourceTypeFolder.RESOURCE_TYPE_ID,null,properties);
  }
 catch (  CmsVfsResourceNotFoundException e) {
    cms.createResource(BASE_PATH,CmsResourceTypeFolder.RESOURCE_TYPE_ID,null,null);
    resource=cms.createResource(folderPath,CmsResourceTypeFolder.RESOURCE_TYPE_ID,null,properties);
  }
  return new CmsCategory(resource.getStructureId(),getCategoryPath(folderPath),title,description);
}
