{
  CmsXmlWpTemplateFile templateDocument=(CmsXmlWpTemplateFile)getOwnTemplateFile(cms,templateFile,elementName,parameters,templateSelector);
  I_CmsSession session=cms.getRequestContext().getSession(true);
  String action=(String)parameters.get("action");
  CmsXmlLanguageFile lang=templateDocument.getLanguageFile();
  if ("start".equals(action)) {
    CmsAdminLinkmanagementThread doCheck=new CmsAdminLinkmanagementThread(cms,cms.getRequestContext().currentProject().getId());
    doCheck.start();
    session.putValue(C_LINKCHECK_THREAD,doCheck);
    String text=lang.getDataValue("linkmanagement.label.text1") + cms.getRequestContext().currentProject().getName() + lang.getDataValue("linkmanagement.label.text2");
    session.putValue(C_LM_TEXT,text);
    templateDocument.setData("data","");
    templateDocument.setData("endMethod","");
    templateDocument.setData("text",text);
  }
 else   if ("working".equals(action)) {
    CmsAdminLinkmanagementThread doCheck=(CmsAdminLinkmanagementThread)session.getValue(C_LINKCHECK_THREAD);
    if (doCheck.isAlive()) {
      templateDocument.setData("endMethod","");
      templateDocument.setData("text",(String)session.getValue(C_LM_TEXT));
    }
 else {
      templateDocument.setData("endMethod",templateDocument.getDataValue("endMethod"));
      templateDocument.setData("autoUpdate","");
      templateDocument.setData("text",(String)session.getValue(C_LM_TEXT) + "<br>" + lang.getDataValue("linkmanagement.label.textende"));
      session.removeValue(C_LM_TEXT);
      session.removeValue(C_LINKCHECK_THREAD);
    }
    templateDocument.setData("data",doCheck.getReportUpdate());
  }
  return startProcessing(cms,templateDocument,elementName,parameters,templateSelector);
}
