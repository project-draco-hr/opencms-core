{
  CmsXmlWpTemplateFile templateDocument=(CmsXmlWpTemplateFile)getOwnTemplateFile(cms,templateFile,elementName,parameters,templateSelector);
  I_CmsSession session=cms.getRequestContext().getSession(true);
  String action=(String)parameters.get("action");
  A_CmsReportThread doCheck=null;
  CmsXmlLanguageFile lang=templateDocument.getLanguageFile();
  String text=lang.getLanguageValue("linkmanagement.label.text1") + cms.getRequestContext().currentProject().getName() + lang.getLanguageValue("linkmanagement.label.text2");
  if ("start".equals(action)) {
    doCheck=new CmsAdminLinkmanagementThread(cms,cms.getRequestContext().currentProject().getId());
    doCheck.start();
    session.putValue(C_LINKCHECK_HTML_THREAD,doCheck);
    templateDocument.setData("text",text);
    templateDocument.setData("data","");
    templateDocument.setData("endMethod","");
  }
 else   if ("working".equals(action)) {
    doCheck=(CmsAdminLinkmanagementThread)session.getValue(C_LINKCHECK_HTML_THREAD);
    if (doCheck.isAlive()) {
      templateDocument.setData("text",text);
      templateDocument.setData("endMethod","");
    }
 else {
      text+="<br>" + lang.getLanguageValue("linkmanagement.label.textende");
      templateDocument.setData("autoUpdate","");
      templateDocument.setData("text",text);
      session.removeValue(C_LINKCHECK_HTML_THREAD);
    }
    templateDocument.setData("data",doCheck.getReportUpdate());
  }
  return startProcessing(cms,templateDocument,elementName,parameters,templateSelector);
}
