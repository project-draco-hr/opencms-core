{
  String sessionId=getSession().getId();
  Buffer messageQueue=OpenCms.getSessionManager().getBroadcastQueue(sessionId);
  if (!messageQueue.isEmpty()) {
    StringBuffer result=new StringBuffer(512);
    while (!messageQueue.isEmpty()) {
      CmsBroadcast message=(CmsBroadcast)messageQueue.remove();
      result.append('[');
      result.append(getMessages().getDateTime(message.getSendTime()));
      result.append("] ");
      result.append(key("label.broadcastmessagefrom"));
      result.append(' ');
      result.append(message.getUser().getName());
      result.append(":\n");
      result.append(message.getMessage());
      result.append("\n\n");
    }
    return result.toString();
  }
  return null;
}
