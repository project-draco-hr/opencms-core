{
  Map parameterMap=new HashMap();
  DiskFileUpload fu=new DiskFileUpload();
  fu.setSizeThreshold(4096);
  fu.setRepositoryPath(OpenCms.getSystemInfo().getWebInfRfsPath());
  try {
    setMultiPartFileItems(fu.parseRequest(request));
    Iterator i=getMultiPartFileItems().iterator();
    while (i.hasNext()) {
      FileItem item=(FileItem)i.next();
      String name=item.getFieldName();
      String value=null;
      if (name != null && item.getName() == null) {
        try {
          value=item.getString(getCms().getRequestContext().getEncoding());
        }
 catch (        UnsupportedEncodingException e) {
          OpenCms.getLog(this).error("Encoding error parsing multipart request in workplace",e);
          value=item.getString();
        }
        parameterMap.put(name,value);
      }
    }
  }
 catch (  FileUploadException e) {
    OpenCms.getLog(this).error("Error parsing multipart request in workplace",e);
  }
  return parameterMap;
}
