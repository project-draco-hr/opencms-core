{
  if (jsp != null) {
    m_jsp=jsp;
    m_cms=m_jsp.getCmsObject();
    m_session=m_jsp.getRequest().getSession();
    m_settings=(CmsWorkplaceSettings)m_session.getAttribute(CmsWorkplaceManager.C_SESSION_WORKPLACE_SETTINGS);
    if (m_settings == null || m_settings.getMessages() != OpenCms.getWorkplaceManager().getMessages(getLocale())) {
      m_settings=new CmsWorkplaceSettings();
      initWorkplaceSettings(m_cms,m_settings,false);
      storeSettings(m_session,m_settings);
    }
    initMessages();
    if (!m_bundles.isEmpty()) {
      m_messages=new CmsMultiMessages(m_bundles);
    }
    initWorkplaceRequestValues(m_settings,m_jsp.getRequest());
    initWorkplaceCmsContext(m_settings,m_cms);
  }
}
