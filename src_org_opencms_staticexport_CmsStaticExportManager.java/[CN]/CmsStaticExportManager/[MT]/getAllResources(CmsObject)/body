{
  List resources=new ArrayList();
  CmsResource vfsResource;
  CmsPublishedResource resource;
  long starttime;
  long endtime;
  if (LOG.isDebugEnabled()) {
    LOG.debug(Messages.get().key(Messages.LOG_GET_ALL_RESOURCES_0));
  }
  try {
    cms.getRequestContext().saveSiteRoot();
    cms.getRequestContext().setSiteRoot("/");
    starttime=0;
    endtime=System.currentTimeMillis() + 604800000;
    List vfsResources=cms.getResourcesInTimeRange("/",starttime,endtime);
    if (LOG.isDebugEnabled()) {
      LOG.debug(Messages.get().key(Messages.LOG_NUM_RESOURCES_1,new Integer(vfsResources.size())));
    }
    Iterator i=vfsResources.iterator();
    while (i.hasNext()) {
      vfsResource=(CmsResource)i.next();
      resource=new CmsPublishedResource(vfsResource);
      if (LOG.isDebugEnabled()) {
        LOG.debug(Messages.get().key(Messages.LOG_PROCESSING_1,resource.getRootPath()));
      }
      resources.add(resource);
    }
  }
  finally {
    cms.getRequestContext().restoreSiteRoot();
  }
  return resources;
}
