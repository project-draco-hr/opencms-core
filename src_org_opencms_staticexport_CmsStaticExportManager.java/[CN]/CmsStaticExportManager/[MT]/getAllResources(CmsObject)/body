{
  List resources=new ArrayList();
  CmsResource vfsResource;
  CmsPublishedResource resource;
  long starttime;
  long endtime;
  if (OpenCms.getLog(this).isDebugEnabled()) {
    OpenCms.getLog(this).debug("Get all resources from vfs");
  }
  try {
    cms.getRequestContext().saveSiteRoot();
    cms.getRequestContext().setSiteRoot("/");
    starttime=0;
    endtime=System.currentTimeMillis() + 604800000;
    List vfsResources=cms.getResourcesInTimeRange("/",starttime,endtime);
    if (OpenCms.getLog(this).isDebugEnabled()) {
      OpenCms.getLog(this).debug("Got " + vfsResources.size() + " resources, building list now");
    }
    Iterator i=vfsResources.iterator();
    while (i.hasNext()) {
      vfsResource=(CmsResource)i.next();
      resource=new CmsPublishedResource(vfsResource);
      if (OpenCms.getLog(this).isDebugEnabled()) {
        OpenCms.getLog(this).debug("Peocessing " + resource.getRootPath());
      }
      resources.add(resource);
    }
  }
  finally {
    cms.getRequestContext().restoreSiteRoot();
  }
  return resources;
}
