{
switch (event.getType()) {
case I_CmsEventListener.EVENT_PUBLISH_PROJECT:
    CmsPublishedResources publishedResources=null;
  if (publishedResources != null) {
    Vector resources=publishedResources.getChangedVfsResources();
    if (OpenCms.getLog(this).isDebugEnabled()) {
      OpenCms.getLog(this).debug("Static export manager catched event EVENT_PUBLISH_PROJECT with " + ((resources != null) ? "" + resources.size() : "null") + " resources");
    }
    if (resources != null) {
      CmsObject cms=OpenCms.initCmsObject(OpenCms.getDefaultUsers().getUserExport());
      Iterator i=resources.iterator();
      while (i.hasNext()) {
        String vfsName=(String)i.next();
        String rfsName=getRfsName(cms,vfsName);
        if (OpenCms.getLog(this).isDebugEnabled()) {
          OpenCms.getLog(this).debug("Static export checking for deletion vfsName='" + vfsName + "' rfsName='"+ rfsName+ "'");
        }
        if (rfsName.startsWith(getRfsPrefix())) {
          if (CmsResource.isFolder(rfsName)) {
            rfsName+=C_EXPORT_DEFAULT_FILE;
            if (OpenCms.getLog(this).isDebugEnabled()) {
              OpenCms.getLog(this).debug("Static export folder modified rfsName='" + rfsName + "'");
            }
          }
          String exportFileName=getExportPath() + rfsName.substring(getRfsPrefix().length());
          File exportFile=new File(exportFileName);
          try {
            if (exportFile.exists() && exportFile.canWrite()) {
              exportFile.delete();
              if (OpenCms.getLog(this).isInfoEnabled()) {
                OpenCms.getLog(this).info("Static export deleted exported rfs file '" + rfsName + "'");
              }
            }
          }
 catch (          Throwable t) {
            if (OpenCms.getLog(this).isWarnEnabled()) {
              OpenCms.getLog(this).warn("Error deleting static export file vfsName='" + vfsName + "' rfsName='"+ rfsName+ "'",t);
            }
          }
        }
      }
    }
  }
case I_CmsEventListener.EVENT_CLEAR_CACHES:
m_cacheOnlineLinks.clear();
m_cacheExportUris.clear();
setExportnames();
if (OpenCms.getLog(this).isDebugEnabled()) {
String eventType="EVENT_CLEAR_CACHES";
if (event.getType() != I_CmsEventListener.EVENT_CLEAR_CACHES) {
eventType="EVENT_PUBLISH_PROJECT";
}
OpenCms.getLog(this).debug("Static export manager flushed caches after recieving event " + eventType);
}
break;
default :
}
}
