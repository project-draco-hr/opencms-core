{
switch (event.getType()) {
case I_CmsEventListener.EVENT_UPDATE_EXPORTS:
    scrubExportFolder();
  clearCaches(event);
break;
case I_CmsEventListener.EVENT_PUBLISH_PROJECT:
CmsUUID publishHistoryId=new CmsUUID((String)event.getData().get(I_CmsEventListener.KEY_PUBLISHID));
if (OpenCms.getLog(this).isDebugEnabled()) {
OpenCms.getLog(this).debug("Static export manager catched event EVENT_PUBLISH_PROJECT for project ID " + publishHistoryId);
}
if (isStaticExportOnDemand()) {
scrubExportFolders(publishHistoryId,false);
}
 else {
I_CmsReport report=(I_CmsReport)event.getData().get(I_CmsEventListener.KEY_REPORT);
try {
exportAfterPublish(publishHistoryId,report);
}
 catch (Throwable t) {
if (OpenCms.getLog(this).isErrorEnabled()) {
OpenCms.getLog(this).error("Error during static export:",t);
}
}
}
clearCaches(event);
if (OpenCms.getLog(this).isDebugEnabled()) {
OpenCms.getLog(this).debug("Static export manager finished publish event for project ID " + publishHistoryId);
}
break;
case I_CmsEventListener.EVENT_CLEAR_CACHES:
clearCaches(event);
break;
default :
}
}
