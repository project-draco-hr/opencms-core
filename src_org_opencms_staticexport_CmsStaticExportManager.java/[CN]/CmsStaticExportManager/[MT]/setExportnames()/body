{
  if (LOG.isDebugEnabled()) {
    LOG.debug(Messages.get().getBundle().key(Messages.LOG_UPDATE_EXPORTNAME_PROP_START_0));
  }
  List resources;
  CmsObject cms=null;
  try {
    cms=OpenCms.initCmsObject(OpenCms.getDefaultUsers().getUserExport());
    resources=cms.readResourcesWithProperty(CmsPropertyDefinition.PROPERTY_EXPORTNAME);
  }
 catch (  CmsException e) {
    resources=Collections.EMPTY_LIST;
  }
synchronized (m_lockSetExportnames) {
    m_exportnameResources=new HashMap(resources.size());
    for (int i=0, n=resources.size(); i < n; i++) {
      CmsResource res=(CmsResource)resources.get(i);
      try {
        String foldername=cms.getSitePath(res);
        String exportname=cms.readPropertyObject(foldername,CmsPropertyDefinition.PROPERTY_EXPORTNAME,false).getValue();
        if (exportname != null) {
          if (exportname.charAt(exportname.length() - 1) != '/') {
            exportname=exportname + "/";
          }
          if (exportname.charAt(0) != '/') {
            exportname="/" + exportname;
          }
          m_exportnameResources.put(exportname,foldername);
        }
      }
 catch (      CmsException e) {
      }
    }
    m_exportnameResources=Collections.unmodifiableMap(m_exportnameResources);
  }
  if (LOG.isDebugEnabled()) {
    LOG.debug(Messages.get().getBundle().key(Messages.LOG_UPDATE_EXPORTNAME_PROP_FINISHED_0));
  }
}
