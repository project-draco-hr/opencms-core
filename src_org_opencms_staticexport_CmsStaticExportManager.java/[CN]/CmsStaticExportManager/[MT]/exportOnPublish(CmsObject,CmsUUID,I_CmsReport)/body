{
  String rfsName=CmsLinkManager.normalizeRfsPath(getExportPath() + getTestResource());
  if (OpenCms.getLog(this).isDebugEnabled()) {
    OpenCms.getLog(this).debug("Static export, testing for test resource " + rfsName);
  }
  File file=new File(rfsName);
  if (!file.exists()) {
    if (OpenCms.getLog(this).isDebugEnabled()) {
      OpenCms.getLog(this).debug("Test file does not exist -> do complete static export");
    }
    exportAll(cms,true,report);
  }
 else {
    if (OpenCms.getLog(this).isDebugEnabled()) {
      OpenCms.getLog(this).debug("Test file exists -> do static export on demand");
    }
    scrubExportFolders(publishHistoryId,true);
    List publishedResources=cms.readPublishedResources(publishHistoryId);
    doStaticExport(publishedResources,report);
  }
}
