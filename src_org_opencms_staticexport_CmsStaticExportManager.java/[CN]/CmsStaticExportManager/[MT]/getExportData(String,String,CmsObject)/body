{
  CmsResource resource=null;
  cms.getRequestContext().saveSiteRoot();
  try {
    cms.getRequestContext().setSiteRoot("/");
    rfsName=rfsName.substring(getRfsPrefix().length());
    if (vfsName == null) {
      vfsName=getCachedExportUri(rfsName);
    }
    if (vfsName != null) {
      if (!C_CACHEVALUE_404.equals(vfsName)) {
        try {
          resource=cms.readFileHeader(vfsName);
        }
 catch (        CmsException e) {
          return null;
        }
        return new CmsStaticExportData(vfsName,rfsName,resource);
      }
 else {
        return null;
      }
    }
 else {
      boolean match=false;
      vfsName=getVfsName(cms,rfsName);
      if (vfsName != null) {
        match=true;
        try {
          resource=cms.readFileHeader(vfsName);
        }
 catch (        CmsException e) {
          rfsName=null;
        }
      }
      if (!match) {
        cacheExportUri(rfsName,C_CACHEVALUE_404);
        String parameters=null;
        try {
          parameters=cms.readStaticExportPublishedResourceParamters(rfsName);
          if (parameters != null && parameters.length() > 0) {
            return getStaticExportDataWithParameter(cms,rfsName,parameters);
          }
 else {
            return null;
          }
        }
 catch (        CmsException e) {
          return null;
        }
      }
 else {
        cacheExportUri(rfsName,vfsName);
        return new CmsStaticExportData(vfsName,rfsName,resource);
      }
    }
  }
  finally {
    cms.getRequestContext().restoreSiteRoot();
  }
}
