{
  String rfsName;
  String url;
  List publishedTemplateResources=cms.readStaticExportResources(false);
  int size=publishedTemplateResources.size();
  int count=1;
  report.println(report.key("report.staticexport.templateresources_begin"),I_CmsReport.C_FORMAT_HEADLINE);
  Iterator i=publishedTemplateResources.iterator();
  HttpClient client=new HttpClient();
  Header exportHeader=new Header(I_CmsConstants.C_HEADER_OPENCMS_EXPORT,"true");
  try {
    cms.getRequestContext().saveSiteRoot();
    cms.getRequestContext().setSiteRoot("/");
    while (i.hasNext()) {
      rfsName=(String)i.next();
      report.print("(" + count++ + " / "+ size+ ") ",I_CmsReport.C_FORMAT_NOTE);
      report.print(report.key("report.exporting"),I_CmsReport.C_FORMAT_NOTE);
      report.print(rfsName);
      report.print(report.key("report.dots"));
      url=getExportUrl() + getRfsPrefix() + rfsName;
      if (url != null) {
        HttpMethod method=new GetMethod(url);
        method.addRequestHeader(exportHeader);
        client.executeMethod(method);
        report.println(report.key("report.ok") + " ",I_CmsReport.C_FORMAT_OK);
        method.releaseConnection();
      }
    }
  }
  finally {
    cms.getRequestContext().restoreSiteRoot();
  }
  report.println(report.key("report.staticexport.templateresources_end"),I_CmsReport.C_FORMAT_HEADLINE);
}
