{
  String rfsName;
  String url;
  List publishedTemplateResources=cms.readStaticExportResources(false);
  int size=publishedTemplateResources.size();
  int count=1;
  report.println(report.key("report.staticexport.templateresources_begin"),I_CmsReport.C_FORMAT_HEADLINE);
  Iterator i=publishedTemplateResources.iterator();
  try {
    cms.getRequestContext().saveSiteRoot();
    cms.getRequestContext().setSiteRoot("/");
    while (i.hasNext()) {
      rfsName=(String)i.next();
      report.print("(" + count++ + " / "+ size+ ") ",I_CmsReport.C_FORMAT_NOTE);
      report.print(report.key("report.exporting"),I_CmsReport.C_FORMAT_NOTE);
      report.print(rfsName);
      report.print(report.key("report.dots"));
      url=getExportUrl() + getRfsPrefix() + rfsName;
      if (url != null) {
        try {
          URL export=new URL(url);
          HttpURLConnection.setFollowRedirects(false);
          HttpURLConnection urlcon=(HttpURLConnection)export.openConnection();
          urlcon.setRequestMethod("GET");
          urlcon.setRequestProperty(I_CmsConstants.C_HEADER_OPENCMS_EXPORT,"true");
          String exportFileName=CmsLinkManager.normalizeRfsPath(getExportPath() + rfsName.substring(1));
          File exportFile=new File(exportFileName);
          if (exportFile != null) {
            long dateLastModified=exportFile.lastModified();
            urlcon.setIfModifiedSince(dateLastModified);
          }
          urlcon.connect();
          int result=urlcon.getResponseCode();
          urlcon.disconnect();
          if (result == HttpServletResponse.SC_OK) {
            report.println(report.key("report.ok"),I_CmsReport.C_FORMAT_OK);
          }
 else           if (result == HttpServletResponse.SC_NOT_MODIFIED) {
            report.println(report.key("search.indexing_file_skipped"),I_CmsReport.C_FORMAT_NOTE);
          }
 else {
            report.println(String.valueOf(result),I_CmsReport.C_FORMAT_OK);
          }
        }
 catch (        IOException e) {
          report.println(e);
        }
      }
    }
  }
  finally {
    cms.getRequestContext().restoreSiteRoot();
  }
  report.println(report.key("report.staticexport.templateresources_end"),I_CmsReport.C_FORMAT_HEADLINE);
}
