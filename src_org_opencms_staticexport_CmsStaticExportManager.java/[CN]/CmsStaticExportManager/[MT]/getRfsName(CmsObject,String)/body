{
  try {
    String exportname=cms.readProperty(CmsResource.getFolderPath(vfsName),I_CmsConstants.C_PROPERTY_EXPORTNAME,true);
    if (exportname != null) {
      if (!exportname.endsWith("/")) {
        exportname=exportname + "/";
      }
      if (!exportname.startsWith("/")) {
        exportname="/" + exportname;
      }
      String value;
      boolean cont;
      String resource=vfsName;
      do {
        try {
          value=cms.readProperty(resource,I_CmsConstants.C_PROPERTY_EXPORTNAME,false);
          cont=((value == null) && (!"/".equals(resource)));
        }
 catch (        CmsSecurityException se) {
          cont=false;
        }
        if (cont) {
          resource=CmsResource.getParentFolder(resource);
        }
      }
 while (cont);
      vfsName=exportname + vfsName.substring(resource.length());
    }
 else {
      vfsName=cms.getRequestContext().addSiteRoot(vfsName);
    }
  }
 catch (  CmsException e) {
  }
  return OpenCms.getStaticExportManager().getRfsPrefix() + vfsName;
}
