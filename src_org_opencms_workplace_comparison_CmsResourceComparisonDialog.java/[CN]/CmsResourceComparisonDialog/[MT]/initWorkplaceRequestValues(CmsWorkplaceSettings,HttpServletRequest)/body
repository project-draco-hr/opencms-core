{
  super.initWorkplaceRequestValues(settings,request);
  try {
    CmsFile file1=CmsResourceComparisonDialog.readFile(getCms(),getParamPath1(),getParamVersion1(),Integer.parseInt(getParamTagId1()));
    CmsFile file2=CmsResourceComparisonDialog.readFile(getCms(),getParamPath2(),getParamVersion2(),Integer.parseInt(getParamTagId2()));
    if (CmsStringUtil.isNotEmpty(getParamElement())) {
      m_differenceDialog=new CmsHtmlDifferenceDialog(getJsp());
    }
 else {
      m_differenceDialog=new CmsDifferenceDialog(getJsp());
    }
    if (CmsResourceComparisonDialog.COMPARE_ATTRIBUTES.equals(getParamCompare())) {
      List comparedAttributes=CmsResourceComparison.compareAttributes(getCms(),file1,file2);
      String[] attributeStrings=getAttributesAsString(comparedAttributes);
      m_differenceDialog.setOriginalSource(attributeStrings[0]);
      m_differenceDialog.setCopySource(attributeStrings[1]);
    }
 else     if (CmsResourceComparisonDialog.COMPARE_PROPERTIES.equals(getParamCompare())) {
      List comparedProperties=CmsResourceComparison.compareProperties(getCms(),file1,file2);
      String[] propertyStrings=getPropertiesAsString(comparedProperties);
      m_differenceDialog.setOriginalSource(propertyStrings[0]);
      m_differenceDialog.setCopySource(propertyStrings[1]);
    }
 else {
      setContentAsSource(file1,file2);
    }
  }
 catch (  CmsException e) {
    LOG.error(e.getMessage(),e);
  }
catch (  UnsupportedEncodingException e) {
    LOG.error(e.getMessage(),e);
  }
}
