{
  CmsObject cms=getCmsObject();
  String resourcename="/folder1/subfolder12/subsubfolder121/image1.gif";
  CmsResource resource=cms.readResource(resourcename);
  CmsADEPublish adePub=new CmsADEPublish(cms);
  List<CmsPublishGroupBean> groups=adePub.getPublishGroups();
  assertEquals(1,groups.size());
  assertEquals(1,groups.get(0).getResources().size());
  assertEquals(resource.getStructureId(),groups.get(0).getResources().get(0).getId());
  assertTrue(groups.get(0).getResources().get(0).isRemovable());
  assertNull(groups.get(0).getResources().get(0).getInfo());
  assertEquals(0,groups.get(0).getResources().get(0).getRelated().size());
  List<CmsPublishResourceBean> broken=adePub.getBrokenResources(Collections.singletonList(resource));
  assertEquals(0,broken.size());
  adePub.publishResources(Collections.singletonList(resource));
  OpenCms.getPublishManager().waitWhileRunning();
  adePub=new CmsADEPublish(cms);
  groups=adePub.getPublishGroups();
  assertEquals(0,groups.size());
}
