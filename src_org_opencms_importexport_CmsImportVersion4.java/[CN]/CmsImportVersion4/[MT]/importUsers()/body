{
  List userNodes;
  List groupNodes;
  Element currentElement, currentGroup;
  Vector userGroups;
  Hashtable userInfo=new Hashtable();
  sun.misc.BASE64Decoder dec;
  String name, description, flags, password, recoveryPassword, firstname, lastname, email, address, section, defaultGroup, type, pwd, infoNode;
  try {
    userNodes=m_docXml.selectNodes("//" + I_CmsConstants.C_EXPORT_TAG_USERDATA);
    for (int i=0; i < userNodes.size(); i++) {
      currentElement=(Element)userNodes.get(i);
      name=CmsImport.getChildElementTextValue(currentElement,I_CmsConstants.C_EXPORT_TAG_NAME);
      name=OpenCms.getImportExportManager().translateUser(name);
      dec=new sun.misc.BASE64Decoder();
      pwd=CmsImport.getChildElementTextValue(currentElement,I_CmsConstants.C_EXPORT_TAG_PASSWORD);
      password=new String(dec.decodeBuffer(pwd.trim()));
      dec=new sun.misc.BASE64Decoder();
      pwd=CmsImport.getChildElementTextValue(currentElement,I_CmsConstants.C_EXPORT_TAG_RECOVERYPASSWORD);
      recoveryPassword=new String(dec.decodeBuffer(pwd.trim()));
      description=CmsImport.getChildElementTextValue(currentElement,I_CmsConstants.C_EXPORT_TAG_DESCRIPTION);
      flags=CmsImport.getChildElementTextValue(currentElement,I_CmsConstants.C_EXPORT_TAG_FLAGS);
      firstname=CmsImport.getChildElementTextValue(currentElement,I_CmsConstants.C_EXPORT_TAG_FIRSTNAME);
      lastname=CmsImport.getChildElementTextValue(currentElement,I_CmsConstants.C_EXPORT_TAG_LASTNAME);
      email=CmsImport.getChildElementTextValue(currentElement,I_CmsConstants.C_EXPORT_TAG_EMAIL);
      address=CmsImport.getChildElementTextValue(currentElement,I_CmsConstants.C_EXPORT_TAG_ADDRESS);
      section=CmsImport.getChildElementTextValue(currentElement,I_CmsConstants.C_EXPORT_TAG_SECTION);
      defaultGroup=CmsImport.getChildElementTextValue(currentElement,I_CmsConstants.C_EXPORT_TAG_DEFAULTGROUP);
      type=CmsImport.getChildElementTextValue(currentElement,I_CmsConstants.C_EXPORT_TAG_TYPE);
      infoNode=CmsImport.getChildElementTextValue(currentElement,I_CmsConstants.C_EXPORT_TAG_USERINFO);
      try {
        byte[] value=getFileBytes(infoNode);
        ByteArrayInputStream bin=new ByteArrayInputStream(value);
        ObjectInputStream oin=new ObjectInputStream(bin);
        userInfo=(Hashtable)oin.readObject();
      }
 catch (      IOException ioex) {
        m_report.println(ioex);
      }
      groupNodes=currentElement.selectNodes("*/" + I_CmsConstants.C_EXPORT_TAG_GROUPNAME);
      userGroups=new Vector();
      for (int j=0; j < groupNodes.size(); j++) {
        currentGroup=(Element)groupNodes.get(j);
        String userInGroup=CmsImport.getChildElementTextValue(currentGroup,I_CmsConstants.C_EXPORT_TAG_NAME);
        userInGroup=OpenCms.getImportExportManager().translateGroup(userInGroup);
        userGroups.addElement(userInGroup);
      }
      importUser(null,name,description,flags,password,recoveryPassword,firstname,lastname,email,address,section,defaultGroup,type,userInfo,userGroups);
    }
  }
 catch (  Exception exc) {
    m_report.println(exc);
    throw new CmsException(CmsException.C_UNKNOWN_EXCEPTION,exc);
  }
}
