{
  if (m_isValidatedCorrect != null) {
    return m_isValidatedCorrect.booleanValue();
  }
  boolean allOk=true;
  Iterator i=getFormConfiguration().getFields().iterator();
  while (i.hasNext()) {
    CmsField currentField=(CmsField)i.next();
    if (CmsField.TYPE_CAPTCHA.equalsIgnoreCase(currentField.getType())) {
      continue;
    }
    if (currentField.isMandatory()) {
      if (currentField.needsItems()) {
        Iterator k=currentField.getItems().iterator();
        boolean isSelected=false;
        while (k.hasNext()) {
          CmsFieldItem currentItem=(CmsFieldItem)k.next();
          if (currentItem.isSelected()) {
            isSelected=true;
            continue;
          }
        }
        if (!isSelected) {
          getErrors().put(currentField.getName(),ERROR_MANDATORY);
          allOk=false;
          continue;
        }
      }
 else {
        if (CmsStringUtil.isEmpty(currentField.getValue())) {
          getErrors().put(currentField.getName(),ERROR_MANDATORY);
          allOk=false;
          continue;
        }
      }
    }
    if (CmsStringUtil.isNotEmpty(currentField.getValue()) && !currentField.needsItems() && !"".equals(currentField.getValidationExpression())) {
      Pattern pattern=null;
      try {
        pattern=Pattern.compile(currentField.getValidationExpression());
        if (!pattern.matcher(currentField.getValue()).matches()) {
          getErrors().put(currentField.getName(),ERROR_VALIDATION);
          allOk=false;
        }
      }
 catch (      PatternSyntaxException e) {
        if (LOG.isErrorEnabled()) {
          LOG.error(Messages.get().key(Messages.LOG_ERR_PATTERN_SYNTAX_0),e);
        }
      }
    }
  }
  CmsCaptchaField captchaField=m_formConfiguration.getCaptchaField();
  if (captchaField != null) {
    boolean captchaFieldIsOnInputPage=getFormConfiguration().captchaFieldIsOnInputPage() && getFormConfiguration().isInputFormSubmitted(this);
    boolean captchaFieldIsOnCheckPage=getFormConfiguration().captchaFieldIsOnCheckPage() && getFormConfiguration().isCheckPageSubmitted(this);
    if (captchaFieldIsOnInputPage || captchaFieldIsOnCheckPage) {
      if (!captchaField.validateCaptchaPhrase(this,captchaField.getValue())) {
        getErrors().put(captchaField.getName(),ERROR_VALIDATION);
        allOk=false;
      }
    }
  }
  m_isValidatedCorrect=new Boolean(allOk);
  return allOk;
}
