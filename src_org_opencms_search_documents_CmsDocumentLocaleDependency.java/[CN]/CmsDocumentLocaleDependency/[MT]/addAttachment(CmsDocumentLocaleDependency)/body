{
  if (m_attachments == null) {
    m_attachments=new ArrayList<CmsDocumentLocaleDependency>(4);
  }
  boolean exist=false;
  for (  CmsDocumentLocaleDependency att : m_attachments) {
    if (att.getAttachmentNumber() == dep.getAttachmentNumber()) {
      if (m_locale.equals(dep.getLocale())) {
        for (        CmsDocumentLocaleDependency langAtt : att.getAllLanguageVersions()) {
          dep.addLocaleVersion(langAtt);
        }
        dep.addLocaleVersion(att);
        m_attachments.remove(att);
      }
 else {
        exist=true;
        att.addLocaleVersion(dep);
      }
      break;
    }
  }
  if (!exist) {
    m_attachments.add(dep);
  }
  addDependency(dep);
}
