{
  Vector subFolders=new Vector();
  try {
    subFolders.addAll(cms.getResourcesInFolder(rootFolder,CmsResourceFilter.ONLY_VISIBLE));
  }
 catch (  CmsException e) {
    if (e.getType() != CmsException.C_NOT_FOUND) {
      throw e;
    }
  }
  for (int i=0; i < subFolders.size(); i++) {
    CmsResource curFolder=(CmsResource)subFolders.elementAt(i);
    CmsChannelContent curChannel=new CmsChannelContent(cms,curFolder);
    allFolders.addElement(curChannel);
    getAllResources(cms,cms.readAbsolutePath(curFolder),allFolders);
  }
}
