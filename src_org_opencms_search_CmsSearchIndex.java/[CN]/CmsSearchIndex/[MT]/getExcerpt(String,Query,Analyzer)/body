{
  if (content == null) {
    return null;
  }
  CmsHighlightFinder highlighter=new CmsHighlightFinder(OpenCms.getSearchManager().getHighlighter(),searchQuery,analyzer);
  String excerpt=highlighter.getBestFragments(content,EXCERPT_FRAGMENT_SIZE,EXCERPT_REQUIRED_FRAGMENTS,EXCERPT_FRAGMENT_SEPARATOR);
  excerpt=excerpt.replace('\t',' ');
  excerpt=excerpt.replace('\n',' ');
  excerpt=excerpt.replace('\r',' ');
  excerpt=excerpt.replace('\f',' ');
  int maxLength=OpenCms.getSearchManager().getMaxExcerptLength();
  if (excerpt != null && excerpt.length() > maxLength) {
    excerpt=excerpt.substring(0,maxLength);
  }
  return excerpt;
}
