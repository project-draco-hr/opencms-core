{
  IndexWriter indexWriter;
  try {
    File f=new File(m_path);
    if (f.exists()) {
      indexWriter=new IndexWriter(m_path,getAnalyzer(),create);
    }
 else {
      f=f.getParentFile();
      if ((f != null) && !f.exists()) {
        f.mkdirs();
      }
      indexWriter=new IndexWriter(m_path,getAnalyzer(),true);
    }
    if (m_luceneMaxMergeDocs != null) {
      indexWriter.setMaxMergeDocs(m_luceneMaxMergeDocs.intValue());
    }
    if (m_luceneMergeFactor != null) {
      indexWriter.setMergeFactor(m_luceneMergeFactor.intValue());
    }
    if (m_luceneRAMBufferSizeMB != null) {
      indexWriter.setRAMBufferSizeMB(m_luceneRAMBufferSizeMB.doubleValue());
    }
    if (m_luceneUseCompoundFile != null) {
      indexWriter.setUseCompoundFile(m_luceneUseCompoundFile.booleanValue());
    }
  }
 catch (  Exception e) {
    throw new CmsIndexException(Messages.get().container(Messages.ERR_IO_INDEX_WRITER_OPEN_2,m_path,m_name),e);
  }
  return indexWriter;
}
