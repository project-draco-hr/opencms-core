{
  CmsObject cms=null;
  CmsRequestHttpServlet cmsReq=new CmsRequestHttpServlet(req,m_opencms.getFileTranslator());
  CmsResponseHttpServlet cmsRes=new CmsResponseHttpServlet(req,res,m_clusterurl);
  try {
    m_opencms.initStartupClasses(req,res);
    cms=initUser(cmsReq,cmsRes);
    m_opencms.initLockDispatcher(cms);
    CmsFile file=m_opencms.initResource(cms);
    if (file != null) {
      m_opencms.setResponse(cms,file);
      m_opencms.showResource(cms,file);
      updateUser(cms,cmsReq);
    }
  }
 catch (  CmsException e) {
    errorHandling(cms,cmsReq,cmsRes,e);
  }
}
