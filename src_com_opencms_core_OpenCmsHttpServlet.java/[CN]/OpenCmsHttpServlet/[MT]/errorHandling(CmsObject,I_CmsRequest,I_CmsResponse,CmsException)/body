{
  int errorType=e.getType();
  HttpServletRequest req=(HttpServletRequest)cmsReq.getOriginalRequest();
  HttpServletResponse res=(HttpServletResponse)cmsRes.getOriginalResponse();
  boolean canWrite=((!cmsRes.isRedirected()) && (!cmsRes.isOutputWritten()));
  try {
switch (errorType) {
case CmsException.C_ACCESS_DENIED:
      if (canWrite) {
        requestAuthorization(req,res);
      }
    break;
case CmsException.C_NOT_FOUND:
  if (canWrite) {
    res.setContentType("text/HTML");
    res.sendError(res.SC_NOT_FOUND);
  }
break;
case CmsException.C_SERVICE_UNAVAILABLE:
if (canWrite) {
res.sendError(res.SC_SERVICE_UNAVAILABLE,e.toString());
}
break;
default :
if (canWrite) {
res.setContentType("text/HTML");
res.setHeader("Cache-Control","no-cache");
res.setHeader("Pragma","no-cache");
res.getWriter().print(createErrorBox(e,cms));
}
}
}
 catch (IOException ex) {
}
}
