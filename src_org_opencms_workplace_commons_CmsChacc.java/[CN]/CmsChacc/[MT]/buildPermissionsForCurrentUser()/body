{
  CmsPermissionSetCustom pset=new CmsPermissionSetCustom();
  CmsResource resource=getCms().readResource(getParamResource());
  if (getCms().hasPermissions(resource,CmsPermissionSet.ACCESS_CONTROL,false,CmsResourceFilter.ALL)) {
    pset.grantPermissions(CmsPermissionSet.PERMISSION_CONTROL);
  }
 else {
    pset.denyPermissions(CmsPermissionSet.PERMISSION_CONTROL);
  }
  if (getCms().hasPermissions(resource,CmsPermissionSet.ACCESS_DIRECT_PUBLISH,false,CmsResourceFilter.ALL)) {
    pset.grantPermissions(CmsPermissionSet.PERMISSION_DIRECT_PUBLISH);
  }
 else {
    pset.denyPermissions(CmsPermissionSet.PERMISSION_DIRECT_PUBLISH);
  }
  if (getCms().hasPermissions(resource,CmsPermissionSet.ACCESS_READ,false,CmsResourceFilter.ALL)) {
    pset.grantPermissions(CmsPermissionSet.PERMISSION_READ);
  }
 else {
    pset.denyPermissions(CmsPermissionSet.PERMISSION_READ);
  }
  if (getCms().hasPermissions(resource,CmsPermissionSet.ACCESS_VIEW,false,CmsResourceFilter.ALL)) {
    pset.grantPermissions(CmsPermissionSet.PERMISSION_VIEW);
  }
 else {
    pset.denyPermissions(CmsPermissionSet.PERMISSION_VIEW);
  }
  if (getCms().hasPermissions(resource,CmsPermissionSet.ACCESS_WRITE,false,CmsResourceFilter.ALL)) {
    pset.grantPermissions(CmsPermissionSet.PERMISSION_WRITE);
  }
 else {
    pset.denyPermissions(CmsPermissionSet.PERMISSION_WRITE);
  }
  return pset;
}
