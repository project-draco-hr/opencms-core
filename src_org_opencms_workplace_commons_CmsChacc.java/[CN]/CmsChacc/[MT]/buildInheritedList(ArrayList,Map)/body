{
  StringBuffer result=new StringBuffer(32);
  String view=getSettings().getPermissionDetailView();
  Iterator i;
  if ("long".equals(view)) {
    i=entries.iterator();
    while (i.hasNext()) {
      CmsAccessControlEntry curEntry=(CmsAccessControlEntry)i.next();
      result.append(buildPermissionEntryForm(curEntry,false,true,getConnectedResource(curEntry,parents)));
    }
  }
 else {
    try {
      CmsAccessControlList acList=getCms().getAccessControlList(getParamResource(),true);
      Set principalSet=acList.getPrincipals();
      i=principalSet.iterator();
      while (i.hasNext()) {
        CmsUUID principalId=(CmsUUID)i.next();
        I_CmsPrincipal principal=getCms().lookupPrincipal(principalId);
        CmsPermissionSet permissions=acList.getPermissions(principal);
        result.append(buildPermissionEntryForm(principalId,permissions,false,true));
      }
    }
 catch (    CmsException e) {
      if (LOG.isInfoEnabled()) {
        LOG.info(e.getLocalizedMessage());
      }
    }
  }
  return result;
}
