{
  String resourceName=getParamResource();
  CmsResource file=null;
  CmsLock lock=null;
  try {
    file=getCms().readFileHeader(resourceName);
    if (file.isFolder()) {
      resourceName+="/";
    }
  }
 catch (  CmsException e) {
  }
  try {
    lock=getCms().getLock(resourceName);
  }
 catch (  CmsException e) {
    lock=CmsLock.getNullLock();
    if (OpenCms.isLogging(CmsLog.CHANNEL_MAIN,CmsLog.LEVEL_ERROR)) {
      OpenCms.log(CmsLog.CHANNEL_MAIN,CmsLog.LEVEL_ERROR,this.getClass().getName() + " error getting lock state for resource " + resourceName+ " "+ e.getMessage());
    }
  }
  if (!lock.isNullLock()) {
    if (lock.getType() != CmsLock.C_TYPE_SHARED_EXCLUSIVE && lock.getType() != CmsLock.C_TYPE_SHARED_INHERITED && lock.getUserId().equals(getCms().getRequestContext().currentUser().getId()) && getCms().getRequestContext().currentProject().getId() == lock.getProjectId()) {
      return true;
    }
  }
  return false;
}
