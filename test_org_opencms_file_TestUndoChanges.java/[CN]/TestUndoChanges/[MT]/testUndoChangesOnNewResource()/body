{
  CmsObject cms=getCmsObject();
  echo("Testing for exception when trying undo changes on a new resource");
  String source="/types/new.html";
  cms.createResource(source,CmsResourceTypePlain.getStaticTypeId());
  assertLock(cms,source,CmsLock.C_TYPE_EXCLUSIVE);
  try {
    cms.undoChanges(source,false);
  }
 catch (  CmsVfsException e) {
    if (e.getType() == CmsVfsException.C_VFS_UNDO_CHANGES_NOT_POSSIBLE_ON_NEW_RESOURCE) {
      return;
    }
  }
  fail("Did not catch expected exception trying undo changes on a new resource!");
}
