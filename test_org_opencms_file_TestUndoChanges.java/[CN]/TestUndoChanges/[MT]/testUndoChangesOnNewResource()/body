{
  CmsObject cms=getCmsObject();
  echo("Testing for exception when trying undo changes on a new resource");
  String source="/types/new.html";
  cms.createResource(source,CmsResourceTypePlain.getStaticTypeId());
  assertLock(cms,source,CmsLock.TYPE_EXCLUSIVE);
  try {
    cms.undoChanges(source,false);
  }
 catch (  CmsVfsException e) {
    if (e.getMessageContainer().getKey().equals(org.opencms.db.Messages.ERR_UNDO_CHANGES_FOR_RESOURCE_1)) {
      return;
    }
  }
  fail("Did not catch expected exception trying undo changes on a new resource!");
}
