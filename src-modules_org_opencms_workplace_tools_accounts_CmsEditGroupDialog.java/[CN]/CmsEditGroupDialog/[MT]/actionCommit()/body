{
  List errors=new ArrayList();
  try {
    if (m_group.getId() == null) {
      CmsGroup newGroup=getCms().createGroup(m_group.getName(),m_group.getDescription(),m_group.isEnabled() ? I_CmsPrincipal.FLAG_ENABLED : I_CmsPrincipal.FLAG_DISABLED,getParentGroup());
      newGroup.setProjectManager(m_group.getProjectManager());
      newGroup.setProjectCoWorker(m_group.getProjectCoWorker());
      newGroup.setRole(m_group.getRole());
      m_group=newGroup;
    }
    getCms().writeGroup(m_group);
    Map objects=(Map)getSettings().getListObject();
    if (objects != null) {
      objects.remove(CmsGroupsList.class.getName());
      objects.remove(CmsUsersList.class.getName());
    }
  }
 catch (  Throwable t) {
    errors.add(t);
  }
  if (errors.isEmpty() && isNewGroup()) {
    if (getParamCloseLink() != null && getParamCloseLink().indexOf("path=/accounts/groups") > -1) {
      Map argMap=new HashMap();
      argMap.put("groupid",m_group.getId());
      argMap.put("groupname",m_group.getName());
      setParamCloseLink(CmsToolManager.linkForToolPath(getJsp(),"/accounts/groups/edit",argMap));
    }
  }
  setCommitErrors(errors);
}
