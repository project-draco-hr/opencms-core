{
  String info=null;
  CmsPublishResourceInfoBean.Type infoType=null;
  try {
    if (published.contains(resource)) {
      String publishUser=getOuAwareName(m_cms.readUser(resource.getUserLastModified()).getName());
      Date publishDate=new Date(resource.getDateLastModified());
      info=Messages.get().getBundle(m_locale).key(Messages.GUI_RESOURCE_PUBLISHED_BY_2,publishUser,publishDate);
      infoType=CmsPublishResourceInfoBean.Type.PUBLISHED;
    }
 else     if (permissions.contains(resource)) {
      info=Messages.get().getBundle(m_locale).key(Messages.GUI_RESOURCE_NOT_ENOUGH_PERMISSIONS_0);
      infoType=CmsPublishResourceInfoBean.Type.PERMISSIONS;
    }
 else     if (locked.contains(resource)) {
      CmsLock lock=m_cms.getLock(resource);
      info=Messages.get().getBundle(m_locale).key(Messages.GUI_RESOURCE_LOCKED_BY_2,getOuAwareName(m_cms.readUser(lock.getUserId()).getName()),getOuAwareName(lock.getProject().getName()));
      infoType=CmsPublishResourceInfoBean.Type.LOCKED;
    }
  }
 catch (  Exception e) {
    LOG.error(e.getLocalizedMessage(),e);
  }
  return infoType == null ? null : new CmsPublishResourceInfoBean(info,infoType);
}
