{
  String folder=CmsResource.getFolderPath(rootPath);
  if (rootPath.endsWith(".jsp") || rootPath.startsWith(CmsResource.VFS_FOLDER_SYSTEM + "/")) {
    return null;
  }
  if (folder == null) {
    return null;
  }
  Map<String,String> folderTypes=OpenCms.getADEConfigurationManager().getFolderTypes(cms);
  String folderType=folderTypes.get(folder);
  if (folderType == null) {
    return null;
  }
  CmsADEConfigurationManager confManager=OpenCms.getADEConfigurationManager();
  String rootLinkSource=cms.getRequestContext().addSiteRoot(linkSource);
  CmsSitemapConfigurationData sitemapConf=confManager.getSitemapConfiguration(cms,rootLinkSource);
  String typeName=folderType;
  List<CmsDetailPageInfo> pageInfos=sitemapConf.getDetailPageInfo().get(typeName);
  if ((pageInfos == null) || pageInfos.isEmpty()) {
    return null;
  }
  CmsDetailPageInfo info=pageInfos.get(0);
  String detailPageUri=info.getUri();
  if (!CmsResource.isFolder(detailPageUri)) {
    detailPageUri=CmsResource.getFolderPath(detailPageUri);
  }
  return detailPageUri;
}
