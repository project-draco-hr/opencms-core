{
  String dataSetFile="dataset_" + subId + "_"+ masterNr+ ".xml";
  CmsMasterContent content=getContentDefinition(classname,new Class[]{CmsObject.class,CmsMasterDataSet.class},new Object[]{m_cms,dataset});
  Vector channels=content.getChannels();
  Element master=m_docXml.createElement(this.C_EXPORT_TAG_MASTER);
  m_mastersElement.appendChild(master);
  addElement(m_docXml,master,this.C_EXPORT_TAG_MASTER_SUBID,"" + subId);
  addElement(m_docXml,master,this.C_EXPORT_TAG_MASTER_DATASET,dataSetFile);
  writeExportDataset(dataset,dataSetFile,masterNr,subId);
  Element channelrel=m_docXml.createElement(this.C_EXPORT_TAG_MASTER_CHANNELREL);
  master.appendChild(channelrel);
  Vector moduleChannels=content.getChannels();
  for (int i=0; i < moduleChannels.size(); i++) {
    String channelname=(String)moduleChannels.elementAt(i);
    addElement(m_docXml,channelrel,this.C_EXPORT_TAG_MASTER_CHANNELNAME,channelname);
  }
  Element mediaset=m_docXml.createElement(this.C_EXPORT_TAG_MASTER_MEDIASET);
  master.appendChild(mediaset);
  Vector moduleMedia=content.getMedia();
  for (int i=0; i < moduleMedia.size(); i++) {
    String mediaFile="media_" + subId + "_"+ masterNr+ "_"+ i+ ".xml";
    addElement(m_docXml,mediaset,this.C_EXPORT_TAG_MASTER_MEDIA,mediaFile);
    writeExportMediaset((CmsMasterMedia)moduleMedia.elementAt(i),mediaFile,masterNr,subId,i);
  }
}
