{
  m_cms.setContextToCos();
  Vector subChannels=m_cms.getSubFolders(channelname);
  m_cms.setContextToVfs();
  for (int i=0; i < subChannels.size(); i++) {
    CmsResource curChannel=(CmsResource)subChannels.elementAt(i);
    if (curChannel.getState() != C_STATE_DELETED) {
      try {
        m_cms.setContextToCos();
        String channelId=m_cms.readProperty(curChannel.getAbsolutePath(),I_CmsConstants.C_PROPERTY_CHANNELID);
        if (!m_channelIds.contains(channelId)) {
          m_channelIds.put(channelId,curChannel);
        }
      }
 catch (      CmsException e) {
        throw e;
      }
 finally {
        m_cms.setContextToVfs();
      }
      writeXmlEntrys(curChannel);
      exportChannel(curChannel.getAbsolutePath());
    }
  }
}
