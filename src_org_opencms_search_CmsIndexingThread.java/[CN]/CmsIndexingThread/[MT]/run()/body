{
  if (LOG.isDebugEnabled()) {
    LOG.debug(Messages.get().key(Messages.LOG_INDEXING_WITH_FACTORY_2,m_res.getRootPath(),m_factory.getName()));
  }
  try {
    if (LOG.isDebugEnabled()) {
      LOG.debug(Messages.get().key(Messages.LOG_CREATING_INDEX_DOC_0));
    }
    Document doc=m_factory.newInstance(m_cms,m_res,m_index.getLocale());
    if (doc == null) {
      throw new CmsIndexException(Messages.get().container(Messages.ERR_CREATING_INDEX_DOC_0));
    }
    if (LOG.isDebugEnabled()) {
      LOG.debug(Messages.get().key(Messages.LOG_WRITING_INDEX_TO_WRITER_1,String.valueOf(m_writer)));
    }
    if (!isInterrupted()) {
      m_writer.addDocument(doc);
      m_threadManager.addDocument(m_res,m_index.getLocale(),doc);
    }
    if (m_report != null && !isInterrupted()) {
      m_report.println(org.opencms.report.Messages.get().container(org.opencms.report.Messages.RPT_OK_0),I_CmsReport.FORMAT_OK);
      if (LOG.isDebugEnabled()) {
        LOG.debug(Messages.get().key(Messages.LOG_WRITE_SUCCESS_0));
      }
    }
    if (isInterrupted() && LOG.isDebugEnabled()) {
      LOG.debug(Messages.get().key(Messages.LOG_ABANDONED_THREAD_FINISHED_1,m_res.getRootPath()));
    }
  }
 catch (  Exception exc) {
    Throwable cause=exc.getCause();
    if ((cause != null && cause instanceof CmsIndexException && ((CmsIndexException)cause).getMessageContainer().getKey().equals(org.opencms.search.documents.Messages.ERR_NO_CONTENT_1)) || (exc instanceof CmsIndexException && ((CmsIndexException)exc).getMessageContainer().getKey().equals(org.opencms.search.documents.Messages.ERR_NO_CONTENT_1))) {
      m_report.println(org.opencms.report.Messages.get().container(org.opencms.report.Messages.RPT_OK_0),I_CmsReport.FORMAT_OK);
      m_threadManager.finished();
    }
 else {
      if (m_report != null) {
        m_report.println();
        m_report.print(org.opencms.report.Messages.get().container(org.opencms.report.Messages.RPT_FAILED_0),I_CmsReport.FORMAT_WARNING);
        m_report.println(exc);
      }
      if (LOG.isWarnEnabled()) {
        LOG.warn(Messages.get().key(Messages.ERR_INDEX_RESOURCE_FAILED_2,m_res.getRootPath(),m_index.getName()),exc);
      }
    }
  }
  m_threadManager.finished();
}
