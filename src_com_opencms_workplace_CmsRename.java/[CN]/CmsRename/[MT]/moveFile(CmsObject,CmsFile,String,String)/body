{
  if ((cms.getResourceType(file.getType()).getResourceName()).equals(C_TYPE_PAGE_NAME)) {
    String bodyPath=getBodyPath(cms,file);
    int help=C_CONTENTBODYPATH.lastIndexOf("/");
    String hbodyPath=(C_CONTENTBODYPATH.substring(0,help)) + (file.getAbsolutePath());
    if (hbodyPath.equals(bodyPath)) {
      String parent=newFolder.substring(0,newFolder.lastIndexOf("/") + 1);
      checkFolders(cms,parent);
      cms.moveFile((C_CONTENTBODYPATH.substring(0,help)) + file.getAbsolutePath(),(C_CONTENTBODYPATH.substring(0,help)) + newFolder);
      if (flags.equals("false")) {
        CmsFile newfile=cms.readFile((C_CONTENTBODYPATH.substring(0,help)) + newFolder,file.getName());
        Hashtable startSettings=null;
        Integer accessFlags=null;
        startSettings=(Hashtable)cms.getRequestContext().currentUser().getAdditionalInfo(C_ADDITIONAL_INFO_STARTSETTINGS);
        if (startSettings != null) {
          accessFlags=(Integer)startSettings.get(C_START_ACCESSFLAGS);
        }
        if (accessFlags == null) {
          accessFlags=new Integer(C_ACCESS_DEFAULT_FLAGS);
        }
        newfile.setAccessFlags(accessFlags.intValue());
        cms.writeFile(newfile);
      }
      changeContent(cms,file,(C_CONTENTBODYPATH.substring(0,help)) + newFolder);
    }
  }
  cms.moveFile(file.getAbsolutePath(),newFolder);
  if (flags.equals("false")) {
    CmsFile newfile=cms.readFile(newFolder,file.getName());
    Hashtable startSettings=null;
    Integer accessFlags=null;
    startSettings=(Hashtable)cms.getRequestContext().currentUser().getAdditionalInfo(C_ADDITIONAL_INFO_STARTSETTINGS);
    if (startSettings != null) {
      accessFlags=(Integer)startSettings.get(C_START_ACCESSFLAGS);
      if (accessFlags == null) {
        accessFlags=new Integer(C_ACCESS_DEFAULT_FLAGS);
      }
    }
    newfile.setAccessFlags(accessFlags.intValue());
    cms.writeFile(newfile);
  }
}
