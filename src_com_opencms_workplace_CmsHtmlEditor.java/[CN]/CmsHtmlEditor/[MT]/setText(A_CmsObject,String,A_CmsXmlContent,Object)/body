{
  Hashtable parameters=(Hashtable)userObj;
  String filename=(String)parameters.get("file");
  if (filename == null || "".equals(filename)) {
    String errorMessage="[CmsButton] No file requested.";
    if (A_OpenCms.isLogging()) {
      A_OpenCms.log(C_OPENCMS_CRITICAL,errorMessage);
    }
    return ("EMPTY");
  }
  String content=null;
  try {
    content=new String(cms.readFile(filename).getContents());
  }
 catch (  Exception e) {
    String errorMessage="Error while reading file " + filename + ": "+ e;
    if (A_OpenCms.isLogging()) {
      A_OpenCms.log(C_OPENCMS_CRITICAL,"[CmsDumpTemplate] " + errorMessage);
      if (!(e instanceof CmsException)) {
        e.printStackTrace();
      }
    }
    if (e instanceof CmsException) {
      throw (CmsException)e;
    }
 else {
      throw new CmsException(errorMessage,CmsException.C_UNKNOWN_EXCEPTION);
    }
  }
  Encoder enc=new Encoder();
  return enc.escape(content);
}
