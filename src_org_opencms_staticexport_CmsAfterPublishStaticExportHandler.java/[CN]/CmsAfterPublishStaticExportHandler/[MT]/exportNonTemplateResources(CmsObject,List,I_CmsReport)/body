{
  CmsStaticExportManager manager=OpenCms.getStaticExportManager();
  String vfsName=null;
  List resourcesToExport=new ArrayList();
  boolean templatesFound=false;
  int count=1;
  report.println(Messages.get().container(Messages.RPT_STATICEXPORT_NONTEMPLATE_RESOURCES_BEGIN_0),I_CmsReport.FORMAT_HEADLINE);
  if (LOG.isDebugEnabled()) {
    LOG.debug(Messages.get().getBundle().key(Messages.LOG_EXPORTING_NON_TEMPLATE_1,new Integer(publishedResources.size())));
  }
  Iterator i=publishedResources.iterator();
  while (i.hasNext()) {
    CmsPublishedResource pupRes=(CmsPublishedResource)i.next();
    vfsName=pupRes.getRootPath();
    if (manager.getExportFolderMatcher().match(vfsName)) {
      if (pupRes.isVfsResource()) {
        CmsStaticExportData exportData=manager.getExportData(vfsName,cms);
        if (exportData != null) {
          CmsResource resource=null;
          if (pupRes.isFile()) {
            resource=exportData.getResource();
          }
 else {
            try {
              String defaultFileName=cms.readPropertyObject(vfsName,CmsPropertyDefinition.PROPERTY_DEFAULT_FILE,false).getValue();
              if (defaultFileName != null) {
                resource=cms.readResource(vfsName + defaultFileName);
              }
            }
 catch (            CmsException e) {
              for (int j=0; j < OpenCms.getDefaultFiles().size(); j++) {
                String tmpResourceName=vfsName + OpenCms.getDefaultFiles().get(j);
                try {
                  resource=cms.readResource(tmpResourceName);
                  break;
                }
 catch (                CmsException e1) {
                }
              }
            }
          }
          if (resource != null && resource.isFile()) {
            I_CmsResourceLoader loader=OpenCms.getResourceManager().getLoader(resource);
            if (!loader.isStaticExportProcessable()) {
              if (!pupRes.getState().isDeleted()) {
                resourcesToExport.add(exportData);
              }
            }
 else {
              templatesFound=true;
              cms.writeStaticExportPublishedResource(exportData.getRfsName(),CmsStaticExportManager.EXPORT_LINK_WITHOUT_PARAMETER,"",System.currentTimeMillis());
            }
          }
        }
      }
    }
  }
  i=resourcesToExport.iterator();
  int size=resourcesToExport.size();
  if (LOG.isDebugEnabled()) {
    LOG.debug(Messages.get().getBundle().key(Messages.LOG_NUM_EXPORT_1,new Integer(size)));
  }
  while (i.hasNext()) {
    CmsStaticExportData exportData=(CmsStaticExportData)i.next();
    if (LOG.isDebugEnabled()) {
      LOG.debug(Messages.get().getBundle().key(Messages.LOG_EXPORT_FILE_2,exportData.getVfsName(),exportData.getRfsName()));
    }
    report.print(org.opencms.report.Messages.get().container(org.opencms.report.Messages.RPT_SUCCESSION_2,new Integer(count++),new Integer(size)),I_CmsReport.FORMAT_NOTE);
    report.print(Messages.get().container(Messages.RPT_EXPORTING_0),I_CmsReport.FORMAT_NOTE);
    report.print(org.opencms.report.Messages.get().container(org.opencms.report.Messages.RPT_ARGUMENT_1,exportData.getVfsName()));
    report.print(org.opencms.report.Messages.get().container(org.opencms.report.Messages.RPT_DOTS_0));
    int status=manager.export(null,null,cms,exportData);
    if (status == HttpServletResponse.SC_OK) {
      report.println(org.opencms.report.Messages.get().container(org.opencms.report.Messages.RPT_OK_0),I_CmsReport.FORMAT_OK);
    }
 else {
      report.println(org.opencms.report.Messages.get().container(org.opencms.report.Messages.RPT_IGNORED_0),I_CmsReport.FORMAT_NOTE);
    }
    if (LOG.isInfoEnabled()) {
      Object[] arguments=new Object[]{exportData.getVfsName(),exportData.getRfsName(),new Integer(status)};
      LOG.info(Messages.get().getBundle().key(Messages.LOG_EXPORT_FILE_STATUS_3,arguments));
    }
  }
  resourcesToExport=null;
  report.println(Messages.get().container(Messages.RPT_STATICEXPORT_NONTEMPLATE_RESOURCES_END_0),I_CmsReport.FORMAT_HEADLINE);
  return templatesFound;
}
