{
  if (LOG.isDebugEnabled()) {
    LOG.debug(Messages.get().key(Messages.LOG_GET_ALL_RESOURCES_0));
  }
  List resources=new ArrayList();
  long starttime=0;
  long endtime=System.currentTimeMillis() + 604800000;
  List vfsResources=cms.getResourcesInTimeRange("/",starttime,endtime);
  Iterator i=vfsResources.iterator();
  while (i.hasNext()) {
    CmsResource vfsResource=(CmsResource)i.next();
    if ((vfsResource.getFlags() & CmsResource.FLAG_INTERNAL) == CmsResource.FLAG_INTERNAL) {
      continue;
    }
    CmsPublishedResource resource=new CmsPublishedResource(vfsResource);
    if (LOG.isDebugEnabled()) {
      LOG.debug(Messages.get().key(Messages.LOG_PROCESSING_1,resource.getRootPath()));
    }
    resources.add(resource);
  }
  if (LOG.isDebugEnabled()) {
    LOG.debug(Messages.get().key(Messages.LOG_NUM_RESOURCES_1,new Integer(resources.size())));
  }
  return resources;
}
