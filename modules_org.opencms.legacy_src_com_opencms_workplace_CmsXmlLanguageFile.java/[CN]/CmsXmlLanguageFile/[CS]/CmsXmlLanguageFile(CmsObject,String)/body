{
  m_cms=cms;
  m_locale=locale;
  m_messages=new CmsMessages(C_BUNDLE_NAME,m_locale);
  if (m_allEncodings == null) {
    if (DEBUG > 0)     System.err.println("CmsXmlLanguageFile(): initializing the static encodings");
synchronized (this) {
      m_allEncodings=new HashMap();
      m_workplaceDefaultEncoding=OpenCms.getWorkplaceManager().getEncoding();
    }
  }
  if (m_allModuleMessages == null) {
    if (DEBUG > 0)     System.err.println("CmsXmlLanguageFile(): initializing module messages hash");
synchronized (this) {
      m_allModuleMessages=new HashMap();
    }
  }
  Object obj=m_allModuleMessages.get(m_locale);
  if (obj == null) {
    if (DEBUG > 0)     System.err.println("CmsXmlLanguageFile(): collecting static module messages");
synchronized (this) {
      m_moduleMessages=collectModuleMessages(m_cms,m_locale);
      m_allModuleMessages.put(m_locale,m_moduleMessages);
    }
  }
 else {
    m_moduleMessages=(Set)obj;
  }
  if (m_supportOldLocale == null) {
    if (DEBUG > 0)     System.err.println("CmsXmlLanguageFile(): reading old locale support property");
synchronized (this) {
      Boolean flag=Boolean.valueOf((String)OpenCms.getRuntimeProperty(C_COMPATIBILITY_OLDLOCALES));
      m_supportOldLocale=(flag != null) ? flag : new Boolean(false);
      if (OpenCms.getLog(CmsLog.CHANNEL_INIT).isInfoEnabled()) {
        OpenCms.getLog(CmsLog.CHANNEL_INIT).info(". Old locale support   : " + (m_supportOldLocale.booleanValue() ? "enabled" : "disabled"));
      }
    }
  }
}
