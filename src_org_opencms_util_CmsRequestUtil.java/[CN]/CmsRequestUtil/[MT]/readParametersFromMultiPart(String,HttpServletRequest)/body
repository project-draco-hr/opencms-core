{
  Map parameterMap=new HashMap();
  DiskFileUpload fu=new DiskFileUpload();
  fu.setSizeThreshold(4096);
  fu.setRepositoryPath(OpenCms.getSystemInfo().getWebInfRfsPath());
  List multiPartFileItems=null;
  try {
    multiPartFileItems=fu.parseRequest(request);
    Iterator i=multiPartFileItems.iterator();
    while (i.hasNext()) {
      FileItem item=(FileItem)i.next();
      String name=item.getFieldName();
      String value=null;
      if (name != null && item.getName() == null) {
        try {
          value=item.getString(encoding);
        }
 catch (        UnsupportedEncodingException e) {
          LOG.error(Messages.get().key(Messages.LOG_ENC_MULTIPART_REQ_ERROR_0),e);
          value=item.getString();
        }
        parameterMap.put(name,new String[]{value});
      }
    }
  }
 catch (  FileUploadException e) {
    LOG.error(Messages.get().key(Messages.LOG_PARSE_MULIPART_REQ_FAILED_0),e);
  }
  return new CmsRequestParameters(parameterMap,multiPartFileItems);
}
