{
  try {
    Vector resWithProp=null;
    if (!"false_ssl".equalsIgnoreCase(CmsObject.getStaticExportProperties().getStaticExportEnabledValue())) {
      resWithProp=m_cms.getResourcesWithProperty(C_PROPERTY_EXPORTNAME);
      if (resWithProp != null && resWithProp.size() != 0) {
        m_dynamicExportNameRules=new Vector();
        m_dynamicExportNameRulesExtern=new Vector();
        for (int i=0; i < resWithProp.size(); i++) {
          CmsResource resource=(CmsResource)resWithProp.elementAt(i);
          String oldName=resource.getAbsolutePath();
          String newName=m_cms.readProperty(oldName,C_PROPERTY_EXPORTNAME);
          if (CmsObject.getStaticExportProperties().isExportDefault()) {
            m_dynamicExportNameRules.addElement("s#^" + oldName + "#"+ CmsObject.getStaticExportProperties().getUrlPrefixArray()[0]+ newName+ "#");
          }
 else {
            m_dynamicExportNameRules.addElement("s#^(" + CmsObject.getStaticExportProperties().getUrlPrefixArray()[0] + ")"+ oldName+ "#$1"+ newName+ "#");
          }
          m_dynamicExportNameRulesExtern.addElement("s#^" + oldName + "#"+ newName+ "#");
        }
      }
    }
  }
 catch (  CmsException e) {
    if (I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING && A_OpenCms.isLogging()) {
      A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_STATICEXPORT,"[CmsStaticExport] " + "couldnt create dynamic export rules for the nice names. Will use the original names instead." + e.toString());
    }
  }
  try {
    Vector resWithProp=m_cms.getResourcesWithProperty(C_PROPERTY_EXPORT);
    if (resWithProp != null && resWithProp.size() != 0) {
      m_dynamicExportRulesExtern=new Vector();
      m_dynamicExportRulesOnline=new Vector();
      m_rulesForHttpsEnabledResources=new Vector();
      for (int i=0; i < resWithProp.size(); i++) {
        CmsResource resource=(CmsResource)resWithProp.elementAt(i);
        String resName=resource.getAbsolutePath();
        String propertyValue=m_cms.readProperty(resName,C_PROPERTY_EXPORT);
        if (propertyValue != null) {
          if (propertyValue.equalsIgnoreCase("dynamic")) {
            m_dynamicExportRulesExtern.addElement("s#^" + resName + ".*##");
            m_dynamicExportRulesOnline.addElement("s#^(" + resName + ")#"+ CmsObject.getStaticExportProperties().getUrlPrefixArray()[1]+ "$1#");
          }
          if (propertyValue.equalsIgnoreCase("https")) {
            m_dynamicExportRulesExtern.addElement("s#^" + resName + ".*##");
            m_dynamicExportRulesOnline.addElement("s#^(" + resName + ")#"+ CmsObject.getStaticExportProperties().getUrlPrefixArray()[2]+ "$1#");
          }
          if (propertyValue.equalsIgnoreCase("true")) {
            m_dynamicExportRulesExtern.addElement("s#^(" + resName + ")#$1#");
            m_dynamicExportRulesOnline.addElement("s#^(" + resName + ")#"+ CmsObject.getStaticExportProperties().getUrlPrefixArray()[0]+ "$1#");
          }
          if (propertyValue.equalsIgnoreCase("false")) {
            m_dynamicExportRulesExtern.addElement("s#^" + resName + ".*#export value was set to false#");
            m_dynamicExportRulesOnline.addElement("s#^(" + resName + ")#"+ CmsObject.getStaticExportProperties().getUrlPrefixArray()[1]+ "$1#");
          }
          if (propertyValue.equalsIgnoreCase("https_enabled")) {
            m_rulesForHttpsEnabledResources.addElement("s#^" + resName + ".*##");
          }
          if (propertyValue.equalsIgnoreCase("dynamic_https_enabled")) {
            m_dynamicExportRulesExtern.addElement("s#^" + resName + ".*##");
            m_dynamicExportRulesOnline.addElement("s#^(" + resName + ")#"+ CmsObject.getStaticExportProperties().getUrlPrefixArray()[1]+ "$1#");
            m_rulesForHttpsEnabledResources.addElement("s#^" + resName + ".*##");
          }
        }
      }
    }
  }
 catch (  CmsException e) {
    if (I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING && A_OpenCms.isLogging()) {
      A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_STATICEXPORT,"[CmsStaticExport] " + "couldnt create dynamic export rules. " + e.toString());
    }
  }
}
