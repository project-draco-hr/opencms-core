{
  try {
    Vector resWithProp=m_cms.getResourcesWithProperty(C_PROPERTY_EXPORTNAME);
    if (resWithProp != null && resWithProp.size() != 0) {
      m_dynamicExportNameRules=new Vector();
      m_dynamicExportNameRulesExtern=new Vector();
      for (int i=0; i < resWithProp.size(); i++) {
        CmsResource resource=(CmsResource)resWithProp.elementAt(i);
        String oldName=resource.getAbsolutePath();
        String newName=m_cms.readProperty(oldName,C_PROPERTY_EXPORTNAME);
        m_dynamicExportNameRules.addElement("s#^" + oldName + "#"+ m_cms.getUrlPrefixArray()[0]+ newName+ "#");
        m_dynamicExportNameRulesExtern.addElement("s#^" + oldName + "#"+ newName+ "#");
      }
    }
  }
 catch (  CmsException e) {
    if (I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING && A_OpenCms.isLogging()) {
      A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_STATICEXPORT,"[CmsStaticExport] " + "couldnt create dynamic export rules for the nice names. Will use the original names instead." + e.toString());
    }
  }
  try {
    Vector resWithProp=m_cms.getResourcesWithProperty(C_PROPERTY_EXPORT);
    if (resWithProp != null && resWithProp.size() != 0) {
      m_dynamicExportRulesExtern=new Vector();
      m_dynamicExportRulesOnline=new Vector();
      for (int i=0; i < resWithProp.size(); i++) {
        CmsResource resource=(CmsResource)resWithProp.elementAt(i);
        String resName=resource.getAbsolutePath();
        String propertyValue=m_cms.readProperty(resName,C_PROPERTY_EXPORT);
        if (propertyValue != null && (propertyValue.equalsIgnoreCase("dynamic") || propertyValue.equalsIgnoreCase("https") || propertyValue.equalsIgnoreCase("false"))) {
          if (propertyValue.equalsIgnoreCase("false")) {
            m_dynamicExportRulesExtern.addElement("s#^" + resName + ".*#export value was set to false#");
          }
 else {
            m_dynamicExportRulesExtern.addElement("s#^" + resName + ".*##");
          }
          if (propertyValue.equalsIgnoreCase("dynamic") || propertyValue.equalsIgnoreCase("false")) {
            m_dynamicExportRulesOnline.addElement("s#^(" + resName + ")#"+ m_cms.getUrlPrefixArray()[1]+ "$1#");
          }
 else {
            m_dynamicExportRulesOnline.addElement("s#^(" + resName + ")#"+ m_cms.getUrlPrefixArray()[2]+ "$1#");
          }
        }
      }
    }
  }
 catch (  CmsException e) {
    if (I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING && A_OpenCms.isLogging()) {
      A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_STATICEXPORT,"[CmsStaticExport] " + "couldnt create dynamic export rules. " + e.toString());
    }
  }
}
