{
  StringBuffer params=new StringBuffer(128);
  params.append("?action=search&query=");
  String query=CmsStringUtil.substitute(m_query,"+","%2B");
  query=CmsStringUtil.substitute(query,"-","%2D");
  params.append(CmsEncoder.encode(query,OpenCms.getSystemInfo().getDefaultEncoding()));
  params.append("&matchesPerPage=");
  params.append(this.getMatchesPerPage());
  params.append("&displayPages=");
  params.append(this.getDisplayPages());
  params.append("&index=");
  params.append(CmsEncoder.encode(m_indexName));
  if (m_sortOrder != SORT_DEFAULT) {
    params.append("&sort=");
    if (m_sortOrder == CmsSearch.SORT_TITLE) {
      params.append("title");
    }
 else     if (m_sortOrder == CmsSearch.SORT_DATE_CREATED) {
      params.append("date-created");
    }
 else     if (m_sortOrder == CmsSearch.SORT_DATE_LASTMODIFIED) {
      params.append("date-lastmodified");
    }
  }
  if (m_categories != null) {
    params.append("&category=");
    for (int c=0; c < m_categories.length; c++) {
      if (c > 0) {
        params.append(",");
      }
      params.append(m_categories[c]);
    }
  }
  if (m_searchRoots != null) {
    params.append("&searchRoot=");
    for (int c=0; c < m_searchRoots.length; c++) {
      if (c > 0) {
        params.append(",");
      }
      params.append(CmsEncoder.encode(m_searchRoots[c]));
    }
  }
  int todo=0;
  return params.toString();
}
