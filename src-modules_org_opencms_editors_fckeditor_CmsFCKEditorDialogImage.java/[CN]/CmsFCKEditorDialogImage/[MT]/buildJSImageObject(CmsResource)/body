{
  StringBuffer result=new StringBuffer(512);
  String sitePath=getCms().getRequestContext().getSitePath(res);
  OpenCms.getSystemInfo().getOpenCmsContext();
  CmsImageScaler scaler=new CmsImageScaler(getCms(),res);
  result.append("new ImgFile(");
  result.append("'");
  result.append(sitePath);
  result.append("', ");
  result.append("'");
  result.append(getJsp().link(sitePath));
  result.append("', ");
  result.append("'");
  result.append(getJsp().link(sitePath + getImageGallery().getDefaultScaleParams().toRequestParam()));
  result.append("', ");
  result.append("'");
  result.append(CmsStringUtil.escapeJavaScript(getJsp().property(CmsPropertyDefinition.PROPERTY_TITLE,sitePath,res.getName())));
  result.append("', ");
  result.append("'");
  if (scaler.isValid()) {
    result.append(scaler.getWidth());
  }
 else {
    result.append("?");
  }
  result.append("', ");
  result.append("'");
  if (scaler.isValid()) {
    result.append(scaler.getHeight());
  }
 else {
    result.append("?");
  }
  result.append("', ");
  result.append("'");
  result.append(res.getLength() / 1024);
  result.append(" ");
  result.append(key(org.opencms.workplace.galleries.Messages.GUI_LABEL_KILOBYTES_0));
  result.append("', ");
  result.append("'");
  result.append(getMessages().getDateTime(res.getDateCreated()));
  result.append("', ");
  result.append("'");
  result.append(getMessages().getDateTime(res.getDateLastModified()));
  result.append("', ");
  result.append("'");
  result.append(res.getStructureId());
  result.append("', ");
  result.append("'");
  String type="";
  int dotIndex=res.getName().lastIndexOf('.');
  if (dotIndex != -1) {
    type=res.getName().substring(dotIndex + 1).toLowerCase();
  }
  result.append(type);
  result.append("', ");
  result.append("'");
  result.append(res.getStructureId().hashCode());
  result.append("', ");
  result.append(res.getState());
  String copyright=getJsp().property(PROPERTY_COPYRIGHT,sitePath,null);
  if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(copyright)) {
    result.append(", '");
    result.append(CmsStringUtil.escapeJavaScript(copyright));
    result.append("'");
  }
  result.append(");\n");
  return result;
}
