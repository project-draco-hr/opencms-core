def App(environ, start_response):
    'WSGI entry point. Run the connector'
    if environ['SCRIPT_NAME'].endswith('connector.py'):
        conn = FCKeditorConnector(environ)
    elif environ['SCRIPT_NAME'].endswith('upload.py'):
        conn = FCKeditorQuickUpload(environ)
    else:
        start_response('200 Ok', [('Content-Type', 'text/html')])
        yield 'Unknown page requested: '
        yield environ['SCRIPT_NAME']
        return
    try:
        data = conn.doResponse()
        start_response('200 Ok', conn.headers)
        yield data
    except:
        start_response('500 Internal Server Error', [('Content-type', 'text/html')])
        file = StringIO()
        cgitb.Hook(file=file).handle()
        yield file.getvalue()
