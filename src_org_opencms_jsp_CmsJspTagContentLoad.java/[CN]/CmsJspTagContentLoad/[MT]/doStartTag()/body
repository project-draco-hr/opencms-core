{
  if (getFilter() == null) {
    throw new IllegalArgumentException("'contentload' tag requires 'filter' attribute");
  }
  m_controller=(CmsFlexController)pageContext.getRequest().getAttribute(CmsFlexController.ATTRIBUTE_NAME);
  m_cms=m_controller.getCmsObject();
  m_locale=m_cms.getRequestContext().getLocale();
  String filterName=getFilter();
  String param=resolveMagicName(getParam());
  I_CmsXmlContentFilter filter=OpenCms.getXmlContentTypeManager().getContentFilter(filterName);
  try {
    m_filterContentList=filter.getFilterResults(m_cms,filterName,param);
    if (filter.getCreateLink(m_cms,filterName,param) != null) {
      m_directEditCreateLink=CmsEncoder.encode(getFilter() + "|" + getParam());
    }
    doLoadNextFile();
  }
 catch (  CmsException e) {
    m_controller.setThrowable(e,m_cms.getRequestContext().getUri());
    throw new JspException(e);
  }
  String directEditOptions;
  if (m_directEditCreateLink != null) {
    directEditOptions=CmsJspTagEditable.createEditOptions(true,true,true);
  }
 else {
    directEditOptions=CmsJspTagEditable.createEditOptions(true,false,false);
  }
  if (m_editable) {
    m_directEditPermissions=CmsJspTagEditable.includeDirectEditElement(pageContext,I_CmsEditorActionHandler.C_DIRECT_EDIT_AREA_START,m_file,null,directEditOptions,null,m_directEditCreateLink);
  }
  return EVAL_BODY_INCLUDE;
}
