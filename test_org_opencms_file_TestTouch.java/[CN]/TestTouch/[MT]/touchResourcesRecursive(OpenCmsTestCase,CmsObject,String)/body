{
  tc.storeResources(cms,resource1);
  long timestamp=System.currentTimeMillis();
  cms.touch(resource1,timestamp,true);
  tc.assertFilter(cms,resource1,OpenCmsTestResourceFilter.FILTER_TOUCH);
  tc.assertProject(cms,resource1,cms.getRequestContext().currentProject());
  tc.assertState(cms,resource1,I_CmsConstants.C_STATE_CHANGED);
  tc.assertDateLastModified(cms,resource1,timestamp);
  tc.assertUserLastModified(cms,resource1,cms.getRequestContext().currentUser());
  List subresources=cms.getResourcesInTimeRange(resource1,CmsResource.DATE_RELEASED_DEFAULT,CmsResource.DATE_EXPIRED_DEFAULT);
  Iterator i=subresources.iterator();
  while (i.hasNext()) {
    CmsResource res=(CmsResource)i.next();
    String resName=cms.readAbsolutePath(res,CmsResourceFilter.ALL);
    tc.assertFilter(cms,resName,OpenCmsTestResourceFilter.FILTER_TOUCH);
    tc.assertProject(cms,resName,cms.getRequestContext().currentProject());
    tc.assertState(cms,resName,I_CmsConstants.C_STATE_CHANGED);
    tc.assertDateLastModified(cms,resName,timestamp);
    tc.assertUserLastModified(cms,resName,cms.getRequestContext().currentUser());
  }
}
