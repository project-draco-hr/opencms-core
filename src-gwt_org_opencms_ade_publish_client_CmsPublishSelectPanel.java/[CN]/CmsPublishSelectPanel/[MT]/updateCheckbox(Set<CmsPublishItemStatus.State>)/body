{
  CheckBoxUpdate result=new CheckBoxUpdate();
  boolean hasPublish=states.contains(CmsPublishItemStatus.State.publish);
  boolean hasNormal=states.contains(CmsPublishItemStatus.State.normal);
  String textSelectAll=Messages.get().key(Messages.GUI_CHECKBOX_SELECT_ALL_0);
  String textDeselectAll=Messages.get().key(Messages.GUI_CHECKBOX_DESELECT_ALL_0);
  if (hasNormal && hasPublish) {
    result.setText(textSelectAll);
    result.setState(CmsTriStateCheckBox.State.middle);
  }
 else   if (hasNormal) {
    result.setText(textSelectAll);
    result.setState(CmsTriStateCheckBox.State.off);
  }
 else   if (hasPublish) {
    result.setText(textDeselectAll);
    result.setState(CmsTriStateCheckBox.State.on);
  }
 else {
    result.setText(textSelectAll);
    result.setState(CmsTriStateCheckBox.State.off);
  }
  return result;
}
