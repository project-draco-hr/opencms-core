{
  File diskFile=new File(absoluteName(filename,project));
  if (!diskFile.exists()) {
    try {
      OutputStream s=new FileOutputStream(diskFile);
      s.write(contents);
      s.close();
    }
 catch (    Exception e) {
      throw new CmsException("[" + this.getClass().getName() + "] "+ e.getMessage());
    }
    CmsFile file=new CmsFile(filename,resourceType.getResourceType(),flags,user.getId(),user.getDefaultGroupId(),project.getId(),C_ACCESS_DEFAULT_FLAGS,C_STATE_NEW,C_UNKNOWN_ID,resourceType.getLauncherType(),resourceType.getLauncherClass(),System.currentTimeMillis(),System.currentTimeMillis(),new byte[0],contents.length);
    writeFileHeader(project,onlineProject,file,false);
  }
 else {
    throw new CmsException("[" + this.getClass().getName() + "] "+ filename,CmsException.C_FILE_EXISTS);
  }
  return readFile(project,onlineProject,filename);
}
