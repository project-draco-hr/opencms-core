{
  String pool="default";
  int currentVersion=8;
  int detectedVersion=8;
  CmsSetupDb setupDb=new CmsSetupDb(null);
  try {
    setupDb.setConnection(getDbDriver(pool),getDbUrl(pool),getDbParams(pool),getDbUser(pool),(String)((Map)m_dbPools.get(pool)).get("pwd"));
    if (!setupDb.hasTableOrColumn("CMS_USERS","USER_OU")) {
      detectedVersion=6;
    }
 else     if (!setupDb.hasTableOrColumn("CMS_LOG",null)) {
      detectedVersion=7;
    }
  }
  finally {
    setupDb.closeConnection();
  }
  return (currentVersion > detectedVersion);
}
