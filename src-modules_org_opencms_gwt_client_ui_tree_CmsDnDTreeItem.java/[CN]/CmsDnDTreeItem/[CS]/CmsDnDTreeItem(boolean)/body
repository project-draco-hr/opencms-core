{
  super();
  m_styleVar=new CmsStyleVariable(this);
  m_leafStyleVar=new CmsStyleVariable(this);
  m_opener=createOpener();
  addDecoration(m_opener,showOpeners ? OPENER_WIDTH : 0,true);
  m_children=new CmsDnDList<CmsDnDTreeItem>(){
    /** 
 * @see org.opencms.gwt.client.ui.CmsDnDList#enhanceEvent(org.opencms.gwt.client.ui.CmsDnDListDropEvent)
 */
    @Override protected CmsDnDListDropEvent enhanceEvent(    CmsDnDListDropEvent event){
      return CmsDnDTreeItem.this.enhanceEvent(event);
    }
  }
;
  m_children.addListDropHandler(new I_CmsDnDListDropHandler(){
    /** 
 * @see org.opencms.gwt.client.ui.I_CmsDnDListDropHandler#onDrop(org.opencms.gwt.client.ui.CmsDnDListDropEvent)
 */
    public void onDrop(    CmsDnDListDropEvent event){
      CmsDnDListItem item=event.getDestList().getItem(0);
      if (!(item instanceof CmsDnDTreeItem)) {
        return;
      }
      CmsDnDTreeItem destTreeItem=((CmsDnDTreeItem)item).getTree().getItemByPath(event.getDestPath());
      CmsDnDTreeItem oldParent=destTreeItem.getParentItem();
      destTreeItem.setParentItem(null);
      destTreeItem.setTree(null);
      oldParent.onChangeChildren();
      destTreeItem.setParentItem(CmsDnDTreeItem.this);
      destTreeItem.setTree(getTree());
      onChangeChildren();
      getTree().fireDropEvent(new CmsDnDTreeDropEvent(event.getSrcList(),event.getSrcPath(),getTree(),event.getDestPath()));
    }
  }
);
  m_children.setStyleName(CSS.listTreeItemChildren());
  m_panel.add(m_children);
  onChangeChildren();
  m_open=true;
  setOpen(false);
}
