{
  if (getAction() == ACTION_SAVE_EDIT && MODE_WIZARD_CREATEINDEX.equals(getParamDialogmode())) {
    String newFolder=getParamResource();
    if (!newFolder.endsWith(I_CmsConstants.C_FOLDER_SEPARATOR)) {
      newFolder+=I_CmsConstants.C_FOLDER_SEPARATOR;
    }
    getSettings().setExplorerResource(newFolder);
    String newUri=OpenCms.getWorkplaceManager().getExplorerTypeSetting(CmsResourceTypeXmlPage.C_RESOURCE_TYPE_NAME).getNewResourceUri();
    newUri+="?" + PARAM_DIALOGMODE + "="+ MODE_WIZARD_CREATEINDEX;
    try {
      sendCmsRedirect(C_PATH_DIALOGS + newUri);
      return;
    }
 catch (    Exception e) {
      if (OpenCms.getLog(this).isErrorEnabled()) {
        OpenCms.getLog(this).error("Error redirecting to new xmlpage dialog " + C_PATH_DIALOGS + newUri);
      }
    }
  }
 else   if (getAction() == ACTION_SAVE_EDIT && MODE_WIZARD.equals(getParamDialogmode())) {
    try {
      CmsResource res=getCms().readResource(getParamResource(),CmsResourceFilter.ALL);
      if (res.isFolder()) {
        List folderList=new ArrayList(1);
        folderList.add(CmsResource.getParentFolder(getParamResource()));
        getJsp().getRequest().setAttribute(C_REQUEST_ATTRIBUTE_RELOADTREE,folderList);
      }
    }
 catch (    CmsException e) {
      if (OpenCms.getLog(this).isInfoEnabled()) {
        OpenCms.getLog(this).info(e);
      }
    }
  }
 else   if (MODE_WIZARD_INDEXCREATED.equals(getParamDialogmode())) {
    getSettings().setExplorerResource(CmsResource.getParentFolder(CmsResource.getParentFolder(getParamResource())));
    List folderList=new ArrayList(1);
    folderList.add(CmsResource.getParentFolder(CmsResource.getParentFolder(getParamResource())));
    getJsp().getRequest().setAttribute(C_REQUEST_ATTRIBUTE_RELOADTREE,folderList);
  }
  super.actionCloseDialog();
}
