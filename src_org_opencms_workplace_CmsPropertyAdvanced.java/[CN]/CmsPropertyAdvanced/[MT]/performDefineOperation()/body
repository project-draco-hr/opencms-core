{
  boolean useTempfileProject="true".equals(getParamUsetempfileproject());
  try {
    if (useTempfileProject) {
      switchToTempProject();
    }
    CmsResource res=getCms().readFileHeader(getParamResource(),CmsResourceFilter.ALL);
    String newProperty=getParamNewproperty();
    if (newProperty != null && !"".equals(newProperty.trim())) {
      getCms().createPropertydefinition(newProperty,res.getType());
      return true;
    }
 else {
      throw new CmsException("You entered an invalid property name",CmsException.C_BAD_NAME);
    }
  }
  finally {
    if (useTempfileProject) {
      switchToCurrentProject();
    }
  }
}
