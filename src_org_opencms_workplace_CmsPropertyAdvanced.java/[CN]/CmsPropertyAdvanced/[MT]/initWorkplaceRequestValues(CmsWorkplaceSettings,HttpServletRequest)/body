{
  fillParamValues(request);
  getActiveTab();
  m_isFolder=false;
  try {
    CmsResource resource=getCms().readFileHeader(getParamResource());
    if (resource.isFolder()) {
      m_isFolder=true;
      if (!getParamResource().endsWith("/")) {
        setParamResource(getParamResource() + "/");
      }
    }
  }
 catch (  CmsException e) {
    if (OpenCms.getLog(this).isErrorEnabled()) {
      OpenCms.getLog(this).error("Error reading file " + getParamResource());
    }
  }
  setParamDialogtype(DIALOG_TYPE);
  boolean isPopup=Boolean.valueOf(getParamIsPopup()).booleanValue();
  if (DIALOG_SHOW_DEFINE.equals(getParamAction())) {
    setAction(ACTION_SHOW_DEFINE);
    setParamTitle(key("title.newpropertydef") + ": " + CmsResource.getName(getParamResource()));
  }
 else   if (DIALOG_SAVE_EDIT.equals(getParamAction())) {
    if (isPopup) {
      setAction(ACTION_CLOSEPOPUP_SAVE);
    }
 else {
      setAction(ACTION_SAVE_EDIT);
    }
  }
 else   if (DIALOG_SAVE_DEFINE.equals(getParamAction())) {
    setAction(ACTION_SAVE_DEFINE);
  }
 else   if (DIALOG_CANCEL.equals(getParamAction())) {
    if (isPopup) {
      setAction(ACTION_CLOSEPOPUP);
    }
 else {
      setAction(ACTION_CANCEL);
    }
  }
 else {
    setAction(ACTION_DEFAULT);
    if (!isEditable()) {
      setParamTitle(key("title.property") + ": " + CmsResource.getName(getParamResource()));
    }
 else {
      setParamTitle(key("title.editpropertyinfo") + ": " + CmsResource.getName(getParamResource()));
    }
    m_tabSwitched=false;
    if (DIALOG_SWITCHTAB.equals(getParamAction())) {
      m_tabSwitched=true;
    }
  }
}
