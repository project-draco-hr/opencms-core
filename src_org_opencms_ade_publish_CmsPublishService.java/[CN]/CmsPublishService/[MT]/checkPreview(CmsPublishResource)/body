{
  CmsObject cms=getCmsObject();
  String noPreviewReason=null;
  try {
    CmsResource resource=cms.readResource(publishResource.getId(),CmsResourceFilter.ONLY_VISIBLE);
    noPreviewReason=CmsVfsService.getNoPreviewReason(cms,resource);
  }
 catch (  CmsException e) {
    noPreviewReason=e.getLocalizedMessage(OpenCms.getWorkplaceManager().getWorkplaceLocale(cms));
  }
  if (noPreviewReason != null) {
    if (publishResource.getInfo() == null) {
      publishResource.setInfo(new CmsPublishResourceInfo(null,null));
    }
    publishResource.getInfo().setNoPreviewReason(noPreviewReason);
  }
}
