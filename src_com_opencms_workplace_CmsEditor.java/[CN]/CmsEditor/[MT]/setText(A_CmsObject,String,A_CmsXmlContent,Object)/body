{
  Hashtable parameters=(Hashtable)userObj;
  String filename=(String)parameters.get("file");
  if (filename == null || "".equals(filename)) {
    String errorMessage="[CmsButton] No file requested.";
    if (A_OpenCms.isLogging()) {
      A_OpenCms.log(C_OPENCMS_CRITICAL,errorMessage);
    }
    throw new CmsException(errorMessage,CmsException.C_BAD_NAME);
  }
  CmsFile editFile=cms.readFile(filename);
  String content=new String(editFile.getContents());
  Encoder enc=new Encoder();
  return enc.escape(content);
}
