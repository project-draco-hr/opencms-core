{
  CmsXmlLanguageFile lang=new CmsXmlLanguageFile(cms);
  if (roleName.equals(C_ALL_ROLES)) {
    roleName=cms.readUser(agentName).getDefaultGroup().getName();
  }
  int priority=Integer.parseInt(priorityString);
  String splittetDate[]=Utils.split(timeoutString,".");
  GregorianCalendar cal=new GregorianCalendar(Integer.parseInt(splittetDate[2]),Integer.parseInt(splittetDate[1]) - 1,Integer.parseInt(splittetDate[0]),0,0,0);
  long timeout=cal.getTime().getTime();
  A_CmsTask task=cms.createTask(agentName,roleName,taskName,taskcomment,timeout,priority);
  cms.setTaskPar(task.getId(),C_TASKPARA_ACCEPTATION,paraAcceptation);
  cms.setTaskPar(task.getId(),C_TASKPARA_ALL,paraAll);
  cms.setTaskPar(task.getId(),C_TASKPARA_COMPLETION,paraCompletion);
  cms.setTaskPar(task.getId(),C_TASKPARA_DELIVERY,paraDelivery);
  cms.setTaskPar(task.getId(),C_TASKPARA_COMMENT,taskcomment);
  String comment=lang.getLanguageValue("task.label.forrole") + ": " + roleName+ "\n";
  comment+=lang.getLanguageValue("task.label.editor") + ": " + Utils.getFullName(cms.readUser(agentName))+ "\n";
  comment+=taskcomment;
  cms.writeTaskLog(task.getId(),comment,C_TASKLOGTYPE_CREATED);
}
