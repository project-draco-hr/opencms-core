{
  CmsXmlLanguageFile lang=new CmsXmlLanguageFile(cms);
  A_CmsRequestContext context=cms.getRequestContext();
  A_CmsTask task=cms.readTask(taskid);
  A_CmsUser newEditor=context.currentUser();
  A_CmsGroup oldRole=cms.readGroup(task);
  if (cms.userInGroup(newEditor.getName(),oldRole.getName())) {
    cms.forwardTask(taskid,oldRole.getName(),newEditor.getName());
    String comment=lang.getLanguageValue("task.dialog.take.logmessage");
    comment+=" " + Utils.getFullName(newEditor);
    cms.writeTaskLog(taskid,comment,C_TASKLOGTYPE_TAKE);
  }
  String content=lang.getLanguageValue("task.email.take.content");
  String subject=lang.getLanguageValue("task.email.take.subject");
  A_CmsUser[] users={cms.readAgent(task)};
  CmsMail mail=new CmsMail(cms,cms.readOwner(task),users,subject,content);
  mail.start();
}
