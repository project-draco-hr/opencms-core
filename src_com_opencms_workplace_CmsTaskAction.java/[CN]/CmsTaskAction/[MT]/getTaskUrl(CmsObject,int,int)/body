{
  String servletPath=cms.getRequestContext().getRequest().getServletUrl();
  String serverName=((HttpServletRequest)cms.getRequestContext().getRequest().getOriginalRequest()).getServerName();
  String scheme=((HttpServletRequest)cms.getRequestContext().getRequest().getOriginalRequest()).getScheme();
  int serverPort=((HttpServletRequest)cms.getRequestContext().getRequest().getOriginalRequest()).getServerPort();
  if (serverPort != 80) {
    serverName+=":" + serverPort;
  }
  CmsXmlWpConfigFile conf=new CmsXmlWpConfigFile(cms);
  String actionPath=conf.getWorkplaceActionPath();
  if (I_CmsWpConstants.C_NEW_VFS_STRUCTURE) {
    return scheme + "://" + serverName+ servletPath+ "/system/login/index.html?startTaskId="+ taskid+ "&startProjectId="+ projectid;
  }
 else {
    return scheme + "://" + serverName+ servletPath+ actionPath+ "login.html?startTaskId="+ taskid+ "&startProjectId="+ projectid;
  }
}
