{
  Locale currentLocale=cms.getRequestContext().getLocale();
  Locale defaultLocale=CmsLocaleManager.getDefaultLocale();
  Locale locale=null;
  if (content.hasLocale(currentLocale)) {
    locale=currentLocale;
  }
 else   if (content.hasLocale(defaultLocale)) {
    locale=defaultLocale;
  }
 else {
    List locales=content.getLocales();
    if (locales.size() == 0) {
      throw new CmsException(Messages.get().container(Messages.ERR_NO_TYPE_CONFIG_1,content.getFile().getRootPath()));
    }
    locale=(Locale)locales.get(0);
  }
  Iterator itTypes=content.getValues(N_ADE_TYPE,locale).iterator();
  while (itTypes.hasNext()) {
    I_CmsXmlContentValue xmlType=(I_CmsXmlContentValue)itTypes.next();
    String typePath=xmlType.getPath();
    String source=content.getValue(CmsXmlUtils.concatXpath(typePath,N_SOURCE),locale).getStringValue(cms);
    String destination=content.getValue(CmsXmlUtils.concatXpath(typePath,N_DESTINATION),locale).getStringValue(cms);
    CmsADETypeConfigurationItem configItem=new CmsADETypeConfigurationItem(source,destination);
    CmsResource resource=cms.readResource(source);
    String type=getTypeName(resource.getTypeId());
    m_configuration.put(type,configItem);
  }
}
