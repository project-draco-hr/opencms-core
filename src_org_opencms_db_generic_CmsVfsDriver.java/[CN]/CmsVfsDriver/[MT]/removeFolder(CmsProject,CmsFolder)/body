{
  List files=getSubResources(currentProject,folder,false);
  files=internalFilterUndeletedResources(files);
  if (files.size() == 0) {
    List folders=getSubResources(currentProject,folder,true);
    folders=internalFilterUndeletedResources(folders);
    if (folders.size() == 0) {
      internalRemoveFolder(currentProject,folder);
    }
 else {
      String errorResNames="";
      Iterator i=folders.iterator();
      while (i.hasNext()) {
        CmsResource errorRes=(CmsResource)i.next();
        errorResNames+="[" + errorRes.getName() + "]";
      }
      throw new CmsException("[" + this.getClass().getName() + "] "+ folder.getName()+ errorResNames,CmsException.C_NOT_EMPTY);
    }
  }
 else {
    String errorResNames="";
    Iterator i=files.iterator();
    while (i.hasNext()) {
      CmsResource errorRes=(CmsResource)i.next();
      errorResNames+="[" + errorRes.getName() + "]";
    }
    throw new CmsException("[" + this.getClass().getName() + "] "+ folder.getName()+ errorResNames,CmsException.C_NOT_EMPTY);
  }
}
