{
  List files=readChildResources(dbc,currentProject,resource,false,true);
  if (files.size() == 0) {
    List folders=readChildResources(dbc,currentProject,resource,true,false);
    if (folders.size() == 0) {
      internalRemoveFolder(dbc,currentProject,resource);
    }
 else {
      String errorResNames="";
      for (int i=0, n=folders.size(); i < n; i++) {
        CmsResource errorRes=(CmsResource)folders.get(i);
        errorResNames+="[" + dbc.removeSiteRoot(errorRes.getRootPath()) + "]";
      }
      throw new CmsVfsException(Messages.get().container(Messages.ERR_DELETE_NONEMTY_FOLDER_2,dbc.removeSiteRoot(resource.getRootPath()),errorResNames));
    }
  }
 else {
    String errorResNames="";
    for (int i=0, n=files.size(); i < n; i++) {
      CmsResource errorRes=(CmsResource)files.get(i);
      errorResNames+="[" + errorRes.getName() + "]";
    }
    throw new CmsVfsException(Messages.get().container(Messages.ERR_DELETE_NONEMTY_FOLDER_2,dbc.removeSiteRoot(resource.getRootPath()),errorResNames));
  }
}
