{
  List files=readChildResources(dbc,currentProject,resource,false,true);
  if (files.size() == 0) {
    List folders=readChildResources(dbc,currentProject,resource,true,false);
    if (folders.size() == 0) {
      internalRemoveFolder(dbc,currentProject,resource);
    }
 else {
      String errorResNames="";
      for (int i=0, n=folders.size(); i < n; i++) {
        CmsResource errorRes=(CmsResource)folders.get(i);
        errorResNames+="[" + errorRes.getRootPath() + "]";
      }
      throw new CmsVfsException("[" + this.getClass().getName() + "] "+ resource.getName()+ errorResNames,CmsVfsException.C_VFS_FOLDER_NOT_EMPTY);
    }
  }
 else {
    String errorResNames="";
    for (int i=0, n=files.size(); i < n; i++) {
      CmsResource errorRes=(CmsResource)files.get(i);
      errorResNames+="[" + errorRes.getName() + "]";
    }
    throw new CmsVfsException("[" + this.getClass().getName() + "] "+ resource.getName()+ errorResNames,CmsVfsException.C_VFS_FOLDER_NOT_EMPTY);
  }
}
