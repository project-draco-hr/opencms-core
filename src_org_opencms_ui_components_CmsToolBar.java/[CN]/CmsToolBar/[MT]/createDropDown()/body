{
  CmsObject cms=A_CmsUI.getCmsObject();
  Locale locale=UI.getCurrent().getLocale();
  HorizontalLayout layout=new HorizontalLayout();
  layout.addStyleName(ValoTheme.LAYOUT_HORIZONTAL_WRAPPING);
  layout.setMargin(true);
  List<I_CmsWorkplaceAppConfiguration> configs=new ArrayList<I_CmsWorkplaceAppConfiguration>(OpenCms.getWorkplaceAppManager().getWorkplaceApps());
  Collections.sort(configs,new Comparator<I_CmsWorkplaceAppConfiguration>(){
    public int compare(    I_CmsWorkplaceAppConfiguration cat1,    I_CmsWorkplaceAppConfiguration cat2){
      return ComparisonChain.start().compare(cat1.getOrder(),cat2.getOrder()).result();
    }
  }
);
  for (  I_CmsWorkplaceAppConfiguration appConfig : configs) {
    CmsAppVisibilityStatus status=appConfig.getVisibility(cms);
    if (status.isVisible()) {
      layout.addComponent(CmsDefaultAppButtonProvider.createAppIconWidget(appConfig,locale));
      if (layout.getComponentCount() > 9) {
        break;
      }
    }
  }
  String html="<div tabindex=\"0\" role=\"button\" class=\"v-button v-widget borderless v-button-borderless " + OpenCmsTheme.TOOLBAR_BUTTON + " v-button-"+ OpenCmsTheme.TOOLBAR_BUTTON+ "\"><span class=\"v-button-wrap\">"+ FontAwesome.TH_LARGE.getHtml()+ "</span></div>";
  PopupView pv=new PopupView(html,layout);
  pv.addStyleName(OpenCmsTheme.NAVIGATOR_DROPDOWN);
  pv.setHideOnMouseOut(false);
  return pv;
}
