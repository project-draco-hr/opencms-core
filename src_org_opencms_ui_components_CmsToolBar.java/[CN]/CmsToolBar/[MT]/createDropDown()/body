{
  CmsObject cms=A_CmsUI.getCmsObject();
  Locale locale=UI.getCurrent().getLocale();
  HorizontalLayout layout=new HorizontalLayout();
  layout.addStyleName("wrapping");
  layout.setMargin(true);
  List<I_CmsWorkplaceAppConfiguration> configs=new ArrayList<I_CmsWorkplaceAppConfiguration>(OpenCms.getWorkplaceAppManager().getWorkplaceApps());
  Collections.sort(configs,new Comparator<I_CmsWorkplaceAppConfiguration>(){
    public int compare(    I_CmsWorkplaceAppConfiguration cat1,    I_CmsWorkplaceAppConfiguration cat2){
      return ComparisonChain.start().compare(cat1.getOrder(),cat2.getOrder()).result();
    }
  }
);
  for (  I_CmsWorkplaceAppConfiguration appConfig : configs) {
    CmsAppVisibilityStatus status=appConfig.getVisibility(cms);
    if (status.isVisible()) {
      layout.addComponent(CmsDefaultAppButtonProvider.createAppIconWidget(appConfig,locale));
      if (layout.getComponentCount() > 10) {
        break;
      }
    }
  }
  String html="<div tabindex=\"0\" role=\"button\" class=\"v-button v-widget borderless v-button-borderless toolbar v-button-toolbar\"><span class=\"v-button-wrap\">" + FontAwesome.TH.getHtml() + "</span></div>";
  PopupView pv=new PopupView(html,layout);
  pv.addStyleName("opencms-navigator-dropdown");
  pv.setHideOnMouseOut(false);
  return pv;
}
