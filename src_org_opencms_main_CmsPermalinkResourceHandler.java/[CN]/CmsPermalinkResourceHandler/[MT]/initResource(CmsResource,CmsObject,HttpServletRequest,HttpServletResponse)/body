{
  if (resource == null) {
    String uri=cms.getRequestContext().getUri();
    Matcher matcher=m_uriPattern.matcher(uri);
    if (matcher.find()) {
      String id=matcher.group(1);
      String storedSiteRoot=cms.getRequestContext().getSiteRoot();
      try {
        cms.getRequestContext().setSiteRoot("/");
        resource=cms.readDefaultFile(id);
      }
 catch (      CmsPermissionViolationException e) {
        throw e;
      }
catch (      Throwable e) {
        CmsMessageContainer msg=Messages.get().container(Messages.ERR_PERMALINK_1,id);
        if (LOG.isErrorEnabled()) {
          LOG.error(msg.key(),e);
        }
        throw new CmsResourceInitException(msg,e);
      }
 finally {
        cms.getRequestContext().setSiteRoot(storedSiteRoot);
        if (resource != null) {
          cms.getRequestContext().setUri(cms.getSitePath(resource));
        }
      }
    }
  }
  return resource;
}
