{
  CmsFolder cmsFolder=m_vfsDriver.readFolder(currentProject.getId(),foldername);
  if (accessRead(currentUser,currentProject,(CmsResource)cmsFolder)) {
    Vector folders=m_vfsDriver.getSubFolders(currentProject.getId(),cmsFolder);
    CmsFolder folder;
    for (int z=0; z < folders.size(); z++) {
      folder=(CmsFolder)folders.elementAt(z);
      if (!(checkPermissions(currentUser,currentProject,currentUser,(CmsResource)folder,C_PERMISSION_READ))) {
        folders.removeElementAt(z);
        z--;
      }
    }
    return folders;
  }
 else {
    throw new CmsException("[" + this.getClass().getName() + "] "+ foldername,CmsException.C_ACCESS_DENIED);
  }
}
