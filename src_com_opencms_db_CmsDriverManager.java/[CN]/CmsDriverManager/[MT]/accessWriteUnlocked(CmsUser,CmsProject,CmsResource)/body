{
  if (currentProject.isOnlineProject()) {
    return (false);
  }
  if (!accessProject(currentUser,currentProject,currentProject.getId())) {
    return (false);
  }
  if (resource.getProjectId() != currentProject.getId()) {
    return false;
  }
  if (!checkPermissions(currentUser,resource,C_PERMISSION_WRITE))   return false;
  if (resource.getParent() != null) {
    resource=m_vfsDriver.readFolder(resource.getProjectId(),resource.getRootName() + resource.getParent());
  }
 else {
    return true;
  }
  do {
    if (resource.isLocked() && (!resource.isLockedBy().equals(currentUser.getId()))) {
      return (false);
    }
    if (resource.getParent() != null) {
      resource=m_vfsDriver.readFolder(resource.getProjectId(),resource.getRootName() + resource.getParent());
    }
  }
 while (resource.getParent() != null);
  return (true);
}
