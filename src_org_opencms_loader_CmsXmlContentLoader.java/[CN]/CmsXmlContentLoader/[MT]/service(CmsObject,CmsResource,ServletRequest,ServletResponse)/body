{
  CmsXmlContent content=CmsXmlContentFactory.unmarshal(cms,resource,req);
  String element=req.getParameter(I_CmsConstants.C_PARAMETER_ELEMENT);
  List locales=content.getLocales(element);
  Locale loc=OpenCms.getLocaleManager().getBestMatchingLocale(cms.getRequestContext().getLocale(),OpenCms.getLocaleManager().getDefaultLocales(cms,cms.getSitePath(resource)),locales);
  String value=content.getStringValue(cms,element,loc);
  if (value != null) {
    byte[] result=value.getBytes(content.getEncoding());
    res.getOutputStream().write(result);
  }
}
