{
  CmsLocaleManager localeManager=OpenCms.getLocaleManager();
  if (localeManager != null) {
    if (getUri().startsWith(I_CmsWpConstants.C_VFS_PATH_WORKPLACE) || getUri().startsWith(I_CmsWpConstants.C_VFS_PATH_LOGIN)) {
      m_locale=OpenCms.getWorkplaceManager().getLocale(this);
    }
 else {
      m_locale=localeManager.getLocaleHandler().getLocale(this);
    }
    if (m_locale == null) {
      m_locale=OpenCms.getLocaleManager().getDefaultLocale();
      if (OpenCms.getLog(this).isDebugEnabled()) {
        OpenCms.getLog(this).debug("No locale name found - using default: " + m_locale);
      }
    }
  }
 else {
    m_locale=Locale.ENGLISH;
  }
}
