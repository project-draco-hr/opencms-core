{
  String statement="";
  LineNumberReader reader=null;
  String line=null;
  try {
    reader=new LineNumberReader(inputStreamReader);
    line=null;
    while (true) {
      line=reader.readLine();
      if (line == null) {
        break;
      }
      StringTokenizer st=new StringTokenizer(line);
      while (st.hasMoreTokens()) {
        String currentToken=st.nextToken();
        if (currentToken.startsWith("#")) {
          break;
        }
        if (currentToken.startsWith("prompt")) {
          break;
        }
        statement+=" " + currentToken;
        if (currentToken.endsWith(";")) {
          statement=statement.substring(0,(statement.length() - 1));
          if (replacers != null) {
            executeStatement(replaceValues(statement,replacers));
          }
 else {
            executeStatement(statement);
          }
          statement="";
        }
      }
      statement+=" \n";
    }
  }
 catch (  SQLException e) {
    if (m_errorLogging) {
      m_errors.addElement("Error executing SQL statement: " + statement);
      m_errors.addElement(CmsException.getStackTraceAsString(e));
    }
  }
catch (  Exception e) {
    if (m_errorLogging) {
      m_errors.addElement("Error parsing database setup SQL script in line: " + line);
      m_errors.addElement(CmsException.getStackTraceAsString(e));
    }
  }
 finally {
    try {
      if (reader != null) {
        reader.close();
      }
    }
 catch (    Exception e) {
    }
  }
}
