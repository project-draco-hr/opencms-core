{
  int index=0;
  try {
    index=Integer.parseInt(getParamElementIndex());
  }
 catch (  Exception e) {
  }
  String name=getParamElementName();
  CmsWidgetParameter base=getParameterDefinition(name);
  if (base != null) {
    List params=(List)getParameters().get(name);
    if (getAction() == ACTION_ELEMENT_REMOVE) {
      params.remove(index);
    }
 else {
      List sequence=(List)getParameters().get(base.getName());
      if (sequence.size() > 0) {
        index=index + 1;
      }
      CmsWidgetParameter newParam=new CmsWidgetParameter(base,index);
      params.add(index,newParam);
    }
    for (int i=0; i < params.size(); i++) {
      CmsWidgetParameter param=(CmsWidgetParameter)params.get(i);
      param.setindex(i);
    }
  }
}
