{
  StringBuffer result=new StringBuffer(32);
  try {
    Iterator i=getWidgets().iterator();
    Set set=new HashSet();
    while (i.hasNext()) {
      I_CmsXmlWidget widget=((CmsWidgetParameter)i.next()).getWidget();
      if (!set.contains(widget)) {
        result.append(widget.getDialogIncludes(getCms(),this));
        result.append('\n');
        set.add(widget);
      }
    }
  }
 catch (  CmsXmlException e) {
    LOG.error(e.getLocalizedMessage());
    getJsp().getRequest().setAttribute(ATTRIBUTE_THROWABLE,e);
    getJsp().include(C_FILE_DIALOG_SCREEN_ERROR);
  }
  if (!useNewStyle()) {
    result.append("<script type='text/javascript' src='");
    result.append(getResourceUri());
    result.append("editors/xmlcontent/help.js'></script>\n");
  }
  return result.toString();
}
