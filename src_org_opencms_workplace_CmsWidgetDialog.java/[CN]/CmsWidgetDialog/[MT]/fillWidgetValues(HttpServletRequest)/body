{
  Iterator i=getWidgets().iterator();
  Map parameters=request.getParameterMap();
  m_paramValues=new HashMap();
  while (i.hasNext()) {
    CmsWidgetParameter base=(CmsWidgetParameter)i.next();
    List params=new ArrayList();
    int count=0;
    for (int j=0; j < base.getMaxOccurs(); j++) {
      String id=CmsWidgetParameter.createId(base.getName(),j);
      String[] values=(String[])parameters.get(id);
      String value=null;
      if ((values != null) && (values.length > 0)) {
        value=decodeParamValue(base.getName(),values[0]);
      }
 else {
        if (count < base.getMinOccurs()) {
          value=base.getDefault(getCms());
        }
      }
      if (value != null) {
        CmsWidgetParameter param=new CmsWidgetParameter(base,value,count);
        params.add(param);
        count++;
      }
    }
    m_paramValues.put(base.getName(),params);
  }
}
