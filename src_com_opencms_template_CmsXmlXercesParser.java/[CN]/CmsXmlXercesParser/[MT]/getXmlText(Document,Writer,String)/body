{
  OutputFormat outf=new OutputFormat(doc,(encoding == null) ? getOriginalEncoding(doc) : encoding,true);
  outf.setLineWidth(C_XML_LINE_WIDTH);
  outf.setPreserveSpace(false);
  XMLSerializer serializer=new XMLSerializer(out,outf);
  try {
    DOMSerializer domSerializer=serializer.asDOMSerializer();
    domSerializer.serialize(doc);
  }
 catch (  Exception e) {
    if (OpenCms.getLog(CmsLog.CHANNEL_TEMPLATE_XML).isErrorEnabled()) {
      OpenCms.getLog(CmsLog.CHANNEL_TEMPLATE_XML).error("Xml parsing error",e);
    }
  }
}
