{
  OutputFormat outf=new OutputFormat(doc,(encoding == null) ? getOriginalEncoding(doc) : encoding,true);
  outf.setLineWidth(C_XML_LINE_WIDTH);
  outf.setPreserveSpace(false);
  XMLSerializer serializer=new XMLSerializer(out,outf);
  try {
    DOMSerializer domSerializer=serializer.asDOMSerializer();
    domSerializer.serialize(doc);
  }
 catch (  Exception e) {
    if (I_CmsLogChannels.C_LOGGING && A_OpenCms.isLogging(I_CmsLogChannels.C_OPENCMS_CRITICAL)) {
      A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_CRITICAL,"[CmsXmlXercesParser] " + e);
    }
  }
}
