{
  if (dialog != null) {
    CmsContextMenuDialogPanel panel=new CmsContextMenuDialogPanel();
    panel.setContent(dialog);
    m_window=prepareWindow();
    m_window.setCaption(title);
    m_window.setContent(panel);
    A_CmsUI.get().addWindow(m_window);
    try {
      for (      CmsResource resource : m_resources) {
        CmsResourceUtil resUtil=new CmsResourceUtil(getCms(),resource);
        Locale locale=A_CmsUI.get().getLocale();
        panel.addResourceInfo(new CmsResourceInfo(resUtil.getGalleryTitle(locale),resUtil.getGalleryDescription(locale),resUtil.getBigIconPath()));
      }
    }
 catch (    Exception e) {
      LOG.error(e.getLocalizedMessage(),e);
    }
  }
}
