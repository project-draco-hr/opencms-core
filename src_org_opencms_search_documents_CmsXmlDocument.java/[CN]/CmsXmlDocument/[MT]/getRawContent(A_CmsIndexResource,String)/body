{
  CmsResource resource=(CmsResource)indexResource.getData();
  String rawContent=null;
  try {
    CmsFile file=CmsFile.upgrade(resource,m_cms);
    String absolutePath=m_cms.getSitePath(file);
    A_CmsXmlDocument xmlContent=CmsXmlContentFactory.unmarshal(m_cms,file);
    List locales=xmlContent.getLocales();
    if (locales.size() == 0) {
      locales=OpenCms.getLocaleManager().getDefaultLocales(m_cms,absolutePath);
    }
    Locale locale=OpenCms.getLocaleManager().getBestMatchingLocale(CmsLocaleManager.getLocale(language),OpenCms.getLocaleManager().getDefaultLocales(m_cms,absolutePath),locales);
    List elements=xmlContent.getNames(locale);
    StringBuffer content=new StringBuffer();
    for (Iterator i=elements.iterator(); i.hasNext(); ) {
      List values=xmlContent.getValues((String)i.next(),locale);
      for (Iterator j=values.iterator(); j.hasNext(); ) {
        I_CmsXmlContentValue value=(I_CmsXmlContentValue)j.next();
        String plainText=value.getPlainText(m_cms,xmlContent);
        if (plainText != null) {
          content.append(value);
        }
      }
    }
    rawContent=content.toString();
  }
 catch (  Exception exc) {
    throw new CmsIndexException("Reading resource " + resource.getRootPath() + " failed",exc);
  }
  return rawContent;
}
