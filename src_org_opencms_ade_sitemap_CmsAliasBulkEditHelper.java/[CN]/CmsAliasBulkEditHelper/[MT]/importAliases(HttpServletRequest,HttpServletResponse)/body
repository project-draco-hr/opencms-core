{
  FileItemFactory factory=new DiskFileItemFactory();
  ServletFileUpload upload=new ServletFileUpload(factory);
  @SuppressWarnings("unchecked") List<FileItem> items=upload.parseRequest(request);
  byte[] data=null;
  String siteRoot=null;
  for (  FileItem fileItem : items) {
    String name=fileItem.getFieldName();
    if (PARAM_IMPORTFILE.equals(name)) {
      data=fileItem.get();
    }
 else     if (PARAM_SITEROOT.equals(name)) {
      siteRoot=new String(fileItem.get(),CmsEncoder.ENCODING_UTF_8);
    }
  }
  List<CmsAliasImportResult> result=new ArrayList<CmsAliasImportResult>();
  if ((siteRoot != null) && (data != null)) {
    result=OpenCms.getAliasManager().importAliases(m_cms,data,siteRoot);
  }
  JSONObject obj=new JSONObject();
  JSONArray array=new JSONArray();
  for (  CmsAliasImportResult r : result) {
    array.put(r.toJson());
  }
  obj.put(JSON_RESULT,array);
  response.getWriter().print(obj.toString());
}
