{
  String defaultContextQuery="q=*:*&fl=*,score&qt=dismax&rows=10&fq=con_locales:en&fq=parent-folders:/sites/default/";
  String modifiedContextQuery="q=*:*&fl=*,score&qt=dismax&rows=10&fq=con_locales:en&fq=parent-folders:/";
  String modifiedLocales="q=*:*&fl=*,score&qt=dismax&rows=10&fq=con_locales:(de OR fr)&fq=parent-folders:/";
  CmsSolrQuery query=new CmsSolrQuery(getCmsObject(),null);
  assertEquals(defaultContextQuery,query.toString());
  query.setSearchRoots("/");
  assertEquals(modifiedContextQuery,query.toString());
  query.setLocales(Locale.GERMAN,Locale.FRENCH,Locale.ENGLISH);
  query.setLocales(Locale.GERMAN,Locale.FRENCH);
  assertEquals(modifiedLocales,query.toString());
  query=new CmsSolrQuery(getCmsObject(),CmsRequestUtil.createParameterMap("fq=parent-folders:/"));
  assertEquals(modifiedContextQuery,query.toString());
  query=new CmsSolrQuery(getCmsObject(),CmsRequestUtil.createParameterMap("q=test&fq=parent-folders:/&fq=con_locales:fr&fl=content_fr&rows=50&qt=dismax&fq=type:v8news"));
  query.setText("test");
  query.setTextSearchFields("pla");
  query.setLocales(Locale.GERMAN);
  query.setFields("pla,plub");
  query.setRows(new Integer(1000));
  query.setQueryType("lucene");
  query.setResourceTypes("article");
  String ex="q=test&fl=content_fr,path,type,id&qt=dismax&rows=50&fq=parent-folders:/&fq=con_locales:fr&fq=type:v8news";
  assertEquals(ex,query.toString());
}
