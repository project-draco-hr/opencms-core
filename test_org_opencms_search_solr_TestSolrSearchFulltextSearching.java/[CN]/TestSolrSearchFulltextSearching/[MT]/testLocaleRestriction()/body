{
  CmsObject cms=OpenCms.initCmsObject(getCmsObject());
  String folderName="/folder1/subfolder12/subsubfolder121/";
  importTestResource(cms,"org/opencms/search/pdf-test-112.pdf",folderName + "master.pdf",CmsResourceTypeBinary.getStaticTypeId(),Collections.<CmsProperty>emptyList());
  importTestResource(cms,"org/opencms/search/pdf-test-112.pdf",folderName + "master_de.pdf",CmsResourceTypeBinary.getStaticTypeId(),Collections.<CmsProperty>emptyList());
  importTestResource(cms,"org/opencms/search/pdf-test-112.pdf",folderName + "master_en.pdf",CmsResourceTypeBinary.getStaticTypeId(),Collections.<CmsProperty>emptyList());
  importTestResource(cms,"org/opencms/search/pdf-test-112.pdf",folderName + "master_fr.pdf",CmsResourceTypeBinary.getStaticTypeId(),Collections.<CmsProperty>emptyList());
  OpenCms.getPublishManager().publishProject(cms,new CmsShellReport(cms.getRequestContext().getLocale()));
  OpenCms.getPublishManager().waitWhileRunning();
  CmsSolrIndex index=OpenCms.getSearchManager().getIndexSolr(AllSolrTests.SOLR_ONLINE);
  CmsSolrQuery query=new CmsSolrQuery();
  query.setSearchRoots("/sites/default/folder1/subfolder12/subsubfolder121/");
  query.setResourceTypes("binary");
  CmsSolrResultList result=index.search(cms,query);
  assertEquals(4,result.getNumFound());
  cms.getRequestContext().setLocale(Locale.GERMAN);
  query=new CmsSolrQuery(cms);
  query.setTexts("Testfile","Intranet");
  result=index.search(cms,query);
  assertEquals(2,result.getNumFound());
  query=new CmsSolrQuery();
  query.setLocales(Collections.singletonList(Locale.GERMAN));
  query.setTexts("Testfile","Intranet");
  result=index.search(cms,query);
  assertEquals(2,result.getNumFound());
  query=new CmsSolrQuery();
  query.setLocales(Collections.singletonList(Locale.ENGLISH));
  query.setTexts("Testfile","Intranet");
  result=index.search(cms,query);
  assertEquals(2,result.getNumFound());
  query=new CmsSolrQuery();
  query.setLocales(Collections.singletonList(Locale.FRENCH));
  query.setTexts("Testfile","Intranet");
  result=index.search(cms,query);
  assertEquals(1,result.getNumFound());
  query=new CmsSolrQuery();
  query.setLocales(null);
  query.setTexts("Testfile","Intranet");
  result=index.search(cms,query);
  assertEquals(4,result.getNumFound());
}
