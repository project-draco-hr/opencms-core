{
  String filename=null;
  Enumeration files=cms.getRequestContext().getRequest().getFileNames();
  while (files.hasMoreElements()) {
    filename=(String)files.nextElement();
  }
  if (filename != null) {
    session.putValue(C_PARA_FILE,filename);
  }
  filename=(String)session.getValue(C_PARA_FILE);
  byte[] filecontent=new byte[0];
  if (filename != null) {
    filecontent=cms.getRequestContext().getRequest().getFile(filename);
  }
  if (filecontent != null) {
    session.putValue(C_PARA_FILECONTENT,filecontent);
  }
  filecontent=(byte[])session.getValue(C_PARA_FILECONTENT);
  File discFolder=new File(com.opencms.boot.CmsBase.getAbsolutePath(cms.readExportPath()) + "/");
  if (!discFolder.exists()) {
    boolean success=discFolder.mkdir();
    if (com.opencms.boot.I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING && A_OpenCms.isLogging() && (!success)) {
      A_OpenCms.log(com.opencms.boot.I_CmsLogChannels.C_OPENCMS_INFO,"[CmsAccessFilesystem] Couldn't create folder " + com.opencms.boot.CmsBase.getAbsolutePath(cms.readExportPath()) + "/"+ ".");
    }
  }
  File discFile=new File(com.opencms.boot.CmsBase.getAbsolutePath(cms.readExportPath()) + "/" + filename);
  try {
    OutputStream s=new FileOutputStream(discFile);
    s.write(filecontent);
    s.close();
  }
 catch (  Exception e) {
    throw new CmsException("[" + this.getClass().getName() + "] "+ e.getMessage());
  }
  return filename;
}
