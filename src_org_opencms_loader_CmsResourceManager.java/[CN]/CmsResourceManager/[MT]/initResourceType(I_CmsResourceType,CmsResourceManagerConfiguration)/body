{
  int pos=resourceType.getTypeId();
  if (pos > configuration.m_resourceTypes.length) {
    I_CmsResourceType[] types=new I_CmsResourceType[pos * 2];
    System.arraycopy(configuration.m_resourceTypes,0,types,0,configuration.m_resourceTypes.length);
    configuration.m_resourceTypes=types;
  }
  configuration.m_resourceTypes[pos]=resourceType;
  configuration.getResourceTypeList().add(resourceType);
  configuration.getResourceTypeMap().put(resourceType.getTypeName(),resourceType);
  if (OpenCms.getLog(CmsLog.CHANNEL_INIT).isInfoEnabled()) {
    OpenCms.getLog(CmsLog.CHANNEL_INIT).info(". Resource type init   : added resource type '" + resourceType.getTypeName() + "' id="+ resourceType.getTypeId()+ " class="+ resourceType.getClass().getName());
  }
  List mappings=resourceType.getConfiguredMappings();
  Iterator i=mappings.iterator();
  while (i.hasNext()) {
    String mapping=(String)i.next();
    if (!configuration.getMappings().containsKey(mapping)) {
      configuration.getMappings().put(mapping,resourceType.getTypeName());
      if (OpenCms.getLog(CmsLog.CHANNEL_INIT).isInfoEnabled()) {
        OpenCms.getLog(CmsLog.CHANNEL_INIT).info(". Resource type init   : maping extension '" + mapping + "' to resource type "+ resourceType.getTypeName());
      }
    }
  }
}
