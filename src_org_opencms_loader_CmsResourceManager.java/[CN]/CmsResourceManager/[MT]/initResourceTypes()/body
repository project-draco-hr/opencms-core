{
  if (OpenCms.getLog(CmsLog.CHANNEL_INIT).isInfoEnabled()) {
    OpenCms.getLog(CmsLog.CHANNEL_INIT).info(". Resource type init   : starting");
  }
  m_resourceTypes=new I_CmsResourceType[100];
  m_resourceTypeMap=new HashMap();
  m_mappings=new HashMap();
  m_resourceTypeList=new ArrayList();
  if (OpenCms.getLog(CmsLog.CHANNEL_INIT).isInfoEnabled()) {
    OpenCms.getLog(CmsLog.CHANNEL_INIT).info(". Resource type init   : adding " + m_resourceTypesFromXml.size() + " resource types from file "+ CmsVfsConfiguration.C_DEFAULT_XML_FILE_NAME);
  }
  Iterator i;
  i=m_resourceTypesFromXml.iterator();
  while (i.hasNext()) {
    I_CmsResourceType resourceType=(I_CmsResourceType)i.next();
    initResourceType(resourceType);
  }
  CmsModuleManager moduleManager=OpenCms.getModuleManager();
  if (moduleManager != null) {
    i=moduleManager.getModuleNames().iterator();
    while (i.hasNext()) {
      CmsModule module=moduleManager.getModule((String)i.next());
      if (module.getResourceTypes().size() > 0) {
        if (OpenCms.getLog(CmsLog.CHANNEL_INIT).isInfoEnabled()) {
          OpenCms.getLog(CmsLog.CHANNEL_INIT).info(". Resource type init   : adding " + module.getResourceTypes().size() + " resource type(s) from module '"+ module.getName()+ "'");
        }
        Iterator j=module.getResourceTypes().iterator();
        while (j.hasNext()) {
          I_CmsResourceType resourceType=(I_CmsResourceType)j.next();
          initResourceType(resourceType);
        }
      }
    }
  }
  m_frozen=true;
  m_resourceTypeList=Collections.unmodifiableList(m_resourceTypeList);
  m_resourceTypeMap=Collections.unmodifiableMap(m_resourceTypeMap);
  m_loaderList=Collections.unmodifiableList(m_loaderList);
  if (OpenCms.getLog(CmsLog.CHANNEL_INIT).isInfoEnabled()) {
    OpenCms.getLog(CmsLog.CHANNEL_INIT).info(". Resource type init   : finished");
  }
}
