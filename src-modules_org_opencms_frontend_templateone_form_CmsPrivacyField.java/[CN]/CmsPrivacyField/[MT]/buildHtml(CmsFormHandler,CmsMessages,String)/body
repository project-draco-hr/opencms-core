{
  StringBuffer buf=new StringBuffer();
  String fieldLabel=getLabel();
  String errorMessage="";
  String mandatory="";
  boolean showMandatory=false;
  if (isMandatory()) {
    mandatory=messages.key("form.html.mandatory");
  }
  if (!CmsStringUtil.isEmptyOrWhitespaceOnly(fieldLabel)) {
    fieldLabel=fieldLabel + mandatory;
    showMandatory=true;
  }
  if (CmsStringUtil.isNotEmpty(errorKey)) {
    if (CmsFormHandler.ERROR_MANDATORY.equals(errorKey)) {
      errorMessage=messages.key("form.error.mandatory");
    }
 else     if (CmsStringUtil.isNotEmpty(getErrorMessage())) {
      errorMessage=getErrorMessage();
    }
 else {
      errorMessage=messages.key("form.error.validation");
    }
    errorMessage=messages.key("form.html.error.start") + errorMessage + messages.key("form.html.error.end");
    fieldLabel=messages.key("form.html.label.error.start") + fieldLabel + messages.key("form.html.label.error.end");
  }
  buf.append(messages.key("form.html.row.start")).append("\n");
  if (getItems().size() > 0) {
    buf.append(messages.key("form.html.label.start")).append(fieldLabel).append(messages.key("form.html.label.end")).append("\n");
    buf.append(messages.key("form.html.field.start")).append("\n");
    CmsFieldItem curOption=(CmsFieldItem)getItems().get(0);
    String checked="";
    if (curOption.isSelected()) {
      checked=" checked=\"checked\"";
    }
    String link=curOption.getLabel();
    if (link.startsWith("/"))     link=formHandler.link(link);
    buf.append("<input type=\"checkbox\" name=\"").append(getName()).append("\" value=\"").append(curOption.getValue()).append("\"").append(checked).append(">");
    buf.append("<a href=\"").append(link).append("\" rel=\"_blank\">").append(curOption.getValue()).append(showMandatory ? "" : mandatory).append("</a>");
    buf.append("\n");
  }
  buf.append(errorMessage).append("\n");
  buf.append(messages.key("form.html.field.end")).append("\n");
  buf.append(messages.key("form.html.row.end")).append("\n");
  return buf.toString();
}
