def sendUploadResults(self, errorNo=0, fileUrl='', fileName='', customMsg=''):
    self.setHttpHeaders('text/html')
    'This is the function that sends the results of the uploading process'
    'Minified version of the document.domain automatic fix script (#1919).'
    'The original script can be found at _dev/domain_fix_template.js'
    return ('<script type="text/javascript">\n\t\t\t(function(){var d=document.domain;while (true){try{var A=window.parent.document.domain;break;}catch(e) {};d=d.replace(/.*?(?:\\.|$)/,\'\');if (d.length==0) break;try{document.domain=d;}catch (e){break;}}})();\n\n\t\t\twindow.parent.OnUploadCompleted(%(errorNumber)s,"%(fileUrl)s","%(fileName)s","%(customMsg)s");\n\t\t\t</script>' % {'errorNumber': errorNo, 'fileUrl': fileUrl.replace('"', '\\"'), 'fileName': fileName.replace('"', '\\"'), 'customMsg': customMsg.replace('"', '\\"'), })
