{
  if (m_isEditable == null) {
    if (getCms().getRequestContext().currentProject().getId() == CmsProject.ONLINE_PROJECT_ID || !getCms().isInsideCurrentProject(getParamResource())) {
      m_isEditable=new Boolean(false);
    }
 else {
      if (!checkResourcePermissions(CmsPermissionSet.ACCESS_WRITE,false)) {
        getSettings().setErrorMessage(null);
        m_isEditable=new Boolean(false);
        return m_isEditable.booleanValue();
      }
      String resourceName=getParamResource();
      CmsResource file=null;
      CmsLock lock=null;
      try {
        file=getCms().readResource(resourceName,CmsResourceFilter.ALL);
        if (file.isFolder() && !resourceName.endsWith("/")) {
          resourceName+="/";
        }
      }
 catch (      CmsException e) {
        if (LOG.isInfoEnabled()) {
          LOG.info(e.getLocalizedMessage());
        }
      }
      try {
        lock=getCms().getLock(resourceName);
      }
 catch (      CmsException e) {
        lock=CmsLock.getNullLock();
        if (LOG.isErrorEnabled()) {
          LOG.error(e.getLocalizedMessage(),e);
        }
      }
      if (!lock.isNullLock()) {
        if (lock.getType() != CmsLock.TYPE_SHARED_EXCLUSIVE && lock.getType() != CmsLock.TYPE_SHARED_INHERITED && lock.getUserId().equals(getCms().getRequestContext().currentUser().getId())) {
          if (getCms().getRequestContext().currentProject().getId() == lock.getProjectId() || "true".equals(getParamUsetempfileproject())) {
            m_isEditable=new Boolean(true);
            return m_isEditable.booleanValue();
          }
        }
      }
 else       if (OpenCms.getWorkplaceManager().autoLockResources()) {
        m_isEditable=new Boolean(true);
        return m_isEditable.booleanValue();
      }
      m_isEditable=new Boolean(false);
    }
  }
  return m_isEditable.booleanValue();
}
