{
  if (!CmsResourceTypeXmlContent.isXmlContent(res)) {
    return null;
  }
  CmsADEConfigurationManager confManager=OpenCms.getADEConfigurationManager();
  String rootLinkSource=cms.getRequestContext().addSiteRoot(linkSource);
  CmsSitemapConfigurationData sitemapConf=confManager.getSitemapConfiguration(cms,rootLinkSource);
  String typeName=OpenCms.getResourceManager().getResourceType(res.getTypeId()).getTypeName();
  List<CmsDetailPageInfo> pageInfos=sitemapConf.getDetailPageInfo().get(typeName);
  if ((pageInfos == null) || pageInfos.isEmpty()) {
    return (new CmsPropertyDetailPageFinder()).getDetailPage(cms,res,linkSource);
  }
  CmsDetailPageInfo info=pageInfos.get(0);
  String detailPageUri=info.getUri();
  if (!CmsResource.isFolder(detailPageUri)) {
    detailPageUri=CmsResource.getFolderPath(detailPageUri);
  }
  return detailPageUri;
}
