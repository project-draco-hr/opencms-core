{
  String datablockName=this.getTemplateDatablockName(templateSelector);
  Element data=getData(datablockName);
  StringBuffer result=new StringBuffer();
  Document tempDoc=(Document)getXmlDocument().cloneNode(true);
  Element rootElem=tempDoc.getDocumentElement();
  while (rootElem.hasChildNodes()) {
    rootElem.removeChild(rootElem.getFirstChild());
  }
  data=(Element)getXmlParser().importNode(tempDoc,data);
  rootElem.appendChild(data);
  StringWriter out=new StringWriter();
  getXmlParser().getXmlText(tempDoc,out);
  String xmlString=out.toString();
  int endOpeningXmlTag=xmlString.indexOf(">");
  int endOpeningDocTag=xmlString.indexOf(">",endOpeningXmlTag + 1);
  int endOpeningBodyTag=xmlString.indexOf(">",endOpeningDocTag + 1) + 1;
  int startClosingDocTag=xmlString.lastIndexOf("<");
  int startClosingBodyTag=xmlString.lastIndexOf("<",startClosingDocTag - 1);
  xmlString=xmlString.substring(endOpeningBodyTag,startClosingBodyTag);
  xmlString=xmlString.trim();
  return xmlString;
}
