{
  String datablockName=this.getTemplateDatablockName(templateSelector);
  if (html) {
    int startIndex=content.indexOf("<BODY");
    startIndex=content.indexOf(">",startIndex + 1) + 1;
    int endIndex=content.lastIndexOf("</BODY>");
    if (startIndex > 0) {
      content=content.substring(startIndex,endIndex);
    }
  }
  StringBuffer tempXmlString=new StringBuffer();
  tempXmlString.append("<?xml version=\"1.0\"?>\n");
  tempXmlString.append("<" + getXmlDocumentTagName() + ">");
  tempXmlString.append("<template>\n");
  if (html) {
    tempXmlString.append("<![CDATA[");
    content=replace(content,"[","]]><");
    tempXmlString.append(content.trim());
    tempXmlString.append("]]>");
  }
 else {
    tempXmlString.append(content);
  }
  tempXmlString.append("</template>\n");
  tempXmlString.append("</" + getXmlDocumentTagName() + ">\n");
  I_CmsXmlParser parser=getXmlParser();
  StringReader parserReader=new StringReader(tempXmlString.toString());
  Document tempDoc=null;
  try {
    tempDoc=parser.parse(parserReader);
  }
 catch (  Exception e) {
    throwException("PARSING ERROR!",CmsException.C_XML_PARSING_ERROR);
  }
  Element templateNode=(Element)tempDoc.getDocumentElement().getFirstChild();
  setData(datablockName,templateNode);
}
