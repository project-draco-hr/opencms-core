{
  int numElements=nl.getLength();
  Vector collectNames=new Vector();
  for (int i=0; i < numElements; i++) {
    Node n=(Node)nl.item(i);
    if (n.getNodeType() == Node.ELEMENT_NODE && n.getNodeName().toLowerCase().equals(tag.toLowerCase())) {
      String name=((Element)n).getAttribute("name");
      if (name == null || "".equals(name)) {
        if (unnamedAllowed) {
          name="(default)";
        }
 else {
          if (I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING && A_OpenCms.isLogging()) {
            A_OpenCms.log(C_OPENCMS_CRITICAL,"[CmsXmlControlFile] unnamed <" + n.getNodeName() + "> found in OpenCms control file "+ getAbsoluteFilename()+ ".");
          }
          throw new CmsException("Unnamed \"" + n.getNodeName() + "\" found in OpenCms control file "+ getAbsoluteFilename()+ ".",CmsException.C_XML_TAG_MISSING);
        }
      }
      collectNames.addElement(name);
    }
  }
  return collectNames;
}
