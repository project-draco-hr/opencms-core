{
  OutputStream os=null;
  if (m_cms.getRequestContext().isStreaming()) {
    if ((A_OpenCms.isLogging() && I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING)) {
      A_OpenCms.log(C_OPENCMS_STREAMING,getClassName() + "Entering streaming mode for file: " + getAbsoluteFilename());
    }
    try {
      os=m_cms.getRequestContext().getResponse().getOutputStream();
    }
 catch (    Exception e) {
      throw new CmsException(CmsException.C_UNKNOWN_EXCEPTION,e);
    }
  }
 else {
    if ((A_OpenCms.isLogging() && I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING)) {
      A_OpenCms.log(C_OPENCMS_STREAMING,getClassName() + "Disabled streaming mode for file: " + getAbsoluteFilename());
    }
  }
  String datablockName=this.getTemplateDatablockName(templateSelector);
  if (datablockName == null && (templateSelector.toLowerCase().equals("script"))) {
    return "";
  }
  return getProcessedDataValue(datablockName,callingObject,parameters,os);
}
