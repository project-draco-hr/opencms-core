{
  if (!this.isInternalCacheable()) {
    return null;
  }
  if (parameters == null) {
    parameters=new Hashtable();
  }
  if ((dynamicParameter != null) && (!dynamicParameter.isEmpty())) {
    for (int i=0; i < dynamicParameter.size(); i++) {
      String testparameter=(String)dynamicParameter.elementAt(i);
      if (parameters.containsKey(testparameter)) {
        return null;
      }
    }
  }
  CmsRequestContext reqContext=cms.getRequestContext();
  String groupKey="";
  if (group) {
    groupKey=reqContext.currentGroup().getName();
    if ((cacheGroups != null) && (!cacheGroups.isEmpty())) {
      if (!cacheGroups.contains(groupKey)) {
        return null;
      }
    }
  }
  String key="";
  if (uri) {
    key+=reqContext.getUri();
  }
  if (user) {
    key+=reqContext.currentUser().getName();
  }
  key+=groupKey;
  if ((cacheParameter != null) && (!cacheParameter.isEmpty())) {
    for (int i=0; i < cacheParameter.size(); i++) {
      String para=(String)cacheParameter.elementAt(i);
      if (parameters.containsKey(para)) {
        key+=(String)parameters.get(para);
      }
    }
  }
  if (key.equals("")) {
    return null;
  }
  return key;
}
