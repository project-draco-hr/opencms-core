{
  if (!this.isInternalCacheable()) {
    return null;
  }
  if (parameters == null) {
    parameters=new Hashtable();
  }
  if ((m_dynamicParameter != null) && (!m_dynamicParameter.isEmpty())) {
    for (int i=0; i < m_dynamicParameter.size(); i++) {
      String testparameter=(String)m_dynamicParameter.elementAt(i);
      if (parameters.containsKey(testparameter)) {
        return null;
      }
    }
  }
  CmsRequestContext reqContext=cms.getRequestContext();
  String groupKey="";
  if (m_group) {
    groupKey=reqContext.currentGroup().getName();
    if ((m_cacheGroups != null) && (!m_cacheGroups.isEmpty())) {
      if (!m_cacheGroups.contains(groupKey)) {
        return null;
      }
    }
  }
  String key="";
  if (m_uri) {
    key+=reqContext.getUri();
  }
  if (m_user) {
    key+=reqContext.currentUser().getName();
  }
  key+=groupKey;
  if ((m_cacheParameter != null) && (!m_cacheParameter.isEmpty())) {
    for (int i=0; i < m_cacheParameter.size(); i++) {
      String para=(String)m_cacheParameter.elementAt(i);
      if (parameters.containsKey(para)) {
        key+=(String)parameters.get(para);
      }
    }
  }
  if (key.equals("")) {
    return null;
  }
  return key;
}
