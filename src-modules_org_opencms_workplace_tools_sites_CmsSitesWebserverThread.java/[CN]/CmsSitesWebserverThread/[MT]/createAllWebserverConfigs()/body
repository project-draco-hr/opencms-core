{
  String template=FileUtils.readFileToString(new File(m_templatePath));
  List<CmsSite> sites=OpenCms.getSiteManager().getAvailableSites(getCms(),true);
  for (  CmsSite site : sites) {
    if ((site.getSiteMatcher() != null) && site.isWebserver()) {
      String filename=generateWebserverConfigFilename(site);
      getReport().println(Messages.get().container(Messages.RPT_CREATING_CONFIG_FOR_SITE_2,filename,site),I_CmsReport.FORMAT_OK);
      File newFile=new File(filename);
      if (!newFile.exists()) {
        newFile.createNewFile();
      }
      String conf=template.replaceAll(SERVER_NAME_PLACE_HOLDER,site.getSiteMatcher().getServerName());
      if ((site.getAliases() != null) && !site.getAliases().isEmpty()) {
        StringBuffer buf=new StringBuffer();
        buf.append("ServerAlias");
        for (        CmsSiteMatcher alias : site.getAliases()) {
          buf.append(" ");
          buf.append(alias.getServerName());
        }
        conf=template.replaceAll(ALIASES_PLACE_HOLDER,buf.toString());
      }
 else {
        conf=template.replaceAll(ALIASES_PLACE_HOLDER,"");
      }
      FileUtils.writeStringToFile(newFile,conf);
      m_writtenFiles.add(newFile.getAbsolutePath());
    }
  }
}
