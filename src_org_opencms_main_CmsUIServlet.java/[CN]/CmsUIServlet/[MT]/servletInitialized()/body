{
  super.servletInitialized();
  getService().addSessionInitListener(new SessionInitListener(){
    private static final long serialVersionUID=-3191245142912338247L;
    public void sessionInit(    SessionInitEvent event){
      event.getSession().addBootstrapListener(new BootstrapListener(){
        private static final long serialVersionUID=-6249561809984101044L;
        public void modifyBootstrapFragment(        BootstrapFragmentResponse response){
        }
        public void modifyBootstrapPage(        BootstrapPageResponse response){
          CmsObject cms=((CmsUIServlet)getCurrent()).getCmsObject();
          Locale wpLocale=OpenCms.getWorkplaceManager().getWorkplaceLocale(cms);
          response.getDocument().head().appendElement("meta").attr("name","gwt:property").attr("content",wpLocale.toString());
          try {
            response.getDocument().head().appendElement("meta").attr("name",CmsCoreData.DICT_NAME).attr("content",RPC.encodeResponseForSuccess(I_CmsCoreService.class.getMethod("prefetch"),CmsCoreService.prefetch((HttpServletRequest)response.getRequest()),CmsPrefetchSerializationPolicy.instance()));
          }
 catch (          Exception e) {
            LOG.error(e.getLocalizedMessage(),e);
          }
          Element script=new Element(Tag.valueOf("script"),"").attr("type","text/javascript");
          response.getDocument().head().appendChild(script);
          script.appendChild(new DataNode("//<![CDATA[\n" + org.opencms.gwt.ClientMessages.get().export(wpLocale,false) + "\n//]]>",script.baseUri()));
        }
      }
);
    }
  }
);
}
