{
  try {
    if (m_moduledataExport) {
      m_cms.exportModuledata(m_fileName,m_exportPaths,m_exportModules);
    }
 else {
      m_cms.exportResources(m_fileName,m_exportPaths,m_excludeSystem,m_excludeUnchanged,m_exportUserdata);
    }
  }
 catch (  CmsException e) {
    m_session.putValue(C_SESSION_THREAD_ERROR,Utils.getStackTrace(e));
    if (I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING && A_OpenCms.isLogging()) {
      A_OpenCms.log(A_OpenCms.C_OPENCMS_CRITICAL,e.getMessage());
    }
  }
}
