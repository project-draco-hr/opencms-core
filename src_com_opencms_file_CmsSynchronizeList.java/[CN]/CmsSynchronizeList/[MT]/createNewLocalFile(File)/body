{
  FileOutputStream fOut=null;
  if (newFile.exists()) {
    throw new CmsException(newFile.getName() + " already exists on filesystem.");
  }
  try {
    String pathName=newFile.getPath().substring(0,(int)newFile.getPath().lastIndexOf(File.separatorChar) + 1);
    File directory=new File(pathName);
    if (directory.exists()) {
      fOut=new FileOutputStream(newFile);
    }
 else {
      throw new CmsException("[" + this.getClass().getName() + "]"+ " Cannot create file "+ newFile.getName()+ " on filesystem");
    }
  }
 catch (  IOException e) {
    throw new CmsException("[" + this.getClass().getName() + "]"+ " Cannot create file "+ newFile.getName()+ " on filesystem",e);
  }
 finally {
    if (fOut != null) {
      try {
        fOut.close();
      }
 catch (      IOException e) {
      }
    }
  }
}
