{
  if (getConfiguration().showPageNavigation()) {
    setPhotosPerPage(getConfiguration().getThumbCols() * getConfiguration().getThumbRows());
    int pageCount=getAlbumPhotos().size() / getPhotosPerPage();
    if ((getAlbumPhotos().size() % getPhotosPerPage()) != 0) {
      pageCount++;
    }
    setPageCount(pageCount);
    String page=getRequest().getParameter(PARAM_PAGE);
    if (CmsStringUtil.isNotEmpty(page) && getPageCount() > 1) {
      int currentPage=Integer.parseInt(page);
      if (currentPage > getPageCount()) {
        currentPage=getPageCount();
      }
      setCurrentPage(currentPage);
    }
 else {
      setCurrentPage(1);
    }
  }
 else {
    setPhotosPerPage(0);
    setPageCount(1);
    setCurrentPage(1);
  }
}
