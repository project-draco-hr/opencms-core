{
  m_messages=Messages.get().getBundle(getRequestContext().getLocale());
  setConfigErrors(new ArrayList());
  setStyle(new CmsPhotoAlbumStyle());
  try {
    setConfiguration(new CmsPhotoAlbumConfiguration(this,configUri));
  }
 catch (  Exception e) {
    setConfiguration(new CmsPhotoAlbumConfiguration());
    if (e instanceof CmsException) {
      addConfigError(((CmsException)e).getLocalizedMessage(getRequestContext().getLocale()));
    }
 else {
      addConfigError(e.getLocalizedMessage());
    }
  }
  String action=getRequest().getParameter(PARAM_ACTION);
  if (VALUE_ACTION_DETAIL.equals(action)) {
    setDisplayAction(ACTION_DETAIL);
  }
 else   if (VALUE_ACTION_ORIGINAL.equals(action)) {
    setDisplayAction(ACTION_ORIGINAL);
  }
 else {
    setDisplayAction(ACTION_THUMBNAIL);
  }
  calculatePageData();
}
