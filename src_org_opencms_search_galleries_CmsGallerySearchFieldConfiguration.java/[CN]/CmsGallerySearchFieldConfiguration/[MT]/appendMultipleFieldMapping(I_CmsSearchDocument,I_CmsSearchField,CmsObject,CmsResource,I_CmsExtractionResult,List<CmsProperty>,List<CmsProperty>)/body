{
  String mappingName=null;
  String fieldName=field.getName();
  String value=null;
  if (I_CmsSearchField.FIELD_CONTENT.equals(fieldName)) {
    mappingName=I_CmsSearchField.FIELD_CONTENT;
  }
 else   if (I_CmsSearchField.FIELD_TITLE_UNSTORED.equals(fieldName)) {
    mappingName=I_CmsSearchField.FIELD_TITLE_UNSTORED;
  }
 else   if (I_CmsSearchField.FIELD_TITLE.equals(fieldName)) {
    if (!CmsResourceTypeXmlContent.isXmlContent(resource)) {
      value=CmsProperty.get(CmsPropertyDefinition.PROPERTY_TITLE,properties).getValue();
    }
 else {
      mappingName=I_CmsSearchField.FIELD_TITLE_UNSTORED;
    }
  }
 else   if (I_CmsSearchField.FIELD_DESCRIPTION.equals(fieldName)) {
    mappingName=I_CmsSearchField.FIELD_DESCRIPTION;
  }
 else   if (I_CmsSearchField.FIELD_META.equals(fieldName)) {
    mappingName=I_CmsSearchField.FIELD_META;
  }
  for (  Locale locale : OpenCms.getLocaleManager().getAvailableLocales()) {
    if (mappingName != null) {
      if (mappingName == I_CmsSearchField.FIELD_META) {
        String title=extractionResult.getContentItems().get(getLocaleExtendedName(I_CmsSearchField.FIELD_TITLE_UNSTORED,locale));
        String description=extractionResult.getContentItems().get(getLocaleExtendedName(I_CmsSearchField.FIELD_DESCRIPTION,locale));
        StringBuffer v=new StringBuffer();
        if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(title)) {
          v.append(title);
          v.append('\n');
        }
        if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(description)) {
          v.append(description);
        }
        if (v.length() > 0) {
          value=v.toString();
        }
      }
 else {
        String localeMapping=getLocaleExtendedName(mappingName,locale);
        value=extractionResult.getContentItems().get(localeMapping);
      }
    }
    if (value != null) {
      Fieldable fieldable=field.createField(getLocaleExtendedName(fieldName,locale),value);
      ((Document)document.getDocument()).add(fieldable);
    }
  }
  return document;
}
