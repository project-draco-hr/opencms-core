{
  int lockedInProject=CmsDbUtil.UNKNOWN_ID;
  if (getLock().isNullLock() && getResource().getState() != CmsResource.STATE_UNCHANGED) {
    lockedInProject=getResource().getProjectLastModified();
  }
 else {
    if (getResource().getState() != CmsResource.STATE_UNCHANGED) {
      lockedInProject=getProjectId();
    }
 else {
      lockedInProject=getLock().getProjectId();
    }
  }
  return lockedInProject;
}
