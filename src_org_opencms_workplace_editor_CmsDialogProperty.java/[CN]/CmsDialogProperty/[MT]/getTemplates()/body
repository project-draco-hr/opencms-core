{
  TreeMap templates=new TreeMap();
  String templateFolder=I_CmsWpConstants.C_VFS_DIR_TEMPLATES;
  List modules=getCms().getSubFolders(I_CmsWpConstants.C_VFS_PATH_MODULES,false);
  for (int i=0; i < modules.size(); i++) {
    List moduleTemplateFiles=(List)new ArrayList();
    String folder=getCms().readAbsolutePath((CmsFolder)modules.get(i));
    moduleTemplateFiles=getCms().getFilesInFolder(folder + templateFolder);
    for (int j=0; j < moduleTemplateFiles.size(); j++) {
      CmsFile templateFile=(CmsFile)moduleTemplateFiles.get(j);
      String title=getCms().readProperty(getCms().readAbsolutePath(templateFile),I_CmsConstants.C_PROPERTY_TITLE);
      if (title == null) {
        title=templateFile.getName();
      }
      String path=getCms().readAbsolutePath(templateFile);
      templates.put(title,path);
    }
  }
  return templates;
}
