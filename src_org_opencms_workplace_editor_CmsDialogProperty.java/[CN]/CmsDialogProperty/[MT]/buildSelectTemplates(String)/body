{
  Vector names=new Vector();
  Vector values=new Vector();
  Integer selectedValue=new Integer(-1);
  String currentTemplate=null;
  try {
    currentTemplate=getCms().readProperty(getParamResource(),I_CmsConstants.C_PROPERTY_TEMPLATE,true);
    selectedValue=CmsHelperMastertemplates.getTemplates(getCms(),names,values,currentTemplate,-1);
  }
 catch (  CmsException e) {
  }
  if (currentTemplate == null) {
    currentTemplate="";
  }
  if (selectedValue.intValue() == -1) {
    names.removeAllElements();
    values.removeAllElements();
    String name=currentTemplate;
    try {
      name=getCms().readProperty(name,I_CmsConstants.C_PROPERTY_TITLE);
    }
 catch (    CmsException exc) {
    }
    names.add(name);
    values.add(currentTemplate);
  }
  String hiddenField="<input type=\"hidden\" name=\"" + PREFIX_HIDDEN + I_CmsConstants.C_PROPERTY_TEMPLATE+ "\" value=\""+ currentTemplate+ "\">";
  return buildSelect(attributes,names,values,selectedValue.intValue(),false) + hiddenField;
}
