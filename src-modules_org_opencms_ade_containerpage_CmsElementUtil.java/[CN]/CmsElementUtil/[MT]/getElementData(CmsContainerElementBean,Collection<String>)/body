{
  CmsResource resource=m_cms.readResource(element.getElementId());
  CmsResourceUtil resUtil=new CmsResourceUtil(m_cms,resource);
  CmsContainerElement elementBean=new CmsContainerElement();
  elementBean.setClientId(element.getClientId());
  elementBean.setFile(resUtil.getFullPath());
  elementBean.setLastModifiedDate(resource.getDateLastModified());
  elementBean.setLastModifiedByUser(m_cms.readUser(resource.getUserLastModified()).getName());
  elementBean.setNavText(resUtil.getNavText());
  elementBean.setTitle(resUtil.getTitle());
  Map<String,CmsXmlContentProperty> propertyConfig=CmsXmlContentPropertyHelper.getPropertyInfo(m_cms,resource);
  elementBean.setProperties(convertPropertiesToClientFormat(m_cms,element.getProperties(),propertyConfig));
  elementBean.setPropertyConfig(new HashMap<String,CmsXmlContentProperty>(propertyConfig));
  elementBean.setNoEditReason(CmsEncoder.escapeHtml(resUtil.getNoEditReason(OpenCms.getWorkplaceManager().getWorkplaceLocale(m_cms))));
  elementBean.setStatus(resUtil.getStateAbbreviation());
  Map<String,String> contents=new HashMap<String,String>();
  if (resource.getTypeId() == CmsResourceTypeXmlContainerPage.SUB_CONTAINER_TYPE_ID) {
    CmsXmlSubContainer xmlSubContainer=CmsXmlSubContainerFactory.unmarshal(m_cms,resource,m_req);
    CmsSubContainerBean subContainer=xmlSubContainer.getSubContainer(m_cms,m_cms.getRequestContext().getLocale());
    elementBean.setSubContainer(true);
    elementBean.setDescription(subContainer.getDescription());
    if (subContainer.getTypes().isEmpty()) {
      if (subContainer.getElements().isEmpty()) {
        String emptySub="<div>NEW AND EMPTY</div>";
        for (        String type : types) {
          contents.put(type,emptySub);
        }
      }
 else {
        return null;
      }
    }
 else {
      for (      String type : subContainer.getTypes()) {
        if (types.contains(type)) {
          contents.put(type,"<div>should not be used</div>");
        }
      }
    }
    List<String> subItems=new ArrayList<String>();
    for (    CmsContainerElementBean subElement : subContainer.getElements()) {
      subItems.add(subElement.getClientId());
    }
    elementBean.setSubItems(subItems);
  }
 else {
    Iterator<String> it=types.iterator();
    I_CmsResourceType resType=OpenCms.getResourceManager().getResourceType(resource);
    while (it.hasNext()) {
      String type=it.next();
      String formatterUri=resType.getFormatterForContainerType(m_cms,resource,type);
      if (CmsStringUtil.isEmptyOrWhitespaceOnly(formatterUri)) {
        continue;
      }
      try {
        String jspResult=getElementContent(element,m_cms.readResource(formatterUri));
        contents.put(type,jspResult);
      }
 catch (      Exception e) {
      }
    }
  }
  elementBean.setContents(contents);
  return elementBean;
}
