{
  I_CmsRequest req=cms.getRequestContext().getRequest();
  byte[] templatedata=null;
  byte[] result=null;
  templatedata=generateOutput(cms,file,startTemplateClass,req);
  String version=Version.getVersion();
  Parser parser=createParser();
  InputStream in=new ByteArrayInputStream(templatedata);
  InputSource source=new InputSource(in);
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  try {
    Driver driver=new Driver();
    driver.setRenderer("org.apache.fop.render.pdf.PDFRenderer",version);
    driver.addElementMapping("org.apache.fop.fo.StandardElementMapping");
    driver.addElementMapping("org.apache.fop.svg.SVGElementMapping");
    driver.setWriter(new PrintWriter(out));
    driver.buildFOTree(parser,source);
    driver.format();
    driver.render();
  }
 catch (  Exception e) {
    A_OpenCms.log(C_OPENCMS_CRITICAL,"[CmsPdfLauncher] PDF-Renderer Error: " + e.getMessage());
  }
  result=out.toByteArray();
  if (result != null) {
    writeBytesToResponse(cms,result);
  }
}
