{
  List items=null;
  if (!"".equals(getParamGalleryPath())) {
    try {
      List resourceList=getCms().readResources(getParamGalleryPath(),CmsResourceFilter.ONLY_VISIBLE_NO_DELETED,false);
      items=new ArrayList(resourceList.size());
      for (int i=0; i < resourceList.size(); i++) {
        CmsResource res=(CmsResource)resourceList.get(i);
        if (!res.isFolder()) {
          items.add(res);
        }
      }
    }
 catch (    CmsException e) {
      if (OpenCms.getLog(this).isErrorEnabled()) {
        OpenCms.getLog(this).error(e);
      }
    }
catch (    NullPointerException e) {
    }
  }
  return items;
}
