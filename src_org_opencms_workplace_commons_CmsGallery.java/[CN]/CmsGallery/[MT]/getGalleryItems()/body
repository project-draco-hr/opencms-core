{
  List items=null;
  int resTypeId=getGalleryItemsTypeId();
  if (CmsStringUtil.isNotEmpty(getParamGalleryPath())) {
    try {
      CmsResourceFilter filter;
      if (resTypeId == -1) {
        filter=CmsResourceFilter.ONLY_VISIBLE_NO_DELETED.addRequireFile();
      }
 else {
        filter=CmsResourceFilter.ONLY_VISIBLE_NO_DELETED.addRequireType(resTypeId);
      }
      items=getCms().readResources(getParamGalleryPath(),filter,false);
      if (CmsStringUtil.isNotEmpty(getParamSearchWord())) {
        items=getSearchHits(items);
      }
    }
 catch (    CmsException e) {
      if (OpenCms.getLog(this).isErrorEnabled()) {
        OpenCms.getLog(this).error(e);
      }
    }
catch (    NullPointerException e) {
    }
  }
  return items;
}
