{
  List galleries=getGalleries(resTypeId);
  if (galleries != null && galleries.size() > 0) {
    int galleryCount=galleries.size();
    List options=new ArrayList(galleryCount);
    List values=new ArrayList(galleryCount);
    int selectedIndex=-1;
    for (int i=0; i < galleryCount; i++) {
      CmsResource res=(CmsResource)galleries.get(i);
      String path=getCms().getSitePath(res);
      if (path.equals(getParamGalleryPath())) {
        selectedIndex=i;
      }
      String title="";
      try {
        title=getCms().readPropertyObject(path,I_CmsConstants.C_PROPERTY_TITLE,false).getValue("");
      }
 catch (      CmsException e) {
      }
      options.add(title + " (" + path+ ")");
      values.add(path);
    }
    String attrs="name=\"" + PARAM_GALLERYPATH;
    attrs+="\" size=\"1\" style=\"width: 100%;\" onchange=\"displayGallery();\"";
    return buildSelect(attrs,options,values,selectedIndex);
  }
 else {
    StringBuffer result=new StringBuffer(4);
    result.append("<input type=\"hidden\" name=\"");
    result.append(PARAM_GALLERYPATH);
    result.append("\">");
    return result.toString();
  }
}
