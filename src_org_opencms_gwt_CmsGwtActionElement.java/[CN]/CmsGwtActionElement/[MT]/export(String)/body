{
  String wpLocale=OpenCms.getWorkplaceManager().getWorkplaceLocale(getCmsObject()).getLanguage();
  if (CmsStringUtil.isEmptyOrWhitespaceOnly(wpLocale)) {
    wpLocale=Locale.ENGLISH.getLanguage();
  }
  StringBuffer sb=new StringBuffer();
  sb.append("var ").append(CMS_NO_PERMUTATION_MESSAGE).append("='").append(Messages.get().getBundle(OpenCms.getWorkplaceManager().getWorkplaceLocale(getCmsObject())).key(Messages.ERR_NO_PERMUTATION_AVAILABLE_0)).append("';\n");
  wrapScript(sb);
  sb.append("<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />");
  String prefetchedData=exportDictionary(CmsCoreData.DICT_NAME,I_CmsCoreService.class.getMethod("prefetch"),getCoreData());
  sb.append(prefetchedData);
  sb.append(ClientMessages.get().export(getRequest()));
  sb.append("<style type=\"text/css\">\n @import url(\"").append(iconCssLink(iconCssClassPrefix)).append("\");\n</style>\n");
  sb.append("<meta name=\"gwt:property\" content=\"locale=").append(wpLocale).append("\" />\n");
  return sb.toString();
}
