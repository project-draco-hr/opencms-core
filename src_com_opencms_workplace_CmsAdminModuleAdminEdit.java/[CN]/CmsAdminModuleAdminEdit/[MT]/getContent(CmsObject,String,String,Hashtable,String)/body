{
  if (C_DEBUG && (A_OpenCms.isLogging() && I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING)) {
    A_OpenCms.log(C_OPENCMS_DEBUG,this.getClassName() + "getting content of element " + ((elementName == null) ? "<root>" : elementName));
    A_OpenCms.log(C_OPENCMS_DEBUG,this.getClassName() + "template file is: " + templateFile);
    A_OpenCms.log(C_OPENCMS_DEBUG,this.getClassName() + "selected template section is: " + ((templateSelector == null) ? "<default>" : templateSelector));
  }
  CmsXmlTemplateFile xmlTemplateDocument=getOwnTemplateFile(cms,templateFile,elementName,parameters,templateSelector);
  I_CmsSession session=cms.getRequestContext().getSession(true);
  I_CmsRegistry reg=cms.getRegistry();
  Hashtable sessionData=(Hashtable)session.getValue(C_SESSION_MODULE_ADMIN_DATA);
  String module=(String)sessionData.get(C_MODULE_PACKETNAME);
  xmlTemplateDocument.setData("packetname",module);
  Vector paraNames=(Vector)sessionData.get(C_SESSION_MODULE_ADMIN_PROP_NAMES);
  Vector paraDescr=(Vector)sessionData.get(C_SESSION_MODULE_ADMIN_PROP_DESCR);
  Vector paraTyp=(Vector)sessionData.get(C_SESSION_MODULE_ADMIN_PROP_TYP);
  Vector paraVal=(Vector)sessionData.get(C_SESSION_MODULE_ADMIN_PROP_VAL);
  String prop=(String)parameters.get("prop");
  String delete=(String)parameters.get("delete");
  String ok=(String)parameters.get("ok");
  String step=(String)parameters.get("step");
  if ((prop == null) || ("".equals(prop))) {
    if ((ok != null) && (!"".equals(ok))) {
      String name=getStringValue((String)parameters.get("NAME"));
      String description=getStringValue((String)parameters.get("BESCHREIBUNG"));
      String type=(String)parameters.get("TYP");
      String value=(String)parameters.get("WERT");
      String newValue=checkType(type,value);
      if ((checkName(name)) && (newValue != null)) {
        paraNames.addElement(name);
        paraDescr.addElement(description);
        paraTyp.addElement(type);
        paraVal.addElement(newValue);
        templateSelector="done";
      }
 else {
        session.putValue("parametername",name);
        session.putValue("description",description);
        session.putValue("parametertype",type);
        session.putValue("parametervalue",value);
        templateSelector="errornew";
      }
    }
 else {
      if ((step == null) || ("".equals(step))) {
        xmlTemplateDocument.setData("paraname","");
        xmlTemplateDocument.setData("paranameok","");
        xmlTemplateDocument.setData("value","");
        xmlTemplateDocument.setData("description","");
        xmlTemplateDocument.setData("delybutton"," ");
      }
 else {
        xmlTemplateDocument.setData("paraname","");
        xmlTemplateDocument.setData("paranameok",(String)session.getValue("parametername"));
        xmlTemplateDocument.setData("value",(String)session.getValue("parametervalue"));
        xmlTemplateDocument.setData((String)session.getValue("parametertype"),"selected");
        xmlTemplateDocument.setData("description",(String)session.getValue("description"));
        xmlTemplateDocument.setData("delybutton"," ");
        session.removeValue("packagename");
        session.removeValue("parametervalue");
        session.removeValue("parametertype");
        session.removeValue("description");
      }
    }
  }
 else {
    if ((ok != null) && (!"".equals(ok))) {
      String type=getStringValue((String)parameters.get("TYP"));
      String value=getStringValue((String)parameters.get("WERT"));
      String newValue=checkType(type,value);
      if (newValue != null) {
        int i=paraNames.indexOf(prop);
        paraNames.removeElementAt(i);
        paraDescr.removeElementAt(i);
        paraTyp.removeElementAt(i);
        paraVal.removeElementAt(i);
        paraNames.addElement(prop);
        paraDescr.addElement(getStringValue((String)parameters.get("BESCHREIBUNG")));
        paraTyp.addElement(type);
        paraVal.addElement(newValue);
        templateSelector="done";
      }
 else {
        session.putValue("parametername",prop);
        session.putValue("description",getStringValue((String)parameters.get("BESCHREIBUNG")));
        session.putValue("parametertype",type);
        session.putValue("parametervalue",value);
        templateSelector="errorold";
      }
    }
 else {
      if ((delete != null) && (!"".equals(delete))) {
        int i=paraNames.indexOf(prop);
        paraNames.removeElementAt(i);
        paraDescr.removeElementAt(i);
        paraTyp.removeElementAt(i);
        paraVal.removeElementAt(i);
        templateSelector="done";
      }
 else {
        if ((step == null) || ("".equals(step))) {
          int i=paraNames.indexOf(prop);
          xmlTemplateDocument.setData("paraname",prop);
          xmlTemplateDocument.setData("nameentry",prop);
          xmlTemplateDocument.setData("value",(String)paraVal.elementAt(i));
          xmlTemplateDocument.setData("description",(String)paraDescr.elementAt(i));
          xmlTemplateDocument.setData((String)paraTyp.elementAt(i),"selected");
          xmlTemplateDocument.setData("delybutton",xmlTemplateDocument.getProcessedDataValue("deletebutton"));
        }
 else {
          prop=(String)session.getValue("parametername");
          xmlTemplateDocument.setData("paraname",prop);
          xmlTemplateDocument.setData("nameentry",prop);
          xmlTemplateDocument.setData("value",(String)session.getValue("parametervalue"));
          xmlTemplateDocument.setData("description",(String)session.getValue("description"));
          xmlTemplateDocument.setData((String)session.getValue("parametertype"),"selected");
          xmlTemplateDocument.setData("delybutton",xmlTemplateDocument.getProcessedDataValue("deletebutton"));
          session.removeValue("packagename");
          session.removeValue("parametervalue");
          session.removeValue("parametertype");
          session.removeValue("description");
        }
      }
    }
  }
  return startProcessing(cms,xmlTemplateDocument,elementName,parameters,templateSelector);
}
