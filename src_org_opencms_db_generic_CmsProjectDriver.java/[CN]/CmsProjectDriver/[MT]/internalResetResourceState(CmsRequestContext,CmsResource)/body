{
  try {
    if (resource.getState() != I_CmsConstants.C_STATE_UNCHANGED) {
      resource.setState(I_CmsConstants.C_STATE_UNCHANGED);
      m_driverManager.getVfsDriver().writeResourceState(context.currentProject(),resource,CmsDriverManager.C_UPDATE_ALL);
    }
    m_driverManager.getVfsDriver().writeLastModifiedProjectId(context.currentProject(),0,resource);
  }
 catch (  CmsException e) {
    if (OpenCms.getLog(this).isErrorEnabled()) {
      OpenCms.getLog(this).error("Error reseting resource state of " + resource.toString(),e);
    }
    throw e;
  }
}
