{
  try {
    if (readProject(I_CmsConstants.C_PROJECT_ONLINE_ID) != null) {
      return;
    }
  }
 catch (  CmsException exc) {
  }
  if (I_CmsLogChannels.C_PREPROCESSOR_IS_LOGGING && A_OpenCms.isLogging()) {
    A_OpenCms.log(I_CmsLogChannels.C_OPENCMS_INIT,"[" + this.getClass().getName() + "] Initial setup of the OpenCms database starts NOW!");
  }
  CmsGroup guests=m_driverManager.getUserDriver().createGroup(CmsUUID.getConstantUUID(I_CmsConstants.C_GROUP_GUEST),I_CmsConstants.C_GROUP_GUEST,"the guest-group",I_CmsConstants.C_FLAG_ENABLED,null);
  CmsGroup administrators=m_driverManager.getUserDriver().createGroup(CmsUUID.getConstantUUID(I_CmsConstants.C_GROUP_ADMIN),I_CmsConstants.C_GROUP_ADMIN,"the admin-group",I_CmsConstants.C_FLAG_ENABLED | I_CmsConstants.C_FLAG_GROUP_PROJECTMANAGER,null);
  CmsGroup users=m_driverManager.getUserDriver().createGroup(CmsUUID.getConstantUUID(I_CmsConstants.C_GROUP_USERS),I_CmsConstants.C_GROUP_USERS,"the users-group to access the workplace",I_CmsConstants.C_FLAG_ENABLED | I_CmsConstants.C_FLAG_GROUP_ROLE | I_CmsConstants.C_FLAG_GROUP_PROJECTCOWORKER,I_CmsConstants.C_GROUP_GUEST);
  CmsGroup projectleader=m_driverManager.getUserDriver().createGroup(CmsUUID.getConstantUUID(I_CmsConstants.C_GROUP_PROJECTLEADER),I_CmsConstants.C_GROUP_PROJECTLEADER,"the projectmanager-group",I_CmsConstants.C_FLAG_ENABLED | I_CmsConstants.C_FLAG_GROUP_PROJECTMANAGER | I_CmsConstants.C_FLAG_GROUP_PROJECTCOWORKER| I_CmsConstants.C_FLAG_GROUP_ROLE,users.getName());
  CmsUser guest=m_driverManager.getUserDriver().addUser(I_CmsConstants.C_USER_GUEST,"","the guest-user"," "," "," ",0,0,I_CmsConstants.C_FLAG_ENABLED,new Hashtable(),guests," "," ",I_CmsConstants.C_USER_TYPE_SYSTEMUSER);
  CmsUser admin=m_driverManager.getUserDriver().addUser(I_CmsConstants.C_USER_ADMIN,"admin","the admin-user"," "," "," ",0,0,I_CmsConstants.C_FLAG_ENABLED,new Hashtable(),administrators," "," ",I_CmsConstants.C_USER_TYPE_SYSTEMUSER);
  m_driverManager.getUserDriver().addUserToGroup(guest.getId(),guests.getId());
  m_driverManager.getUserDriver().addUserToGroup(admin.getId(),administrators.getId());
  m_driverManager.getWorkflowDriver().writeTaskType(1,0,"../taskforms/adhoc.asp","Ad-Hoc","30308",1,1);
  CmsTask task=m_driverManager.getWorkflowDriver().createTask(0,0,1,admin.getId(),admin.getId(),administrators.getId(),I_CmsConstants.C_PROJECT_ONLINE,new java.sql.Timestamp(new java.util.Date().getTime()),new java.sql.Timestamp(new java.util.Date().getTime()),I_CmsConstants.C_TASK_PRIORITY_NORMAL);
  CmsProject online=createProject(admin,guests,projectleader,task,I_CmsConstants.C_PROJECT_ONLINE,"the online-project",I_CmsConstants.C_FLAG_ENABLED,I_CmsConstants.C_PROJECT_TYPE_NORMAL);
  CmsFolder onlineRootFolder=m_driverManager.getVfsDriver().createFolder(admin,online,CmsUUID.getNullUUID(),CmsUUID.getNullUUID(),I_CmsConstants.C_ROOT,0);
  onlineRootFolder.setState(I_CmsConstants.C_STATE_UNCHANGED);
  m_driverManager.getVfsDriver().writeFolder(online,onlineRootFolder,CmsDriverManager.C_UPDATE_ALL);
  CmsFolder onlineDefaultFolder=m_driverManager.getVfsDriver().createFolder(admin,online,onlineRootFolder.getId(),CmsUUID.getNullUUID(),I_CmsConstants.C_DEFAULT_SITE,0);
  onlineDefaultFolder.setState(I_CmsConstants.C_STATE_UNCHANGED);
  m_driverManager.getVfsDriver().writeFolder(online,onlineDefaultFolder,CmsDriverManager.C_UPDATE_ALL);
  CmsUUID onlineDefaultId=onlineDefaultFolder.getId();
  m_driverManager.getUserDriver().createAccessControlEntry(online,onlineRootFolder.getResourceAceId(),administrators.getId(),I_CmsConstants.C_PERMISSION_READ | I_CmsConstants.C_PERMISSION_WRITE | I_CmsConstants.C_PERMISSION_VIEW| I_CmsConstants.C_PERMISSION_CONTROL,0,I_CmsConstants.C_ACCESSFLAGS_INHERIT | I_CmsConstants.C_ACCESSFLAGS_GROUP);
  m_driverManager.getUserDriver().createAccessControlEntry(online,onlineRootFolder.getResourceAceId(),projectleader.getId(),I_CmsConstants.C_PERMISSION_READ | I_CmsConstants.C_PERMISSION_WRITE | I_CmsConstants.C_PERMISSION_VIEW| I_CmsConstants.C_PERMISSION_CONTROL,0,I_CmsConstants.C_ACCESSFLAGS_INHERIT | I_CmsConstants.C_ACCESSFLAGS_GROUP);
  m_driverManager.getUserDriver().createAccessControlEntry(online,onlineRootFolder.getResourceAceId(),users.getId(),I_CmsConstants.C_PERMISSION_READ | I_CmsConstants.C_PERMISSION_WRITE | I_CmsConstants.C_PERMISSION_VIEW| I_CmsConstants.C_PERMISSION_CONTROL,0,I_CmsConstants.C_ACCESSFLAGS_INHERIT | I_CmsConstants.C_ACCESSFLAGS_GROUP);
  m_driverManager.getUserDriver().createAccessControlEntry(online,onlineRootFolder.getResourceAceId(),guests.getId(),I_CmsConstants.C_PERMISSION_READ | I_CmsConstants.C_PERMISSION_VIEW,0,I_CmsConstants.C_ACCESSFLAGS_INHERIT | I_CmsConstants.C_ACCESSFLAGS_GROUP);
  CmsFolder onlineVfsFolder=m_driverManager.getVfsDriver().createFolder(admin,online,onlineDefaultId,CmsUUID.getNullUUID(),I_CmsConstants.C_ROOTNAME_VFS,0);
  onlineVfsFolder.setState(I_CmsConstants.C_STATE_UNCHANGED);
  m_driverManager.getVfsDriver().writeFolder(online,onlineVfsFolder,CmsDriverManager.C_UPDATE_ALL);
  CmsFolder onlineCosFolder=m_driverManager.getVfsDriver().createFolder(admin,online,onlineDefaultId,CmsUUID.getNullUUID(),I_CmsConstants.C_ROOTNAME_COS,0);
  onlineCosFolder.setState(I_CmsConstants.C_STATE_UNCHANGED);
  m_driverManager.getVfsDriver().writeFolder(online,onlineCosFolder,CmsDriverManager.C_UPDATE_ALL);
  task=m_driverManager.getWorkflowDriver().createTask(0,0,1,admin.getId(),admin.getId(),administrators.getId(),"_setupProject",new java.sql.Timestamp(new java.util.Date().getTime()),new java.sql.Timestamp(new java.util.Date().getTime()),I_CmsConstants.C_TASK_PRIORITY_NORMAL);
  CmsProject setup=createProject(admin,administrators,administrators,task,"_setupProject","Initial site import",I_CmsConstants.C_FLAG_ENABLED,I_CmsConstants.C_PROJECT_TYPE_TEMPORARY);
  CmsFolder setupRootFolder=m_driverManager.getVfsDriver().createFolder(admin,setup,onlineRootFolder,CmsUUID.getNullUUID(),I_CmsConstants.C_ROOT);
  setupRootFolder.setState(I_CmsConstants.C_STATE_UNCHANGED);
  m_driverManager.getVfsDriver().writeFolder(setup,setupRootFolder,CmsDriverManager.C_UPDATE_ALL);
  CmsFolder setupDefaultFolder=m_driverManager.getVfsDriver().createFolder(admin,setup,onlineDefaultFolder,onlineDefaultFolder.getParentId(),I_CmsConstants.C_DEFAULT_SITE);
  setupDefaultFolder.setState(I_CmsConstants.C_STATE_UNCHANGED);
  setupDefaultFolder.setState(I_CmsConstants.C_STATE_UNCHANGED);
  m_driverManager.getVfsDriver().writeFolder(setup,setupDefaultFolder,CmsDriverManager.C_UPDATE_ALL);
  m_driverManager.getUserDriver().createAccessControlEntry(setup,onlineRootFolder.getResourceAceId(),administrators.getId(),I_CmsConstants.C_PERMISSION_READ | I_CmsConstants.C_PERMISSION_WRITE | I_CmsConstants.C_PERMISSION_VIEW| I_CmsConstants.C_PERMISSION_CONTROL,0,I_CmsConstants.C_ACCESSFLAGS_INHERIT | I_CmsConstants.C_ACCESSFLAGS_GROUP);
  m_driverManager.getUserDriver().createAccessControlEntry(setup,onlineRootFolder.getResourceAceId(),projectleader.getId(),I_CmsConstants.C_PERMISSION_READ | I_CmsConstants.C_PERMISSION_WRITE | I_CmsConstants.C_PERMISSION_VIEW| I_CmsConstants.C_PERMISSION_CONTROL,0,I_CmsConstants.C_ACCESSFLAGS_INHERIT | I_CmsConstants.C_ACCESSFLAGS_GROUP);
  m_driverManager.getUserDriver().createAccessControlEntry(setup,onlineRootFolder.getResourceAceId(),users.getId(),I_CmsConstants.C_PERMISSION_READ | I_CmsConstants.C_PERMISSION_WRITE | I_CmsConstants.C_PERMISSION_VIEW| I_CmsConstants.C_PERMISSION_CONTROL,0,I_CmsConstants.C_ACCESSFLAGS_INHERIT | I_CmsConstants.C_ACCESSFLAGS_GROUP);
  m_driverManager.getUserDriver().createAccessControlEntry(setup,onlineRootFolder.getResourceAceId(),guests.getId(),I_CmsConstants.C_PERMISSION_READ | I_CmsConstants.C_PERMISSION_VIEW,0,I_CmsConstants.C_ACCESSFLAGS_INHERIT | I_CmsConstants.C_ACCESSFLAGS_GROUP);
  CmsFolder setupVfsFolder=m_driverManager.getVfsDriver().createFolder(admin,setup,onlineVfsFolder,onlineVfsFolder.getParentId(),I_CmsConstants.C_ROOTNAME_VFS);
  setupVfsFolder.setState(I_CmsConstants.C_STATE_UNCHANGED);
  m_driverManager.getVfsDriver().writeFolder(setup,setupVfsFolder,CmsDriverManager.C_UPDATE_ALL);
  CmsFolder setupCosFolder=m_driverManager.getVfsDriver().createFolder(admin,setup,onlineCosFolder,onlineCosFolder.getParentId(),I_CmsConstants.C_ROOTNAME_COS);
  setupCosFolder.setState(I_CmsConstants.C_STATE_UNCHANGED);
  m_driverManager.getVfsDriver().writeFolder(setup,setupCosFolder,CmsDriverManager.C_UPDATE_ALL);
}
