{
  Map<String,CmsComputedPropertyValue> result=new HashMap<String,CmsComputedPropertyValue>();
  Set<String> keys=new HashSet<String>();
  keys.addAll(m_currentProperties.keySet());
  keys.addAll(ownProps.keySet());
  for (  String propName : keys) {
    CmsSimplePropertyValue ownProp=ownProps.get(propName);
    if (shouldInherit(propName)) {
      CmsComputedPropertyValue parentValue=m_currentProperties.get(propName);
      CmsComputedPropertyValue childValue=CmsComputedPropertyValue.create(ownProp,location);
      CmsComputedPropertyValue combinedValue=combineParentAndChildValues(parentValue,childValue);
      if (combinedValue != null) {
        result.put(propName,combinedValue);
      }
    }
 else {
      if (ownProp != null) {
        result.put(propName,CmsComputedPropertyValue.create(ownProp,location));
      }
    }
  }
  return new CmsPropertyInheritanceState(result,m_propertyConfig);
}
