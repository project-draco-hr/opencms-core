{
  Vector folders=new Vector();
  Vector files=new Vector();
  CmsFolder folder;
  CmsFile file;
  folders=cms.getSubFolders(folderName);
  files=cms.getFilesInFolder(folderName);
  for (int i=0; i < folders.size(); i++) {
    folder=(CmsFolder)folders.elementAt(i);
    if ((!folder.inProject(cms.onlineProject())) && checkAccess(cms,folder)) {
      if (folder.getState() != C_STATE_UNCHANGED) {
        addResource(resources,filter,(CmsResource)folder);
      }
      getFiles(cms,folder.getAbsolutePath(),resources,filter);
    }
  }
  for (int i=0; i < files.size(); i++) {
    file=(CmsFile)files.elementAt(i);
    if ((!file.inProject(cms.onlineProject())) && (file.getState() != C_STATE_UNCHANGED) && checkAccess(cms,file)) {
      addResource(resources,filter,(CmsResource)file);
    }
  }
}
