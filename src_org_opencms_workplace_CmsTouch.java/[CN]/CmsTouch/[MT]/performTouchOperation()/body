{
  CmsResource sourceRes=getCms().readFileHeader(getParamResource(),CmsResourceFilter.ALL);
  if (sourceRes.isFolder() && !DIALOG_WAIT.equals(getParamAction())) {
    return false;
  }
  String filename=getParamResource();
  long timeStamp=-1;
  try {
    if (getParamNewtimestamp() == null) {
      timeStamp=sourceRes.getDateLastModified();
    }
 else {
      timeStamp=getCalendarDate(getParamNewtimestamp(),true);
    }
  }
 catch (  ParseException e) {
    throw new CmsException("Error in date/time String \"" + getParamNewtimestamp() + "\", cannot parse correct date value",CmsException.C_BAD_NAME,e);
  }
  long releasedate=CmsResource.DATE_RELEASED_DEFAULT;
  try {
    if ((getParamReleasedate() != null) && (!getParamReleasedate().startsWith(C_RELEASE_EXPIRE_DEFAULT))) {
      releasedate=getCalendarDate(getParamReleasedate(),true);
    }
  }
 catch (  ParseException e) {
    throw new CmsException("Error in date/time String \"" + getParamReleasedate() + "\", cannot parse correct date value",CmsException.C_BAD_NAME,e);
  }
  long expiredate=CmsResource.DATE_EXPIRED_DEFAULT;
  try {
    if ((getParamExpiredate() != null) && (!getParamExpiredate().startsWith(C_RELEASE_EXPIRE_DEFAULT))) {
      expiredate=getCalendarDate(getParamExpiredate(),true);
    }
  }
 catch (  ParseException e) {
    throw new CmsException("Error in date/time String \"" + getParamExpiredate() + "\", cannot parse correct date value",CmsException.C_BAD_NAME,e);
  }
  boolean touchRecursive="true".equalsIgnoreCase(getParamRecursive());
  if (timeStamp != -1) {
    checkLock(getParamResource());
    getCms().touch(filename,timeStamp,releasedate,expiredate,touchRecursive);
  }
  return true;
}
