{
  I_CmsReport report=getReport();
  try {
    if (LOG.isDebugEnabled()) {
      LOG.debug(Messages.get().key(Messages.LOG_DELETE_THREAD_STARTED_0));
    }
    Iterator j=m_moduleNames.iterator();
    while (j.hasNext()) {
      String moduleName=(String)j.next();
      moduleName=moduleName.replace('\\','/');
      CmsProject project=null;
      Locale userLocale=getCms().getRequestContext().getLocale();
      project=getCms().createProject(Messages.get().key(userLocale,Messages.GUI_DELETE_MODULE_PROJECT_NAME_0,null),Messages.get().key(userLocale,Messages.GUI_DELETE_MODULE_PROJECT_DESC_1,new Object[]{moduleName}),OpenCms.getDefaultUsers().getGroupAdministrators(),OpenCms.getDefaultUsers().getGroupAdministrators(),I_CmsConstants.C_PROJECT_TYPE_TEMPORARY);
      getCms().getRequestContext().setCurrentProject(project);
      report.print(Messages.get().container(Messages.RPT_DELETE_MODULE_BEGIN_0),I_CmsReport.C_FORMAT_HEADLINE);
      report.println(org.opencms.report.Messages.get().container(org.opencms.report.Messages.RPT_ARGUMENT_HTML_ITAG_1,moduleName),I_CmsReport.C_FORMAT_HEADLINE);
      List projectFiles=OpenCms.getModuleManager().getModule(moduleName).getResources();
      for (int i=0; i < projectFiles.size(); i++) {
        try {
          getCms().copyResourceToProject((String)projectFiles.get(i));
        }
 catch (        CmsException e) {
          LOG.error(Messages.get().key(Messages.LOG_MOVE_RESOURCE_FAILED_1,projectFiles.get(i)),e);
          report.println(e);
        }
      }
      OpenCms.getModuleManager().deleteModule(getCms(),moduleName,m_replaceMode,report);
      report.println(Messages.get().container(Messages.RPT_PUBLISH_PROJECT_BEGIN_0),I_CmsReport.C_FORMAT_HEADLINE);
      getCms().unlockProject(project.getId());
      getCms().publishProject(report);
      report.println(Messages.get().container(Messages.RPT_PUBLISH_PROJECT_END_0),I_CmsReport.C_FORMAT_HEADLINE);
      report.println(Messages.get().container(Messages.RPT_DELETE_MODULE_END_0),I_CmsReport.C_FORMAT_HEADLINE);
      if (LOG.isDebugEnabled()) {
        LOG.debug(Messages.get().key(Messages.LOG_DELETE_THREAD_FINISHED_0));
      }
    }
  }
 catch (  Exception e) {
    report.println(e);
    LOG.error(Messages.get().key(Messages.LOG_MODULE_DELETE_FAILED_1,m_moduleNames),e);
  }
}
