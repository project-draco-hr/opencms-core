{
  if (getParamListAction().equals(LIST_MACTION_ADD)) {
    try {
      Iterator itItems=getSelectedItems().iterator();
      while (itItems.hasNext()) {
        CmsListItem listItem=(CmsListItem)itItems.next();
        CmsUser user=getCms().readUser((String)listItem.get(LIST_COLUMN_LOGIN));
        List currentUsers=OpenCms.getOrgUnitManager().getUsers(getCms(),getParamOufqn(),false);
        boolean inOrgUnit=false;
        Iterator itCurrentUsers=currentUsers.iterator();
        while (itCurrentUsers.hasNext()) {
          CmsUser currentUser=(CmsUser)itCurrentUsers.next();
          if (currentUser.getSimpleName().equals(user.getSimpleName())) {
            inOrgUnit=true;
          }
        }
        if (!inOrgUnit) {
          List ouUsers=(ArrayList)getJsp().getRequest().getSession().getAttribute(A_CmsOrgUnitUsersList.ORGUNIT_USERS);
          if (ouUsers == null) {
            ouUsers=new ArrayList();
          }
          ouUsers.add(user);
          setOuUsers(ouUsers);
          List notOuUsers=(ArrayList)getJsp().getRequest().getSession().getAttribute(A_CmsOrgUnitUsersList.NOT_ORGUNIT_USERS);
          notOuUsers.remove(user);
          setNotOuUsers(notOuUsers);
        }
      }
    }
 catch (    CmsException e) {
    }
  }
 else {
    throwListUnsupportedActionException();
  }
  listSave();
}
