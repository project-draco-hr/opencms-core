{
  Vector connections;
  Connection connection;
  Statement statement;
  while (true) {
    try {
      sleep(m_sleep);
    }
 catch (    Exception e) {
      if (A_OpenCms.isLogging()) {
        A_OpenCms.log(C_OPENCMS_INFO,"[CmsConnectionGuard] Could not sleep. " + e.getMessage());
      }
      return;
    }
    if (OpenCms.isLogging()) {
      A_OpenCms.log(C_OPENCMS_INFO,"[CmsConnectionGuard] Keeping alive database connection.");
    }
    connections=((com.opencms.file.mySql.CmsDbPool)m_pool).getAllConnections();
    for (int i=0; i < connections.size(); i++) {
      try {
        connection=(Connection)connections.elementAt(i);
        statement=connection.createStatement();
        statement.execute(C_KEEP_ALIVE_STATEMENT);
        statement.close();
      }
 catch (      SQLException exc) {
        if (OpenCms.isLogging()) {
          A_OpenCms.log(C_OPENCMS_INFO,"[CmsConnectionGuard] error while sending keep-alive query: " + exc.getMessage());
        }
      }
    }
  }
}
