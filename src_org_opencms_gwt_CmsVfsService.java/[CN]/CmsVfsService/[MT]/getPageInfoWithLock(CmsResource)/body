{
  CmsListInfoBean result=getPageInfo(resource);
  CmsResourceUtil resourceUtil=new CmsResourceUtil(getCmsObject(),resource);
  CmsLock lock=resourceUtil.getLock();
  LockIcon icon=LockIcon.NONE;
  String iconTitle=null;
  CmsLockType lockType=lock.getType();
  if (!lock.isOwnedBy(getCmsObject().getRequestContext().getCurrentUser())) {
    if ((lockType == CmsLockType.EXCLUSIVE) || (lockType == CmsLockType.INHERITED) || (lockType == CmsLockType.TEMPORARY)) {
      icon=LockIcon.CLOSED;
    }
 else     if ((lockType == CmsLockType.SHARED_EXCLUSIVE) || (lockType == CmsLockType.SHARED_INHERITED)) {
      icon=LockIcon.SHARED_CLOSED;
    }
  }
 else {
    if ((lockType == CmsLockType.EXCLUSIVE) || (lockType == CmsLockType.INHERITED) || (lockType == CmsLockType.TEMPORARY)) {
      icon=LockIcon.OPEN;
    }
 else     if ((lockType == CmsLockType.SHARED_EXCLUSIVE) || (lockType == CmsLockType.SHARED_INHERITED)) {
      icon=LockIcon.SHARED_OPEN;
    }
  }
  if ((lock.getUserId() != null) && !lock.getUserId().isNullUUID()) {
    CmsUser lockOwner=getCmsObject().readUser(lock.getUserId());
    iconTitle=Messages.get().getBundle().key(Messages.GUI_LOCKED_BY_1,lockOwner.getFullName());
    result.addAdditionalInfo(Messages.get().getBundle().key(Messages.GUI_LOCKED_OWNER_0),lockOwner.getFullName());
  }
  result.setLockIcon(icon);
  result.setLockIconTitle(iconTitle);
  if (icon != LockIcon.NONE) {
    result.setTitle(result.getTitle() + " (" + iconTitle+ ")");
  }
  return result;
}
