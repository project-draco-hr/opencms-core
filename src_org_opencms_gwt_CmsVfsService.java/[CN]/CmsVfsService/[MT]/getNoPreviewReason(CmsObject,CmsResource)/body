{
  String noPreviewReason=null;
  if (resource.isFolder()) {
    noPreviewReason="Can't preview a folder";
  }
 else   if (!cms.getRequestContext().getSiteRoot().equals(OpenCms.getSiteManager().getSiteRoot(resource.getName()))) {
    noPreviewReason="Can't preview resource from another site";
  }
 else   if (resource.getTypeId() == CmsResourceTypeBinary.getStaticTypeId()) {
    String mimeType=OpenCms.getResourceManager().getMimeType(resource.getName(),null,"empty");
    if (!m_previewMimeTypes.contains(mimeType)) {
      noPreviewReason="No preview available for this mime type";
    }
  }
  return noPreviewReason;
}
