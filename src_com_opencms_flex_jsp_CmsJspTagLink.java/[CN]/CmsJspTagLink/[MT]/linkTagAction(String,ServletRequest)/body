{
  CmsFlexController controller=(CmsFlexController)req.getAttribute(CmsFlexController.ATTRIBUTE_NAME);
  if (link.indexOf(':') >= 0) {
    return CmsLinkManager.substituteLink(controller.getCmsObject(),link);
  }
 else {
    return CmsLinkManager.substituteLink(controller.getCmsObject(),controller.getCurrentRequest().toAbsolute(link));
  }
}
