{
  InputStream is=null;
  BufferedReader reader=null;
  int index;
  String name;
  String value;
  int code;
  String line;
  if (_byName != null)   return;
  try {
    _byName=new Hashtable();
    _byChar=new Hashtable();
    is=HTMLdtd.class.getResourceAsStream(ENTITIES_RESOURCE);
    if (is == null)     throw new RuntimeException("The resource [" + ENTITIES_RESOURCE + "] could not be found.");
    reader=new BufferedReader(new InputStreamReader(is));
    line=reader.readLine();
    while (line != null) {
      if (line.length() == 0 || line.charAt(0) == '#') {
        line=reader.readLine();
        continue;
      }
      index=line.indexOf(' ');
      if (index > 1) {
        name=line.substring(0,index);
        ++index;
        if (index < line.length()) {
          value=line.substring(index);
          index=value.indexOf(' ');
          if (index > 0)           value=value.substring(0,index);
          code=Integer.parseInt(value);
          defineEntity(name,(char)code);
        }
      }
      line=reader.readLine();
    }
    is.close();
  }
 catch (  Exception except) {
    throw new RuntimeException("The resource [" + ENTITIES_RESOURCE + "] could not load: "+ except.toString());
  }
 finally {
    if (is != null) {
      try {
        is.close();
      }
 catch (      Exception except) {
      }
    }
  }
}
