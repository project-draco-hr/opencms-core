{
  boolean isFolder=isOperationOnFolder();
  if ((isMultiOperation() || isFolder) && !DIALOG_WAIT.equals(getParamAction())) {
    return false;
  }
  boolean undoRecursive=Boolean.valueOf(getParamRecursive()).booleanValue();
  Iterator i=getResourceList().iterator();
  while (i.hasNext()) {
    String resName=(String)i.next();
    try {
      checkLock(resName);
      getCms().undoChanges(resName,undoRecursive);
    }
 catch (    CmsException e) {
      if (isMultiOperation()) {
        addMultiOperationException(e);
      }
 else {
        throw e;
      }
    }
  }
  checkMultiOperationException(Messages.get(),Messages.ERR_UNDO_CHANGES_MULTI_0);
  return true;
}
