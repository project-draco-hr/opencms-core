{
  CmsLock parentLock=null;
  String lockedPath=null;
  Iterator i=null;
  CmsLock lock=CmsLock.getNullLock();
  if (context.currentProject().getId() == I_CmsConstants.C_PROJECT_ONLINE_ID) {
    lock=CmsLock.getNullLock();
  }
 else   if (m_locks.containsKey(resourcename)) {
    lock=(CmsLock)m_locks.get(resourcename);
  }
 else {
    i=m_locks.keySet().iterator();
    while (i.hasNext()) {
      lockedPath=(String)i.next();
      if (resourcename.startsWith(lockedPath) && lockedPath.endsWith(I_CmsConstants.C_FOLDER_SEPARATOR)) {
        parentLock=(CmsLock)m_locks.get(lockedPath);
        lock=addResource(resourcename,parentLock.getUserId(),parentLock.getProjectId(),CmsLock.C_HIERARCHY_INDIRECT_LOCKED);
        break;
      }
    }
  }
  return lock;
}
