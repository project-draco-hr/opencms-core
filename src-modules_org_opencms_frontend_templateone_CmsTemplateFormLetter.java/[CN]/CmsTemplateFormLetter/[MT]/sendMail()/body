{
  CmsHtmlMail theMail=new CmsHtmlMail();
  theMail.setSubject(key("letter.mail.subject.prefix") + getPageTitle());
  theMail.setHtmlMsg(getContent("letter_mail.html","html",getRequestContext().getLocale()));
  theMail.setTextMsg(getContent("letter_mail.html","text",getRequestContext().getLocale()));
  try {
    String uri=getRequestContext().getUri();
    try {
      CmsTemplateImprint imprint=new CmsTemplateImprint(getJspContext(),getRequest(),getResponse());
      String receiver=imprint.getEmail(null);
      theMail.addTo(receiver);
    }
  finally {
      getRequestContext().setUri(uri);
    }
    String sender=getContactEmail();
    if (sender == null || "".equals(sender.trim())) {
      sender=OpenCms.getSystemInfo().getMailSettings().getMailFromDefault();
    }
    theMail.setFrom(sender);
    if (!"".equals(getCopy())) {
      theMail.addCc(sender);
    }
    theMail.send();
  }
 catch (  Exception e) {
    if (OpenCms.getLog(this).isErrorEnabled()) {
      OpenCms.getLog(this).error(e);
    }
    return false;
  }
  return true;
}
