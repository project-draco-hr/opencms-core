{
  CmsHtmlMail theMail=new CmsHtmlMail();
  try {
    theMail.setSubject(key("letter.mail.subject.prefix") + getPageTitle());
    theMail.setCharset(getRequestContext().getEncoding());
    theMail.setHtmlMsg(getContent("letter_mail.html","html",getRequestContext().getLocale()));
    theMail.setTextMsg(getContent("letter_mail.html","text",getRequestContext().getLocale()));
    String uri=getRequestContext().getUri();
    try {
      CmsTemplateImprint imprint=new CmsTemplateImprint(getJspContext(),getRequest(),getResponse());
      String receiver=imprint.getEmail(null);
      theMail.addTo(receiver);
    }
  finally {
      getRequestContext().setUri(uri);
    }
    String sender=OpenCms.getSystemInfo().getMailSettings().getMailFromDefault();
    String contactMail=getContactEmail();
    if (CmsStringUtil.isEmptyOrWhitespaceOnly(contactMail)) {
      contactMail=sender;
    }
    theMail.setFrom(sender);
    theMail.addReplyTo(contactMail);
    if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(getCopy())) {
      theMail.addCc(contactMail);
    }
    theMail.send();
  }
 catch (  Exception e) {
    if (LOG.isWarnEnabled()) {
      LOG.warn(e);
    }
 else     if (LOG.isErrorEnabled()) {
      LOG.error(Messages.get().getBundle().key(Messages.LOG_SEND_MAIL_CONTACT_1));
    }
    return false;
  }
  return true;
}
