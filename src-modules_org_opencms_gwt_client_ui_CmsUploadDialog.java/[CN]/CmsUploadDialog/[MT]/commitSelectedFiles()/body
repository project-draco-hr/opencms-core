{
  m_okButton.disable("Currently checking for already existing resources");
  m_state=DialogState.check;
  m_firstContentHeight=CmsDomUtil.getCurrentStyleInt(m_contentWrapper.getElement(),CmsDomUtil.Style.height);
  m_firstInfoHeight=m_dialogInfo.getOffsetHeight();
  m_firstSummaryHeight=m_selectionSummary.getOffsetHeight();
  CmsRpcAction<CmsUploadFileBean> callback=new CmsRpcAction<CmsUploadFileBean>(){
    /** 
 * @see org.opencms.gwt.client.rpc.CmsRpcAction#execute()
 */
    public void execute(){
      CmsCoreProvider.getService().checkUploadFiles(new ArrayList<String>(m_filesToUpload.keySet()),m_targetFolder,this);
    }
    /** 
 * @see org.opencms.gwt.client.rpc.CmsRpcAction#onResponse(java.lang.Object)
 */
    protected void onResponse(    CmsUploadFileBean result){
      if (result.isActive()) {
        m_state=DialogState.active;
        CmsNotification.get().send(Type.WARNING,"Another upload is running, please try again.");
      }
 else {
        m_state=DialogState.selection;
        if (!result.getExistingResourceNames().isEmpty() || !result.getInvalidFileNames().isEmpty()) {
          showOverwriteDialog(result);
        }
 else {
          commit();
        }
      }
    }
  }
;
  callback.execute();
}
