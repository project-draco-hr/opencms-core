{
  super(hoverbar);
  setImageClass(I_CmsImageBundle.INSTANCE.contextMenuIcons().delete());
  setLabel(Messages.get().key(Messages.GUI_HOVERBAR_DELETE_0));
  setActive(true);
  setCommand(new Command(){
    /** 
 * @see com.google.gwt.user.client.Command#execute()
 */
    public void execute(){
      final String sitePath=getHoverbar().getSitePath();
      final CmsSitemapController controller=getHoverbar().getController();
      controller.getBrokenLinks(sitePath,new I_CmsSimpleCallback<List<CmsBrokenLinkBean>>(){
        /** 
 * @see org.opencms.gwt.client.util.I_CmsSimpleCallback#execute(java.lang.Object)
 */
        public void execute(        List<CmsBrokenLinkBean> result){
          if (result.size() > 0) {
            I_CmsConfirmDialogHandler handler=new I_CmsConfirmDialogHandler(){
              /** 
 * @see org.opencms.gwt.client.ui.I_CmsCloseDialogHandler#onClose()
 */
              public void onClose(){
              }
              /** 
 * @see org.opencms.gwt.client.ui.I_CmsConfirmDialogHandler#onOk()
 */
              public void onOk(){
                controller.delete(sitePath);
              }
            }
;
            CmsLinkWarningDialog dialog=new CmsLinkWarningDialog(handler,result,sitePath);
            dialog.center();
          }
 else {
            CmsConfirmDialog dialog=new CmsConfirmDialog(org.opencms.gwt.client.Messages.get().key(org.opencms.gwt.client.Messages.GUI_DIALOG_DELETE_TITLE_0),org.opencms.gwt.client.Messages.get().key(org.opencms.gwt.client.Messages.GUI_DIALOG_DELETE_TEXT_1,sitePath));
            dialog.setHandler(new I_CmsConfirmDialogHandler(){
              /** 
 * @see org.opencms.gwt.client.ui.I_CmsCloseDialogHandler#onClose()
 */
              public void onClose(){
              }
              /** 
 * @see org.opencms.gwt.client.ui.I_CmsConfirmDialogHandler#onOk()
 */
              public void onOk(){
                controller.delete(sitePath);
              }
            }
);
            dialog.center();
          }
        }
      }
);
    }
  }
);
}
