{
  this.initTemplate(cms,parameters,templateFile);
  this.readInput(cms,parameters);
  if ("1".equals(m_NextStep)) {
    m_TemplateSection="step1";
  }
 else   if ("2".equals(m_NextStep)) {
    cms.replaceResource(m_OldResourceName,m_UploadResourceType,null,m_UploadResourceContent);
    this.clearSessionValues(cms.getRequestContext().getSession(true));
    try {
      cms.getRequestContext().getResponse().sendCmsRedirect(getConfigFile(cms).getWorkplaceActionPath() + CmsWorkplaceAction.getExplorerFileUri(cms));
    }
 catch (    Exception ex) {
      throw new CmsException("Redirect failed: " + getConfigFile(cms).getWorkplaceActionPath() + CmsWorkplaceAction.getExplorerFileUri(cms),CmsException.C_UNKNOWN_EXCEPTION,ex);
    }
  }
  return startProcessing(cms,m_XmlTemplateDocument,"",parameters,m_TemplateSection);
}
