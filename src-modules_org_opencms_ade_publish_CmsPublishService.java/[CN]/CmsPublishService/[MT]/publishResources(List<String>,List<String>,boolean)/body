{
  CmsPublishStatus result=new CmsPublishStatus();
  try {
    CmsObject cms=getCmsObject();
    CmsPublish pub=new CmsPublish(cms);
    List<CmsResource> publishResources=uuidStringsToResources(cms,toPublish);
    List<CmsPublishResourceBean> brokenLinkBeans=pub.getBrokenResources(publishResources);
    if (brokenLinkBeans.size() == 0) {
      pub.publishResources(publishResources);
      pub.removeResourcesFromPublishList(uuidStringsToUuids(toRemove));
    }
 else {
      result.setProblemResources(toClientResourceBeans(brokenLinkBeans));
    }
    return result;
  }
 catch (  CmsException e) {
    LOG.error(e.getLocalizedMessage(),e);
    throw new CmsRpcException(CmsException.getStackTraceAsString(e));
  }
}
