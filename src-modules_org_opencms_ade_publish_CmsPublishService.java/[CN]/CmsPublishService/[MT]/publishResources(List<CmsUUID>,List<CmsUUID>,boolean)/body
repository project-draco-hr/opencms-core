{
  try {
    CmsObject cms=getCmsObject();
    CmsPublish pub=new CmsPublish(cms,getCachedOptions());
    List<CmsResource> publishResources=idsToResources(cms,toPublish);
    List<CmsPublishResource> brokenLinkBeans=pub.getBrokenResources(publishResources);
    if (brokenLinkBeans.size() == 0) {
      pub.publishResources(publishResources);
      pub.removeResourcesFromPublishList(toRemove);
    }
    return brokenLinkBeans;
  }
 catch (  Throwable e) {
    LOG.error(e.getLocalizedMessage(),e);
    throw new CmsRpcException(CmsException.getStackTraceAsString(e));
  }
}
