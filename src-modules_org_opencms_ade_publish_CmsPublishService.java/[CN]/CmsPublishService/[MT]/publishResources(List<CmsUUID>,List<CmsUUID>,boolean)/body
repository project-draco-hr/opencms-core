{
  List<CmsPublishResource> brokenLinkBeans=null;
  try {
    CmsObject cms=getCmsObject();
    CmsPublish pub=new CmsPublish(cms,getCachedOptions());
    List<CmsResource> publishResources=idsToResources(cms,toPublish);
    brokenLinkBeans=pub.getBrokenResources(publishResources);
    if (brokenLinkBeans.size() == 0) {
      pub.publishResources(publishResources);
      pub.removeResourcesFromPublishList(toRemove);
    }
  }
 catch (  Throwable e) {
    error(e);
  }
  return brokenLinkBeans;
}
