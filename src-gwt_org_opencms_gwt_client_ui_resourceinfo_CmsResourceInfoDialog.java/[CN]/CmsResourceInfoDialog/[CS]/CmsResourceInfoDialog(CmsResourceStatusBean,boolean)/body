{
  super();
  setModal(true);
  setGlassEnabled(true);
  addDialogClose(null);
  removePadding();
  final CmsTabbedPanel<Widget> tabPanel=new CmsTabbedPanel<Widget>();
  m_tabPanel=tabPanel;
  tabPanel.setAutoResize(true);
  tabPanel.setAutoResizeHeightDelta(45);
  final List<CmsResourceRelationView> relationViews=new ArrayList<CmsResourceRelationView>();
  for (  Map.Entry<CmsResourceStatusTabId,String> tabEntry : statusBean.getTabs().entrySet()) {
switch (tabEntry.getKey()) {
case tabRelationsFrom:
      CmsResourceRelationView targets=new CmsResourceRelationView(statusBean,Mode.targets);
    setTabMinHeight(targets);
  targets.setPopup(this);
tabPanel.add(new CmsTabContentWrapper(targets),tabEntry.getValue());
relationViews.add(targets);
break;
case tabRelationsTo:
CmsResourceRelationView usage=new CmsResourceRelationView(statusBean,Mode.sources);
setTabMinHeight(usage);
usage.setPopup(this);
tabPanel.add(new CmsTabContentWrapper(usage),tabEntry.getValue());
relationViews.add(usage);
break;
case tabStatus:
CmsResourceInfoView infoView=new CmsResourceInfoView(statusBean);
setTabMinHeight(infoView);
tabPanel.add(new CmsTabContentWrapper(infoView),tabEntry.getValue());
relationViews.add(null);
break;
default :
break;
}
}
if (relationViews.get(0) != null) {
relationViews.get(0).onSelect();
}
tabPanel.addSelectionHandler(new SelectionHandler<Integer>(){
public void onSelection(SelectionEvent<Integer> event){
int tab=event.getSelectedItem().intValue();
if (relationViews.get(tab) != null) {
relationViews.get(tab).onSelect();
}
delayedResize();
}
}
);
setMainContent(tabPanel);
List<CmsResourceStatusTabId> tabKeyList=Lists.newArrayList(statusBean.getTabs().keySet());
int startTab=tabKeyList.indexOf(statusBean.getStartTab());
tabPanel.selectTab(startTab);
}
