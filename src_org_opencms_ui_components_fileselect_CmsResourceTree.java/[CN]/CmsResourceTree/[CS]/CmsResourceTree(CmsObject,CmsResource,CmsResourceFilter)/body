{
  m_cms=cms;
  m_root=root;
  m_filter=filter;
  setContainerDataSource(m_container);
  setItemIconPropertyId(CmsResourceTableProperty.PROPERTY_TYPE_ICON);
  setItemCaptionPropertyId(CmsResourceTableProperty.PROPERTY_RESOURCE_NAME);
  addExpandListener(new ExpandListener(){
    private static final long serialVersionUID=1L;
    @SuppressWarnings("synthetic-access") public void nodeExpand(    ExpandEvent event){
      m_container.readTreeLevel(m_cms,(CmsUUID)event.getItemId(),m_filter);
      markAsDirtyRecursive();
    }
  }
);
  addCollapseListener(new CollapseListener(){
    private static final long serialVersionUID=1L;
    @SuppressWarnings("synthetic-access") public void nodeCollapse(    CollapseEvent event){
      m_container.removeChildren((CmsUUID)event.getItemId());
    }
  }
);
  addItemClickListener(new ItemClickListener(){
    private static final long serialVersionUID=1L;
    @SuppressWarnings("synthetic-access") public void itemClick(    ItemClickEvent event){
      CmsResource resource=CmsResourceTreeContainer.getResource(event.getItem());
      for (      I_CmsSelectionHandler<CmsResource> handler : m_resourceSelectionHandlers) {
        handler.onSelection(resource);
      }
    }
  }
);
  setItemStyleGenerator(new ItemStyleGenerator(){
    private static final long serialVersionUID=1L;
    public String getStyle(    Tree source,    Object itemId){
      return CmsFileTable.getStateStyle(source.getContainerDataSource().getItem(itemId));
    }
  }
);
  m_container.addTreeItem(m_root,null);
  m_container.readTreeLevel(cms,m_root.getStructureId(),filter);
}
