{
  boolean hDelete=true;
  if ((cms.getResourceType(file.getType()).getResourceName()).equals(C_TYPE_PAGE_NAME)) {
    String bodyPath=getBodyPath(cms,(CmsFile)file);
    try {
      int help=C_CONTENTBODYPATH.lastIndexOf("/");
      String hbodyPath=(C_CONTENTBODYPATH.substring(0,help)) + (file.getAbsolutePath());
      if (hbodyPath.equals(bodyPath)) {
        if (lock) {
          cms.lockResource(hbodyPath);
        }
        cms.deleteFile(hbodyPath);
      }
    }
 catch (    CmsException e) {
    }
  }
 else   if ((cms.getResourceType(file.getType()).getResourceName()).equals(C_TYPE_NEWSPAGE_NAME)) {
    String newsContentPath=getNewsContentPath(cms,(CmsFile)file);
    try {
      CmsFile newsContentFile=(CmsFile)cms.readFileHeader(newsContentPath);
      if ((newsContentFile.isLocked()) && (newsContentFile.isLockedBy() == cms.getRequestContext().currentUser().getId())) {
        cms.deleteFile(newsContentPath);
      }
    }
 catch (    CmsException e) {
    }
    try {
      cms.deleteFile(file.getAbsolutePath());
      hDelete=false;
    }
 catch (    CmsException e) {
    }
    try {
      String parentFolderName=file.getParent();
      CmsFolder parentFolder=cms.readFolder(parentFolderName);
      if ((!parentFolder.isLocked()) || (parentFolder.isLockedBy() != cms.getRequestContext().currentUser().getId())) {
        cms.lockResource(parentFolderName);
      }
      cms.deleteFolder(parentFolderName);
    }
 catch (    CmsException e) {
    }
  }
  if (hDelete) {
    cms.deleteFile(file.getAbsolutePath());
  }
}
