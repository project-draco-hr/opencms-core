{
  boolean update=false;
  String prop=e.getPropertyName();
  if (JFileChooser.DIRECTORY_CHANGED_PROPERTY.equals(prop)) {
    m_file=null;
    m_text=null;
    update=true;
    m_mode=C_MODE_EMPTY;
  }
 else   if (JFileChooser.SELECTED_FILE_CHANGED_PROPERTY.equals(prop)) {
    m_file=(File)e.getNewValue();
    m_mode=getMode();
    update=true;
  }
  if (update) {
    m_thumbnail=null;
    if (isShowing()) {
      if (m_mode == (C_MODE_IMAGE)) {
        loadImage();
        repaint();
      }
 else       if (m_mode == (C_MODE_TEXT)) {
        loadText();
        repaint();
      }
 else {
        repaint();
      }
    }
  }
}
