{
  List<CmsPublishResource> relatedResources=new ArrayList<CmsPublishResource>();
  try {
    for (    CmsRelation relation : m_cms.getRelationsForResource(resource,CmsRelationFilter.TARGETS.filterStrong())) {
      CmsResource target=null;
      try {
        target=relation.getTarget(m_cms,CmsResourceFilter.ALL);
      }
 catch (      CmsException e) {
        if (LOG.isErrorEnabled()) {
          LOG.error(e.getLocalizedMessage(),e);
        }
        continue;
      }
      CmsPublishResourceInfo info;
      if (resources.contains(target)) {
        info=getResourceInfo(resource,published,permissions,locked);
      }
 else       if (!target.getState().isUnchanged()) {
        info=new CmsPublishResourceInfo(Messages.get().getBundle(m_locale).key(Messages.GUI_RELATED_RESOURCE_CAN_NOT_BE_PUBLISHED_0),CmsPublishResourceInfo.Type.RELATED);
      }
 else {
        continue;
      }
      CmsPublishResource relatedResource=resourceToBean(target,info,false,null);
      relatedResources.add(relatedResource);
    }
  }
 catch (  CmsException e) {
    if (LOG.isErrorEnabled()) {
      LOG.error(e.getLocalizedMessage(),e);
    }
  }
  return relatedResources;
}
