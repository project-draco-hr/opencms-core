{
  List<CmsResource> rawResourceList=new ArrayList<CmsResource>();
  if ((m_options.getProjectId() == null) || m_options.getProjectId().isNullUUID()) {
    rawResourceList.addAll(OpenCms.getPublishManager().getUsersPubList(m_cms));
  }
 else {
    CmsProject project=m_cms.getRequestContext().getCurrentProject();
    try {
      project=m_cms.readProject(m_options.getProjectId());
    }
 catch (    Exception e) {
    }
    CmsProject originalProject=m_cms.getRequestContext().getCurrentProject();
    try {
      m_cms.getRequestContext().setCurrentProject(project);
      rawResourceList.addAll(OpenCms.getPublishManager().getPublishList(m_cms).getAllResources());
    }
  finally {
      m_cms.getRequestContext().setCurrentProject(originalProject);
    }
  }
  return rawResourceList;
}
