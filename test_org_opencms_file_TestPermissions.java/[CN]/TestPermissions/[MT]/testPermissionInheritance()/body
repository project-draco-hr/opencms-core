{
  CmsObject cms=getCmsObject();
  echo("Testing inheritance of permissions");
  String foldername="testPermissionInheritance";
  String subfoldername=foldername + "/" + "subfolder";
  String resourcename=foldername + "/test.txt";
  String subresourcename=subfoldername + "/subtest.txt";
  cms.createResource(foldername,CmsResourceTypeFolder.C_RESOURCE_TYPE_ID);
  cms.createResource(subfoldername,CmsResourceTypeFolder.C_RESOURCE_TYPE_ID);
  cms.createResource(resourcename,CmsResourceTypePlain.C_RESOURCE_TYPE_ID);
  cms.createResource(subresourcename,CmsResourceTypePlain.C_RESOURCE_TYPE_ID);
  assertEquals("+r+w+v+c",cms.getPermissions(resourcename,"testUser").getPermissionString());
  assertEquals("+r+w+v+c",cms.getPermissions(subfoldername,"testUser").getPermissionString());
  assertEquals("+r+w+v+c",cms.getPermissions(subresourcename,"testUser").getPermissionString());
  cms.chacc(foldername,I_CmsPrincipal.C_PRINCIPAL_GROUP,"Users","+o");
  assertEquals("",cms.getPermissions(resourcename,"testUser").getPermissionString());
  assertEquals("+r+w+v+c",cms.getPermissions(subfoldername,"testUser").getPermissionString());
  assertEquals("+r+w+v+c",cms.getPermissions(subresourcename,"testUser").getPermissionString());
  cms.chacc(foldername,I_CmsPrincipal.C_PRINCIPAL_GROUP,"Users","+o+i");
  assertEquals("",cms.getPermissions(resourcename,"testUser").getPermissionString());
  assertEquals("",cms.getPermissions(subfoldername,"testUser").getPermissionString());
  assertEquals("",cms.getPermissions(subresourcename,"testUser").getPermissionString());
  cms.createGroup("GroupA","",0,"");
  cms.createGroup("GroupB","",0,"");
  cms.createGroup("GroupC","",0,"");
  cms.createGroup("GroupD","",0,"");
  cms.addUserToGroup("testUser","GroupA");
  cms.addUserToGroup("testUser","GroupB");
  cms.addUserToGroup("testUser","GroupC");
  cms.addUserToGroup("testUser","GroupD");
  cms.chacc(foldername,I_CmsPrincipal.C_PRINCIPAL_GROUP,"GroupA","+r");
  assertEquals("+r",cms.getPermissions(resourcename,"testUser").getPermissionString());
  assertEquals("",cms.getPermissions(subfoldername,"testUser").getPermissionString());
  assertEquals("",cms.getPermissions(subresourcename,"testUser").getPermissionString());
  cms.chacc(foldername,I_CmsPrincipal.C_PRINCIPAL_GROUP,"GroupA","+r+i");
  assertEquals("+r",cms.getPermissions(resourcename,"testUser").getPermissionString());
  assertEquals("+r",cms.getPermissions(subfoldername,"testUser").getPermissionString());
  assertEquals("+r",cms.getPermissions(subresourcename,"testUser").getPermissionString());
  cms.chacc(foldername,I_CmsPrincipal.C_PRINCIPAL_GROUP,"GroupB","+w");
  assertEquals("+r+w",cms.getPermissions(resourcename,"testUser").getPermissionString());
  assertEquals("+r",cms.getPermissions(subfoldername,"testUser").getPermissionString());
  assertEquals("+r",cms.getPermissions(subresourcename,"testUser").getPermissionString());
  cms.chacc(foldername,I_CmsPrincipal.C_PRINCIPAL_GROUP,"GroupB","+w+i");
  assertEquals("+r+w",cms.getPermissions(resourcename,"testUser").getPermissionString());
  assertEquals("+r+w",cms.getPermissions(subfoldername,"testUser").getPermissionString());
  assertEquals("+r+w",cms.getPermissions(subresourcename,"testUser").getPermissionString());
  cms.chacc(foldername,I_CmsPrincipal.C_PRINCIPAL_GROUP,"GroupC","-r");
  assertEquals("-r+w",cms.getPermissions(resourcename,"testUser").getPermissionString());
  assertEquals("+r+w",cms.getPermissions(subfoldername,"testUser").getPermissionString());
  assertEquals("+r+w",cms.getPermissions(subresourcename,"testUser").getPermissionString());
  cms.chacc(foldername,I_CmsPrincipal.C_PRINCIPAL_GROUP,"GroupC","-r+i");
  assertEquals("-r+w",cms.getPermissions(resourcename,"testUser").getPermissionString());
  assertEquals("-r+w",cms.getPermissions(subfoldername,"testUser").getPermissionString());
  assertEquals("-r+w",cms.getPermissions(subresourcename,"testUser").getPermissionString());
  cms.chacc(foldername,I_CmsPrincipal.C_PRINCIPAL_GROUP,"GroupD","-w");
  assertEquals("-r-w",cms.getPermissions(resourcename,"testUser").getPermissionString());
  assertEquals("-r+w",cms.getPermissions(subfoldername,"testUser").getPermissionString());
  assertEquals("-r+w",cms.getPermissions(subresourcename,"testUser").getPermissionString());
  cms.chacc(foldername,I_CmsPrincipal.C_PRINCIPAL_GROUP,"GroupD","-w+i");
  assertEquals("-r-w",cms.getPermissions(resourcename,"testUser").getPermissionString());
  assertEquals("-r-w",cms.getPermissions(subfoldername,"testUser").getPermissionString());
  assertEquals("-r-w",cms.getPermissions(subresourcename,"testUser").getPermissionString());
}
