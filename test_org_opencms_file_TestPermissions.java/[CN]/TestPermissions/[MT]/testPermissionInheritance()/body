{
  CmsObject cms=getCmsObject();
  echo("Testing inheritance of permissions");
  String foldername="testPermissionInheritance";
  String resourcename=foldername + "/test.txt";
  cms.createResource(foldername,CmsResourceTypeFolder.C_RESOURCE_TYPE_ID);
  cms.createResource(resourcename,CmsResourceTypePlain.C_RESOURCE_TYPE_ID);
  assertEquals("+r+w+v+c",cms.getPermissions(resourcename,"testUser").getPermissionString());
  cms.chacc(foldername,I_CmsPrincipal.C_PRINCIPAL_GROUP,"Users","+o");
  assertEquals("+r+w+v+c",cms.getPermissions(resourcename,"testUser").getPermissionString());
  cms.chacc(foldername,I_CmsPrincipal.C_PRINCIPAL_GROUP,"Users","+o+i");
  assertEquals("",cms.getPermissions(resourcename,"testUser").getPermissionString());
  cms.createGroup("GroupA","",0,"");
  cms.addUserToGroup("testUser","GroupA");
  cms.chacc(foldername,I_CmsPrincipal.C_PRINCIPAL_GROUP,"GroupA","+r+i");
  assertEquals("+r",cms.getPermissions(resourcename,"testUser").getPermissionString());
  cms.chacc(foldername,I_CmsPrincipal.C_PRINCIPAL_USER,"testUser","+w+i");
  assertEquals("+r+w",cms.getPermissions(resourcename,"testUser").getPermissionString());
  cms.createGroup("GroupB","",0,"");
  cms.addUserToGroup("testUser","GroupB");
  cms.chacc(foldername,I_CmsPrincipal.C_PRINCIPAL_GROUP,"GroupB","-r+i");
  assertEquals("-r+w",cms.getPermissions(resourcename,"testUser").getPermissionString());
  cms.chacc(foldername,I_CmsPrincipal.C_PRINCIPAL_USER,"testUser","-w+i");
  assertEquals("-r-w",cms.getPermissions(resourcename,"testUser").getPermissionString());
}
