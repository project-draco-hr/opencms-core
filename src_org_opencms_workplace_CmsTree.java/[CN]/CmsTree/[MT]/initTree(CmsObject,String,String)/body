{
  StringBuffer retValue=new StringBuffer(512);
  String servletUrl=cms.getRequestContext().getRequest().getServletUrl();
  String language=initUserLanguage(cms);
  CmsWorkplaceMessages messages=new CmsWorkplaceMessages(cms,language);
  retValue.append("function initTreeResources() {\n");
  retValue.append("\tinitResources(\"" + encoding + "\", \""+ C_PATH_WORKPLACE+ "\", \""+ skinUri+ "\", \""+ servletUrl+ "\");\n");
  List allResTypes=new ArrayList();
  try {
    allResTypes=cms.getAllResourceTypes();
  }
 catch (  CmsException e) {
  }
  Iterator i=allResTypes.iterator();
  while (i.hasNext()) {
    I_CmsResourceType curType=(I_CmsResourceType)i.next();
    int curTypeId=curType.getResourceType();
    String curTypeName=curType.getResourceTypeName();
    String curTypeLocalName=messages.key("fileicon." + curTypeName);
    try {
      cms.readFileHeader(I_CmsWpConstants.C_VFS_PATH_WORKPLACE + "restypes/" + curTypeName);
      if (curTypeName.startsWith("new")) {
        curTypeName=curTypeName.substring(3);
      }
      retValue.append("\taddResourceType(");
      retValue.append(curTypeId + ", \"" + curTypeName+ "\",\t\""+ curTypeLocalName+ "\",\t\"filetypes/"+ curTypeName+ ".gif\");\n");
    }
 catch (    CmsException e) {
    }
  }
  retValue.append("}\n\n");
  retValue.append("initTreeResources();\n");
  return retValue.toString();
}
