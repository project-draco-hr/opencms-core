{
  boolean rootloaded="true".equals(request.getParameter("rootloaded"));
  String resource=request.getParameter("resource");
  String lastknown=request.getParameter("lastknown");
  if (resource != null) {
    if (!resource.endsWith("/")) {
      resource+="/";
    }
    if (resource.startsWith(I_CmsConstants.VFS_FOLDER_SYSTEM + "/") && (!resource.startsWith(getSettings().getSite()))) {
      resource="/";
    }
  }
  if ((lastknown != null) && (!lastknown.endsWith("/"))) {
    lastknown+="/";
  }
  if ("/".equals(resource) && !"/".equals(getSettings().getExplorerResource()) && (lastknown == null)&& !rootloaded) {
    lastknown="/";
    resource=getSettings().getExplorerResource();
    setNewTree(true);
  }
 else   if ("/".equals(resource)) {
    setNewTree(!rootloaded);
  }
 else {
    setNewTree(false);
  }
  setTargetFolder(resource);
  setStartFolder(lastknown);
}
