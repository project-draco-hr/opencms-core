{
  List options=new ArrayList();
  List values=new ArrayList();
  int selectedIndex=0;
  String preSelection=getSettings().getTreeSite(getTreeType());
  if (preSelection == null) {
    preSelection=CmsSiteManager.getCurrentSite(getCms()).getSiteRoot();
  }
  List sites=CmsSiteManager.getAvailableSites(getCms(),true);
  Iterator i=sites.iterator();
  int pos=0;
  while (i.hasNext()) {
    CmsSite site=(CmsSite)i.next();
    values.add(site.getSiteRoot());
    options.add(site.getTitle());
    if (site.getSiteRoot().equals(preSelection)) {
      selectedIndex=pos;
    }
    pos++;
  }
  return buildSelect(htmlAttributes,options,values,selectedIndex);
}
