{
  List galleries=new ArrayList();
  int galleryTypeId=getGalleryTypeId();
  try {
    galleries=getCms().readResources("/",CmsResourceFilter.ONLY_VISIBLE_NO_DELETED.addRequireType(galleryTypeId));
  }
 catch (  CmsException e) {
    LOG.error(e.getLocalizedMessage(),e);
  }
  if (!getCms().getRequestContext().getSiteRoot().equals("")) {
    List systemGalleries=null;
    try {
      systemGalleries=getCms().readResources(CmsWorkplace.VFS_PATH_SYSTEM,CmsResourceFilter.ONLY_VISIBLE_NO_DELETED.addRequireType(galleryTypeId));
    }
 catch (    CmsException e) {
      LOG.error(e.getLocalizedMessage(),e);
    }
    if ((systemGalleries != null) && (systemGalleries.size() > 0)) {
      galleries.addAll(systemGalleries);
    }
  }
  return galleries;
}
