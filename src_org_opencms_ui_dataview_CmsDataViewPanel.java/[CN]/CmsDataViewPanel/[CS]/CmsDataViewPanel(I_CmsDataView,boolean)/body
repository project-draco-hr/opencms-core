{
  m_dataView=viewInstance;
  CmsVaadinUtils.readAndLocalizeDesign(this,CmsVaadinUtils.getWpMessagesForCurrentLocale(),null);
  m_pagingControls.addCallback(new I_PagingCallback(){
    public void pageChanged(    int page){
      refreshData(false,null);
    }
  }
);
  m_fullTextSearch.addTextChangeListener(new TextChangeListener(){
    private static final long serialVersionUID=1L;
    public void textChange(    TextChangeEvent event){
      refreshData(true,event.getText());
    }
  }
);
  m_container=new IndexedContainer();
  for (  CmsDataViewColumn column : m_dataView.getColumns()) {
    m_container.addContainerProperty(column.getId(),CmsColumnValueConverter.getColumnClass(column.getType()),null);
  }
  m_container.addContainerProperty(ID_COLUMN,String.class,null);
  PagedTable table=new PagedTable(m_container);
  table.setMultiSelect(multiselect);
  table.addStyleName("o-wrap-table");
  Object[] visibleCols=new String[m_dataView.getColumns().size()];
  int i=0;
  for (  CmsDataViewColumn col : m_dataView.getColumns()) {
    visibleCols[i++]=col.getId();
  }
  table.setVisibleColumns(visibleCols);
  for (  CmsDataViewColumn col : m_dataView.getColumns()) {
    table.setColumnHeader(col.getId(),col.getNiceName());
    table.setColumnWidth(col.getId(),col.getPreferredWidth());
  }
  table.setPageLength(0);
  table.setWidth("100%");
  table.setHeight("100%");
  m_table.set(table);
  table.setSelectable(true);
  replaceComponent(m_tablePlaceholder,table);
  setExpandRatio(table,1.0f);
  addAttachListener(new AttachListener(){
    private static final long serialVersionUID=1L;
    public void attach(    AttachEvent event){
      refreshData(true,null);
    }
  }
);
  List<CmsDataViewFilter> filters=new ArrayList<CmsDataViewFilter>(m_dataView.getFilters());
  updateFilters(filters);
}
