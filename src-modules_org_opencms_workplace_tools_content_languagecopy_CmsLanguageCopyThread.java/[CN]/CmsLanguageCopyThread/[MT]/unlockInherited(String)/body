{
  CmsObject cms=this.getCms();
  CmsLock parentLock=this.getParentLock(absoluteResourcename);
  if (!parentLock.isNullLock()) {
    if (parentLock.isInherited()) {
      this.unlockInherited(parentLock.getResourceName());
    }
 else {
      if (!parentLock.isLockableBy(cms.getRequestContext().currentUser())) {
        cms.changeLock(cms.getRequestContext().removeSiteRoot(parentLock.getResourceName()));
      }
      cms.unlockResource(cms.getRequestContext().removeSiteRoot(parentLock.getResourceName()));
    }
  }
}
