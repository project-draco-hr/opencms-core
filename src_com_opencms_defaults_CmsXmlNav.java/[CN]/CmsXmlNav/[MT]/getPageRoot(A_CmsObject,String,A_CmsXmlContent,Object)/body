{
  String cmsframe=((((Hashtable)userObject).get("cmsframe")).equals("plain") ? "?cmsframe=plain" : "");
  String servletPath=((HttpServletRequest)cms.getRequestContext().getRequest().getOriginalRequest()).getServletPath();
  int level=0;
  if (!tagcontent.equals("")) {
    try {
      level=Integer.parseInt(tagcontent);
    }
 catch (    NumberFormatException e) {
      throw new CmsException(e.getMessage());
    }
  }
  if (level > 0) {
    String currentFolder=extractFolder(cms,level);
    String navIndex=cms.readProperty(currentFolder,C_PROPERTY_NAVINDEX);
    if (navIndex != null) {
      currentFolder=currentFolder + navIndex + cmsframe;
    }
 else {
      currentFolder=currentFolder + C_NAVINDEX + cmsframe;
    }
    return (servletPath + currentFolder);
  }
  return (servletPath + cms.getRequestContext().getUri());
}
