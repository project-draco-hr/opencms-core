{
  String requestedUri=cms.getRequestContext().getUri();
  String servletPath=((HttpServletRequest)cms.getRequestContext().getRequest().getOriginalRequest()).getServletPath();
  int size=resources.size();
  int max=0;
  System.err.println("Resources: " + size);
  for (int i=0; i < size; i++) {
    A_CmsResource currentResource=(A_CmsResource)resources.elementAt(i);
    String path=currentResource.getAbsolutePath();
    String pos=cms.readMetainformation(path,C_METAINFO_NAVPOS);
    String text=cms.readMetainformation(path,C_METAINFO_NAVTEXT);
    System.err.println("Path: " + path + "Position: "+ pos+ "Text: "+ text);
    if (currentResource.getState() != C_STATE_DELETED) {
      if (pos != null && text != null && (!"".equals(pos)) && (!"".equals(text)) && ((!currentResource.getName().startsWith(C_TEMP_PREFIX)) || path.equals(requestedUri))) {
        navLink[max]=path;
        navPos[max]=new Float(pos).floatValue();
        max++;
      }
    }
  }
  sortNav(max,navLink,navText,navPos);
  return max;
}
