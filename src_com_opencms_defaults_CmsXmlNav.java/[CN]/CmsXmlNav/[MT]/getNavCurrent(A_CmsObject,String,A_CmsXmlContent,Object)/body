{
  String currentFolder=cms.getRequestContext().currentFolder().getAbsolutePath();
  Vector resources=cms.getSubFolders(currentFolder);
  Vector allFile=cms.getFilesInFolder(currentFolder);
  resources.ensureCapacity(resources.size() + allFile.size());
  Enumeration e=allFile.elements();
  while (e.hasMoreElements()) {
    resources.addElement(e.nextElement());
  }
  return buildNav(cms,doc,resources,currentFolder).getBytes();
}
