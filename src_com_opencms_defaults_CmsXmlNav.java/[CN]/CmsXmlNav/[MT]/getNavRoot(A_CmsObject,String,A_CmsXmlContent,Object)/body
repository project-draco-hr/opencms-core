{
  int level=0;
  if (tagcontent != null) {
    try {
      level=Integer.parseInt(tagcontent);
    }
 catch (    NumberFormatException e) {
      throw new CmsException(e.getMessage());
    }
  }
  String currentFolder="";
  if (level <= 0) {
    currentFolder=currentFolder=cms.rootFolder().getAbsolutePath();
  }
 else {
    currentFolder=extractFolder(cms,level);
  }
  Vector resources=cms.getSubFolders(currentFolder);
  Vector allFile=cms.getFilesInFolder(currentFolder);
  resources.ensureCapacity(resources.size() + allFile.size());
  Enumeration e=allFile.elements();
  while (e.hasMoreElements()) {
    resources.addElement(e.nextElement());
  }
  return buildNav(cms,doc,resources).getBytes();
}
