{
  String navIndex=C_NAVINDEX;
  try {
    navIndex=cms.readProperty(cms.getRequestContext().currentFolder().getAbsolutePath(),C_PROPERTY_NAVINDEX);
    navIndex=((navIndex == null || (navIndex != null && navIndex.equals(""))) ? C_NAVINDEX : navIndex);
  }
 catch (  Exception err) {
    navIndex=C_NAVINDEX;
  }
  String uri=cms.getRequestContext().currentFolder().getAbsolutePath() + navIndex;
  String requestedUri=cms.getRequestContext().getUri();
  String currentFolder="/";
  StringTokenizer st=new StringTokenizer(cms.getRequestContext().currentFolder().getAbsolutePath(),"/");
  int count=st.countTokens() + 1;
  if (level < 0) {
    level=(-1) * level;
    level=count - level;
  }
  if (exact.equals("true") && (level <= 0 || level > count || (level == count && requestedUri.equals(uri)))) {
    return "";
  }
  if (level == count && requestedUri.equals(uri)) {
    level--;
  }
  while (st.hasMoreTokens()) {
    if (level > 1) {
      currentFolder=currentFolder + st.nextToken() + "/";
      level--;
    }
 else {
      break;
    }
  }
  return currentFolder;
}
