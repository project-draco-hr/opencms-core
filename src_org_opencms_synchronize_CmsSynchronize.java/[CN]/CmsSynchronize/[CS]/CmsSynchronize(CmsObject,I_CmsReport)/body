{
  m_cms=cms;
  m_report=report;
  m_count=1;
  if (m_synchronizeModifications == null) {
    m_synchronizeModifications=OpenCms.getSystemInfo().getSynchronizeSettings().getSynchronizeModifications();
  }
  m_destinationPathInRfs=OpenCms.getSystemInfo().getSynchronizeSettings().getDestinationPathInRfs();
  if (m_destinationPathInRfs.endsWith(File.separator)) {
    m_destinationPathInRfs=m_destinationPathInRfs.substring(0,m_destinationPathInRfs.length() - 1);
  }
  m_sourcePathInVfs=OpenCms.getSystemInfo().getSynchronizeSettings().getSourcePathInVfs();
  if ((m_sourcePathInVfs != null) && (m_destinationPathInRfs != null)) {
    m_syncList=readSyncList();
    m_newSyncList=new HashMap();
    m_errorList=new HashMap();
    syncVfsFs(m_sourcePathInVfs);
    removeFromFs(m_destinationPathInRfs);
    copyFromFs(m_sourcePathInVfs);
    writeSyncList();
    m_syncList=null;
    m_newSyncList=null;
    m_errorList=null;
  }
 else {
    throw new CmsException("[" + this.getClass().getName() + "] "+ "Error during synchronization, cannot initialize sync process.");
  }
}
