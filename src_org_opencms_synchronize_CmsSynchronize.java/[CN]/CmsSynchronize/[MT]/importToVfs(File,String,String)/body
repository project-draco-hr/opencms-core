{
  try {
    byte[] content=getFileBytes(fsFile);
    String type=getFileType(resName);
    String filename=translate(fsFile.getName());
    CmsFile newFile=(CmsFile)m_cms.createResource(translate(folder),filename,m_cms.getResourceTypeId(type),null,content);
    Iterator i=m_synchronizeModifications.iterator();
    while (i.hasNext()) {
      try {
        ((I_CmsSynchonizeModification)i.next()).modifyVfs(m_cms,newFile,fsFile);
      }
 catch (      CmsSynchronizeException e) {
        break;
      }
    }
    m_cms.touch(m_cms.readAbsolutePath(newFile),fsFile.lastModified(),false);
    CmsResource newRes=m_cms.readFileHeader(m_cms.readAbsolutePath(newFile));
    CmsSynchronizeList syncList=new CmsSynchronizeList(resName,translate(resName),newRes.getDateLastModified(),fsFile.lastModified());
    m_newSyncList.put(translate(resName),syncList);
    newFile=null;
    content=null;
  }
 catch (  Exception e) {
    throw new CmsException(e.toString());
  }
}
