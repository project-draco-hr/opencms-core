{
  try {
    byte[] content=getFileBytes(fsFile);
    String filename=translate(fsFile.getName());
    m_report.print("( " + m_count++ + " ) ",I_CmsReport.C_FORMAT_NOTE);
    if (fsFile.isFile()) {
      m_report.print(m_report.key("report.sync_importing_file"),I_CmsReport.C_FORMAT_NOTE);
    }
 else {
      m_report.print(m_report.key("report.sync_importing_folder"),I_CmsReport.C_FORMAT_NOTE);
    }
    m_report.print(fsFile.getAbsolutePath().replace('\\','/'));
    m_report.print(m_report.key("report.sync_from_file_system_as"),I_CmsReport.C_FORMAT_NOTE);
    int resType=OpenCms.getResourceManager().getDefaultTypeForName(resName).getTypeId();
    CmsResource newFile=m_cms.createResource(translate(folder) + filename,resType,content,new ArrayList());
    m_report.print(m_cms.getSitePath(newFile));
    m_report.print(m_report.key("report.dots"));
    Iterator i=m_synchronizeModifications.iterator();
    while (i.hasNext()) {
      try {
        ((I_CmsSynchonizeModification)i.next()).modifyVfs(m_cms,newFile,fsFile);
      }
 catch (      CmsSynchronizeException e) {
        break;
      }
    }
    m_cms.touch(m_cms.getSitePath(newFile),fsFile.lastModified(),I_CmsConstants.C_DATE_UNCHANGED,I_CmsConstants.C_DATE_UNCHANGED,false);
    CmsResource newRes=m_cms.readResource(m_cms.getSitePath(newFile));
    CmsSynchronizeList syncList=new CmsSynchronizeList(resName,translate(resName),newRes.getDateLastModified(),fsFile.lastModified());
    m_newSyncList.put(translate(resName),syncList);
    newFile=null;
    content=null;
    m_report.println(m_report.key("report.ok"),I_CmsReport.C_FORMAT_OK);
  }
 catch (  Exception e) {
    throw new CmsSynchronizeException(e.getMessage(),e);
  }
}
