{
  File[] res;
  File fsFile=getFileInFs(folder);
  try {
    m_cms.readFolder(translate(folder));
  }
 catch (  CmsException e) {
    m_report.print("( " + m_count++ + " ) ",I_CmsReport.C_FORMAT_NOTE);
    m_report.print(m_report.key("report.sync_importing_folder"),I_CmsReport.C_FORMAT_NOTE);
    m_report.print(fsFile.getAbsolutePath().replace('\\','/'));
    String foldername=translate(folder);
    m_report.print(m_report.key("report.sync_from_file_system_as"),I_CmsReport.C_FORMAT_NOTE);
    m_report.print(foldername);
    m_report.print(m_report.key("report.dots"));
    CmsResource newFolder=m_cms.createResource(foldername,CmsResourceTypeFolder.C_RESOURCE_TYPE_ID);
    Iterator i=m_synchronizeModifications.iterator();
    while (i.hasNext()) {
      try {
        ((I_CmsSynchonizeModification)i.next()).modifyVfs(m_cms,newFolder,fsFile);
      }
 catch (      CmsSynchronizeException e1) {
        break;
      }
    }
    newFolder=m_cms.readFolder(foldername);
    String resourcename=m_cms.readAbsolutePath(newFolder);
    CmsSynchronizeList sync=new CmsSynchronizeList(folder,resourcename,newFolder.getDateLastModified(),fsFile.lastModified());
    m_newSyncList.put(resourcename,sync);
    m_report.println(m_report.key("report.ok"),I_CmsReport.C_FORMAT_OK);
  }
  if (fsFile.isDirectory()) {
    res=fsFile.listFiles();
    for (int i=0; i < res.length; i++) {
      String resname=res[i].getAbsolutePath();
      resname=resname.substring(m_destinationPathInRfs.length());
      resname=resname.replace(File.separatorChar,'/');
      if (res[i].isFile()) {
        if (!m_newSyncList.containsKey(translate(resname))) {
          importToVfs(res[i],resname,folder);
        }
      }
 else {
        copyFromFs(resname + "/");
      }
    }
  }
  res=null;
}
