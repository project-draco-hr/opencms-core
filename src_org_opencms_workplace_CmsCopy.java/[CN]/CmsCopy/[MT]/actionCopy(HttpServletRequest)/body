{
  String filename=getSettings().getFileUri();
  CmsResource file=null;
  file=(CmsResource)getCms().readFileHeader(filename);
  String wholePath=(String)request.getParameter("folder");
  String flags=(String)request.getParameter("keeprights");
  String action=(String)request.getParameter("action");
  String newFolder=getNewFolder(wholePath,file);
  String newFile=getNewFile(wholePath,file);
  if ("confirmoverwrite".equals(action)) {
    getCms().deleteResource(newFolder + newFile);
  }
  getCms().copyResource(filename,newFolder + newFile,"true".equals(flags));
  return true;
}
