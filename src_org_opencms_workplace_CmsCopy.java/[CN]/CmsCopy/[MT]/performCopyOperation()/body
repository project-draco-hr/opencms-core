{
  if (CmsResource.isFolder(getParamFile()) && !DIALOG_WAIT.equals(getParamAction())) {
    return false;
  }
  String target=getParamTarget();
  if (target == null)   target="";
  if (!target.startsWith("/")) {
    target=CmsResource.getParent(getParamFile()) + target;
  }
  try {
    CmsResource res=getCms().readFileHeader(target);
    if (res.isFolder()) {
      if (!target.endsWith("/"))       target+="/";
      target=target + CmsResource.getName(getParamFile());
    }
  }
 catch (  CmsException e) {
  }
  setParamTarget(target);
  if (DIALOG_CONFIRMED.equals(getParamAction())) {
    getCms().deleteResource(target);
  }
  getCms().copyResource(getParamFile(),target,"true".equals(getParamKeeprights()));
  return true;
}
