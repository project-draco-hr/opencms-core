{
  String name=null;
  String rootPath=vfsEntry.getRootPath();
  if (rootPath.equals("/") || rootPath.equals("")) {
    name="/";
  }
 else {
    name=CmsResource.getName(vfsEntry.getRootPath());
    if (name.endsWith("/")) {
      name=name.substring(0,name.length() - 1);
    }
  }
  CmsDataValue dataValue=new CmsDataValue(600,3,CmsIconUtil.getResourceIconClasses(I_CmsGalleryProviderConstants.RESOURCE_TYPE_FOLDER,true),name,vfsEntry.getDisplayName());
  dataValue.setUnselectable();
  if (vfsEntry.isEditable()) {
    dataValue.addButton(createUploadButtonForTarget(vfsEntry.getRootPath()));
  }
  final CmsCheckBox checkbox=new CmsCheckBox();
  CmsLazyTreeItem result=new CmsLazyTreeItem(checkbox,dataValue,true);
  SelectionHandler selectionHandler=new SelectionHandler(vfsEntry,checkbox);
  checkbox.addClickHandler(selectionHandler);
  dataValue.addDomHandler(selectionHandler,DoubleClickEvent.getType());
  dataValue.addButton(createSelectButton(selectionHandler));
  if (getTabHandler().hasSelectResource()) {
    String selectPath=m_tabHandler.getSelectPath(vfsEntry);
    dataValue.addButton(createSelectResourceButton(selectPath,vfsEntry.getStructureId(),vfsEntry.getDisplayName(),I_CmsGalleryProviderConstants.RESOURCE_TYPE_FOLDER));
  }
  m_entryMap.put(result,vfsEntry);
  m_itemsByPath.put(vfsEntry.getRootPath(),result);
  result.setLeafStyle(false);
  result.setSmallView(true);
  return result;
}
