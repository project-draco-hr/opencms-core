{
  CmsMasterDataSet newDataset=new CmsMasterDataSet();
  Vector channelRelations=new Vector();
  Vector masterMedia=new Vector();
  try {
    int subIdInt=Integer.parseInt(subId);
    newDataset=getMasterDataSet(subIdInt,currentElement);
  }
 catch (  Exception e) {
    throw new CmsException("Cannot get dataset ",e);
  }
  try {
    channelRelations=getMasterChannelRelation(currentElement);
  }
 catch (  Exception e) {
    throw new CmsException("Cannot get channelrelations ",e);
  }
  try {
    masterMedia=getMasterMedia(currentElement);
  }
 catch (  Exception e) {
    throw new CmsException("Cannot get media ",e);
  }
  newDataset.m_channelToAdd=channelRelations;
  newDataset.m_mediaToAdd=masterMedia;
  CmsMasterContent newMaster=getContentDefinition(classname,new Class[]{CmsObject.class,CmsMasterDataSet.class},new Object[]{m_cms,newDataset});
  try {
    int userId=newMaster.getOwner();
    int groupId=newMaster.getGroupId();
    newMaster.importMaster(m_cms);
    newMaster.chown(m_cms,userId);
    newMaster.chgrp(m_cms,groupId);
  }
 catch (  Exception e) {
    throw new CmsException("Cannot write master ",e);
  }
}
