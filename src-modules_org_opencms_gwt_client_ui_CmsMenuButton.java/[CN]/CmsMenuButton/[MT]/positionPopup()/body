{
  CmsPositionBean buttonPosition=CmsPositionBean.generatePositionInfo(m_button.getElement());
  int contentTop;
  int contentWidth=m_content.getOffsetWidth();
  int contentLeft=m_isOpenRight ? buttonPosition.getLeft() - 5 : buttonPosition.getLeft() - contentWidth + buttonPosition.getWidth() + 5;
  int windowWidth=Window.getClientWidth();
  if (m_isToolbarMode) {
    m_content.getElement().getStyle().setPosition(Position.FIXED);
    contentTop=buttonPosition.getTop() + buttonPosition.getHeight() - Window.getScrollTop() + 4;
    if ((contentWidth + 10 < windowWidth) && (contentWidth + contentLeft > windowWidth)) {
      contentLeft=windowWidth - contentWidth - 10;
    }
 else {
      contentLeft-=Window.getScrollLeft();
    }
    m_content.setPopupPosition(contentLeft,contentTop);
    return;
  }
  contentTop=buttonPosition.getTop() + buttonPosition.getHeight() + 1;
  int contentHeight=m_content.getOffsetHeight();
  int windowHeight=Window.getClientHeight();
  boolean showBelowButton=true;
  if ((contentHeight + 10 < windowHeight) && (buttonPosition.getTop() - 1 > contentHeight) && (contentHeight + contentTop + Window.getScrollTop() > windowHeight)) {
    showBelowButton=false;
    contentTop=buttonPosition.getTop() - 1 - contentHeight;
    getElement().addClassName(I_CmsLayoutBundle.INSTANCE.menuButtonCss().showAbove());
    m_menuConnect.removeClassName(I_CmsLayoutBundle.INSTANCE.generalCss().cornerTop());
    m_menuConnect.addClassName(I_CmsLayoutBundle.INSTANCE.generalCss().cornerBottom());
  }
 else {
    getElement().removeClassName(I_CmsLayoutBundle.INSTANCE.menuButtonCss().showAbove());
    m_menuConnect.addClassName(I_CmsLayoutBundle.INSTANCE.generalCss().cornerTop());
    m_menuConnect.removeClassName(I_CmsLayoutBundle.INSTANCE.generalCss().cornerBottom());
  }
  if ((contentWidth + 10 < windowWidth) && (contentWidth + contentLeft > windowWidth)) {
    contentLeft=windowWidth - contentWidth - 10;
  }
  m_content.setPopupPosition(contentLeft,contentTop);
  m_content.showConnect(buttonPosition.getWidth() + 2,m_isOpenRight,showBelowButton);
}
