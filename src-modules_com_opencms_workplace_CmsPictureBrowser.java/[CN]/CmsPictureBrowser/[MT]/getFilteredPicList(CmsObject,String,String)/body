{
  List allPics=cms.getFilesInFolder(folder);
  Vector filteredPics=new Vector();
  for (int i=0; i < allPics.size(); i++) {
    CmsFile file=(CmsFile)allPics.get(i);
    if (file.getState() != I_CmsConstants.C_STATE_DELETED) {
      String filename=file.getName();
      String title=cms.readProperty(cms.getSitePath(file),CmsPropertyDefinition.PROPERTY_TITLE);
      boolean filenameFilter=inFilter(filename,filter);
      boolean titleFilter=((title == null) || ("".equals(title))) ? false : inFilter(title,filter);
      if ((filenameFilter || titleFilter) && isImage(filename)) {
        filteredPics.addElement(file);
      }
    }
  }
  return filteredPics;
}
