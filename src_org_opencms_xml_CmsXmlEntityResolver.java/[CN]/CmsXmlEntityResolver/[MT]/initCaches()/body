{
  if (m_cacheTemporary == null) {
    LRUMap cacheTemporary=new LRUMap(128);
    m_cacheTemporary=Collections.synchronizedMap(cacheTemporary);
    HashMap cachePermanent=new HashMap(32);
    m_cachePermanent=Collections.synchronizedMap(cachePermanent);
    LRUMap cacheContentDefinitions=new LRUMap(64);
    m_cacheContentDefinitions=Collections.synchronizedMap(cacheContentDefinitions);
  }
  if (OpenCms.getRunLevel() > OpenCms.RUNLEVEL_1_CORE_OBJECT) {
    if ((OpenCms.getMemoryMonitor() != null) && !OpenCms.getMemoryMonitor().isMonitoring(CmsXmlEntityResolver.class.getName() + ".cacheTemporary")) {
      LRUMap cacheTemporary=new LRUMap(128);
      cacheTemporary.putAll(m_cacheTemporary);
      m_cacheTemporary=Collections.synchronizedMap(cacheTemporary);
      OpenCms.getMemoryMonitor().register(CmsXmlEntityResolver.class.getName() + ".cacheTemporary",cacheTemporary);
      HashMap cachePermanent=new HashMap(32);
      cachePermanent.putAll(m_cachePermanent);
      m_cachePermanent=Collections.synchronizedMap(cachePermanent);
      OpenCms.getMemoryMonitor().register(CmsXmlEntityResolver.class.getName() + ".cachePermanent",cachePermanent);
      LRUMap cacheContentDefinitions=new LRUMap(64);
      cacheContentDefinitions.putAll(m_cacheContentDefinitions);
      m_cacheContentDefinitions=Collections.synchronizedMap(cacheContentDefinitions);
      OpenCms.getMemoryMonitor().register(CmsXmlEntityResolver.class.getName() + ".cacheContentDefinitions",cacheContentDefinitions);
    }
  }
}
