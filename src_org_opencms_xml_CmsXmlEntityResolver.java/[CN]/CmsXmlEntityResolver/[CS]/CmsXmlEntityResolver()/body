{
  LRUMap lruMap=new LRUMap(128);
  m_cacheTemporary=Collections.synchronizedMap(lruMap);
  HashMap hashMap=new HashMap(32);
  m_cachePermanent=Collections.synchronizedMap(hashMap);
  if (OpenCms.getRunLevel() > 1) {
    try {
      m_cms=OpenCms.initCmsObject(OpenCms.getDefaultUsers().getUserGuest());
    }
 catch (    CmsException e) {
      OpenCms.getLog(this).error("Unable to initialize default guest user");
    }
    if ((OpenCms.getMemoryMonitor() != null) && OpenCms.getMemoryMonitor().enabled()) {
      OpenCms.getMemoryMonitor().register(this.getClass().getName() + "." + "m_cacheTemporary",lruMap);
      OpenCms.getMemoryMonitor().register(this.getClass().getName() + "." + "m_cachePermanent",hashMap);
    }
    OpenCms.addCmsEventListener(this,new int[]{I_CmsEventListener.EVENT_CLEAR_CACHES,I_CmsEventListener.EVENT_PUBLISH_PROJECT,I_CmsEventListener.EVENT_RESOURCE_MODIFIED,I_CmsEventListener.EVENT_RESOURCE_DELETED});
  }
}
