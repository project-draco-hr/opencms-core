{
  if (m_out == null) {
    if (!m_writeOnlyToBuffer) {
      if (m_cachingRequired || !(m_res instanceof CmsFlexResponse)) {
        m_out=new com.opencms.flex.cache.CmsFlexResponse.CmsServletOutputStream(m_res.getOutputStream());
      }
 else {
        m_out=(com.opencms.flex.cache.CmsFlexResponse.CmsServletOutputStream)m_res.getOutputStream();
      }
    }
 else {
      m_out=new com.opencms.flex.cache.CmsFlexResponse.CmsServletOutputStream();
    }
  }
  if (m_writer == null) {
    m_writer=new PrintWriter(new BufferedWriter(new OutputStreamWriter(m_out,A_OpenCms.getDefaultEncoding())),false);
  }
}
