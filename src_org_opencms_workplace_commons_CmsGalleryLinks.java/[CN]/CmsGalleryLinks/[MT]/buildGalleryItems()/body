{
  StringBuffer result=new StringBuffer(64);
  int limitFrom=0;
  int limitTo=0;
  String pageno=getParamPage();
  if (pageno == null) {
    pageno="1";
  }
  int maxperpage=getSettings().getUserSettings().getExplorerFileEntries();
  List items=getGalleryItems();
  if (items != null && items.size() > 0) {
    Iterator i=items.iterator();
    limitFrom=(Integer.parseInt(pageno) * maxperpage) - maxperpage;
    limitTo=limitFrom + maxperpage;
    int current=0;
    while (i.hasNext()) {
      current++;
      CmsResource res=(CmsResource)i.next();
      if (current > limitFrom && current <= limitTo) {
        try {
          String resPath=getCms().getSitePath(res);
          String resName=CmsResource.getName(resPath);
          String title=getCms().readPropertyObject(resPath,I_CmsConstants.C_PROPERTY_TITLE,false).getValue(resName);
          String resType=OpenCms.getResourceManager().getResourceType(res.getTypeId()).getTypeName();
          result.append("<tr>\n");
          result.append("\t<td>");
          result.append("<img src=\"");
          result.append(getSkinUri());
          result.append("filetypes/");
          result.append(resType);
          result.append(".gif\">");
          result.append("</td>\n");
          result.append("\t<td class=\"list\"><a href=\"javascript: preview(\'");
          result.append(resPath);
          result.append("\');\" title=\"");
          result.append(key("button.preview"));
          result.append("\">");
          result.append(title);
          result.append("</a></td>\n");
          result.append("\t<td class=\"list\">");
          result.append(resName);
          result.append("</td>\n");
          result.append("\t<td class=\"list\">");
          CmsFile file=getCms().readFile(getCms().getSitePath(res));
          String linkTarget=new String(file.getContents());
          result.append(linkTarget);
          result.append("</td>\n");
          result.append("</tr>\n");
        }
 catch (        CmsException e) {
        }
      }
    }
  }
  return result.toString();
}
