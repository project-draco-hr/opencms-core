{
  final I_CmsContextMenuItem data=node.getData();
  ContextMenuItem guiMenuItem=null;
  Locale locale=A_CmsUI.get().getLocale();
  if (parent instanceof ContextMenu) {
    guiMenuItem=((ContextMenu)parent).addItem(data.getTitle(locale));
  }
 else {
    guiMenuItem=((ContextMenuItem)parent).addItem(data.getTitle(locale));
  }
  if (m_treeBuilder.getVisibility(data).isInActive()) {
    guiMenuItem.setEnabled(false);
  }
  if (node.getChildren().size() > 0) {
    for (    CmsTreeNode<I_CmsContextMenuItem> childNode : node.getChildren()) {
      createItem(guiMenuItem,childNode);
    }
  }
 else {
    guiMenuItem.addItemClickListener(new ContextMenuItemClickListener(){
      public void contextMenuItemClicked(      ContextMenuItemClickEvent event){
        data.executeAction(createDialogContext());
      }
    }
);
  }
  return guiMenuItem;
}
