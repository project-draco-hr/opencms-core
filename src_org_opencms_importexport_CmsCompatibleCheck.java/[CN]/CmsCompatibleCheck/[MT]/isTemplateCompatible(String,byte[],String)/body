{
  if (CmsResourceTypeFolder.RESOURCE_TYPE_NAME.equals(type)) {
    return true;
  }
  if (name == null) {
    return false;
  }
  if (name.startsWith(CmsCompatibleCheck.VFS_PATH_BODIES)) {
    if (!CmsResourceTypePlain.getStaticTypeName().equals(type)) {
      return false;
    }
    try {
      Document xmlDoc=DocumentHelper.parseText(new String(content));
      for (Node n=(Node)xmlDoc.content().get(0); n != null; n=treeWalker(xmlDoc,n)) {
        short ntype=n.getNodeType();
        if (((ntype > Node.CDATA_SECTION_NODE) && (ntype < Node.DOCUMENT_TYPE_NODE)) || (ntype == Node.ATTRIBUTE_NODE)) {
          return false;
        }
        if (n.getNodeType() == Node.ELEMENT_NODE) {
          String tagName=n.getName();
          if (!("template".equalsIgnoreCase(tagName) || "xmltemplate".equalsIgnoreCase(tagName))) {
            return false;
          }
        }
      }
    }
 catch (    Exception e) {
      return false;
    }
  }
 else   if (name.startsWith(CmsCompatibleCheck.VFS_PATH_DEFAULT_TEMPLATES) || (name.startsWith(CmsWorkplace.VFS_PATH_MODULES) && (name.indexOf("/" + CmsWorkplace.VFS_DIR_TEMPLATES) > -1))) {
    if (!CmsResourceTypePlain.getStaticTypeName().equals(type)) {
      return false;
    }
    try {
      Document xmlDoc=DocumentHelper.parseText(new String(content));
      List list=xmlDoc.getRootElement().content();
      list=((Element)list.get(0)).content();
      int counterEldefs=0;
      int counterTeplate=0;
      for (int i=0; i < list.size(); i++) {
        Node n=(Node)list.get(i);
        short nodeType=n.getNodeType();
        if (nodeType == Node.ELEMENT_NODE) {
          String nodeName=n.getName();
          if ("elementdef".equalsIgnoreCase(nodeName)) {
            if (!checkElementDefOk((Element)n)) {
              return false;
            }
            counterEldefs++;
          }
 else           if ("template".equalsIgnoreCase(nodeName)) {
            if (!checkTemplateTagOk((Element)n)) {
              return false;
            }
            counterTeplate++;
          }
 else {
            return false;
          }
        }
 else         if (nodeType == Node.TEXT_NODE) {
          String nodeValue=n.getText();
          if ((nodeValue != null) && (nodeValue.trim().length() > 0)) {
            return false;
          }
        }
 else {
          return false;
        }
      }
      if ((counterEldefs != 2) || (counterTeplate != 1)) {
        return false;
      }
    }
 catch (    Exception e) {
      return false;
    }
  }
  return true;
}
