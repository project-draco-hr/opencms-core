{
  try {
    OpenCmsTestLogAppender.setBreakOnError(false);
    CmsObject cms=getCmsObject();
    CmsUser editor=cms.createUser("Editor","password","desc",new HashMap<String,Object>());
    cms.addUserToGroup("Editor","Users");
    cms.lockResource("/system/");
    cms.chacc("/system/",I_CmsPrincipal.PRINCIPAL_GROUP,"Users","+w");
    cms.unlockResource("/system/");
    CmsObject editorCms=OpenCms.initCmsObject(cms);
    editorCms.loginUser("Editor","password");
    editorCms.getRequestContext().setCurrentProject(cms.readProject("Offline"));
    CmsResource first=editorCms.createResource("/system/er1",1);
    CmsResource second=editorCms.createResource("/system/er2",1);
    CmsResource third=editorCms.createResource("/system/er3",1);
    List<CmsResource> resources=new ArrayList<CmsResource>();
    resources.add(first);
    resources.add(second);
    resources.add(third);
    OpenCms.getWorkflowManager().executeAction(editorCms,CmsWorkflowManager.ACTION_RELEASE,resources);
    first=cms.readResource("/system/er1");
    second=cms.readResource("/system/er2");
    third=cms.readResource("/system/er3");
    assertEquals(editor.getId(),first.getUserLastModified());
    assertEquals(editor.getId(),second.getUserLastModified());
    assertEquals(editor.getId(),third.getUserLastModified());
  }
  finally {
    OpenCmsTestLogAppender.setBreakOnError(false);
  }
}
