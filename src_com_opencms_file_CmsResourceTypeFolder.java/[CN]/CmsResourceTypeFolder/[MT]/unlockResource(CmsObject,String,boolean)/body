{
  if (C_BODY_MIRROR) {
    try {
      cms.doUnlockResource(I_CmsWpConstants.C_VFS_PATH_BODIES + resource.substring(1));
    }
 catch (    CmsException e) {
    }
  }
  cms.doUnlockResource(resource);
  if (forceRecursive) {
    List allSubFolders=(List)new ArrayList();
    List allSubFiles=(List)new ArrayList();
    getAllResources(cms,resource,allSubFiles,allSubFolders);
    for (int i=0; i < allSubFiles.size(); i++) {
      CmsFile curFile=(CmsFile)allSubFiles.get(i);
      cms.unlockResource(cms.readAbsolutePath(curFile),false);
    }
    for (int i=0; i < allSubFolders.size(); i++) {
      CmsFolder curFolder=(CmsFolder)allSubFolders.get(i);
      cms.doUnlockResource(cms.readAbsolutePath(curFolder));
    }
  }
}
