{
  CmsResource importedResource=null;
  destination=importPath + destination;
  if (!destination.endsWith(I_CmsConstants.C_FOLDER_SEPARATOR))   destination+=I_CmsConstants.C_FOLDER_SEPARATOR;
  boolean changed=true;
  int resaccess=0;
  try {
    resaccess=Integer.parseInt(access);
  }
 catch (  Exception e) {
  }
  try {
    importedResource=cms.doImportResource(destination,uuid,uuidfile,uuidresource,getResourceType(),properties,getLauncherType(),resaccess,lastmodified,new byte[0]);
    if (importedResource != null) {
      changed=false;
    }
  }
 catch (  CmsException e) {
  }
  if (changed) {
    changed=false;
    importedResource=cms.readFolder(destination);
    Map oldProperties=cms.readProperties(cms.readAbsolutePath(importedResource));
    if (oldProperties == null) {
      oldProperties=new HashMap();
    }
    if (properties == null) {
      properties=new Hashtable();
    }
    if (properties.size() > 0) {
      if (oldProperties.size() != properties.size()) {
        changed=true;
      }
 else {
        Iterator i=properties.keySet().iterator();
        while (i.hasNext()) {
          String curKey=(String)i.next();
          String value=(String)properties.get(curKey);
          String oldValue=(String)oldProperties.get(curKey);
          if ((oldValue == null) || !(value.trim().equals(oldValue.trim()))) {
            changed=true;
            break;
          }
        }
      }
    }
    if (importedResource.getType() != getResourceType()) {
      changed=true;
    }
    if (changed) {
      lockResource(cms,cms.readAbsolutePath(importedResource),true);
      cms.doWriteResource(cms.readAbsolutePath(importedResource),properties,cms.getRequestContext().currentUser().getName(),cms.getRequestContext().currentGroup().getName(),resaccess,CmsResourceTypeFolder.C_RESOURCE_TYPE_ID,new byte[0]);
    }
  }
  return importedResource;
}
