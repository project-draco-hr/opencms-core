{
  Vector allSubFolders=new Vector();
  Vector allSubFiles=new Vector();
  getAllResources(cms,folder,allSubFiles,allSubFolders);
  for (int i=0; i < allSubFiles.size(); i++) {
    CmsFile curFile=(CmsFile)allSubFiles.elementAt(i);
    if (curFile.getState() != I_CmsConstants.C_STATE_DELETED) {
      try {
        cms.deleteResource(cms.readAbsolutePath(curFile));
      }
 catch (      CmsException e) {
        if (e.getType() != CmsException.C_RESOURCE_DELETED) {
          throw e;
        }
      }
    }
  }
  for (int i=allSubFolders.size() - 1; i > -1; i--) {
    CmsFolder curFolder=(CmsFolder)allSubFolders.elementAt(i);
    if (curFolder.getState() != I_CmsConstants.C_STATE_DELETED) {
      cms.doDeleteFolder(cms.readAbsolutePath(curFolder));
    }
  }
  cms.doDeleteFolder(folder);
  String bodyFolder=I_CmsWpConstants.C_VFS_PATH_BODIES.substring(0,I_CmsWpConstants.C_VFS_PATH_BODIES.lastIndexOf("/")) + folder;
  try {
    cms.readFolder(bodyFolder);
    cms.deleteResource(bodyFolder);
  }
 catch (  CmsException ex) {
  }
}
