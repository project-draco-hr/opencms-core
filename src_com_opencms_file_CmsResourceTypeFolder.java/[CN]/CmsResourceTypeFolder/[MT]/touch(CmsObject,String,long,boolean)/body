{
  Vector allFolders=new Vector();
  Vector allFiles=new Vector();
  Vector unvisited=new Vector();
  CmsFolder currentFolder=cms.readFolder(resourceName);
  CmsFile currentFile=null;
  if (!cms.hasPermissions(currentFolder,I_CmsConstants.C_WRITE_ACCESS))   return;
  if (touchRecursive) {
    unvisited.add(currentFolder);
    while (unvisited.size() > 0) {
      Enumeration unvisitedFolders=unvisited.elements();
      while (unvisitedFolders.hasMoreElements()) {
        currentFolder=(CmsFolder)unvisitedFolders.nextElement();
        unvisited.remove((CmsFolder)currentFolder);
        allFolders.add((CmsFolder)currentFolder);
        allFiles.addAll(cms.getFilesInFolder(cms.readAbsolutePath(currentFolder),true));
        unvisited.addAll(cms.getSubFolders(cms.readAbsolutePath(currentFolder),true));
      }
    }
  }
 else {
    allFolders.add((CmsFolder)currentFolder);
  }
  Enumeration touchFolders=allFolders.elements();
  while (touchFolders.hasMoreElements()) {
    currentFolder=(CmsFolder)touchFolders.nextElement();
    if (DEBUG > 0)     System.err.println("touching: " + cms.readAbsolutePath(currentFolder));
    cms.doTouch(cms.readAbsolutePath(currentFolder),timestamp);
    String bodyFolder=C_VFS_PATH_BODIES.substring(0,C_VFS_PATH_BODIES.lastIndexOf("/")) + cms.readAbsolutePath(currentFolder);
    try {
      cms.readFolder(bodyFolder);
      cms.doTouch(bodyFolder,timestamp);
    }
 catch (    CmsException e) {
    }
  }
  Enumeration touchFiles=allFiles.elements();
  while (touchFiles.hasMoreElements()) {
    currentFile=(CmsFile)touchFiles.nextElement();
    if (DEBUG > 0)     System.err.println("touching: " + cms.readAbsolutePath(currentFile));
    if (currentFile.getState() != I_CmsConstants.C_STATE_DELETED) {
      cms.touch(cms.readAbsolutePath(currentFile),timestamp,false);
    }
  }
}
