{
  String resPath=getCms().getSitePath(res);
  String currentPropertyValue=getParamPropertyValue();
  try {
    CmsProperty currentProperty=getCms().readPropertyObject(resPath,I_CmsConstants.C_PROPERTY_TITLE,false);
    if (currentProperty.isNullProperty()) {
      currentProperty=new CmsProperty();
      currentProperty.setName(I_CmsConstants.C_PROPERTY_TITLE);
      if (OpenCms.getWorkplaceManager().isDefaultPropertiesOnStructure()) {
        currentProperty.setStructureValue(currentPropertyValue);
        currentProperty.setResourceValue(null);
      }
 else {
        currentProperty.setStructureValue(null);
        currentProperty.setResourceValue(currentPropertyValue);
      }
    }
 else     if (currentProperty.getStructureValue() != null) {
      currentProperty.setStructureValue(currentPropertyValue);
      currentProperty.setResourceValue(null);
    }
 else {
      currentProperty.setStructureValue(null);
      currentProperty.setResourceValue(currentPropertyValue);
    }
    CmsLock lock=getCms().getLock(res);
    if (lock.getType() == CmsLock.C_TYPE_UNLOCKED) {
      getCms().lockResource(resPath);
    }
    getCms().writePropertyObject(resPath,currentProperty);
    getCms().unlockResource(resPath);
  }
 catch (  CmsException e) {
    if (OpenCms.getLog(this).isErrorEnabled()) {
      OpenCms.getLog(this).error(e);
    }
  }
}
