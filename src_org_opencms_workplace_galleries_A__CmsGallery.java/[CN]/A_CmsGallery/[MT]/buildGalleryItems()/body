{
  StringBuffer result=new StringBuffer(64);
  result.append("<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"maxwidth\">");
  result.append(buildGalleryItemListHeadline());
  List items=getGalleryItems();
  String pageno=getParamPage();
  if (pageno == null) {
    pageno="1";
  }
  if (items != null && items.size() > 0) {
    int start=0;
    int end=getSettings().getUserSettings().getExplorerFileEntries();
    start=(Integer.parseInt(pageno) * end) - end;
    end=(Integer.parseInt(pageno) * end);
    if (end > items.size()) {
      end=items.size();
    }
    if (start > end) {
      start=0;
    }
    for (int i=start; i < end; i++) {
      CmsResource res=(CmsResource)items.get(i);
      int state=res.getState();
      String tdClass;
switch (state) {
case CmsResource.STATE_CHANGED:
        tdClass="fc";
      break;
case CmsResource.STATE_NEW:
    tdClass="fn";
  break;
default :
tdClass="list";
}
String resPath=getCms().getSitePath(res);
String resName=CmsResource.getName(resPath);
String title=getPropertyValue(res,CmsPropertyDefinition.PROPERTY_TITLE);
result.append("<tr>\n");
result.append(buildGalleryItemListCustomStartCols(res,tdClass));
result.append("\t<td class=\"");
result.append(tdClass);
result.append("\"><a class=\"");
result.append(tdClass);
result.append("\" href=\"javascript: preview(\'");
result.append(resPath);
result.append("\');\" title=\"");
result.append(key("button.preview"));
result.append("\">");
result.append(resName);
result.append("</a></td>\n");
result.append("\t<td class=\"");
result.append(tdClass);
result.append("\">");
result.append(CmsEncoder.escapeXml(title));
result.append("</td>\n");
result.append(buildGalleryItemListCustomEndCols(res,tdClass));
result.append("</tr>\n");
}
}
result.append("</table>");
return result.toString();
}
