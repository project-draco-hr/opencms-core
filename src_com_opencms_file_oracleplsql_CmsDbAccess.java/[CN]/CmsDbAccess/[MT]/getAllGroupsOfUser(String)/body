{
  com.opencms.file.oracleplsql.CmsQueries cq=(com.opencms.file.oracleplsql.CmsQueries)m_cq;
  CmsUser user=null;
  try {
    user=readUser(username,C_USER_TYPE_SYSTEMUSER);
  }
 catch (  CmsException exc) {
    user=readUser(username,C_USER_TYPE_WEBUSER);
  }
  CmsGroup group;
  Vector groups=new Vector();
  CallableStatement statement=null;
  Connection con=null;
  ResultSet res=null;
  try {
    con=DriverManager.getConnection(m_poolName);
    statement=con.prepareCall(cq.get("C_PLSQL_GROUPS_GETGROUPSOFUSER"));
    statement.registerOutParameter(1,oracle.jdbc.driver.OracleTypes.CURSOR);
    statement.setInt(2,user.getId());
    statement.execute();
    res=(ResultSet)statement.getObject(1);
    while (res.next()) {
      group=new CmsGroup(res.getInt(m_cq.get("C_GROUPS_GROUP_ID")),res.getInt(m_cq.get("C_GROUPS_PARENT_GROUP_ID")),res.getString(m_cq.get("C_GROUPS_GROUP_NAME")),res.getString(m_cq.get("C_GROUPS_GROUP_DESCRIPTION")),res.getInt(m_cq.get("C_GROUPS_GROUP_FLAGS")));
      groups.addElement(group);
    }
  }
 catch (  SQLException sqlexc) {
    CmsException cmsException=getCmsException("[" + this.getClass().getName() + "] ",sqlexc);
    throw cmsException;
  }
catch (  Exception e) {
    throw new CmsException("[" + this.getClass().getName() + "]",e);
  }
 finally {
    if (res != null) {
      try {
        res.close();
      }
 catch (      SQLException se) {
      }
    }
    if (statement != null) {
      try {
        statement.close();
      }
 catch (      SQLException exc) {
      }
    }
    if (con != null) {
      try {
        con.close();
      }
 catch (      SQLException e) {
      }
    }
  }
  return groups;
}
