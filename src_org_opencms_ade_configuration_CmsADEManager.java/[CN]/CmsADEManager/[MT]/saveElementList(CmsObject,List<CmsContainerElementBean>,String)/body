{
  while (elementList.size() > 100) {
    elementList.remove(elementList.size() - 1);
  }
  JSONArray data=new JSONArray();
  Set<String> excludedSettings=new HashSet<String>();
  excludedSettings.add(CmsTemplateContextInfo.SETTING);
  for (  CmsContainerElementBean element : elementList) {
    data.put(elementToJson(element,excludedSettings));
  }
  CmsUser user=cms.getRequestContext().getCurrentUser();
  user.setAdditionalInfo(listKey,data.toString());
  cms.writeUser(user);
}
