{
  try {
    CmsGwtDialogExtension dialogExtension=new CmsGwtDialogExtension(A_CmsUI.get(),new I_CmsUpdateListener<String>(){
      public void onUpdate(      List<String> updatedItems){
        URI uri=A_CmsUI.get().getPage().getLocation();
        try {
          String query=uri.getQuery();
          final int idLength=6;
          String lrid=RandomStringUtils.randomAlphanumeric(idLength);
          String prefix="_lrid=";
          if (query == null) {
            query=prefix + lrid;
          }
 else           if (query.contains(prefix)) {
            query=query.replaceFirst(prefix + ".{" + idLength+ "}",prefix + lrid);
          }
 else {
            query=query + "&" + prefix+ lrid;
          }
          URI newUri=new URI(uri.getScheme(),uri.getAuthority(),uri.getPath(),query,uri.getFragment());
          A_CmsUI.get().getPage().setLocation(newUri);
        }
 catch (        URISyntaxException e) {
          A_CmsUI.get().getPage().reload();
        }
      }
    }
);
    dialogExtension.showUserPreferences();
  }
 catch (  Exception e) {
    context.error(e);
  }
}
