{
  CmsObject cms=getCmsObject();
  echo("Testing legacy module import");
  CmsDbAccess masterDbAccess=new CmsDbAccess(POOL);
  if (masterDbAccess.checkTables()) {
    fail("Master tables already created ?!");
  }
 else {
    echo("Master tables not detected - ok");
  }
  String moduleName="org.opencms.legacy.compatibility";
  String moduleFile=OpenCms.getSystemInfo().getAbsoluteRfsPathRelativeToWebInf("packages/" + moduleName + ".zip");
  OpenCms.getImportExportManager().importData(cms,moduleFile,null,new CmsShellReport(cms.getRequestContext().getLocale()));
  if (!OpenCms.getModuleManager().hasModule(moduleName)) {
    fail("Module '" + moduleName + "' was not imported!");
  }
}
