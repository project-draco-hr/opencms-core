{
  if (CmsStringUtil.isNotEmpty(getValue()) && CmsStringUtil.isNotEmpty(getValidationExpression())) {
    Map substitutions=new HashMap();
    substitutions.put("<","");
    substitutions.put("kb","");
    int maxSize=Integer.parseInt(CmsStringUtil.substitute(getValidationExpression(),substitutions)) * 1024;
    try {
      if (m_fileSize > maxSize) {
        return CmsFormHandler.ERROR_VALIDATION;
      }
    }
 catch (    Exception e) {
      CmsLog.getLog(CmsFileUploadField.class).error(Messages.get().getBundle().key(Messages.LOG_ERR_PATTERN_SYNTAX_0),e);
    }
  }
  return "";
}
