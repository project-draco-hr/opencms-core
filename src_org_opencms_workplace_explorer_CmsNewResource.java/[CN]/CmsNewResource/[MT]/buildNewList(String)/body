{
  StringBuffer result=new StringBuffer(1024);
  result.append("<table border=\"0\" cellpadding=\"2\" cellspacing=\"0\">");
  Iterator i;
  if (m_limitedRestypes) {
    List newResTypes=CmsStringUtil.splitAsList(m_availableResTypes,DELIM_PROPERTYVALUES);
    Iterator k=newResTypes.iterator();
    List settings=new ArrayList(newResTypes.size());
    while (k.hasNext()) {
      String resType=(String)k.next();
      CmsExplorerTypeSettings set=OpenCms.getWorkplaceManager().getExplorerTypeSetting(resType);
      if (set != null) {
        settings.add(set);
      }
    }
    Collections.sort(settings);
    i=settings.iterator();
  }
 else {
    i=OpenCms.getWorkplaceManager().getExplorerTypeSettings().iterator();
  }
  while (i.hasNext()) {
    CmsExplorerTypeSettings settings=(CmsExplorerTypeSettings)i.next();
    if (!m_limitedRestypes) {
      if (m_page == null) {
        if (CmsStringUtil.isNotEmpty(settings.getNewResourcePage())) {
          continue;
        }
      }
 else       if (!m_page.equals(settings.getNewResourcePage())) {
        continue;
      }
    }
    if (CmsStringUtil.isEmpty(settings.getNewResourceUri())) {
      continue;
    }
    CmsPermissionSet permissions=settings.getAccess().getPermissions(getCms());
    if (!permissions.requiresControlPermission()) {
      continue;
    }
    result.append("<tr>\n");
    result.append("\t<td><input type=\"radio\" name=\"");
    result.append(PARAM_NEWRESOURCEURI);
    result.append("\"");
    result.append(" value=\"" + CmsEncoder.encode(settings.getNewResourceUri()) + "\"");
    if (CmsStringUtil.isNotEmpty(attributes)) {
      result.append(" " + attributes);
    }
    result.append("></td>\n");
    result.append("\t<td><img src=\"" + getSkinUri() + "filetypes/"+ settings.getIcon()+ "\" border=\"0\" title=\""+ key(settings.getKey())+ "\"></td>\n");
    result.append("\t<td>" + key(settings.getKey()) + "</td>\n");
    result.append("</tr>\n");
  }
  result.append("</table>\n");
  return result.toString();
}
