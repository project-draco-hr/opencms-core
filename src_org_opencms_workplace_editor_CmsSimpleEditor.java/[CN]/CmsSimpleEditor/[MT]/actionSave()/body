{
  getJsp().getRequest().setAttribute(C_SESSION_WORKPLACE_CLASS,this);
  CmsFile editFile=null;
  try {
    editFile=getCms().readFile(getParamResource());
    String decodedContent=Encoder.unescape(getParamContent(),Encoder.C_UTF8_ENCODING);
    String encoding=getCms().getRequestContext().getEncoding();
    encoding=getCms().readProperty(getParamResource(),I_CmsConstants.C_PROPERTY_CONTENT_ENCODING,true,encoding);
    try {
      editFile.setContents(decodedContent.getBytes(encoding));
    }
 catch (    UnsupportedEncodingException e) {
      editFile.setContents(decodedContent.getBytes());
    }
    getCms().writeFile(editFile);
  }
 catch (  CmsException e) {
    setParamErrorstack(e.getStackTraceAsString());
    setParamTitle(key("error.title.editorsave"));
    setParamMessage(key("error.message.editorsave"));
    String reasonSuggestion=key("error.reason.editorsave") + "<br>\n" + key("error.suggestion.editorsave")+ "\n";
    setParamReasonSuggestion(reasonSuggestion);
    getJsp().include(C_FILE_DIALOG_SCREEN_ERROR);
  }
}
