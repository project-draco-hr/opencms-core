{
  m_filter=filter;
  CmsVaadinUtils.readAndLocalizeDesign(this,CmsVaadinUtils.getWpMessagesForCurrentLocale(),null);
  CmsObject cms=A_CmsUI.getCmsObject();
  m_siteSelector.setContainerDataSource(CmsVaadinUtils.getAvailableSitesContainer(cms,PROPERTY_SITE_CAPTION));
  m_siteRoot=cms.getRequestContext().getSiteRoot();
  m_siteSelector.setValue(m_siteRoot);
  m_siteSelector.setNullSelectionAllowed(false);
  m_siteSelector.setItemCaptionPropertyId(PROPERTY_SITE_CAPTION);
  m_siteSelector.setFilteringMode(FilteringMode.CONTAINS);
  m_siteSelector.addValueChangeListener(new ValueChangeListener(){
    /** 
 * Serial version id. 
 */
    private static final long serialVersionUID=1L;
    public void valueChange(    ValueChangeEvent event){
      String site=(String)(event.getProperty().getValue());
      onSiteChange(site);
    }
  }
);
  CmsResource root=cms.readResource("/");
  CmsResourceTree fileTree=new CmsResourceTree(cms,root,m_filter);
  m_fileTree[0]=fileTree;
  m_treeData=fileTree.getTreeContainer();
  m_treeContainer.addComponent(fileTree);
  fileTree.setSizeFull();
}
