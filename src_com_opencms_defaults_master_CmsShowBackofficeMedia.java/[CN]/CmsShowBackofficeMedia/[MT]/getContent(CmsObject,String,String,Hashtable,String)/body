{
  CmsRequestContext req=cms.getRequestContext();
  I_CmsSession session=(I_CmsSession)req.getSession(true);
  System.err.println("**CmsShowMedia getContent**");
  byte[] picture=new byte[0];
  try {
    CmsMasterMedia selectedmediaCD=null;
    try {
      selectedmediaCD=(CmsMasterMedia)session.getValue("selectedmediaCD");
    }
 catch (    Exception e) {
      e.printStackTrace(System.err);
    }
    System.err.println("**CmsShowMedia getContent selectedmediaCD=" + selectedmediaCD);
    if (selectedmediaCD != null) {
      picture=selectedmediaCD.getMedia();
      System.err.println("**CmsShowMedia getContent picture=" + picture);
      String mType=selectedmediaCD.getMimetype();
      System.err.println("**CmsShowMedia getContent mType=" + mType);
      if (mType == null || mType.equals("")) {
        mType="application/octet-stream";
      }
      req.getResponse().setContentType(mType);
      if (picture == null) {
        picture=emptyGIF;
        req.getResponse().setContentType("images/gif");
      }
    }
 else {
      picture=emptyGIF;
      req.getResponse().setContentType("images/gif");
    }
  }
 catch (  Exception exx) {
    exx.printStackTrace(System.err);
  }
  return picture;
}
