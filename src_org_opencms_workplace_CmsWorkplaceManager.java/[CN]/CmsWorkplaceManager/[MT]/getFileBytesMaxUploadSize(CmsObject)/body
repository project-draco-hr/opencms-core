{
  int maxFileSize=getFileMaxUploadSize();
  long maxFileSizeBytes=maxFileSize * 1024;
  boolean isAdmin=false;
  try {
    isAdmin=cms.userInGroup(cms.getRequestContext().currentUser().getName(),OpenCms.getDefaultUsers().getGroupAdministrators());
  }
 catch (  CmsException e) {
    if (OpenCms.getLog(this).isErrorEnabled()) {
      OpenCms.getLog(this).error("Error checking groups of user " + cms.getRequestContext().currentUser().getName());
    }
  }
  if ((maxFileSize <= 0) || isAdmin) {
    maxFileSizeBytes=-1;
  }
  return maxFileSizeBytes;
}
