{
  cms.checkRole(CmsRole.WORKPLACE_MANAGER);
  m_encoding=OpenCms.getSystemInfo().getDefaultEncoding();
  CmsModuleManager moduleManager=OpenCms.getModuleManager();
  Iterator j=moduleManager.getModuleNames().iterator();
  while (j.hasNext()) {
    CmsModule module=moduleManager.getModule((String)j.next());
    List explorerTypes=module.getExplorerTypes();
    Iterator l=explorerTypes.iterator();
    while (l.hasNext()) {
      CmsExplorerTypeSettings explorerType=(CmsExplorerTypeSettings)l.next();
      addExplorerTypeSetting(explorerType);
    }
  }
  initWorkplaceViews(cms);
  m_editorManager=new CmsWorkplaceEditorManager(cms);
  initHandler(cms);
  Collections.sort(m_explorerTypeSettings);
  Iterator i=m_explorerTypeSettings.iterator();
  while (i.hasNext()) {
    CmsExplorerTypeSettings settings=(CmsExplorerTypeSettings)i.next();
    settings.getAccess().createAccessControlList(cms);
  }
  if (CmsLog.LOG.isInfoEnabled()) {
    CmsLog.LOG.info(Messages.get().key(Messages.INIT_VFS_ACCESS_INITIALIZED_0));
  }
  try {
    m_tempFileProject=cms.readProject(C_TEMP_FILE_PROJECT_NAME);
  }
 catch (  CmsException e) {
    LOG.error(Messages.get().key(Messages.LOG_NO_TEMP_FILE_PROJECT_0));
  }
  m_editorDisplayOptions=new CmsEditorDisplayOptions();
  j=OpenCms.getResourceManager().getResourceTypes().iterator();
  while (j.hasNext()) {
    I_CmsResourceType resourceType=(I_CmsResourceType)j.next();
    if (resourceType instanceof CmsResourceTypeFolderExtended) {
      CmsResourceTypeFolderExtended galleryType=(CmsResourceTypeFolderExtended)resourceType;
      String folderClassName=galleryType.getFolderClassName();
      if (CmsStringUtil.isNotEmpty(folderClassName)) {
        try {
          if (A_CmsGallery.class.isAssignableFrom(Class.forName(folderClassName))) {
            m_galleries.put(galleryType.getTypeName(),galleryType);
          }
        }
 catch (        ClassNotFoundException e) {
          LOG.error(e.getLocalizedMessage());
        }
      }
    }
  }
  m_toolManager=new CmsToolManager(cms);
  m_messages.clear();
}
