{
  m_element=element;
  m_formatter=formatter;
  m_properties=(properties == null ? new HashMap<String,String>() : properties);
  m_properties=Collections.unmodifiableMap(m_properties);
  if (m_properties.isEmpty()) {
    m_clientId=OpenCms.getADEManager().convertToClientId(m_element.getStructureId());
  }
 else {
    int hash=m_properties.toString().hashCode();
    m_clientId=OpenCms.getADEManager().convertToClientId(m_element.getStructureId()) + "#" + hash;
  }
}
