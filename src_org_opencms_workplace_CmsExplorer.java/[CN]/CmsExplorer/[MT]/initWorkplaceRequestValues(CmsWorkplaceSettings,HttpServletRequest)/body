{
  String currentResource=request.getParameter("resource");
  String mode=request.getParameter("mode");
  if (mode != null) {
    settings.setExplorerMode(mode);
  }
 else {
    if (!"projectview".equals(settings.getExplorerMode())) {
      settings.setExplorerMode("explorerview");
    }
  }
  boolean showLinks="true".equals(request.getParameter("showlinks"));
  if (showLinks) {
    settings.setExplorerResource(currentResource);
  }
 else {
    if (currentResource != null && currentResource.startsWith("vfslink:")) {
      showLinks=true;
      settings.setExplorerResource(currentResource.substring(8));
    }
 else {
      if ((currentResource != null) && (!"".equals(currentResource)) && folderExists(getCms(),currentResource)) {
        settings.setExplorerResource(currentResource);
      }
 else {
        currentResource=settings.getExplorerResource();
        if ((currentResource == null) || (!folderExists(getCms(),currentResource))) {
          currentResource="/";
          settings.setExplorerResource(currentResource);
        }
      }
    }
  }
  String selectedPage=request.getParameter("page");
  if (selectedPage != null) {
    int page=1;
    try {
      page=Integer.parseInt(selectedPage);
    }
 catch (    NumberFormatException e) {
    }
    settings.setExplorerPage(page);
  }
  settings.setExplorerFlaturl(request.getParameter("flaturl"));
  int checksum=-1;
  int increment=(settings.getExplorerChecksum() == -2) ? 1 : 0;
  String check=request.getParameter("check");
  if (check != null) {
    try {
      checksum=Integer.parseInt(check);
    }
 catch (    NumberFormatException e) {
    }
  }
  settings.setExplorerChecksum(checksum + increment);
}
