{
  int max=5;
  try {
    Thread.sleep(600000);
    while (m_fileCounter > m_returnedCounter && max-- > 0) {
      Thread.sleep(600000);
      if (OpenCms.getLog(this).isWarnEnabled()) {
        OpenCms.getLog(this).warn("Waiting for abandoned threads: " + m_abandonedCounter + " threads abandoned, "+ (m_fileCounter - m_returnedCounter)+ " threads not returned until now");
      }
    }
  }
 catch (  Exception exc) {
  }
  if (max > 0) {
    if (OpenCms.getLog(this).isWarnEnabled()) {
      OpenCms.getLog(this).warn("All threads finished, terminating now.");
    }
  }
 else {
    if (OpenCms.getLog(this).isErrorEnabled()) {
      OpenCms.getLog(this).error("Abandoned threads left: " + (m_fileCounter - m_returnedCounter));
    }
  }
}
