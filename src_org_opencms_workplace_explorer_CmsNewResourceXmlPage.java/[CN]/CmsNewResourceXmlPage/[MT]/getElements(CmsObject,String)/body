{
  TreeMap elements=new TreeMap();
  List modules=cms.getSubFolders(I_CmsWpConstants.C_VFS_PATH_MODULES,CmsResourceFilter.IGNORE_EXPIRATION);
  for (int i=0; i < modules.size(); i++) {
    List moduleTemplateFiles=new ArrayList();
    String folder=cms.getSitePath((CmsFolder)modules.get(i));
    try {
      moduleTemplateFiles=cms.getFilesInFolder(folder + elementFolder);
    }
 catch (    CmsException e) {
      if (LOG.isDebugEnabled()) {
        LOG.debug(e);
      }
    }
    for (int j=0; j < moduleTemplateFiles.size(); j++) {
      CmsFile templateFile=(CmsFile)moduleTemplateFiles.get(j);
      String title=null;
      try {
        title=cms.readPropertyObject(cms.getSitePath(templateFile),CmsPropertyDefinition.PROPERTY_TITLE,false).getValue();
      }
 catch (      CmsException e) {
        if (LOG.isInfoEnabled()) {
          LOG.info(e);
        }
      }
      if (title == null) {
        title=templateFile.getName();
      }
      String path=cms.getSitePath(templateFile);
      elements.put(title,path);
    }
  }
  return elements;
}
