{
  for (  CmsContainer container : containers) {
    for (    CmsContainerElement element : container.getElements()) {
      try {
        if (element.isContainerModel()) {
          try {
            CmsContainerElementBean elementBean=getCachedElement(element.getClientId(),containerpage.getRootPath());
            elementBean.initResource(getCmsObject());
            CmsRelation relation=getContainerModelRelation(getCmsObject(),elementBean.getResource());
            if (relation == null) {
              ensureLock(elementBean.getResource());
              setContainerModelRelation(getCmsObject(),containerpage,elementBean.getResource());
              tryUnlock(elementBean.getResource());
            }
          }
 catch (          CmsException e) {
            LOG.error(e.getLocalizedMessage(),e);
          }
        }
      }
 catch (      Exception e) {
        LOG.error(e.getLocalizedMessage(),e);
      }
    }
  }
}
