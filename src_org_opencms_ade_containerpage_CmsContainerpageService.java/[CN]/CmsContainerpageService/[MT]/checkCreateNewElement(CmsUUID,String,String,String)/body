{
  CmsObject cms=getCmsObject();
  CmsCreateElementData result=new CmsCreateElementData();
  try {
    CmsResource currentPage=cms.readResource(pageStructureId);
    List<CmsResource> modelResources=CmsNewResourceXmlContent.getModelFiles(getCmsObject(),CmsResource.getFolderPath(cms.getSitePath(currentPage)),resourceType);
    if (modelResources.isEmpty()) {
      result.setCreatedElement(createNewElement(pageStructureId,clientId,resourceType,null,locale));
    }
 else {
      result.setModelResources(generateModelResourceList(getCmsObject(),resourceType,modelResources,CmsLocaleManager.getLocale(locale)));
    }
  }
 catch (  CmsException e) {
    error(e);
  }
  return result;
}
