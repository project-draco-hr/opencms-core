{
  CmsContainerPageBean modelPage=getContainerModelPage(cms,element.getResource());
  if (modelPage != null) {
    String modelInstanceId=null;
    Map<String,List<CmsContainerBean>> containerByParent=new HashMap<String,List<CmsContainerBean>>();
    for (    CmsContainerBean container : modelPage.getContainers().values()) {
      if (container.getParentInstanceId() != null) {
        if (!containerByParent.containsKey(container.getParentInstanceId())) {
          containerByParent.put(container.getParentInstanceId(),new ArrayList<CmsContainerBean>());
        }
        containerByParent.get(container.getParentInstanceId()).add(container);
      }
      if (modelInstanceId == null) {
        for (        CmsContainerElementBean child : container.getElements()) {
          if (child.getId().equals(element.getId())) {
            modelInstanceId=child.getInstanceId();
            break;
          }
        }
      }
    }
    if (containerByParent.containsKey(modelInstanceId)) {
      List<CmsContainerBean> modelContainers=collectModelStructure(modelInstanceId,element.getInstanceId(),containerByParent);
      modelContainers=createNewElementsForContainerModel(cms,modelContainers,uriParam,locale);
      modelContainers.addAll(page.getContainers().values());
      page=new CmsContainerPageBean(modelContainers);
    }
  }
  return page;
}
