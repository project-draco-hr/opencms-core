{
  StringBuffer output=new StringBuffer();
  CmsLock lock=cms.getLock(file);
  if (!lock.isNullLock()) {
    CmsUUID locked=lock.getUserId();
    if (cms.getRequestContext().currentUser().getId().equals(locked)) {
      template.fastSetXmlData(C_LOCKEDBY,lang.getLanguageValue("explorer.lockedby") + cms.getRequestContext().currentUser().getName());
      output.append(C_LOCKED_VALUE_OWN);
    }
 else {
      template.fastSetXmlData(C_LOCKEDBY,lang.getLanguageValue("explorer.lockedby") + cms.readUser(lock.getUserId()).getName());
      output.append(C_LOCKED_VALUE_USER);
    }
  }
 else {
    output.append(C_LOCKED_VALUE_NOLOCK);
  }
  return output.toString();
}
