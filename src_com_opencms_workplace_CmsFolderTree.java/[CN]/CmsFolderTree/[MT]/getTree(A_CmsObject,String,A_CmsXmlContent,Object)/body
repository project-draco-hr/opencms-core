{
  Hashtable parameters=(Hashtable)userObj;
  StringBuffer output=new StringBuffer();
  HttpSession session=((HttpServletRequest)cms.getRequestContext().getRequest().getOriginalRequest()).getSession(true);
  String foldername=null;
  String currentFolder;
  String rootFolder;
  foldername=cms.getRequestContext().getRequest().getParameter(C_PARA_FOLDER);
  if (foldername != null) {
    session.putValue(C_PARA_FOLDER,foldername);
  }
  currentFolder=(String)session.getValue(C_PARA_FOLDER);
  if (currentFolder == null) {
    currentFolder=cms.getRequestContext().currentFolder().getAbsolutePath();
  }
  rootFolder=cms.rootFolder().getAbsolutePath();
  CmsXmlWpTemplateFile template=(CmsXmlWpTemplateFile)doc;
  String tab=template.getProcessedXmlDataValue("TREEIMG_EMPTY0",this);
  showTree(cms,rootFolder,currentFolder,template,output,tab);
  return output.toString();
}
