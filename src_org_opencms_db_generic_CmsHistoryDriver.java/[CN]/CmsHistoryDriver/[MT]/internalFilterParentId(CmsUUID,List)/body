{
  List result=new ArrayList();
  Set ids=new HashSet();
  ids.add(parentId);
  boolean modified=true;
  while (modified) {
    modified=false;
    Iterator it=resources.iterator();
    while (it.hasNext()) {
      I_CmsHistoryResource resource=(I_CmsHistoryResource)it.next();
      if (ids.contains(resource.getParentId())) {
        ids.add(resource.getStructureId());
        result.add(resource);
        modified=true;
        it.remove();
      }
    }
  }
  return result;
}
