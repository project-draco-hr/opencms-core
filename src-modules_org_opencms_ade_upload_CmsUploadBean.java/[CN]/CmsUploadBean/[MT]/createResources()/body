{
  String targetFolder=getTargetFolder();
  boolean isEncoded=isFileNameEncoded();
  List<String> filesToUnzip=getFilesToUnzip(isEncoded);
  for (  FileItem fi : m_multiPartFileItems) {
    if ((fi != null) && (!fi.isFormField())) {
      byte[] content=fi.get();
      fi.delete();
      String fileName=fi.getName();
      if (isEncoded) {
        fileName=URLDecoder.decode(fi.getName(),"UTF-8");
      }
      if (filesToUnzip.contains(CmsResource.getName(fileName.replace('\\','/')))) {
        CmsImportFolder importZip=new CmsImportFolder();
        try {
          importZip.importZip(content,targetFolder,getCmsObject(),false);
        }
  finally {
          m_resourcesCreated.addAll(importZip.getCreatedResourceNames());
        }
      }
 else {
        String newResname=getNewResourceName(getCmsObject(),fileName,targetFolder);
        createSingleResource(newResname,content);
        m_resourcesCreated.add(newResname);
      }
    }
  }
}
