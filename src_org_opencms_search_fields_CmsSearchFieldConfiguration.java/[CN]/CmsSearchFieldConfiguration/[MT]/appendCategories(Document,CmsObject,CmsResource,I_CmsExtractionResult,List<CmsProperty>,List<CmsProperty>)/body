{
  Fieldable field;
  CmsCategoryService categoryService=CmsCategoryService.getInstance();
  List<CmsCategory> categories=categoryService.readResourceCategories(cms,resource);
  if ((categories != null) && (categories.size() > 0)) {
    StringBuffer categoryBuffer=new StringBuffer(128);
    for (    CmsCategory category : categories) {
      categoryBuffer.append(category.getPath());
      categoryBuffer.append(' ');
    }
    if (categoryBuffer.length() > 0) {
      field=new Field(CmsSearchField.FIELD_CATEGORY,categoryBuffer.toString().toLowerCase(),Field.Store.YES,Field.Index.ANALYZED);
      field.setBoost(0);
      document.add(field);
    }
  }
 else {
    field=new Field(CmsSearchField.FIELD_CATEGORY,CmsSearchCategoryCollector.UNKNOWN_CATEGORY,Field.Store.YES,Field.Index.ANALYZED);
    document.add(field);
  }
  return document;
}
