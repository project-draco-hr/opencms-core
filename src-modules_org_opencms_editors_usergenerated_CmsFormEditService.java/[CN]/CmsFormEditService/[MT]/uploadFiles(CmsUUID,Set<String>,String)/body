{
  try {
    final CmsFormSession session=getFormSession(sessionId);
    final Map<String,String> result=new HashMap<String,String>();
    session.getFormUploadHelper().consumeFormData(formDataId,new I_CmsFormDataHandler(){
      public void handleFormData(      Map<String,I_CmsFormDataItem> items) throws Exception {
        for (        String fieldName : fieldNames) {
          I_CmsFormDataItem item=items.get(fieldName);
          CmsResource createdResource=session.createUploadResource(item.getFileName(),item.getData());
          String sitePath=session.getCmsObject().getSitePath(createdResource);
          result.put(fieldName,sitePath);
        }
      }
    }
);
    return result;
  }
 catch (  Exception e) {
    error(e);
    return null;
  }
}
