{
  getJsp().getRequest().setAttribute(C_SESSION_WORKPLACE_CLASS,this);
  try {
    String resName=getParamResource();
    CmsResource res=getCms().readResource(resName,CmsResourceFilter.ALL);
    if (res.isFolder() && !resName.endsWith("/")) {
      resName+="/";
    }
switch (getDialogAction(getCms())) {
case TYPE_LOCK:
      getCms().lockResource(getParamResource());
    break;
case TYPE_LOCKCHANGE:
  getCms().changeLock(resName);
break;
case TYPE_UNLOCK:
default :
getCms().unlockResource(resName);
}
actionCloseDialog();
}
 catch (CmsException e) {
CmsLog.getLog(CmsLock.class).error(e.getLocalizedMessage());
getJsp().getRequest().setAttribute(C_SESSION_WORKPLACE_CLASS,this);
getJsp().getRequest().setAttribute(ATTRIBUTE_THROWABLE,e);
getJsp().include(C_FILE_DIALOG_SCREEN_ERRORPAGE);
}
}
