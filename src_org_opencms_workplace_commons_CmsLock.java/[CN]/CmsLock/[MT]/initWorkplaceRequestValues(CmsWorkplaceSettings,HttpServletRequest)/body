{
  fillParamValues(request);
  if (DIALOG_CONFIRMED.equals(getParamAction())) {
    setAction(ACTION_CONFIRMED);
  }
 else   if (DIALOG_CANCEL.equals(getParamAction())) {
    setAction(ACTION_CANCEL);
  }
 else {
switch (getDialogAction(getCms())) {
case TYPE_LOCK:
      setParamTitle(key(Messages.GUI_LOCK_RESOURCE_0));
    setParamDialogtype(DIALOG_TYPE_LOCK);
  if (!checkResourcePermissions(CmsPermissionSet.ACCESS_WRITE,false)) {
    setAction(ACTION_CANCEL);
    return;
  }
break;
case TYPE_LOCKCHANGE:
setParamTitle(key(Messages.GUI_LOCK_STEAL_0));
setParamDialogtype(DIALOG_TYPE_UNLOCK);
break;
case TYPE_UNLOCK:
default :
setParamTitle(key(Messages.GUI_LOCK_UNLOCK_0));
setParamDialogtype(DIALOG_TYPE_UNLOCK);
}
if (showConfirmation()) {
setAction(ACTION_DEFAULT);
}
 else {
setAction(ACTION_SUBMIT_NOCONFIRMATION);
}
}
}
