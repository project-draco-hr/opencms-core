{
  Set blockingResources=new HashSet();
  Iterator i=getResourceList().iterator();
  while (i.hasNext()) {
    String resName=(String)i.next();
    try {
      blockingResources.addAll(getCms().getLockedResources(resName,getBlockingFilter()));
    }
 catch (    CmsException e) {
      if (LOG.isErrorEnabled()) {
        LOG.error(e.getLocalizedMessage(),e);
      }
    }
    if (Boolean.valueOf(getParamIncluderelated()).booleanValue()) {
      addLockedRelatedResources(resName,getBlockingFilter(),blockingResources);
    }
  }
  m_blockingLocks=blockingResources.size();
  return blockingResources;
}
