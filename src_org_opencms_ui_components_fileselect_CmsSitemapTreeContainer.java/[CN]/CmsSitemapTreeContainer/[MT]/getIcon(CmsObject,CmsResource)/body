{
  CmsResource defaultFile=null;
  List<CmsResource> resourcesForType=Lists.newArrayList();
  resourcesForType.add(resource);
  try {
    defaultFile=cms.readDefaultFile(resource,CmsResourceFilter.IGNORE_EXPIRATION);
    if (defaultFile != null) {
      resourcesForType.add(0,defaultFile);
    }
  }
 catch (  Exception e) {
    LOG.error(e.getLocalizedMessage(),e);
  }
  if (CmsJspNavBuilder.isNavLevelFolder(cms,resource)) {
    return CmsWorkplace.getResourceUri(CmsWorkplace.RES_PATH_FILETYPES + CmsIconUtil.ICON_NAV_LEVEL_BIG);
  }
  String result=null;
  for (  CmsResource res : resourcesForType) {
    I_CmsResourceType type=OpenCms.getResourceManager().getResourceType(res);
    CmsExplorerTypeSettings settings=OpenCms.getWorkplaceManager().getExplorerTypeSetting(type.getTypeName());
    if (settings != null) {
      result=CmsWorkplace.RES_PATH_FILETYPES + settings.getBigIconIfAvailable();
      break;
    }
  }
  return CmsWorkplace.getResourceUri(result);
}
