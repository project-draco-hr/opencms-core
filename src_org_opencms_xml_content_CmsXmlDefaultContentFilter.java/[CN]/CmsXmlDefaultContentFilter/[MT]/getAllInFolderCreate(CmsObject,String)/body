{
  int pos1=param.indexOf('|');
  if (pos1 == -1) {
    throw new CmsException("Malformed filter parameter '" + param + "'");
  }
  String path=param.substring(0,pos1);
  String foldername=CmsResource.getFolderPath(path);
  List result;
  cms.getRequestContext().saveSiteRoot();
  try {
    cms.getRequestContext().setSiteRoot("/");
    List resources=cms.getFilesInFolder(foldername,CmsResourceFilter.ALL);
    result=new ArrayList(resources.size());
    for (int i=0; i < resources.size(); i++) {
      CmsResource resource=(CmsResource)resources.get(i);
      result.add(cms.getSitePath(resource));
    }
  }
  finally {
    cms.getRequestContext().restoreSiteRoot();
  }
  String checkName;
  String number;
  int j=0;
  do {
    number=C_FORMAT_NUMBER.sprintf(++j);
    checkName=CmsStringUtil.substitute(path,"${number}",number);
  }
 while (result.contains(checkName));
  return checkName.substring(cms.getRequestContext().getSiteRoot().length());
}
