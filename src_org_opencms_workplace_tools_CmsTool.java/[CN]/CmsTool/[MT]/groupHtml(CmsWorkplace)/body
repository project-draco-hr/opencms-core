{
  List subTools=OpenCms.getWorkplaceManager().getToolManager().getToolsForPath(getHandler().getPath(),false);
  Iterator itSubTools=subTools.iterator();
  m_container.clear();
  while (itSubTools.hasNext()) {
    String subToolPath=(String)itSubTools.next();
    CmsTool subTool=OpenCms.getWorkplaceManager().getToolManager().resolveAdminTool(subToolPath);
    CmsToolGroup group=null;
    String groupName=CmsToolMacroResolver.resolveMacros(subTool.getHandler().getGroup(),wp);
    group=getToolGroup(groupName);
    if (group == null) {
      String gid="group" + getToolGroups().size();
      group=new CmsToolGroup(gid,groupName);
      addToolGroup(group,subTool.getHandler().getPosition());
    }
    group.addAdminTool(subTool,subTool.getHandler().getPosition());
  }
  StringBuffer html=new StringBuffer(512);
  Iterator itHtml=getToolGroups().iterator();
  while (itHtml.hasNext()) {
    CmsToolGroup group=(CmsToolGroup)itHtml.next();
    html.append(group.groupHtml(wp));
  }
  return CmsToolMacroResolver.resolveMacros(html.toString(),wp);
}
