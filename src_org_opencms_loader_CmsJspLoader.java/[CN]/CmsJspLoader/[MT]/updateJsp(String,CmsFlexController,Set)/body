{
  String jspVfsName=CmsLinkManager.getAbsoluteUri(vfsName,controller.getCurrentRequest().getElementRootPath());
  if (OpenCms.getLog(this).isDebugEnabled()) {
    OpenCms.getLog(this).debug("JspLoader: Trying to update JSP from VFS file '" + jspVfsName + "'");
  }
  String jspRfsName=null;
  try {
    CmsResource includeResource=controller.getCmsObject().readFileHeader(jspVfsName);
    jspRfsName=updateJsp(includeResource,controller,includes);
    if (OpenCms.getLog(this).isDebugEnabled()) {
      OpenCms.getLog(this).debug("JspLoader: Name of JSP in real FS is '" + jspRfsName + "'");
    }
  }
 catch (  Exception e) {
    jspRfsName=null;
    if (OpenCms.getLog(this).isDebugEnabled()) {
      OpenCms.getLog(this).debug("JspLoader: Error while udating included JSP file '" + jspVfsName + "'\n",e);
    }
  }
  return jspRfsName;
}
