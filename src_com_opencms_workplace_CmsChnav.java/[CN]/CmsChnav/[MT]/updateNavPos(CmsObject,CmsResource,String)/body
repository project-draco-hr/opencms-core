{
  float newPos=0;
  boolean changePos=true;
  Hashtable storage=getNavData(cms,cms.readAbsolutePath(curResource));
  if (storage.size() > 0) {
    String[] nicenames=(String[])storage.get("NICENAMES");
    String[] positions=(String[])storage.get("POSITIONS");
    int count=((Integer)storage.get("COUNT")).intValue() - 1;
    int pos=0;
    for (int i=0; i < nicenames.length; i++) {
      if (CmsEncoder.escapeHtml(navpos).equals(nicenames[i])) {
        pos=i;
      }
    }
    if ("-1".equals(positions[pos])) {
      changePos=false;
    }
    if (changePos) {
      if (pos < count) {
        float low=new Float(positions[pos]).floatValue();
        float high=new Float(positions[pos + 1]).floatValue();
        newPos=(high + low) / 2;
      }
 else {
        newPos=new Float(positions[pos]).floatValue() + 1;
      }
    }
  }
 else {
    newPos=1;
  }
  if (changePos) {
    cms.writeProperty(cms.readAbsolutePath(curResource),C_PROPERTY_NAVPOS,new Float(newPos).toString());
  }
}
