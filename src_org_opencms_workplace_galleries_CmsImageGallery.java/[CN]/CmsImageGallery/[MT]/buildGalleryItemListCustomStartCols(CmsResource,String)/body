{
  if (!CmsImageLoader.isEnabled()) {
    return super.buildGalleryItemListCustomStartCols(res,tdClass);
  }
  CmsProperty sizeProp=CmsProperty.getNullProperty();
  try {
    sizeProp=getCms().readPropertyObject(res,CmsPropertyDefinition.PROPERTY_IMAGE_SIZE,false);
  }
 catch (  Exception e) {
  }
  if (sizeProp.isNullProperty()) {
    return super.buildGalleryItemListCustomStartCols(res,tdClass);
  }
  StringBuffer result=new StringBuffer(128);
  if ((m_defaultScaleParams != null) && m_defaultScaleParams.isValid()) {
    String resPath=getCms().getSitePath(res);
    result.append("\t<td class=\"");
    result.append(tdClass);
    result.append("\">");
    result.append("<a class=\"");
    result.append(tdClass);
    result.append("\" href=\"javascript: preview(\'");
    result.append(resPath);
    result.append("\');\" title=\"");
    result.append(key(Messages.GUI_BUTTON_PREVIEW_0));
    result.append("\">");
    result.append("<img src=\"");
    result.append(getJsp().link(resPath));
    result.append(m_defaultScaleParams.toRequestParam());
    result.append("\" border=\"0\" width=\"");
    result.append(m_defaultScaleParams.getWidth());
    result.append("\" height=\"");
    result.append(m_defaultScaleParams.getHeight());
    result.append("\"></a></td>\n");
    result.append("</td>\n");
  }
 else {
    result.append(super.buildGalleryItemListCustomStartCols(res,tdClass));
  }
  return result.toString();
}
