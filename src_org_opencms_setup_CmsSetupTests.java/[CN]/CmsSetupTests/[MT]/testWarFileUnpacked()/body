{
  CmsSetupTestResult testResult=new CmsSetupTestResult();
  try {
    testResult.setName("Unpacked WAR file");
    String basePath=m_pageContext.getServletConfig().getServletContext().getRealPath("/");
    if (!basePath.endsWith(File.separator)) {
      basePath+=File.separator;
    }
    File file=new File(basePath + "WEB-INF" + File.separator+ "config"+ File.separator+ "opencms.properties");
    if (file.exists() && file.canRead() && file.canWrite()) {
      testResult.setGreen();
      testResult.setResult("yes");
    }
 else {
      testResult.setRed();
      testResult.setInfo("OpenCms cannot be installed unless the OpenCms WAR file is unpacked! " + "Please check the settings of your servlet container or unpack the WAR file manually.");
      testResult.setHelp(testResult.getInfo());
      testResult.setResult("WAR file NOT unpacked");
    }
  }
 catch (  Exception e) {
    testResult.setRed();
    testResult.setResult("Unable to test if the OpenCms WAR file is unpacked!");
    testResult.setInfo(e.toString());
  }
 finally {
    m_testResults.add(testResult);
  }
}
