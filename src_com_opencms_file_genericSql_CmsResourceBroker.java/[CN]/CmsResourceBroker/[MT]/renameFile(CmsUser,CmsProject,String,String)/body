{
  validFilename(newname);
  CmsResource file=readFileHeader(currentUser,currentProject,oldname);
  if (accessWrite(currentUser,currentProject,file)) {
    m_dbAccess.renameFile(currentProject,onlineProject(currentUser,currentProject),currentUser.getId(),file.getResourceId(),file.getPath() + newname);
    writeProperties(currentUser,currentProject,file.getPath() + newname,readAllProperties(currentUser,currentProject,file.getAbsolutePath()));
    fileSystemChanged();
  }
 else {
    throw new CmsException("[" + this.getClass().getName() + "] "+ oldname,CmsException.C_NO_ACCESS);
  }
}
