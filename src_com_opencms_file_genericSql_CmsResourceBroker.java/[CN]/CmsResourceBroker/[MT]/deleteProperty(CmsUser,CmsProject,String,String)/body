{
  CmsResource res=readFileHeader(currentUser,currentProject,resource);
  if (!accessWrite(currentUser,currentProject,res)) {
    throw new CmsException("[" + this.getClass().getName() + "] "+ resource,CmsException.C_NO_ACCESS);
  }
  I_CmsResourceType resType=getResourceType(currentUser,currentProject,res.getType());
  CmsPropertydefinition metadef=readPropertydefinition(currentUser,currentProject,property,resType.getResourceTypeName());
  if ((metadef != null)) {
    m_dbAccess.deleteProperty(property,currentProject.getId(),res,res.getType());
    if (res.isFile()) {
      m_dbAccess.writeFileHeader(currentProject,(CmsFile)res,true);
      if (res.getState() == C_STATE_UNCHANGED) {
        res.setState(C_STATE_CHANGED);
      }
      m_resourceCache.remove(resource);
    }
 else {
      if (res.getState() == C_STATE_UNCHANGED) {
        res.setState(C_STATE_CHANGED);
      }
      m_dbAccess.writeFolder(currentProject,readFolder(currentUser,currentProject,resource),true);
      m_resourceCache.remove(resource);
    }
    m_subresCache.clear();
    m_propertyCache.clear();
  }
 else {
    throw new CmsException("[" + this.getClass().getName() + "] "+ resource,CmsException.C_UNKNOWN_EXCEPTION);
  }
}
