{
  CmsProject online=onlineProject(currentUser,currentProject);
  if ((!currentProject.equals(online)) && (currentProject.getOwnerId() == currentUser.getId()) && (currentProject.getFlags() == C_PROJECT_STATE_UNLOCKED)) {
    CmsResource offlineRes=null;
    try {
      offlineRes=readFileHeader(currentUser,currentProject,currentProject.getId(),resource);
    }
 catch (    CmsException exc) {
    }
    if (offlineRes == null) {
      try {
        m_dbAccess.createProjectResource(currentProject.getId(),resource);
      }
 catch (      CmsException exc) {
      }
    }
  }
 else {
    throw new CmsException("[" + this.getClass().getName() + "] "+ currentProject.getName(),CmsException.C_NO_ACCESS);
  }
}
