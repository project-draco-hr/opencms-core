{
  CmsFolder cmsFolder=readFolder(currentUser,currentProject,foldername);
  if (accessRead(currentUser,currentProject,(CmsResource)cmsFolder)) {
    Vector files=m_dbAccess.getFilesInFolder(cmsFolder);
    CmsFile file;
    for (int z=0; z < files.size(); z++) {
      file=(CmsFile)files.elementAt(z);
      if (!(accessOther(currentUser,currentProject,(CmsResource)file,C_ACCESS_PUBLIC_READ) || accessOwner(currentUser,currentProject,(CmsResource)file,C_ACCESS_OWNER_READ) || accessGroup(currentUser,currentProject,(CmsResource)file,C_ACCESS_GROUP_READ))) {
        files.removeElementAt(z);
        z--;
      }
    }
    return (files);
  }
 else {
    throw new CmsException("[" + this.getClass().getName() + "] "+ foldername,CmsException.C_ACCESS_DENIED);
  }
}
