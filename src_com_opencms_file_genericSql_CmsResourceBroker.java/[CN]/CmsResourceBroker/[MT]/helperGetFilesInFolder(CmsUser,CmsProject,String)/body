{
  CmsFolder cmsFolder=null;
  try {
    cmsFolder=m_dbAccess.readFolder(currentProject.getId(),foldername);
  }
 catch (  CmsException exc) {
    if (exc.getType() == exc.C_NOT_FOUND) {
      return new Vector();
    }
 else {
      throw exc;
    }
  }
  if (cmsFolder.getState() == I_CmsConstants.C_STATE_DELETED) {
    return null;
  }
  Vector _files=m_dbAccess.getFilesInFolder(currentProject.getId(),cmsFolder);
  Vector files=new Vector(_files.size());
  for (Enumeration e=_files.elements(); e.hasMoreElements(); ) {
    CmsFile file=(CmsFile)e.nextElement();
    if (accessOther(currentUser,currentProject,(CmsResource)file,C_ACCESS_PUBLIC_READ) || accessOwner(currentUser,currentProject,(CmsResource)file,C_ACCESS_OWNER_READ) || accessGroup(currentUser,currentProject,(CmsResource)file,C_ACCESS_GROUP_READ)) {
      files.addElement(file);
    }
  }
  return files;
}
