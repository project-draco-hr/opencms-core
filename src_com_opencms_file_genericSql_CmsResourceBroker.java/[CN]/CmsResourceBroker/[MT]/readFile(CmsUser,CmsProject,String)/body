{
  CmsFile cmsFile=null;
  try {
    cmsFile=m_dbAccess.readFile(currentProject.getId(),filename);
  }
 catch (  SQLException se) {
    throw new CmsException(CmsException.C_SQL_ERROR,se);
  }
  if (cmsFile != null) {
    if (cmsFile.getState() == C_STATE_DELETED)     return null;
    if (accessRead(currentUser,currentProject,(CmsResource)cmsFile))     return cmsFile;
 else {
      throw new CmsException("[" + this.getClass().getName() + "] "+ filename,CmsException.C_ACCESS_DENIED);
    }
  }
 else {
    if (currentProject.getParentId() != -1) {
      CmsProject pp=readProject(currentUser,currentProject,currentProject.getParentId());
      return readFile(currentUser,pp,filename);
    }
 else     return null;
  }
}
