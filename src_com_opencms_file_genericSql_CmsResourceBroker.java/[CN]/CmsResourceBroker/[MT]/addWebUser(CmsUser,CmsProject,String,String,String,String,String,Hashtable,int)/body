{
  name=name.trim();
  validFilename(name);
  if ((name.length() > 0) && (password.length() >= C_PASSWORD_MINIMUMSIZE)) {
    CmsGroup defaultGroup=readGroup(currentUser,currentProject,group);
    CmsUser newUser=m_dbAccess.addUser(name,password,description," "," "," ",0,0,C_FLAG_ENABLED,additionalInfos,defaultGroup," "," ",C_USER_TYPE_WEBUSER);
    CmsUser user;
    CmsGroup usergroup;
    CmsGroup addGroup;
    user=m_dbAccess.readUser(newUser.getName(),C_USER_TYPE_WEBUSER);
    if (user != null) {
      usergroup=readGroup(currentUser,currentProject,group);
      if (usergroup != null && isWebgroup(usergroup)) {
        m_dbAccess.addUserToGroup(user.getId(),usergroup.getId());
        m_usergroupsCache.clear();
      }
 else {
        throw new CmsException("[" + this.getClass().getName() + "]"+ group,CmsException.C_NO_GROUP);
      }
      if (additionalGroup != null && !"".equals(additionalGroup)) {
        addGroup=readGroup(currentUser,currentProject,additionalGroup);
        if (addGroup != null && isWebgroup(addGroup)) {
          m_dbAccess.addUserToGroup(user.getId(),addGroup.getId());
          m_usergroupsCache.clear();
        }
 else {
          throw new CmsException("[" + this.getClass().getName() + "]"+ additionalGroup,CmsException.C_NO_GROUP);
        }
      }
    }
 else {
      throw new CmsException("[" + this.getClass().getName() + "]"+ name,CmsException.C_NO_USER);
    }
    return newUser;
  }
 else {
    throw new CmsException("[" + this.getClass().getName() + "] "+ name,CmsException.C_SHORT_PASSWORD);
  }
}
