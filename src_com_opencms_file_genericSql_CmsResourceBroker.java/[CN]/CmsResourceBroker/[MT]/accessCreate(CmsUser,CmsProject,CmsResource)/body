{
  if (currentProject.isOnlineProject()) {
    return (false);
  }
  if (!accessProject(currentUser,currentProject,currentProject.getId())) {
    return (false);
  }
  if (resource.getProjectId() != currentProject.getId()) {
    return false;
  }
  if (resource.isLocked() && (resource.isLockedBy() != currentUser.getId() || (resource.getLockedInProject() != currentProject.getId() && currentProject.getFlags() != C_PROJECT_STATE_INVISIBLE))) {
    return (false);
  }
  if (!(accessOther(resource,C_ACCESS_PUBLIC_WRITE) || accessOwner(currentUser,currentProject,resource,C_ACCESS_OWNER_WRITE) || accessGroup(currentUser,currentProject,resource,C_ACCESS_GROUP_WRITE))) {
    return false;
  }
  if (resource.getParent() != null) {
    resource=readCachedFolder(resource.getProjectId(),resource.getRootName() + resource.getParent());
  }
 else {
    return true;
  }
  do {
    if (accessOther(resource,C_ACCESS_PUBLIC_READ) || accessOwner(currentUser,currentProject,resource,C_ACCESS_OWNER_READ) || accessGroup(currentUser,currentProject,resource,C_ACCESS_GROUP_READ)) {
      if (resource.isLocked() && resource.isLockedBy() != currentUser.getId()) {
        return (false);
      }
      if (resource.getParent() != null) {
        resource=readCachedFolder(resource.getProjectId(),resource.getRootName() + resource.getParent());
      }
    }
 else {
      return (false);
    }
  }
 while (resource.getParent() != null);
  return (true);
}
