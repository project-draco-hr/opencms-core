{
  String filename;
  String foldername;
  validFilename(destination.replace('/','a'));
  foldername=destination.substring(0,destination.substring(0,destination.length() - 1).lastIndexOf("/") + 1);
  CmsFolder cmsFolder=readFolder(currentUser,currentProject,foldername);
  if (accessCreate(currentUser,currentProject,(CmsResource)cmsFolder)) {
    CmsFolder folder=readFolder(currentUser,currentProject,source);
    if ((accessOther(currentUser,currentProject,(CmsResource)folder,C_ACCESS_PUBLIC_WRITE) || accessOwner(currentUser,currentProject,(CmsResource)folder,C_ACCESS_OWNER_WRITE) || accessGroup(currentUser,currentProject,(CmsResource)folder,C_ACCESS_GROUP_WRITE))) {
      m_dbAccess.createFolder(currentUser,currentProject,onlineProject(currentUser,currentProject),folder,cmsFolder.getResourceId(),destination);
      lockResource(currentUser,currentProject,destination,true);
      writeProperties(currentUser,currentProject,destination,readAllProperties(currentUser,currentProject,folder.getAbsolutePath()));
      m_accessCache.clear();
      fileSystemChanged(true);
    }
 else {
      throw new CmsException("[" + this.getClass().getName() + "] "+ source,CmsException.C_ACCESS_DENIED);
    }
  }
 else {
    throw new CmsException("[" + this.getClass().getName() + "] "+ destination,CmsException.C_ACCESS_DENIED);
  }
}
