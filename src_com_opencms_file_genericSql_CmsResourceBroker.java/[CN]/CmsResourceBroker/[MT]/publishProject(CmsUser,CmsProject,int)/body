{
  m_dbAccess.publishProject(currentUser,id,onlineProject(currentUser,currentProject));
  m_subresCache.clear();
  fileSystemChanged();
  CmsProject project=readProject(currentUser,currentProject,id);
  project.setFlags(C_PROJECT_STATE_ARCHIVE);
  project.setPublishingDate(new Date().getTime());
  project.setPublishedBy(currentUser.getId());
  m_dbAccess.writeProject(project);
  m_projectCache.put(project.getId(),project);
}
