{
class Group {
    private int id;
    public Group(    int id){
      this.id=id;
    }
    public boolean equals(    Object obj){
      if (obj instanceof CmsGroup) {
        return (((CmsGroup)obj).getId() == id);
      }
 else       return false;
    }
  }
  int onlineProjectId=onlineProject(currentUser,currentProject).getId();
  Vector projects=new Vector();
  for (Enumeration e=m_dbAccess.getAllProjects(CmsConstants.C_PROJECT_STATE_UNLOCKED).elements(); e.hasMoreElements(); ) {
    CmsProject p=(CmsProject)e.nextElement();
    if ((p.getParentId() == onlineProjectId) || (p.getId() == onlineProjectId))     projects.addElement(p);
  }
  Vector res=null;
  if (isAdmin(currentUser,currentProject)) {
    res=projects;
  }
 else {
    res=new Vector(projects.size());
    Vector groups=getGroupsOfUser(currentUser,currentProject,currentUser.getName());
    for (Enumeration e=projects.elements(); e.hasMoreElements(); ) {
      CmsProject p=(CmsProject)e.nextElement();
      Group ug=new Group(p.getGroupId());
      Group mg=new Group(p.getManagerGroupId());
      if ((p.getOwnerId() == currentUser.getId()) || groups.contains(ug) || groups.contains(mg))       res.addElement(p);
    }
  }
  return res;
}
