{
  String folderName=newResourceName.substring(0,newResourceName.lastIndexOf(C_FOLDER_SEPERATOR,newResourceName.length() - 2) + 1);
  String resourceName=newResourceName.substring(folderName.length(),newResourceName.length() - 1);
  validFilename(resourceName);
  boolean isFolder=(resourceType == C_TYPE_FOLDER);
  if (isFolder) {
    if (!newResourceName.endsWith(C_FOLDER_SEPERATOR))     newResourceName+=C_FOLDER_SEPERATOR;
  }
  CmsFolder parentFolder=readFolder(currentUser,currentProject,folderName);
  if (accessCreate(currentUser,currentProject,(CmsResource)parentFolder)) {
    CmsUser owner=this.readUser(currentUser,currentProject,ownername);
    CmsGroup group=this.readGroup(currentUser,currentProject,groupname);
    if (filecontent == null) {
      filecontent=new byte[0];
    }
    CmsResource newResource=new CmsResource(C_UNKNOWN_ID,parentFolder.getResourceId(),C_UNKNOWN_ID,newResourceName,resourceType,0,owner.getId(),group.getId(),currentProject.getId(),accessFlags,C_STATE_NEW,currentUser.getId(),launcherType,launcherClassname,System.currentTimeMillis(),System.currentTimeMillis(),currentUser.getId(),filecontent.length,currentProject.getId());
    newResource=m_dbAccess.createResource(currentProject,onlineProject(currentUser,currentProject),newResource,filecontent,currentUser.getId(),isFolder);
    this.clearResourceCache(newResourceName);
    m_dbAccess.writeProperties(propertyinfos,currentProject.getId(),newResource,newResource.getType(),true);
    fileSystemChanged(true);
    return newResource;
  }
 else {
    throw new CmsException("[" + this.getClass().getName() + "] "+ newResourceName,CmsException.C_NO_ACCESS);
  }
}
