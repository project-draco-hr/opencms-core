{
  CmsUser user=cms.getRequestContext().getCurrentUser();
  String settingsString=(String)user.getAdditionalInfo(WORKPLACE_APP_SETTINGS_KEY);
  T result=type.newInstance();
  if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(settingsString)) {
    try {
      JSONObject settings=new JSONObject(settingsString);
      if (settings.has(type.getName())) {
        result.restoreSettings(settings.getString(type.getName()));
      }
    }
 catch (    JSONException e) {
      LOG.error("Failed to restore settings for type " + type.getName(),e);
    }
  }
  return result;
}
