{
  List<CmsContextMenuEntryBean> result=Collections.<CmsContextMenuEntryBean>emptyList();
  try {
    if (context != null) {
      cms.getRequestContext().setAttribute(I_CmsMenuItemRule.ATTR_CONTEXT_INFO,context.toString());
    }
    CmsResourceUtil[] resUtil=new CmsResourceUtil[1];
    resUtil[0]=new CmsResourceUtil(cms,cms.readResource(structureId,CmsResourceFilter.ONLY_VISIBLE));
    if (hasViewPermissions(cms,resUtil[0].getResource())) {
      CmsExplorerTypeSettings settings=OpenCms.getWorkplaceManager().getExplorerTypeSetting(resUtil[0].getResourceTypeName());
      if ((settings != null)) {
        CmsExplorerContextMenu contextMenu=settings.getContextMenu();
        List<CmsContextMenuEntryBean> allEntries=transformToMenuEntries(cms,contextMenu.getAllEntries(),resUtil);
        result=filterEntries(allEntries);
      }
    }
  }
 catch (  CmsException e) {
  }
  return result;
}
