{
  List<CmsContextMenuEntryBean> result=null;
  CmsObject cms=getCmsObject();
  if (context != null) {
    cms.getRequestContext().setAttribute(I_CmsMenuItemRule.ATTR_CONTEXT_INFO,context.toString());
  }
  try {
    CmsResourceUtil[] resUtil=new CmsResourceUtil[1];
    resUtil[0]=new CmsResourceUtil(cms,cms.readResource(structureId));
    CmsExplorerTypeSettings settings=null;
    CmsExplorerContextMenu contextMenu;
    try {
      settings=OpenCms.getWorkplaceManager().getExplorerTypeSetting(resUtil[0].getResourceTypeName());
    }
 catch (    Throwable e) {
      error(e);
    }
    if ((settings == null) || !isEditable(cms,resUtil[0].getResource())) {
      return Collections.<CmsContextMenuEntryBean>emptyList();
    }
    contextMenu=settings.getContextMenu();
    List<CmsContextMenuEntryBean> allEntries=transformToMenuEntries(contextMenu.getAllEntries(),resUtil);
    result=filterEntries(allEntries);
  }
 catch (  Throwable e) {
    error(e);
  }
  return result;
}
