{
  CmsResource sourceRes=getCms().readResource(getParamResource(),CmsResourceFilter.ALL);
  if (sourceRes.isFolder() && !DIALOG_WAIT.equals(getParamAction())) {
    return false;
  }
  String filename=getParamResource();
  long timeStamp;
  try {
    if (getParamNewtimestamp() == null) {
      timeStamp=sourceRes.getDateLastModified();
    }
 else {
      timeStamp=getCalendarDate(getParamNewtimestamp(),true);
    }
  }
 catch (  ParseException e) {
    throw new CmsException(Messages.get().container(Messages.ERR_PARSE_TIMESTAMP_1,getParamNewtimestamp()),e);
  }
  long releasedate=CmsResource.DATE_RELEASED_DEFAULT;
  try {
    if ((getParamReleasedate() != null) && (!getParamReleasedate().startsWith(RELEASE_EXPIRE_DEFAULT))) {
      releasedate=getCalendarDate(getParamReleasedate(),true);
    }
  }
 catch (  ParseException e) {
    throw new CmsException(Messages.get().container(Messages.ERR_PARSE_RELEASEDATE_1,getParamReleasedate()),e);
  }
  long expiredate=CmsResource.DATE_EXPIRED_DEFAULT;
  try {
    if ((getParamExpiredate() != null) && (!getParamExpiredate().startsWith(RELEASE_EXPIRE_DEFAULT))) {
      expiredate=getCalendarDate(getParamExpiredate(),true);
    }
  }
 catch (  ParseException e) {
    throw new CmsException(Messages.get().container(Messages.ERR_PARSE_EXPIREDATE_1,getParamExpiredate()),e);
  }
  boolean touchRecursive="true".equalsIgnoreCase(getParamRecursive());
  checkLock(getParamResource());
  getCms().touch(filename,timeStamp,releasedate,expiredate,touchRecursive);
  return true;
}
