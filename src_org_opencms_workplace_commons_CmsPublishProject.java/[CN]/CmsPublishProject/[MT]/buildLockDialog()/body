{
  CmsLockFilter nonBlockingFilter=CmsLockFilter.FILTER_ALL;
  nonBlockingFilter=nonBlockingFilter.filterLockableByUser(getCms().getRequestContext().currentUser());
  nonBlockingFilter=nonBlockingFilter.filterSharedExclusive();
  if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(getParamProjectid())) {
    nonBlockingFilter=nonBlockingFilter.filterProject(new CmsUUID(getParamProjectid()));
  }
  return buildLockDialog(nonBlockingFilter,getBlockingFilter(),0,true);
}
