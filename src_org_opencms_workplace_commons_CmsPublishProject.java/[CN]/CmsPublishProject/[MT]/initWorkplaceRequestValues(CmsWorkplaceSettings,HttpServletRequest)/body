{
  fillParamValues(request);
  setParamDialogtype(DIALOG_TYPE);
  if (CmsStringUtil.isNotEmpty(getParamResource())) {
    setParamDirectpublish(String.valueOf(true));
  }
  if (DIALOG_CONFIRMED.equals(getParamAction())) {
    if (showUnlockConfirmation()) {
      setAction(ACTION_UNLOCK_CONFIRMATION);
    }
 else {
      setAction(ACTION_CONFIRMED);
    }
  }
 else   if (DIALOG_UNLOCK_CONFIRMED.equals(getParamAction())) {
    setAction(ACTION_CONFIRMED);
  }
 else   if (REPORT_UPDATE.equals(getParamAction())) {
    setAction(ACTION_REPORT_UPDATE);
  }
 else   if (REPORT_BEGIN.equals(getParamAction())) {
    setAction(ACTION_REPORT_BEGIN);
  }
 else   if (REPORT_END.equals(getParamAction())) {
    if (Boolean.valueOf(getParamThreadHasNext()).booleanValue()) {
      startPublishThread();
      setParamAction(REPORT_UPDATE);
      setAction(ACTION_REPORT_UPDATE);
    }
 else {
      setAction(ACTION_REPORT_END);
    }
  }
 else   if (DIALOG_CANCEL.equals(getParamAction())) {
    setAction(ACTION_CANCEL);
  }
 else {
    setAction(ACTION_DEFAULT);
    if (Boolean.valueOf(getParamDirectpublish()).booleanValue()) {
      if (!getCms().isManagerOfProject() && !checkResourcePermissions(CmsPermissionSet.ACCESS_DIRECT_PUBLISH,false)) {
        setAction(ACTION_CANCEL);
        return;
      }
      computePublishResource();
      setParamTitle(key(Messages.GUI_PUBLISH_RESOURCE_1,new Object[]{getParamResourcename()}));
    }
 else {
      setParamTitle(key(Messages.GUI_PUBLISH_PROJECT_0));
      computePublishProject();
    }
  }
}
