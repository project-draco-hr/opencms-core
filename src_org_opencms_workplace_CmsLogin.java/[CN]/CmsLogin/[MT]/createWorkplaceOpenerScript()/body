{
  StringBuffer html=new StringBuffer();
  html.append("<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\">\n");
  html.append("<html><head>\n");
  html.append("<title>");
  html.append("Login to OpenCms " + OpenCms.getSystemInfo().getVersionNumber());
  html.append("</title>\n");
  html.append("<meta HTTP-EQUIV=\"Content-Type\" CONTENT=\"text/html; charset=");
  html.append(getRequestContext().getEncoding());
  html.append("\">\n");
  html.append("<script language=\"javascript\" type=\"text/javascript\">\n");
  String winId="OpenCms" + System.currentTimeMillis();
  html.append("function doLogin() {\n");
  html.append("\tvar openUri = \"");
  html.append(link(m_requestedResource));
  html.append("\";\n");
  html.append("\tvar workplaceWin = openWorkplace(openUri, \"");
  html.append(winId);
  html.append("\");\n");
  html.append("\tif (window.name != \"");
  html.append(winId);
  html.append("\") {\n");
  html.append("\t\twindow.opener = workplaceWin;\n");
  html.append("\t\twindow.close();\n");
  html.append("\t}\n");
  html.append("}\n");
  html.append("function openWorkplace(url, name) {\n");
  html.append("\tif (window.innerHeight) {\n");
  html.append("\t\tvar winHeight = window.innerHeight;\n");
  html.append("\t\tvar winWidth = window.innerWidth;\n");
  html.append("\t} else if (document.documentElement && document.documentElement.clientHeight) {\n");
  html.append("\t\tvar winHeight = document.documentElement.clientHeight;\n");
  html.append("\t\tvar winWidth = document.documentElement.clientWidth;\n");
  html.append("\t} else if (document.body && document.body.clientHeight) {\n");
  html.append("\t\tvar winHeight = document.body.clientWidth;\n");
  html.append("\t\tvar winWidth = document.body.clientHeight;\n");
  html.append("\t}\n");
  html.append("\tif (window.screenY) {\n");
  html.append("\t\tvar winTop = window.screenY;\n");
  html.append("\t\tvar winLeft = window.screenX;\n");
  html.append("\t} else if (window.screenTop) {\n");
  html.append("\t\tvar winTop = window.screenTop;\n");
  html.append("\t\tvar winLeft = window.screenLeft;\n");
  html.append("\t}\n");
  html.append("\n");
  html.append("\tvar openerStr = \"width=\" + winWidth + \",height=\" + winHeight + \",left=\" + winLeft + \",top=\" + winTop + \",location=no,toolbar=no,menubar=no,directories=no,status=yes,resizable=yes\";\n");
  html.append("\tvar OpenCmsWin = window.open(url, name, openerStr);\n");
  html.append("\n");
  html.append("\tif (! OpenCmsWin.opener) {\n");
  html.append("\t\tOpenCmsWin.opener = self;\n");
  html.append("\t}\n");
  html.append("\tif (OpenCmsWin.focus) {\n");
  html.append("\t\tOpenCmsWin.focus();\n");
  html.append("\t}\n");
  html.append("\t\n");
  html.append("\treturn OpenCmsWin;\n");
  html.append("}\n");
  html.append("</script>\n");
  html.append("</head>\n");
  html.append("<body onload=\"doLogin();\">");
  html.append("<h3>");
  html.append("OpenCms Login page: Please close this window!");
  html.append("</h3>");
  html.append("</body>");
  html.append("</html>\n");
  return html.toString();
}
