{
  StringBuffer html=new StringBuffer();
  html.append("<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\">\n");
  html.append("<html><head>\n");
  html.append("<title>");
  html.append("Login to OpenCms " + OpenCms.getSystemInfo().getVersionNumber());
  html.append("</title>\n");
  String encoding=getRequestContext().getEncoding();
  html.append("<meta HTTP-EQUIV=\"Content-Type\" CONTENT=\"text/html; charset=");
  html.append(encoding);
  html.append("\">\n");
  html.append("<link rel=\"stylesheet\" type=\"text/css\" href=\"/opencms/export/system/workplace/commons/style/workplace.css\">\n");
  html.append("<script language=\"javascript\" type=\"text/javascript\">\n");
  if (m_message != null) {
    html.append("function showAlert() {\n");
    html.append("\talert(\"");
    html.append(m_message);
    html.append("\");\n");
    html.append("}\n");
  }
  html.append("function setFocus() {\n");
  html.append("\tdocument.");
  html.append(PARAM_FORM);
  html.append(".");
  html.append(PARAM_USERNAME);
  html.append(".select();\n");
  html.append("\tdocument.");
  html.append(PARAM_FORM);
  html.append(".");
  html.append(PARAM_USERNAME);
  html.append(".focus();\n");
  if (m_message != null) {
    html.append("showAlert();\n");
  }
  html.append("}\n");
  html.append("</script>\n");
  html.append("</head>\n");
  html.append("<body class=\"dialog\" onload=\"setFocus();\">");
  html.append("<table class=\"dialog\" cellpadding=\"0\" cellspacing=\"0\"><tr><td>\n");
  html.append("<table class=\"dialogbox\" cellpadding=\"0\" cellspacing=\"0\"><tr><td>\n");
  html.append("<div class=\"dialoghead\">");
  html.append("Login to OpenCms");
  html.append("</div><div class=\"dialogcontent\">");
  html.append("<table border=\"0\">\n");
  html.append("<form action=\"");
  html.append(getFormLink());
  html.append("\"");
  appendId(html,PARAM_FORM);
  html.append("method=\"POST\">\n");
  html.append("<tr>");
  html.append("<td style=\"white-space: nowrap;\">");
  html.append("Username");
  html.append(":</td>");
  html.append("<td style=\"width: 300px; white-space: nowrap;\">");
  html.append("<input class=\"maxwidth\" type=\"text\"");
  appendId(html,PARAM_USERNAME);
  html.append("value=\"");
  html.append(CmsStringUtil.isEmptyOrWhitespaceOnly(m_username) ? "" : m_username.trim());
  html.append("\">");
  html.append("</td>");
  html.append("</tr>\n");
  html.append("<tr>");
  html.append("<td style=\"white-space: nowrap;\">");
  html.append("Password");
  html.append(":</td>");
  html.append("<td style=\"width: 300px; white-space: nowrap;\">");
  html.append("<input class=\"maxwidth\" type=\"password\"");
  appendId(html,PARAM_PASSWORD);
  html.append(">");
  html.append("</td>");
  html.append("</tr>\n");
  html.append("<tr>");
  html.append("<td></td><td style=\"white-space: nowrap;\">\n");
  html.append("<input type=\"hidden\"");
  appendId(html,PARAM_ACTION_LOGIN);
  html.append("value=\"true\">\n");
  if (m_requestedResource != null) {
    html.append("<input type=\"hidden\"");
    appendId(html,CmsWorkplaceManager.PARAM_LOGIN_REQUESTED_RESOURCE);
    html.append("value=\"");
    html.append(CmsEncoder.encode(m_requestedResource));
    html.append("\">\n");
  }
  html.append("<input type=\"submit\" value=\"");
  html.append("Login");
  html.append("\">\n");
  html.append("</td>");
  html.append("</tr>\n");
  html.append("</form>\n");
  html.append("</table>\n");
  html.append("</div></td></tr></table>\n");
  html.append("</td></tr></table>\n");
  html.append("<div style=\"text-align: center; white-space: nowrap;\">");
  html.append("&copy; 2005 Alkacon Software GmbH. All rights reserved.");
  html.append("</div>\n");
  html.append("<div style=\"text-align: center; white-space: nowrap;\">");
  html.append("<a href=\"http://www.opencms.org\" target=\"_blank\">OpenCms</a> is free software available under the GNU LGPL license.");
  html.append("</div>\n");
  html.append("</body></html>");
  return html.toString();
}
