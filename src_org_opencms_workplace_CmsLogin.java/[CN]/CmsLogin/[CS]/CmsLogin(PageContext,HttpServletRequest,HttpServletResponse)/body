{
  super(context,req,res);
  res.setDateHeader(CmsRequestUtil.HEADER_LAST_MODIFIED,System.currentTimeMillis());
  CmsRequestUtil.setNoCacheHeaders(res);
  CmsAcceptLanguageHeaderParser parser=new CmsAcceptLanguageHeaderParser(req,OpenCms.getWorkplaceManager().getDefaultLocale());
  List<Locale> acceptedLocales=parser.getAcceptedLocales();
  List<Locale> workplaceLocales=OpenCms.getWorkplaceManager().getLocales();
  m_locale=OpenCms.getLocaleManager().getFirstMatchingLocale(acceptedLocales,workplaceLocales);
  if (m_locale == null) {
    m_locale=OpenCms.getWorkplaceManager().getDefaultLocale();
  }
}
