{
  super(context,req,res);
  res.setDateHeader(I_CmsConstants.C_HEADER_LAST_MODIFIED,System.currentTimeMillis());
  res.setHeader(I_CmsConstants.C_HEADER_CACHE_CONTROL,I_CmsConstants.C_HEADER_VALUE_MAX_AGE + "0");
  res.addHeader(I_CmsConstants.C_HEADER_CACHE_CONTROL,I_CmsConstants.C_HEADER_VALUE_MUST_REVALIDATE);
  CmsAcceptLanguageHeaderParser parser=new CmsAcceptLanguageHeaderParser(req,OpenCms.getWorkplaceManager().getDefaultLocale());
  List acceptedLocales=parser.getAcceptedLocales();
  List workplaceLocales=OpenCms.getWorkplaceManager().getLocales();
  m_locale=OpenCms.getLocaleManager().getFirstMatchingLocale(acceptedLocales,workplaceLocales);
  if (m_locale == null) {
    m_locale=OpenCms.getWorkplaceManager().getDefaultLocale();
  }
}
