{
  m_cms=getCmsObject(req);
  m_params=CmsRequestUtil.createParameterMap(req.getParameterMap());
  m_index=CmsSearchManager.getIndexSolr(m_cms,m_params);
  if (m_index != null) {
    m_query=new CmsSolrQuery(m_cms,m_params);
  }
 else {
    res.setStatus(HttpServletResponse.SC_EXPECTATION_FAILED);
    String indexName=m_params.get(PARAM_CORE) != null ? m_params.get(PARAM_CORE)[0] : (m_params.get(PARAM_INDEX) != null ? m_params.get(PARAM_INDEX)[0] : null);
    String message=Messages.get().getBundle().key(Messages.GUI_SOLR_INDEX_NOT_FOUND_1,indexName);
    res.getWriter().println(Messages.get().getBundle().key(Messages.GUI_SOLR_ERROR_HTML_1,message));
  }
}
