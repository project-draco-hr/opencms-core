{
  CmsJspNavElement navElem=CmsJspNavBuilder.getNavigationForResource(cms,resourcePath);
  String name=navElem.getNavText();
  if (CmsMessages.isUnknownKey(name)) {
    name=navElem.getTitle();
  }
  if (CmsStringUtil.isEmptyOrWhitespaceOnly(name)) {
    name="${key." + Messages.GUI_TOOLS_DEFAULT_NAME_0 + "}";
  }
  String shortName=name;
  if (name.indexOf(C_VALUE_SEPARATOR) >= 0) {
    shortName=name.substring(name.indexOf(C_VALUE_SEPARATOR) + 1);
    name=name.substring(0,name.indexOf(C_VALUE_SEPARATOR));
  }
  setName(name);
  setShortName(shortName);
  String iconPath=navElem.getNavImage();
  if (CmsStringUtil.isEmptyOrWhitespaceOnly(iconPath)) {
    iconPath="admin/images/default_tool_big.png:admin/images/default_tool_small.png";
  }
  String smallIconPath=iconPath;
  if (iconPath.indexOf(C_VALUE_SEPARATOR) >= 0) {
    smallIconPath=iconPath.substring(iconPath.indexOf(C_VALUE_SEPARATOR) + 1);
    iconPath=iconPath.substring(0,iconPath.indexOf(C_VALUE_SEPARATOR));
  }
  setIconPath(iconPath);
  setSmallIconPath(smallIconPath);
  String helpText=navElem.getDescription();
  if (CmsStringUtil.isEmptyOrWhitespaceOnly(helpText)) {
    helpText="${key." + Messages.GUI_TOOLS_DEFAULT_HELP_0 + "}";
  }
  String disabledHelpText=C_DEFAULT_DISABLED_HELPTEXT;
  if (helpText.indexOf(C_VALUE_SEPARATOR) >= 0) {
    disabledHelpText=helpText.substring(helpText.indexOf(C_VALUE_SEPARATOR) + 1);
    helpText=helpText.substring(0,helpText.indexOf(C_VALUE_SEPARATOR));
  }
  setHelpText(helpText);
  setDisabledHelpText(disabledHelpText);
  String group=navElem.getInfo();
  if (CmsStringUtil.isEmptyOrWhitespaceOnly(group)) {
    group="${key." + Messages.GUI_TOOLS_DEFAULT_GROUP_0 + "}";
  }
  String link=resourcePath;
  String path=resourcePath;
  boolean isFolder=false;
  try {
    cms.readFolder(resourcePath);
    isFolder=true;
    if (path.endsWith(CmsToolManager.C_TOOLPATH_SEPARATOR)) {
      path=path.substring(0,path.lastIndexOf(CmsToolManager.C_TOOLPATH_SEPARATOR));
    }
    link=CmsToolManager.C_VIEW_JSPPAGE_LOCATION;
    CmsProperty prop=cms.readPropertyObject(path,CmsPropertyDefinition.PROPERTY_DEFAULT_FILE,true);
    String defFile="index.html";
    if (!prop.isNullProperty()) {
      defFile=prop.getValue();
    }
    if (!defFile.startsWith(CmsToolManager.C_TOOLPATH_SEPARATOR)) {
      defFile=path + CmsToolManager.C_TOOLPATH_SEPARATOR + defFile;
    }
    cms.readResource(defFile);
    link=defFile;
  }
 catch (  CmsException e) {
  }
  setLink(link);
  if (isFolder) {
    path=resourcePath.substring(CmsToolManager.C_ADMINTOOLS_ROOT_LOCATION.length(),resourcePath.lastIndexOf(CmsToolManager.C_TOOLPATH_SEPARATOR));
  }
 else {
    path=resourcePath.substring(CmsToolManager.C_ADMINTOOLS_ROOT_LOCATION.length(),resourcePath.lastIndexOf('.'));
  }
  try {
    CmsProperty prop=cms.readPropertyObject(resourcePath,C_ARGS_PROPERTY_DEFINITION,false);
    if (CmsStringUtil.isNotEmptyOrWhitespaceOnly(prop.getValue())) {
      Map argsMap=new HashMap();
      Iterator itArgs=CmsStringUtil.splitAsList(prop.getValue(),C_ARGUMENT_SEPARATOR).iterator();
      while (itArgs.hasNext()) {
        String arg=(String)itArgs.next();
        int pos=arg.indexOf(C_VALUE_SEPARATOR);
        argsMap.put(arg.substring(0,pos),arg.substring(pos + 1));
      }
      if (argsMap.get(C_ARG_PATH_NAME) != null) {
        path=(String)argsMap.get(C_ARG_PATH_NAME);
      }
      if (argsMap.get(C_ARG_PARAM_NAME) != null) {
        setParameters((String)argsMap.get(C_ARG_PARAM_NAME));
      }
    }
  }
 catch (  CmsException e) {
  }
  setPath(path);
  setGroup(group);
  setPosition(navElem.getNavPosition());
  return true;
}
