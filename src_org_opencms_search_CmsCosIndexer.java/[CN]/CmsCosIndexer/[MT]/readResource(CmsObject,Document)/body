{
  try {
    String channel=doc.getField(I_CmsDocumentFactory.DOC_CHANNEL).stringValue();
    String path=doc.getField(I_CmsDocumentFactory.DOC_PATH).stringValue();
    String cdClass=doc.getField(I_CmsDocumentFactory.DOC_CONTENT_DEFINITION).stringValue();
    String contentId=doc.getField(I_CmsDocumentFactory.DOC_CONTENT_ID).stringValue();
    Class clazz=Class.forName(cdClass);
    CmsMasterContent contentDefinition=(CmsMasterContent)clazz.getDeclaredConstructor(new Class[]{org.opencms.file.CmsObject.class}).newInstance(new Object[]{cms});
    CmsMasterDataSet ds=new CmsMasterDataSet();
    CmsMasterContent.getDbAccessObject(contentDefinition.getSubId()).read(cms,contentDefinition,ds,new CmsUUID(contentId));
    if (ds != null) {
      return new CmsIndexResource(ds,path,channel,cdClass);
    }
    return null;
  }
 catch (  Exception exc) {
    throw new CmsException("Instanciation of index resource failed",exc);
  }
}
