{
  echo("Testing creation of special index for galleries");
  String indexName="ADE Galleries";
  CmsGallerySearchIndex searchIndex=new CmsGallerySearchIndex(indexName);
  searchIndex.setProjectName("Offline");
  searchIndex.setLocale(Locale.ENGLISH);
  searchIndex.setRebuildMode(CmsSearchIndex.REBUILD_MODE_OFFLINE);
  searchIndex.addSourceName("ADE_gallery_source");
  searchIndex.addConfigurationParameter(CmsSearchIndex.BACKUP_REINDEXING,"true");
  searchIndex.initialize();
  OpenCms.getSearchManager().addSearchIndex(searchIndex);
  I_CmsReport report=new CmsShellReport(Locale.ENGLISH);
  OpenCms.getSearchManager().rebuildIndex(indexName,report);
  CmsGallerySearch searchBean=new CmsGallerySearch();
  CmsGallerySearchParameters searchParams=new CmsGallerySearchParameters();
  CmsGallerySearchResultList searchResult;
  searchBean.init(getCmsObject());
  searchBean.setIndex(indexName);
  searchParams.setSearchWords(">>SearchEgg1<<");
  searchResult=searchBean.getResult(searchParams);
  printResults(searchResult,getCmsObject());
  assertEquals(1,searchResult.size());
  assertEquals("/sites/default/xmlcontent/article_0001.html",(searchResult.get(0)).getPath());
  OpenCms.getSearchManager().removeSearchIndex(searchIndex);
}
