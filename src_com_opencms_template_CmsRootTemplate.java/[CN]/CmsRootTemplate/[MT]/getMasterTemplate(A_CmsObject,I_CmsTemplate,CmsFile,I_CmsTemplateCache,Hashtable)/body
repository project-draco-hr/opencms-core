{
  byte[] result;
  Object cacheKey=templateClass.getKey(cms,masterTemplate.getAbsolutePath(),parameters);
  if (templateClass.isCacheable(cms,masterTemplate.getAbsolutePath(),parameters) && cache.has(cacheKey) && !templateClass.shouldReload(cms,masterTemplate.getAbsolutePath(),parameters)) {
    result=cache.get(cacheKey);
    if (A_OpenCms.isLogging()) {
      A_OpenCms.log(C_OPENCMS_INFO,"[CmsRootTemplate] page " + masterTemplate.getAbsolutePath() + " was read from cache.");
    }
  }
 else {
    try {
      result=templateClass.getContent(cms,masterTemplate.getAbsolutePath(),null,parameters);
    }
 catch (    CmsException e) {
      cache.clearCache(cacheKey);
      if (A_OpenCms.isLogging()) {
        A_OpenCms.log(C_OPENCMS_INFO,"[CmsRootTemplate] Could not get contents of master template " + masterTemplate.getName());
      }
      throw e;
    }
    if (templateClass.isCacheable(cms,masterTemplate.getAbsolutePath(),parameters)) {
      cache.put(cacheKey,result);
    }
  }
  return result;
}
