{
  super.onModuleLoad();
  if (!getDialogMode().equals("button")) {
    RootPanel.getBodyElement().getStyle().setHeight(Window.getClientHeight(),Unit.PX);
    A_CmsUploadDialog dialog=GWT.create(CmsUploadDialogImpl.class);
    dialog.addCloseHandler(new CloseHandler<PopupPanel>(){
      /** 
 * The on close action.<p>
 * @param event the event
 */
      @Override public void onClose(      CloseEvent<PopupPanel> event){
        String closeLink=getCloseLink() + "?resource=";
        Window.Location.assign(CmsCoreProvider.get().link(closeLink));
      }
    }
);
    dialog.setTargetFolder(getTargetFolder());
    dialog.loadAndShow();
  }
 else {
    exportOpenUploadDialog();
  }
}
